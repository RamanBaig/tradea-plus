var NA=Object.defineProperty;var DA=(t,e,r)=>e in t?NA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var OA=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Oa=(t,e,r)=>DA(t,typeof e!="symbol"?e+"":e,r);var GZ=OA(ks=>{function gM(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wM(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var _M={exports:{}},fp={},bM={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=Symbol.for("react.element"),BA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),VA=Symbol.for("react.strict_mode"),jA=Symbol.for("react.profiler"),FA=Symbol.for("react.provider"),UA=Symbol.for("react.context"),zA=Symbol.for("react.forward_ref"),$A=Symbol.for("react.suspense"),qA=Symbol.for("react.memo"),KA=Symbol.for("react.lazy"),ab=Symbol.iterator;function HA(t){return t===null||typeof t!="object"?null:(t=ab&&t[ab]||t["@@iterator"],typeof t=="function"?t:null)}var xM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MM=Object.assign,EM={};function pu(t,e,r){this.props=t,this.context=e,this.refs=EM,this.updater=r||xM}pu.prototype.isReactComponent={};pu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SM(){}SM.prototype=pu.prototype;function Qy(t,e,r){this.props=t,this.context=e,this.refs=EM,this.updater=r||xM}var Yy=Qy.prototype=new SM;Yy.constructor=Qy;MM(Yy,pu.prototype);Yy.isPureReactComponent=!0;var ob=Array.isArray,IM=Object.prototype.hasOwnProperty,Jy={current:null},TM={key:!0,ref:!0,__self:!0,__source:!0};function AM(t,e,r){var n,s={},i=null,u=null;if(e!=null)for(n in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(i=""+e.key),e)IM.call(e,n)&&!TM.hasOwnProperty(n)&&(s[n]=e[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var v=Array(c),_=0;_<c;_++)v[_]=arguments[_+2];s.children=v}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:$h,type:t,key:i,ref:u,props:s,_owner:Jy.current}}function WA(t,e){return{$$typeof:$h,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xy(t){return typeof t=="object"&&t!==null&&t.$$typeof===$h}function GA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lb=/\/+/g;function Hm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GA(""+t.key):e.toString(36)}function Ed(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case $h:case BA:u=!0}}if(u)return u=t,s=s(u),t=n===""?"."+Hm(u,0):n,ob(s)?(r="",t!=null&&(r=t.replace(lb,"$&/")+"/"),Ed(s,e,r,"",function(_){return _})):s!=null&&(Xy(s)&&(s=WA(s,r+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(lb,"$&/")+"/")+t)),e.push(s)),1;if(u=0,n=n===""?".":n+":",ob(t))for(var c=0;c<t.length;c++){i=t[c];var v=n+Hm(i,c);u+=Ed(i,e,r,v,s)}else if(v=HA(t),typeof v=="function")for(t=v.call(t),c=0;!(i=t.next()).done;)i=i.value,v=n+Hm(i,c++),u+=Ed(i,e,r,v,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function Lc(t,e,r){if(t==null)return t;var n=[],s=0;return Ed(t,n,"","",function(i){return e.call(r,i,s++)}),n}function ZA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},Sd={transition:null},QA={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Sd,ReactCurrentOwner:Jy};function RM(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:Lc,forEach:function(t,e,r){Lc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Lc(t,function(){e++}),e},toArray:function(t){return Lc(t,function(e){return e})||[]},only:function(t){if(!Xy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=pu;Ot.Fragment=LA;Ot.Profiler=jA;Ot.PureComponent=Qy;Ot.StrictMode=VA;Ot.Suspense=$A;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QA;Ot.act=RM;Ot.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=MM({},t.props),s=t.key,i=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,u=Jy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(v in e)IM.call(e,v)&&!TM.hasOwnProperty(v)&&(n[v]=e[v]===void 0&&c!==void 0?c[v]:e[v])}var v=arguments.length-2;if(v===1)n.children=r;else if(1<v){c=Array(v);for(var _=0;_<v;_++)c[_]=arguments[_+2];n.children=c}return{$$typeof:$h,type:t.type,key:s,ref:i,props:n,_owner:u}};Ot.createContext=function(t){return t={$$typeof:UA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FA,_context:t},t.Consumer=t};Ot.createElement=AM;Ot.createFactory=function(t){var e=AM.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:zA,render:t}};Ot.isValidElement=Xy;Ot.lazy=function(t){return{$$typeof:KA,_payload:{_status:-1,_result:t},_init:ZA}};Ot.memo=function(t,e){return{$$typeof:qA,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=Sd.transition;Sd.transition={};try{t()}finally{Sd.transition=e}};Ot.unstable_act=RM;Ot.useCallback=function(t,e){return vn.current.useCallback(t,e)};Ot.useContext=function(t){return vn.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return vn.current.useEffect(t,e)};Ot.useId=function(){return vn.current.useId()};Ot.useImperativeHandle=function(t,e,r){return vn.current.useImperativeHandle(t,e,r)};Ot.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return vn.current.useMemo(t,e)};Ot.useReducer=function(t,e,r){return vn.current.useReducer(t,e,r)};Ot.useRef=function(t){return vn.current.useRef(t)};Ot.useState=function(t){return vn.current.useState(t)};Ot.useSyncExternalStore=function(t,e,r){return vn.current.useSyncExternalStore(t,e,r)};Ot.useTransition=function(){return vn.current.useTransition()};Ot.version="18.3.1";bM.exports=Ot;var te=bM.exports;const Ve=yM(te),YA=gM({__proto__:null,default:Ve},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA=te,XA=Symbol.for("react.element"),eR=Symbol.for("react.fragment"),tR=Object.prototype.hasOwnProperty,rR=JA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nR={key:!0,ref:!0,__self:!0,__source:!0};function kM(t,e,r){var n,s={},i=null,u=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(u=e.ref);for(n in e)tR.call(e,n)&&!nR.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:XA,type:t,key:i,ref:u,props:s,_owner:rR.current}}fp.Fragment=eR;fp.jsx=kM;fp.jsxs=kM;_M.exports=fp;var N=_M.exports,Vg={},PM={exports:{}},zn={},CM={exports:{}},NM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(w,d){var o=w.length;w.push(d);e:for(;0<o;){var p=o-1>>>1,E=w[p];if(0<s(E,d))w[p]=d,w[o]=E,o=p;else break e}}function r(w){return w.length===0?null:w[0]}function n(w){if(w.length===0)return null;var d=w[0],o=w.pop();if(o!==d){w[0]=o;e:for(var p=0,E=w.length,T=E>>>1;p<T;){var z=2*(p+1)-1,K=w[z],Y=z+1,L=w[Y];if(0>s(K,o))Y<E&&0>s(L,K)?(w[p]=L,w[Y]=o,p=Y):(w[p]=K,w[z]=o,p=z);else if(Y<E&&0>s(L,o))w[p]=L,w[Y]=o,p=Y;else break e}}return d}function s(w,d){var o=w.sortIndex-d.sortIndex;return o!==0?o:w.id-d.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var v=[],_=[],b=1,x=null,S=3,I=!1,A=!1,k=!1,F=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(w){for(var d=r(_);d!==null;){if(d.callback===null)n(_);else if(d.startTime<=w)n(_),d.sortIndex=d.expirationTime,e(v,d);else break;d=r(_)}}function U(w){if(k=!1,V(w),!A)if(r(v)!==null)A=!0,m(Q);else{var d=r(_);d!==null&&y(U,d.startTime-w)}}function Q(w,d){A=!1,k&&(k=!1,C(B),B=-1),I=!0;var o=S;try{for(V(d),x=r(v);x!==null&&(!(x.expirationTime>d)||w&&!g());){var p=x.callback;if(typeof p=="function"){x.callback=null,S=x.priorityLevel;var E=p(x.expirationTime<=d);d=t.unstable_now(),typeof E=="function"?x.callback=E:x===r(v)&&n(v),V(d)}else n(v);x=r(v)}if(x!==null)var T=!0;else{var z=r(_);z!==null&&y(U,z.startTime-d),T=!1}return T}finally{x=null,S=o,I=!1}}var ee=!1,j=null,B=-1,D=5,$=-1;function g(){return!(t.unstable_now()-$<D)}function a(){if(j!==null){var w=t.unstable_now();$=w;var d=!0;try{d=j(!0,w)}finally{d?l():(ee=!1,j=null)}}else ee=!1}var l;if(typeof R=="function")l=function(){R(a)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,h=f.port2;f.port1.onmessage=a,l=function(){h.postMessage(null)}}else l=function(){F(a,0)};function m(w){j=w,ee||(ee=!0,l())}function y(w,d){B=F(function(){w(t.unstable_now())},d)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_continueExecution=function(){A||I||(A=!0,m(Q))},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return r(v)},t.unstable_next=function(w){switch(S){case 1:case 2:case 3:var d=3;break;default:d=S}var o=S;S=d;try{return w()}finally{S=o}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(w,d){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var o=S;S=w;try{return d()}finally{S=o}},t.unstable_scheduleCallback=function(w,d,o){var p=t.unstable_now();switch(typeof o=="object"&&o!==null?(o=o.delay,o=typeof o=="number"&&0<o?p+o:p):o=p,w){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=o+E,w={id:b++,callback:d,priorityLevel:w,startTime:o,expirationTime:E,sortIndex:-1},o>p?(w.sortIndex=o,e(_,w),r(v)===null&&w===r(_)&&(k?(C(B),B=-1):k=!0,y(U,o-p))):(w.sortIndex=E,e(v,w),A||I||(A=!0,m(Q))),w},t.unstable_shouldYield=g,t.unstable_wrapCallback=function(w){var d=S;return function(){var o=S;S=d;try{return w.apply(this,arguments)}finally{S=o}}}})(NM);CM.exports=NM;var iR=CM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR=te,jn=iR;function ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DM=new Set,rh={};function Co(t,e){Cl(t,e),Cl(t+"Capture",e)}function Cl(t,e){for(rh[t]=e,t=0;t<e.length;t++)DM.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jg=Object.prototype.hasOwnProperty,aR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ub={},fb={};function oR(t){return jg.call(fb,t)?!0:jg.call(ub,t)?!1:aR.test(t)?fb[t]=!0:(ub[t]=!0,!1)}function lR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uR(t,e,r,n){if(e===null||typeof e>"u"||lR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,r,n,s,i,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=u}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var e2=/[\-:]([a-z])/g;function t2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(e2,t2);Hr[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(e2,t2);Hr[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(e2,t2);Hr[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function r2(t,e,r,n){var s=Hr.hasOwnProperty(e)?Hr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uR(e,r,s,n)&&(r=null),n||s===null?oR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ss=sR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vc=Symbol.for("react.element"),ul=Symbol.for("react.portal"),fl=Symbol.for("react.fragment"),n2=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),OM=Symbol.for("react.provider"),BM=Symbol.for("react.context"),i2=Symbol.for("react.forward_ref"),Ug=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),s2=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),LM=Symbol.for("react.offscreen"),hb=Symbol.iterator;function $u(t){return t===null||typeof t!="object"?null:(t=hb&&t[hb]||t["@@iterator"],typeof t=="function"?t:null)}var pr=Object.assign,Wm;function _f(t){if(Wm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wm=e&&e[1]||""}return`
`+Wm+t}var Gm=!1;function Zm(t,e){if(!t||Gm)return"";Gm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var n=_}Reflect.construct(t,[],e)}else{try{e.call()}catch(_){n=_}t.call(e.prototype)}else{try{throw Error()}catch(_){n=_}t()}}catch(_){if(_&&n&&typeof _.stack=="string"){for(var s=_.stack.split(`
`),i=n.stack.split(`
`),u=s.length-1,c=i.length-1;1<=u&&0<=c&&s[u]!==i[c];)c--;for(;1<=u&&0<=c;u--,c--)if(s[u]!==i[c]){if(u!==1||c!==1)do if(u--,c--,0>c||s[u]!==i[c]){var v=`
`+s[u].replace(" at new "," at ");return t.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",t.displayName)),v}while(1<=u&&0<=c);break}}}finally{Gm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?_f(t):""}function fR(t){switch(t.tag){case 5:return _f(t.type);case 16:return _f("Lazy");case 13:return _f("Suspense");case 19:return _f("SuspenseList");case 0:case 2:case 15:return t=Zm(t.type,!1),t;case 11:return t=Zm(t.type.render,!1),t;case 1:return t=Zm(t.type,!0),t;default:return""}}function $g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fl:return"Fragment";case ul:return"Portal";case Fg:return"Profiler";case n2:return"StrictMode";case Ug:return"Suspense";case zg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BM:return(t.displayName||"Context")+".Consumer";case OM:return(t._context.displayName||"Context")+".Provider";case i2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case s2:return e=t.displayName||null,e!==null?e:$g(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return $g(t(e))}catch{}}return null}function hR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $g(e);case 8:return e===n2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ma(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cR(t){var e=VM(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){n=""+u,i.call(this,u)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=cR(t))}function jM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=VM(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function e0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qg(t,e){var r=e.checked;return pr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ma(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FM(t,e){e=e.checked,e!=null&&r2(t,"checked",e,!1)}function Kg(t,e){FM(t,e);var r=ma(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,r):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,ma(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function db(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Hg(t,e,r){(e!=="number"||e0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var bf=Array.isArray;function xl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ma(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ze(91));return pr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ze(92));if(bf(r)){if(1<r.length)throw Error(ze(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ma(r)}}function UM(t,e){var r=ma(e.value),n=ma(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function mb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fc,$M=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fc=Fc||document.createElement("div"),Fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nh(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dR=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(t){dR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nf[e]=Nf[t]})});function qM(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Nf.hasOwnProperty(t)&&Nf[t]?(""+e).trim():e+"px"}function KM(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=qM(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var pR=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zg(t,e){if(e){if(pR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ze(62))}}function Qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function a2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jg=null,Ml=null,El=null;function vb(t){if(t=Hh(t)){if(typeof Jg!="function")throw Error(ze(280));var e=t.stateNode;e&&(e=mp(e),Jg(t.stateNode,t.type,e))}}function HM(t){Ml?El?El.push(t):El=[t]:Ml=t}function WM(){if(Ml){var t=Ml,e=El;if(El=Ml=null,vb(t),e)for(t=0;t<e.length;t++)vb(e[t])}}function GM(t,e){return t(e)}function ZM(){}var Qm=!1;function QM(t,e,r){if(Qm)return t(e,r);Qm=!0;try{return GM(t,e,r)}finally{Qm=!1,(Ml!==null||El!==null)&&(ZM(),WM())}}function ih(t,e){var r=t.stateNode;if(r===null)return null;var n=mp(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ze(231,e,typeof r));return r}var Xg=!1;if(ds)try{var qu={};Object.defineProperty(qu,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{Xg=!1}function mR(t,e,r,n,s,i,u,c,v){var _=Array.prototype.slice.call(arguments,3);try{e.apply(r,_)}catch(b){this.onError(b)}}var Df=!1,t0=null,r0=!1,e1=null,vR={onError:function(t){Df=!0,t0=t}};function gR(t,e,r,n,s,i,u,c,v){Df=!1,t0=null,mR.apply(vR,arguments)}function yR(t,e,r,n,s,i,u,c,v){if(gR.apply(this,arguments),Df){if(Df){var _=t0;Df=!1,t0=null}else throw Error(ze(198));r0||(r0=!0,e1=_)}}function No(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function YM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gb(t){if(No(t)!==t)throw Error(ze(188))}function wR(t){var e=t.alternate;if(!e){if(e=No(t),e===null)throw Error(ze(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return gb(s),t;if(i===n)return gb(s),e;i=i.sibling}throw Error(ze(188))}if(r.return!==n.return)r=s,n=i;else{for(var u=!1,c=s.child;c;){if(c===r){u=!0,r=s,n=i;break}if(c===n){u=!0,n=s,r=i;break}c=c.sibling}if(!u){for(c=i.child;c;){if(c===r){u=!0,r=i,n=s;break}if(c===n){u=!0,n=i,r=s;break}c=c.sibling}if(!u)throw Error(ze(189))}}if(r.alternate!==n)throw Error(ze(190))}if(r.tag!==3)throw Error(ze(188));return r.stateNode.current===r?t:e}function JM(t){return t=wR(t),t!==null?XM(t):null}function XM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XM(t);if(e!==null)return e;t=t.sibling}return null}var e5=jn.unstable_scheduleCallback,yb=jn.unstable_cancelCallback,_R=jn.unstable_shouldYield,bR=jn.unstable_requestPaint,_r=jn.unstable_now,xR=jn.unstable_getCurrentPriorityLevel,o2=jn.unstable_ImmediatePriority,t5=jn.unstable_UserBlockingPriority,n0=jn.unstable_NormalPriority,MR=jn.unstable_LowPriority,r5=jn.unstable_IdlePriority,hp=null,Li=null;function ER(t){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(hp,t,void 0,(t.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:TR,SR=Math.log,IR=Math.LN2;function TR(t){return t>>>=0,t===0?32:31-(SR(t)/IR|0)|0}var Uc=64,zc=4194304;function xf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function i0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,u=r&268435455;if(u!==0){var c=u&~s;c!==0?n=xf(c):(i&=u,i!==0&&(n=xf(i)))}else u=r&~s,u!==0?n=xf(u):i!==0&&(n=xf(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-yi(e),s=1<<r,n|=t[r],e&=~s;return n}function AR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var u=31-yi(i),c=1<<u,v=s[u];v===-1?(!(c&r)||c&n)&&(s[u]=AR(c,e)):v<=e&&(t.expiredLanes|=c),i&=~c}}function t1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n5(){var t=Uc;return Uc<<=1,!(Uc&4194240)&&(Uc=64),t}function Ym(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function qh(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yi(e),t[e]=r}function kR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-yi(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function l2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-yi(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Qt=0;function i5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s5,u2,a5,o5,l5,r1=!1,$c=[],ea=null,ta=null,ra=null,sh=new Map,ah=new Map,Hs=[],PR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wb(t,e){switch(t){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":sh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(e.pointerId)}}function Ku(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hh(e),e!==null&&u2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CR(t,e,r,n,s){switch(e){case"focusin":return ea=Ku(ea,t,e,r,n,s),!0;case"dragenter":return ta=Ku(ta,t,e,r,n,s),!0;case"mouseover":return ra=Ku(ra,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return sh.set(i,Ku(sh.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ah.set(i,Ku(ah.get(i)||null,t,e,r,n,s)),!0}return!1}function u5(t){var e=eo(t.target);if(e!==null){var r=No(e);if(r!==null){if(e=r.tag,e===13){if(e=YM(r),e!==null){t.blockedOn=e,l5(t.priority,function(){a5(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=n1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Yg=n,r.target.dispatchEvent(n),Yg=null}else return e=Hh(r),e!==null&&u2(e),t.blockedOn=r,!1;e.shift()}return!0}function _b(t,e,r){Id(t)&&r.delete(e)}function NR(){r1=!1,ea!==null&&Id(ea)&&(ea=null),ta!==null&&Id(ta)&&(ta=null),ra!==null&&Id(ra)&&(ra=null),sh.forEach(_b),ah.forEach(_b)}function Hu(t,e){t.blockedOn===e&&(t.blockedOn=null,r1||(r1=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,NR)))}function oh(t){function e(s){return Hu(s,t)}if(0<$c.length){Hu($c[0],t);for(var r=1;r<$c.length;r++){var n=$c[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ea!==null&&Hu(ea,t),ta!==null&&Hu(ta,t),ra!==null&&Hu(ra,t),sh.forEach(e),ah.forEach(e),r=0;r<Hs.length;r++)n=Hs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Hs.length&&(r=Hs[0],r.blockedOn===null);)u5(r),r.blockedOn===null&&Hs.shift()}var Sl=Ss.ReactCurrentBatchConfig,s0=!0;function DR(t,e,r,n){var s=Qt,i=Sl.transition;Sl.transition=null;try{Qt=1,f2(t,e,r,n)}finally{Qt=s,Sl.transition=i}}function OR(t,e,r,n){var s=Qt,i=Sl.transition;Sl.transition=null;try{Qt=4,f2(t,e,r,n)}finally{Qt=s,Sl.transition=i}}function f2(t,e,r,n){if(s0){var s=n1(t,e,r,n);if(s===null)ov(t,e,n,a0,r),wb(t,n);else if(CR(s,t,e,r,n))n.stopPropagation();else if(wb(t,n),e&4&&-1<PR.indexOf(t)){for(;s!==null;){var i=Hh(s);if(i!==null&&s5(i),i=n1(t,e,r,n),i===null&&ov(t,e,n,a0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ov(t,e,n,null,r)}}var a0=null;function n1(t,e,r,n){if(a0=null,t=a2(n),t=eo(t),t!==null)if(e=No(t),e===null)t=null;else if(r=e.tag,r===13){if(t=YM(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return a0=t,null}function f5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xR()){case o2:return 1;case t5:return 4;case n0:case MR:return 16;case r5:return 536870912;default:return 16}default:return 16}}var Zs=null,h2=null,Td=null;function h5(){if(Td)return Td;var t,e=h2,r=e.length,n,s="value"in Zs?Zs.value:Zs.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var u=r-t;for(n=1;n<=u&&e[r-n]===s[i-n];n++);return Td=s.slice(t,1<n?1-n:void 0)}function Ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qc(){return!0}function bb(){return!1}function $n(t){function e(r,n,s,i,u){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=u,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qc:bb,this.isPropagationStopped=bb,this}return pr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),e}var mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c2=$n(mu),Kh=pr({},mu,{view:0,detail:0}),BR=$n(Kh),Jm,Xm,Wu,cp=pr({},Kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wu&&(Wu&&t.type==="mousemove"?(Jm=t.screenX-Wu.screenX,Xm=t.screenY-Wu.screenY):Xm=Jm=0,Wu=t),Jm)},movementY:function(t){return"movementY"in t?t.movementY:Xm}}),xb=$n(cp),LR=pr({},cp,{dataTransfer:0}),VR=$n(LR),jR=pr({},Kh,{relatedTarget:0}),ev=$n(jR),FR=pr({},mu,{animationName:0,elapsedTime:0,pseudoElement:0}),UR=$n(FR),zR=pr({},mu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$R=$n(zR),qR=pr({},mu,{data:0}),Mb=$n(qR),KR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WR[t])?!!e[t]:!1}function d2(){return GR}var ZR=pr({},Kh,{key:function(t){if(t.key){var e=KR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d2,charCode:function(t){return t.type==="keypress"?Ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QR=$n(ZR),YR=pr({},cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eb=$n(YR),JR=pr({},Kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d2}),XR=$n(JR),ek=pr({},mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),tk=$n(ek),rk=pr({},cp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nk=$n(rk),ik=[9,13,27,32],p2=ds&&"CompositionEvent"in window,Of=null;ds&&"documentMode"in document&&(Of=document.documentMode);var sk=ds&&"TextEvent"in window&&!Of,c5=ds&&(!p2||Of&&8<Of&&11>=Of),Sb=" ",Ib=!1;function d5(t,e){switch(t){case"keyup":return ik.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hl=!1;function ak(t,e){switch(t){case"compositionend":return p5(e);case"keypress":return e.which!==32?null:(Ib=!0,Sb);case"textInput":return t=e.data,t===Sb&&Ib?null:t;default:return null}}function ok(t,e){if(hl)return t==="compositionend"||!p2&&d5(t,e)?(t=h5(),Td=h2=Zs=null,hl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return c5&&e.locale!=="ko"?null:e.data;default:return null}}var lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lk[t.type]:e==="textarea"}function m5(t,e,r,n){HM(n),e=o0(e,"onChange"),0<e.length&&(r=new c2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Bf=null,lh=null;function uk(t){I5(t,0)}function dp(t){var e=pl(t);if(jM(e))return t}function fk(t,e){if(t==="change")return e}var v5=!1;if(ds){var tv;if(ds){var rv="oninput"in document;if(!rv){var Ab=document.createElement("div");Ab.setAttribute("oninput","return;"),rv=typeof Ab.oninput=="function"}tv=rv}else tv=!1;v5=tv&&(!document.documentMode||9<document.documentMode)}function Rb(){Bf&&(Bf.detachEvent("onpropertychange",g5),lh=Bf=null)}function g5(t){if(t.propertyName==="value"&&dp(lh)){var e=[];m5(e,lh,t,a2(t)),QM(uk,e)}}function hk(t,e,r){t==="focusin"?(Rb(),Bf=e,lh=r,Bf.attachEvent("onpropertychange",g5)):t==="focusout"&&Rb()}function ck(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dp(lh)}function dk(t,e){if(t==="click")return dp(e)}function pk(t,e){if(t==="input"||t==="change")return dp(e)}function mk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _i=typeof Object.is=="function"?Object.is:mk;function uh(t,e){if(_i(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!jg.call(e,s)||!_i(t[s],e[s]))return!1}return!0}function kb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pb(t,e){var r=kb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kb(r)}}function y5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w5(){for(var t=window,e=e0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=e0(t.document)}return e}function m2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vk(t){var e=w5(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&y5(r.ownerDocument.documentElement,r)){if(n!==null&&m2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Pb(r,i);var u=Pb(r,n);s&&u&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gk=ds&&"documentMode"in document&&11>=document.documentMode,cl=null,i1=null,Lf=null,s1=!1;function Cb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;s1||cl==null||cl!==e0(n)||(n=cl,"selectionStart"in n&&m2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lf&&uh(Lf,n)||(Lf=n,n=o0(i1,"onSelect"),0<n.length&&(e=new c2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=cl)))}function Kc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var dl={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionend:Kc("Transition","TransitionEnd")},nv={},_5={};ds&&(_5=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function pp(t){if(nv[t])return nv[t];if(!dl[t])return t;var e=dl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in _5)return nv[t]=e[r];return t}var b5=pp("animationend"),x5=pp("animationiteration"),M5=pp("animationstart"),E5=pp("transitionend"),S5=new Map,Nb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(t,e){S5.set(t,e),Co(e,[t])}for(var iv=0;iv<Nb.length;iv++){var sv=Nb[iv],yk=sv.toLowerCase(),wk=sv[0].toUpperCase()+sv.slice(1);xa(yk,"on"+wk)}xa(b5,"onAnimationEnd");xa(x5,"onAnimationIteration");xa(M5,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(E5,"onTransitionEnd");Cl("onMouseEnter",["mouseout","mouseover"]);Cl("onMouseLeave",["mouseout","mouseover"]);Cl("onPointerEnter",["pointerout","pointerover"]);Cl("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_k=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mf));function Db(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,yR(n,e,void 0,t),t.currentTarget=null}function I5(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var u=n.length-1;0<=u;u--){var c=n[u],v=c.instance,_=c.currentTarget;if(c=c.listener,v!==i&&s.isPropagationStopped())break e;Db(s,c,_),i=v}else for(u=0;u<n.length;u++){if(c=n[u],v=c.instance,_=c.currentTarget,c=c.listener,v!==i&&s.isPropagationStopped())break e;Db(s,c,_),i=v}}}if(r0)throw t=e1,r0=!1,e1=null,t}function sr(t,e){var r=e[f1];r===void 0&&(r=e[f1]=new Set);var n=t+"__bubble";r.has(n)||(T5(e,t,2,!1),r.add(n))}function av(t,e,r){var n=0;e&&(n|=4),T5(r,t,n,e)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function fh(t){if(!t[Hc]){t[Hc]=!0,DM.forEach(function(r){r!=="selectionchange"&&(_k.has(r)||av(r,!1,t),av(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hc]||(e[Hc]=!0,av("selectionchange",!1,e))}}function T5(t,e,r,n){switch(f5(e)){case 1:var s=DR;break;case 4:s=OR;break;default:s=f2}r=s.bind(null,e,r,t),s=void 0,!Xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ov(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(u===4)for(u=n.return;u!==null;){var v=u.tag;if((v===3||v===4)&&(v=u.stateNode.containerInfo,v===s||v.nodeType===8&&v.parentNode===s))return;u=u.return}for(;c!==null;){if(u=eo(c),u===null)return;if(v=u.tag,v===5||v===6){n=i=u;continue e}c=c.parentNode}}n=n.return}QM(function(){var _=i,b=a2(r),x=[];e:{var S=S5.get(t);if(S!==void 0){var I=c2,A=t;switch(t){case"keypress":if(Ad(r)===0)break e;case"keydown":case"keyup":I=QR;break;case"focusin":A="focus",I=ev;break;case"focusout":A="blur",I=ev;break;case"beforeblur":case"afterblur":I=ev;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=xb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=VR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=XR;break;case b5:case x5:case M5:I=UR;break;case E5:I=tk;break;case"scroll":I=BR;break;case"wheel":I=nk;break;case"copy":case"cut":case"paste":I=$R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Eb}var k=(e&4)!==0,F=!k&&t==="scroll",C=k?S!==null?S+"Capture":null:S;k=[];for(var R=_,V;R!==null;){V=R;var U=V.stateNode;if(V.tag===5&&U!==null&&(V=U,C!==null&&(U=ih(R,C),U!=null&&k.push(hh(R,U,V)))),F)break;R=R.return}0<k.length&&(S=new I(S,A,null,r,b),x.push({event:S,listeners:k}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",S&&r!==Yg&&(A=r.relatedTarget||r.fromElement)&&(eo(A)||A[ps]))break e;if((I||S)&&(S=b.window===b?b:(S=b.ownerDocument)?S.defaultView||S.parentWindow:window,I?(A=r.relatedTarget||r.toElement,I=_,A=A?eo(A):null,A!==null&&(F=No(A),A!==F||A.tag!==5&&A.tag!==6)&&(A=null)):(I=null,A=_),I!==A)){if(k=xb,U="onMouseLeave",C="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(k=Eb,U="onPointerLeave",C="onPointerEnter",R="pointer"),F=I==null?S:pl(I),V=A==null?S:pl(A),S=new k(U,R+"leave",I,r,b),S.target=F,S.relatedTarget=V,U=null,eo(b)===_&&(k=new k(C,R+"enter",A,r,b),k.target=V,k.relatedTarget=F,U=k),F=U,I&&A)t:{for(k=I,C=A,R=0,V=k;V;V=qo(V))R++;for(V=0,U=C;U;U=qo(U))V++;for(;0<R-V;)k=qo(k),R--;for(;0<V-R;)C=qo(C),V--;for(;R--;){if(k===C||C!==null&&k===C.alternate)break t;k=qo(k),C=qo(C)}k=null}else k=null;I!==null&&Ob(x,S,I,k,!1),A!==null&&F!==null&&Ob(x,F,A,k,!0)}}e:{if(S=_?pl(_):window,I=S.nodeName&&S.nodeName.toLowerCase(),I==="select"||I==="input"&&S.type==="file")var Q=fk;else if(Tb(S))if(v5)Q=pk;else{Q=ck;var ee=hk}else(I=S.nodeName)&&I.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(Q=dk);if(Q&&(Q=Q(t,_))){m5(x,Q,r,b);break e}ee&&ee(t,S,_),t==="focusout"&&(ee=S._wrapperState)&&ee.controlled&&S.type==="number"&&Hg(S,"number",S.value)}switch(ee=_?pl(_):window,t){case"focusin":(Tb(ee)||ee.contentEditable==="true")&&(cl=ee,i1=_,Lf=null);break;case"focusout":Lf=i1=cl=null;break;case"mousedown":s1=!0;break;case"contextmenu":case"mouseup":case"dragend":s1=!1,Cb(x,r,b);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":Cb(x,r,b)}var j;if(p2)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else hl?d5(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(c5&&r.locale!=="ko"&&(hl||B!=="onCompositionStart"?B==="onCompositionEnd"&&hl&&(j=h5()):(Zs=b,h2="value"in Zs?Zs.value:Zs.textContent,hl=!0)),ee=o0(_,B),0<ee.length&&(B=new Mb(B,t,null,r,b),x.push({event:B,listeners:ee}),j?B.data=j:(j=p5(r),j!==null&&(B.data=j)))),(j=sk?ak(t,r):ok(t,r))&&(_=o0(_,"onBeforeInput"),0<_.length&&(b=new Mb("onBeforeInput","beforeinput",null,r,b),x.push({event:b,listeners:_}),b.data=j))}I5(x,e)})}function hh(t,e,r){return{instance:t,listener:e,currentTarget:r}}function o0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ih(t,r),i!=null&&n.unshift(hh(t,i,s)),i=ih(t,e),i!=null&&n.push(hh(t,i,s))),t=t.return}return n}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ob(t,e,r,n,s){for(var i=e._reactName,u=[];r!==null&&r!==n;){var c=r,v=c.alternate,_=c.stateNode;if(v!==null&&v===n)break;c.tag===5&&_!==null&&(c=_,s?(v=ih(r,i),v!=null&&u.unshift(hh(r,v,c))):s||(v=ih(r,i),v!=null&&u.push(hh(r,v,c)))),r=r.return}u.length!==0&&t.push({event:e,listeners:u})}var bk=/\r\n?/g,xk=/\u0000|\uFFFD/g;function Bb(t){return(typeof t=="string"?t:""+t).replace(bk,`
`).replace(xk,"")}function Wc(t,e,r){if(e=Bb(e),Bb(t)!==e&&r)throw Error(ze(425))}function l0(){}var a1=null,o1=null;function l1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u1=typeof setTimeout=="function"?setTimeout:void 0,Mk=typeof clearTimeout=="function"?clearTimeout:void 0,Lb=typeof Promise=="function"?Promise:void 0,Ek=typeof queueMicrotask=="function"?queueMicrotask:typeof Lb<"u"?function(t){return Lb.resolve(null).then(t).catch(Sk)}:u1;function Sk(t){setTimeout(function(){throw t})}function lv(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),oh(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);oh(e)}function na(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var vu=Math.random().toString(36).slice(2),Di="__reactFiber$"+vu,ch="__reactProps$"+vu,ps="__reactContainer$"+vu,f1="__reactEvents$"+vu,Ik="__reactListeners$"+vu,Tk="__reactHandles$"+vu;function eo(t){var e=t[Di];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ps]||r[Di]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Vb(t);t!==null;){if(r=t[Di])return r;t=Vb(t)}return e}t=r,r=t.parentNode}return null}function Hh(t){return t=t[Di]||t[ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ze(33))}function mp(t){return t[ch]||null}var h1=[],ml=-1;function Ma(t){return{current:t}}function ar(t){0>ml||(t.current=h1[ml],h1[ml]=null,ml--)}function tr(t,e){ml++,h1[ml]=t.current,t.current=e}var va={},un=Ma(va),Sn=Ma(!1),po=va;function Nl(t,e){var r=t.type.contextTypes;if(!r)return va;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function In(t){return t=t.childContextTypes,t!=null}function u0(){ar(Sn),ar(un)}function jb(t,e,r){if(un.current!==va)throw Error(ze(168));tr(un,e),tr(Sn,r)}function A5(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ze(108,hR(t)||"Unknown",s));return pr({},r,n)}function f0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||va,po=un.current,tr(un,t),tr(Sn,Sn.current),!0}function Fb(t,e,r){var n=t.stateNode;if(!n)throw Error(ze(169));r?(t=A5(t,e,po),n.__reactInternalMemoizedMergedChildContext=t,ar(Sn),ar(un),tr(un,t)):ar(Sn),tr(Sn,r)}var is=null,vp=!1,uv=!1;function R5(t){is===null?is=[t]:is.push(t)}function Ak(t){vp=!0,R5(t)}function Ea(){if(!uv&&is!==null){uv=!0;var t=0,e=Qt;try{var r=is;for(Qt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}is=null,vp=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),e5(o2,Ea),s}finally{Qt=e,uv=!1}}return null}var vl=[],gl=0,h0=null,c0=0,Hn=[],Wn=0,mo=null,ss=1,as="";function Ua(t,e){vl[gl++]=c0,vl[gl++]=h0,h0=t,c0=e}function k5(t,e,r){Hn[Wn++]=ss,Hn[Wn++]=as,Hn[Wn++]=mo,mo=t;var n=ss;t=as;var s=32-yi(n)-1;n&=~(1<<s),r+=1;var i=32-yi(e)+s;if(30<i){var u=s-s%5;i=(n&(1<<u)-1).toString(32),n>>=u,s-=u,ss=1<<32-yi(e)+s|r<<s|n,as=i+t}else ss=1<<i|r<<s|n,as=t}function v2(t){t.return!==null&&(Ua(t,1),k5(t,1,0))}function g2(t){for(;t===h0;)h0=vl[--gl],vl[gl]=null,c0=vl[--gl],vl[gl]=null;for(;t===mo;)mo=Hn[--Wn],Hn[Wn]=null,as=Hn[--Wn],Hn[Wn]=null,ss=Hn[--Wn],Hn[Wn]=null}var Vn=null,Bn=null,ur=!1,mi=null;function P5(t,e){var r=Zn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ub(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vn=t,Bn=na(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vn=t,Bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=mo!==null?{id:ss,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Zn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Vn=t,Bn=null,!0):!1;default:return!1}}function c1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d1(t){if(ur){var e=Bn;if(e){var r=e;if(!Ub(t,e)){if(c1(t))throw Error(ze(418));e=na(r.nextSibling);var n=Vn;e&&Ub(t,e)?P5(n,r):(t.flags=t.flags&-4097|2,ur=!1,Vn=t)}}else{if(c1(t))throw Error(ze(418));t.flags=t.flags&-4097|2,ur=!1,Vn=t}}}function zb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vn=t}function Gc(t){if(t!==Vn)return!1;if(!ur)return zb(t),ur=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!l1(t.type,t.memoizedProps)),e&&(e=Bn)){if(c1(t))throw C5(),Error(ze(418));for(;e;)P5(t,e),e=na(e.nextSibling)}if(zb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bn=na(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bn=null}}else Bn=Vn?na(t.stateNode.nextSibling):null;return!0}function C5(){for(var t=Bn;t;)t=na(t.nextSibling)}function Dl(){Bn=Vn=null,ur=!1}function y2(t){mi===null?mi=[t]:mi.push(t)}var Rk=Ss.ReactCurrentBatchConfig;function Gu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ze(309));var n=r.stateNode}if(!n)throw Error(ze(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(u){var c=s.refs;u===null?delete c[i]:c[i]=u},e._stringRef=i,e)}if(typeof t!="string")throw Error(ze(284));if(!r._owner)throw Error(ze(290,t))}return t}function Zc(t,e){throw t=Object.prototype.toString.call(e),Error(ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $b(t){var e=t._init;return e(t._payload)}function N5(t){function e(C,R){if(t){var V=C.deletions;V===null?(C.deletions=[R],C.flags|=16):V.push(R)}}function r(C,R){if(!t)return null;for(;R!==null;)e(C,R),R=R.sibling;return null}function n(C,R){for(C=new Map;R!==null;)R.key!==null?C.set(R.key,R):C.set(R.index,R),R=R.sibling;return C}function s(C,R){return C=oa(C,R),C.index=0,C.sibling=null,C}function i(C,R,V){return C.index=V,t?(V=C.alternate,V!==null?(V=V.index,V<R?(C.flags|=2,R):V):(C.flags|=2,R)):(C.flags|=1048576,R)}function u(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,R,V,U){return R===null||R.tag!==6?(R=vv(V,C.mode,U),R.return=C,R):(R=s(R,V),R.return=C,R)}function v(C,R,V,U){var Q=V.type;return Q===fl?b(C,R,V.props.children,U,V.key):R!==null&&(R.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Us&&$b(Q)===R.type)?(U=s(R,V.props),U.ref=Gu(C,R,V),U.return=C,U):(U=Od(V.type,V.key,V.props,null,C.mode,U),U.ref=Gu(C,R,V),U.return=C,U)}function _(C,R,V,U){return R===null||R.tag!==4||R.stateNode.containerInfo!==V.containerInfo||R.stateNode.implementation!==V.implementation?(R=gv(V,C.mode,U),R.return=C,R):(R=s(R,V.children||[]),R.return=C,R)}function b(C,R,V,U,Q){return R===null||R.tag!==7?(R=lo(V,C.mode,U,Q),R.return=C,R):(R=s(R,V),R.return=C,R)}function x(C,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return R=vv(""+R,C.mode,V),R.return=C,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Vc:return V=Od(R.type,R.key,R.props,null,C.mode,V),V.ref=Gu(C,null,R),V.return=C,V;case ul:return R=gv(R,C.mode,V),R.return=C,R;case Us:var U=R._init;return x(C,U(R._payload),V)}if(bf(R)||$u(R))return R=lo(R,C.mode,V,null),R.return=C,R;Zc(C,R)}return null}function S(C,R,V,U){var Q=R!==null?R.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return Q!==null?null:c(C,R,""+V,U);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Vc:return V.key===Q?v(C,R,V,U):null;case ul:return V.key===Q?_(C,R,V,U):null;case Us:return Q=V._init,S(C,R,Q(V._payload),U)}if(bf(V)||$u(V))return Q!==null?null:b(C,R,V,U,null);Zc(C,V)}return null}function I(C,R,V,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return C=C.get(V)||null,c(R,C,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Vc:return C=C.get(U.key===null?V:U.key)||null,v(R,C,U,Q);case ul:return C=C.get(U.key===null?V:U.key)||null,_(R,C,U,Q);case Us:var ee=U._init;return I(C,R,V,ee(U._payload),Q)}if(bf(U)||$u(U))return C=C.get(V)||null,b(R,C,U,Q,null);Zc(R,U)}return null}function A(C,R,V,U){for(var Q=null,ee=null,j=R,B=R=0,D=null;j!==null&&B<V.length;B++){j.index>B?(D=j,j=null):D=j.sibling;var $=S(C,j,V[B],U);if($===null){j===null&&(j=D);break}t&&j&&$.alternate===null&&e(C,j),R=i($,R,B),ee===null?Q=$:ee.sibling=$,ee=$,j=D}if(B===V.length)return r(C,j),ur&&Ua(C,B),Q;if(j===null){for(;B<V.length;B++)j=x(C,V[B],U),j!==null&&(R=i(j,R,B),ee===null?Q=j:ee.sibling=j,ee=j);return ur&&Ua(C,B),Q}for(j=n(C,j);B<V.length;B++)D=I(j,C,B,V[B],U),D!==null&&(t&&D.alternate!==null&&j.delete(D.key===null?B:D.key),R=i(D,R,B),ee===null?Q=D:ee.sibling=D,ee=D);return t&&j.forEach(function(g){return e(C,g)}),ur&&Ua(C,B),Q}function k(C,R,V,U){var Q=$u(V);if(typeof Q!="function")throw Error(ze(150));if(V=Q.call(V),V==null)throw Error(ze(151));for(var ee=Q=null,j=R,B=R=0,D=null,$=V.next();j!==null&&!$.done;B++,$=V.next()){j.index>B?(D=j,j=null):D=j.sibling;var g=S(C,j,$.value,U);if(g===null){j===null&&(j=D);break}t&&j&&g.alternate===null&&e(C,j),R=i(g,R,B),ee===null?Q=g:ee.sibling=g,ee=g,j=D}if($.done)return r(C,j),ur&&Ua(C,B),Q;if(j===null){for(;!$.done;B++,$=V.next())$=x(C,$.value,U),$!==null&&(R=i($,R,B),ee===null?Q=$:ee.sibling=$,ee=$);return ur&&Ua(C,B),Q}for(j=n(C,j);!$.done;B++,$=V.next())$=I(j,C,B,$.value,U),$!==null&&(t&&$.alternate!==null&&j.delete($.key===null?B:$.key),R=i($,R,B),ee===null?Q=$:ee.sibling=$,ee=$);return t&&j.forEach(function(a){return e(C,a)}),ur&&Ua(C,B),Q}function F(C,R,V,U){if(typeof V=="object"&&V!==null&&V.type===fl&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Vc:e:{for(var Q=V.key,ee=R;ee!==null;){if(ee.key===Q){if(Q=V.type,Q===fl){if(ee.tag===7){r(C,ee.sibling),R=s(ee,V.props.children),R.return=C,C=R;break e}}else if(ee.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Us&&$b(Q)===ee.type){r(C,ee.sibling),R=s(ee,V.props),R.ref=Gu(C,ee,V),R.return=C,C=R;break e}r(C,ee);break}else e(C,ee);ee=ee.sibling}V.type===fl?(R=lo(V.props.children,C.mode,U,V.key),R.return=C,C=R):(U=Od(V.type,V.key,V.props,null,C.mode,U),U.ref=Gu(C,R,V),U.return=C,C=U)}return u(C);case ul:e:{for(ee=V.key;R!==null;){if(R.key===ee)if(R.tag===4&&R.stateNode.containerInfo===V.containerInfo&&R.stateNode.implementation===V.implementation){r(C,R.sibling),R=s(R,V.children||[]),R.return=C,C=R;break e}else{r(C,R);break}else e(C,R);R=R.sibling}R=gv(V,C.mode,U),R.return=C,C=R}return u(C);case Us:return ee=V._init,F(C,R,ee(V._payload),U)}if(bf(V))return A(C,R,V,U);if($u(V))return k(C,R,V,U);Zc(C,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,R!==null&&R.tag===6?(r(C,R.sibling),R=s(R,V),R.return=C,C=R):(r(C,R),R=vv(V,C.mode,U),R.return=C,C=R),u(C)):r(C,R)}return F}var Ol=N5(!0),D5=N5(!1),d0=Ma(null),p0=null,yl=null,w2=null;function _2(){w2=yl=p0=null}function b2(t){var e=d0.current;ar(d0),t._currentValue=e}function p1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Il(t,e){p0=t,w2=yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(w2!==t)if(t={context:t,memoizedValue:e,next:null},yl===null){if(p0===null)throw Error(ze(308));yl=t,p0.dependencies={lanes:0,firstContext:t}}else yl=yl.next=t;return e}var to=null;function x2(t){to===null?to=[t]:to.push(t)}function O5(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,x2(e)):(r.next=s.next,s.next=r),e.interleaved=r,ms(t,n)}function ms(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zs=!1;function M2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ia(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Kt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ms(t,r)}return s=n.interleaved,s===null?(e.next=e,x2(n)):(e.next=s.next,s.next=e),n.interleaved=e,ms(t,r)}function Rd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,l2(t,r)}}function qb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=u:i=i.next=u,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function m0(t,e,r,n){var s=t.updateQueue;zs=!1;var i=s.firstBaseUpdate,u=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var v=c,_=v.next;v.next=null,u===null?i=_:u.next=_,u=v;var b=t.alternate;b!==null&&(b=b.updateQueue,c=b.lastBaseUpdate,c!==u&&(c===null?b.firstBaseUpdate=_:c.next=_,b.lastBaseUpdate=v))}if(i!==null){var x=s.baseState;u=0,b=_=v=null,c=i;do{var S=c.lane,I=c.eventTime;if((n&S)===S){b!==null&&(b=b.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var A=t,k=c;switch(S=e,I=r,k.tag){case 1:if(A=k.payload,typeof A=="function"){x=A.call(I,x,S);break e}x=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,S=typeof A=="function"?A.call(I,x,S):A,S==null)break e;x=pr({},x,S);break e;case 2:zs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,S=s.effects,S===null?s.effects=[c]:S.push(c))}else I={eventTime:I,lane:S,tag:c.tag,payload:c.payload,callback:c.callback,next:null},b===null?(_=b=I,v=x):b=b.next=I,u|=S;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;S=c,c=S.next,S.next=null,s.lastBaseUpdate=S,s.shared.pending=null}}while(!0);if(b===null&&(v=x),s.baseState=v,s.firstBaseUpdate=_,s.lastBaseUpdate=b,e=s.shared.interleaved,e!==null){s=e;do u|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);go|=u,t.lanes=u,t.memoizedState=x}}function Kb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ze(191,s));s.call(n)}}}var Wh={},Vi=Ma(Wh),dh=Ma(Wh),ph=Ma(Wh);function ro(t){if(t===Wh)throw Error(ze(174));return t}function E2(t,e){switch(tr(ph,e),tr(dh,t),tr(Vi,Wh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gg(e,t)}ar(Vi),tr(Vi,e)}function Bl(){ar(Vi),ar(dh),ar(ph)}function L5(t){ro(ph.current);var e=ro(Vi.current),r=Gg(e,t.type);e!==r&&(tr(dh,t),tr(Vi,r))}function S2(t){dh.current===t&&(ar(Vi),ar(dh))}var hr=Ma(0);function v0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fv=[];function I2(){for(var t=0;t<fv.length;t++)fv[t]._workInProgressVersionPrimary=null;fv.length=0}var kd=Ss.ReactCurrentDispatcher,hv=Ss.ReactCurrentBatchConfig,vo=0,dr=null,Ar=null,Or=null,g0=!1,Vf=!1,mh=0,kk=0;function Qr(){throw Error(ze(321))}function T2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!_i(t[r],e[r]))return!1;return!0}function A2(t,e,r,n,s,i){if(vo=i,dr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kd.current=t===null||t.memoizedState===null?Dk:Ok,t=r(n,s),Vf){i=0;do{if(Vf=!1,mh=0,25<=i)throw Error(ze(301));i+=1,Or=Ar=null,e.updateQueue=null,kd.current=Bk,t=r(n,s)}while(Vf)}if(kd.current=y0,e=Ar!==null&&Ar.next!==null,vo=0,Or=Ar=dr=null,g0=!1,e)throw Error(ze(300));return t}function R2(){var t=mh!==0;return mh=0,t}function Ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?dr.memoizedState=Or=t:Or=Or.next=t,Or}function ei(){if(Ar===null){var t=dr.alternate;t=t!==null?t.memoizedState:null}else t=Ar.next;var e=Or===null?dr.memoizedState:Or.next;if(e!==null)Or=e,Ar=t;else{if(t===null)throw Error(ze(310));Ar=t,t={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Or===null?dr.memoizedState=Or=t:Or=Or.next=t}return Or}function vh(t,e){return typeof e=="function"?e(t):e}function cv(t){var e=ei(),r=e.queue;if(r===null)throw Error(ze(311));r.lastRenderedReducer=t;var n=Ar,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var u=s.next;s.next=i.next,i.next=u}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var c=u=null,v=null,_=i;do{var b=_.lane;if((vo&b)===b)v!==null&&(v=v.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),n=_.hasEagerState?_.eagerState:t(n,_.action);else{var x={lane:b,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};v===null?(c=v=x,u=n):v=v.next=x,dr.lanes|=b,go|=b}_=_.next}while(_!==null&&_!==i);v===null?u=n:v.next=c,_i(n,e.memoizedState)||(Mn=!0),e.memoizedState=n,e.baseState=u,e.baseQueue=v,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,dr.lanes|=i,go|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function dv(t){var e=ei(),r=e.queue;if(r===null)throw Error(ze(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var u=s=s.next;do i=t(i,u.action),u=u.next;while(u!==s);_i(i,e.memoizedState)||(Mn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function V5(){}function j5(t,e){var r=dr,n=ei(),s=e(),i=!_i(n.memoizedState,s);if(i&&(n.memoizedState=s,Mn=!0),n=n.queue,k2(z5.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,gh(9,U5.bind(null,r,n,s,e),void 0,null),Lr===null)throw Error(ze(349));vo&30||F5(r,e,s)}return s}function F5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=dr.updateQueue,e===null?(e={lastEffect:null,stores:null},dr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function U5(t,e,r,n){e.value=r,e.getSnapshot=n,$5(e)&&q5(t)}function z5(t,e,r){return r(function(){$5(e)&&q5(t)})}function $5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_i(t,r)}catch{return!0}}function q5(t){var e=ms(t,1);e!==null&&wi(e,t,1,-1)}function Hb(t){var e=Ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:t},e.queue=t,t=t.dispatch=Nk.bind(null,dr,t),[e.memoizedState,t]}function gh(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=dr.updateQueue,e===null?(e={lastEffect:null,stores:null},dr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function K5(){return ei().memoizedState}function Pd(t,e,r,n){var s=Ri();dr.flags|=t,s.memoizedState=gh(1|e,r,void 0,n===void 0?null:n)}function gp(t,e,r,n){var s=ei();n=n===void 0?null:n;var i=void 0;if(Ar!==null){var u=Ar.memoizedState;if(i=u.destroy,n!==null&&T2(n,u.deps)){s.memoizedState=gh(e,r,i,n);return}}dr.flags|=t,s.memoizedState=gh(1|e,r,i,n)}function Wb(t,e){return Pd(8390656,8,t,e)}function k2(t,e){return gp(2048,8,t,e)}function H5(t,e){return gp(4,2,t,e)}function W5(t,e){return gp(4,4,t,e)}function G5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z5(t,e,r){return r=r!=null?r.concat([t]):null,gp(4,4,G5.bind(null,e,t),r)}function P2(){}function Q5(t,e){var r=ei();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&T2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Y5(t,e){var r=ei();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&T2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function J5(t,e,r){return vo&21?(_i(r,e)||(r=n5(),dr.lanes|=r,go|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function Pk(t,e){var r=Qt;Qt=r!==0&&4>r?r:4,t(!0);var n=hv.transition;hv.transition={};try{t(!1),e()}finally{Qt=r,hv.transition=n}}function X5(){return ei().memoizedState}function Ck(t,e,r){var n=aa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},eE(t))tE(e,r);else if(r=O5(t,e,r,n),r!==null){var s=pn();wi(r,t,n,s),rE(r,e,n)}}function Nk(t,e,r){var n=aa(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(eE(t))tE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var u=e.lastRenderedState,c=i(u,r);if(s.hasEagerState=!0,s.eagerState=c,_i(c,u)){var v=e.interleaved;v===null?(s.next=s,x2(e)):(s.next=v.next,v.next=s),e.interleaved=s;return}}catch{}finally{}r=O5(t,e,s,n),r!==null&&(s=pn(),wi(r,t,n,s),rE(r,e,n))}}function eE(t){var e=t.alternate;return t===dr||e!==null&&e===dr}function tE(t,e){Vf=g0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function rE(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,l2(t,r)}}var y0={readContext:Xn,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},Dk={readContext:Xn,useCallback:function(t,e){return Ri().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:Wb,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Pd(4194308,4,G5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Pd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pd(4,2,t,e)},useMemo:function(t,e){var r=Ri();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ri();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ck.bind(null,dr,t),[n.memoizedState,t]},useRef:function(t){var e=Ri();return t={current:t},e.memoizedState=t},useState:Hb,useDebugValue:P2,useDeferredValue:function(t){return Ri().memoizedState=t},useTransition:function(){var t=Hb(!1),e=t[0];return t=Pk.bind(null,t[1]),Ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=dr,s=Ri();if(ur){if(r===void 0)throw Error(ze(407));r=r()}else{if(r=e(),Lr===null)throw Error(ze(349));vo&30||F5(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Wb(z5.bind(null,n,i,t),[t]),n.flags|=2048,gh(9,U5.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ri(),e=Lr.identifierPrefix;if(ur){var r=as,n=ss;r=(n&~(1<<32-yi(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=mh++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=kk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ok={readContext:Xn,useCallback:Q5,useContext:Xn,useEffect:k2,useImperativeHandle:Z5,useInsertionEffect:H5,useLayoutEffect:W5,useMemo:Y5,useReducer:cv,useRef:K5,useState:function(){return cv(vh)},useDebugValue:P2,useDeferredValue:function(t){var e=ei();return J5(e,Ar.memoizedState,t)},useTransition:function(){var t=cv(vh)[0],e=ei().memoizedState;return[t,e]},useMutableSource:V5,useSyncExternalStore:j5,useId:X5,unstable_isNewReconciler:!1},Bk={readContext:Xn,useCallback:Q5,useContext:Xn,useEffect:k2,useImperativeHandle:Z5,useInsertionEffect:H5,useLayoutEffect:W5,useMemo:Y5,useReducer:dv,useRef:K5,useState:function(){return dv(vh)},useDebugValue:P2,useDeferredValue:function(t){var e=ei();return Ar===null?e.memoizedState=t:J5(e,Ar.memoizedState,t)},useTransition:function(){var t=dv(vh)[0],e=ei().memoizedState;return[t,e]},useMutableSource:V5,useSyncExternalStore:j5,useId:X5,unstable_isNewReconciler:!1};function hi(t,e){if(t&&t.defaultProps){e=pr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function m1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var yp={isMounted:function(t){return(t=t._reactInternals)?No(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=pn(),s=aa(t),i=fs(n,s);i.payload=e,r!=null&&(i.callback=r),e=ia(t,i,s),e!==null&&(wi(e,t,s,n),Rd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=pn(),s=aa(t),i=fs(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ia(t,i,s),e!==null&&(wi(e,t,s,n),Rd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=pn(),n=aa(t),s=fs(r,n);s.tag=2,e!=null&&(s.callback=e),e=ia(t,s,n),e!==null&&(wi(e,t,n,r),Rd(e,t,n))}};function Gb(t,e,r,n,s,i,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,u):e.prototype&&e.prototype.isPureReactComponent?!uh(r,n)||!uh(s,i):!0}function nE(t,e,r){var n=!1,s=va,i=e.contextType;return typeof i=="object"&&i!==null?i=Xn(i):(s=In(e)?po:un.current,n=e.contextTypes,i=(n=n!=null)?Nl(t,s):va),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zb(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&yp.enqueueReplaceState(e,e.state,null)}function v1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},M2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xn(i):(i=In(e)?po:un.current,s.context=Nl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(m1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yp.enqueueReplaceState(s,s.state,null),m0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ll(t,e){try{var r="",n=e;do r+=fR(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function g1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Lk=typeof WeakMap=="function"?WeakMap:Map;function iE(t,e,r){r=fs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){_0||(_0=!0,T1=n),g1(t,e)},r}function sE(t,e,r){r=fs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){g1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){g1(t,e),typeof n!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),r}function Qb(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Lk;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Yk.bind(null,t,e,r),e.then(t,t))}function Yb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jb(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=fs(-1,1),e.tag=2,ia(r,e,1))),r.lanes|=1),t)}var Vk=Ss.ReactCurrentOwner,Mn=!1;function fn(t,e,r,n){e.child=t===null?D5(e,null,r,n):Ol(e,t.child,r,n)}function Xb(t,e,r,n,s){r=r.render;var i=e.ref;return Il(e,s),n=A2(t,e,r,n,i,s),r=R2(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vs(t,e,s)):(ur&&r&&v2(e),e.flags|=1,fn(t,e,n,s),e.child)}function ex(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!j2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,aE(t,e,i,n,s)):(t=Od(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var u=i.memoizedProps;if(r=r.compare,r=r!==null?r:uh,r(u,n)&&t.ref===e.ref)return vs(t,e,s)}return e.flags|=1,t=oa(i,n),t.ref=e.ref,t.return=e,e.child=t}function aE(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(uh(i,n)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,vs(t,e,s)}return y1(t,e,r,n,s)}function oE(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(_l,Nn),Nn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tr(_l,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,tr(_l,Nn),Nn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,tr(_l,Nn),Nn|=n;return fn(t,e,s,r),e.child}function lE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function y1(t,e,r,n,s){var i=In(r)?po:un.current;return i=Nl(e,i),Il(e,s),r=A2(t,e,r,n,i,s),n=R2(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vs(t,e,s)):(ur&&n&&v2(e),e.flags|=1,fn(t,e,r,s),e.child)}function tx(t,e,r,n,s){if(In(r)){var i=!0;f0(e)}else i=!1;if(Il(e,s),e.stateNode===null)Cd(t,e),nE(e,r,n),v1(e,r,n,s),n=!0;else if(t===null){var u=e.stateNode,c=e.memoizedProps;u.props=c;var v=u.context,_=r.contextType;typeof _=="object"&&_!==null?_=Xn(_):(_=In(r)?po:un.current,_=Nl(e,_));var b=r.getDerivedStateFromProps,x=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function";x||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==n||v!==_)&&Zb(e,u,n,_),zs=!1;var S=e.memoizedState;u.state=S,m0(e,n,u,s),v=e.memoizedState,c!==n||S!==v||Sn.current||zs?(typeof b=="function"&&(m1(e,r,b,n),v=e.memoizedState),(c=zs||Gb(e,r,c,n,S,v,_))?(x||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=v),u.props=n,u.state=v,u.context=_,n=c):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{u=e.stateNode,B5(t,e),c=e.memoizedProps,_=e.type===e.elementType?c:hi(e.type,c),u.props=_,x=e.pendingProps,S=u.context,v=r.contextType,typeof v=="object"&&v!==null?v=Xn(v):(v=In(r)?po:un.current,v=Nl(e,v));var I=r.getDerivedStateFromProps;(b=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==x||S!==v)&&Zb(e,u,n,v),zs=!1,S=e.memoizedState,u.state=S,m0(e,n,u,s);var A=e.memoizedState;c!==x||S!==A||Sn.current||zs?(typeof I=="function"&&(m1(e,r,I,n),A=e.memoizedState),(_=zs||Gb(e,r,_,n,S,A,v)||!1)?(b||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,A,v),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,A,v)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||c===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),u.props=n,u.state=A,u.context=v,n=_):(typeof u.componentDidUpdate!="function"||c===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),n=!1)}return w1(t,e,r,n,i,s)}function w1(t,e,r,n,s,i){lE(t,e);var u=(e.flags&128)!==0;if(!n&&!u)return s&&Fb(e,r,!1),vs(t,e,i);n=e.stateNode,Vk.current=e;var c=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&u?(e.child=Ol(e,t.child,null,i),e.child=Ol(e,null,c,i)):fn(t,e,c,i),e.memoizedState=n.state,s&&Fb(e,r,!0),e.child}function uE(t){var e=t.stateNode;e.pendingContext?jb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jb(t,e.context,!1),E2(t,e.containerInfo)}function rx(t,e,r,n,s){return Dl(),y2(s),e.flags|=256,fn(t,e,r,n),e.child}var _1={dehydrated:null,treeContext:null,retryLane:0};function b1(t){return{baseLanes:t,cachePool:null,transitions:null}}function fE(t,e,r){var n=e.pendingProps,s=hr.current,i=!1,u=(e.flags&128)!==0,c;if((c=u)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tr(hr,s&1),t===null)return d1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=n.children,t=n.fallback,i?(n=e.mode,i=e.child,u={mode:"hidden",children:u},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=u):i=bp(u,n,0,null),t=lo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=b1(r),e.memoizedState=_1,t):C2(e,u));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return jk(t,e,u,n,c,s,r);if(i){i=n.fallback,u=e.mode,s=t.child,c=s.sibling;var v={mode:"hidden",children:n.children};return!(u&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=v,e.deletions=null):(n=oa(s,v),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=oa(c,i):(i=lo(i,u,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,u=t.child.memoizedState,u=u===null?b1(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},i.memoizedState=u,i.childLanes=t.childLanes&~r,e.memoizedState=_1,n}return i=t.child,t=i.sibling,n=oa(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function C2(t,e){return e=bp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qc(t,e,r,n){return n!==null&&y2(n),Ol(e,t.child,null,r),t=C2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jk(t,e,r,n,s,i,u){if(r)return e.flags&256?(e.flags&=-257,n=pv(Error(ze(422))),Qc(t,e,u,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=bp({mode:"visible",children:n.children},s,0,null),i=lo(i,s,u,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ol(e,t.child,null,u),e.child.memoizedState=b1(u),e.memoizedState=_1,i);if(!(e.mode&1))return Qc(t,e,u,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(ze(419)),n=pv(i,n,void 0),Qc(t,e,u,n)}if(c=(u&t.childLanes)!==0,Mn||c){if(n=Lr,n!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|u)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ms(t,s),wi(n,t,s,-1))}return V2(),n=pv(Error(ze(421))),Qc(t,e,u,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Jk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bn=na(s.nextSibling),Vn=e,ur=!0,mi=null,t!==null&&(Hn[Wn++]=ss,Hn[Wn++]=as,Hn[Wn++]=mo,ss=t.id,as=t.overflow,mo=e),e=C2(e,n.children),e.flags|=4096,e)}function nx(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),p1(t.return,e,r)}function mv(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function hE(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(fn(t,e,n.children,r),n=hr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nx(t,r,e);else if(t.tag===19)nx(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(tr(hr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&v0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),mv(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&v0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}mv(e,!0,r,null,i);break;case"together":mv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),go|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ze(153));if(e.child!==null){for(t=e.child,r=oa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=oa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Fk(t,e,r){switch(e.tag){case 3:uE(e),Dl();break;case 5:L5(e);break;case 1:In(e.type)&&f0(e);break;case 4:E2(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;tr(d0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(tr(hr,hr.current&1),e.flags|=128,null):r&e.child.childLanes?fE(t,e,r):(tr(hr,hr.current&1),t=vs(t,e,r),t!==null?t.sibling:null);tr(hr,hr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return hE(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tr(hr,hr.current),n)break;return null;case 22:case 23:return e.lanes=0,oE(t,e,r)}return vs(t,e,r)}var cE,x1,dE,pE;cE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};x1=function(){};dE=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ro(Vi.current);var i=null;switch(r){case"input":s=qg(t,s),n=qg(t,n),i=[];break;case"select":s=pr({},s,{value:void 0}),n=pr({},n,{value:void 0}),i=[];break;case"textarea":s=Wg(t,s),n=Wg(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=l0)}Zg(r,n);var u;r=null;for(_ in s)if(!n.hasOwnProperty(_)&&s.hasOwnProperty(_)&&s[_]!=null)if(_==="style"){var c=s[_];for(u in c)c.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(rh.hasOwnProperty(_)?i||(i=[]):(i=i||[]).push(_,null));for(_ in n){var v=n[_];if(c=s!=null?s[_]:void 0,n.hasOwnProperty(_)&&v!==c&&(v!=null||c!=null))if(_==="style")if(c){for(u in c)!c.hasOwnProperty(u)||v&&v.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in v)v.hasOwnProperty(u)&&c[u]!==v[u]&&(r||(r={}),r[u]=v[u])}else r||(i||(i=[]),i.push(_,r)),r=v;else _==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,c=c?c.__html:void 0,v!=null&&c!==v&&(i=i||[]).push(_,v)):_==="children"?typeof v!="string"&&typeof v!="number"||(i=i||[]).push(_,""+v):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(rh.hasOwnProperty(_)?(v!=null&&_==="onScroll"&&sr("scroll",t),i||c===v||(i=[])):(i=i||[]).push(_,v))}r&&(i=i||[]).push("style",r);var _=i;(e.updateQueue=_)&&(e.flags|=4)}};pE=function(t,e,r,n){r!==n&&(e.flags|=4)};function Zu(t,e){if(!ur)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Uk(t,e,r){var n=e.pendingProps;switch(g2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(e),null;case 1:return In(e.type)&&u0(),Yr(e),null;case 3:return n=e.stateNode,Bl(),ar(Sn),ar(un),I2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(k1(mi),mi=null))),x1(t,e),Yr(e),null;case 5:S2(e);var s=ro(ph.current);if(r=e.type,t!==null&&e.stateNode!=null)dE(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ze(166));return Yr(e),null}if(t=ro(Vi.current),Gc(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Di]=e,n[ch]=i,t=(e.mode&1)!==0,r){case"dialog":sr("cancel",n),sr("close",n);break;case"iframe":case"object":case"embed":sr("load",n);break;case"video":case"audio":for(s=0;s<Mf.length;s++)sr(Mf[s],n);break;case"source":sr("error",n);break;case"img":case"image":case"link":sr("error",n),sr("load",n);break;case"details":sr("toggle",n);break;case"input":cb(n,i),sr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},sr("invalid",n);break;case"textarea":pb(n,i),sr("invalid",n)}Zg(r,i),s=null;for(var u in i)if(i.hasOwnProperty(u)){var c=i[u];u==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&Wc(n.textContent,c,t),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Wc(n.textContent,c,t),s=["children",""+c]):rh.hasOwnProperty(u)&&c!=null&&u==="onScroll"&&sr("scroll",n)}switch(r){case"input":jc(n),db(n,i,!0);break;case"textarea":jc(n),mb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=l0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zM(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=u.createElement(r,{is:n.is}):(t=u.createElement(r),r==="select"&&(u=t,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):t=u.createElementNS(t,r),t[Di]=e,t[ch]=n,cE(t,e,!1,!1),e.stateNode=t;e:{switch(u=Qg(r,n),r){case"dialog":sr("cancel",t),sr("close",t),s=n;break;case"iframe":case"object":case"embed":sr("load",t),s=n;break;case"video":case"audio":for(s=0;s<Mf.length;s++)sr(Mf[s],t);s=n;break;case"source":sr("error",t),s=n;break;case"img":case"image":case"link":sr("error",t),sr("load",t),s=n;break;case"details":sr("toggle",t),s=n;break;case"input":cb(t,n),s=qg(t,n),sr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=pr({},n,{value:void 0}),sr("invalid",t);break;case"textarea":pb(t,n),s=Wg(t,n),sr("invalid",t);break;default:s=n}Zg(r,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var v=c[i];i==="style"?KM(t,v):i==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&$M(t,v)):i==="children"?typeof v=="string"?(r!=="textarea"||v!=="")&&nh(t,v):typeof v=="number"&&nh(t,""+v):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rh.hasOwnProperty(i)?v!=null&&i==="onScroll"&&sr("scroll",t):v!=null&&r2(t,i,v,u))}switch(r){case"input":jc(t),db(t,n,!1);break;case"textarea":jc(t),mb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ma(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?xl(t,!!n.multiple,i,!1):n.defaultValue!=null&&xl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=l0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yr(e),null;case 6:if(t&&e.stateNode!=null)pE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ze(166));if(r=ro(ph.current),ro(Vi.current),Gc(e)){if(n=e.stateNode,r=e.memoizedProps,n[Di]=e,(i=n.nodeValue!==r)&&(t=Vn,t!==null))switch(t.tag){case 3:Wc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wc(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Di]=e,e.stateNode=n}return Yr(e),null;case 13:if(ar(hr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ur&&Bn!==null&&e.mode&1&&!(e.flags&128))C5(),Dl(),e.flags|=98560,i=!1;else if(i=Gc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ze(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ze(317));i[Di]=e}else Dl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yr(e),i=!1}else mi!==null&&(k1(mi),mi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||hr.current&1?Pr===0&&(Pr=3):V2())),e.updateQueue!==null&&(e.flags|=4),Yr(e),null);case 4:return Bl(),x1(t,e),t===null&&fh(e.stateNode.containerInfo),Yr(e),null;case 10:return b2(e.type._context),Yr(e),null;case 17:return In(e.type)&&u0(),Yr(e),null;case 19:if(ar(hr),i=e.memoizedState,i===null)return Yr(e),null;if(n=(e.flags&128)!==0,u=i.rendering,u===null)if(n)Zu(i,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=v0(t),u!==null){for(e.flags|=128,Zu(i,!1),n=u.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,u=i.alternate,u===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,t=u.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return tr(hr,hr.current&1|2),e.child}t=t.sibling}i.tail!==null&&_r()>Vl&&(e.flags|=128,n=!0,Zu(i,!1),e.lanes=4194304)}else{if(!n)if(t=v0(u),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Zu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!ur)return Yr(e),null}else 2*_r()-i.renderingStartTime>Vl&&r!==1073741824&&(e.flags|=128,n=!0,Zu(i,!1),e.lanes=4194304);i.isBackwards?(u.sibling=e.child,e.child=u):(r=i.last,r!==null?r.sibling=u:e.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_r(),e.sibling=null,r=hr.current,tr(hr,n?r&1|2:r&1),e):(Yr(e),null);case 22:case 23:return L2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nn&1073741824&&(Yr(e),e.subtreeFlags&6&&(e.flags|=8192)):Yr(e),null;case 24:return null;case 25:return null}throw Error(ze(156,e.tag))}function zk(t,e){switch(g2(e),e.tag){case 1:return In(e.type)&&u0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bl(),ar(Sn),ar(un),I2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S2(e),null;case 13:if(ar(hr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ze(340));Dl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ar(hr),null;case 4:return Bl(),null;case 10:return b2(e.type._context),null;case 22:case 23:return L2(),null;case 24:return null;default:return null}}var Yc=!1,sn=!1,$k=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function wl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){vr(t,e,n)}else r.current=null}function M1(t,e,r){try{r()}catch(n){vr(t,e,n)}}var ix=!1;function qk(t,e){if(a1=s0,t=w5(),m2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var u=0,c=-1,v=-1,_=0,b=0,x=t,S=null;t:for(;;){for(var I;x!==r||s!==0&&x.nodeType!==3||(c=u+s),x!==i||n!==0&&x.nodeType!==3||(v=u+n),x.nodeType===3&&(u+=x.nodeValue.length),(I=x.firstChild)!==null;)S=x,x=I;for(;;){if(x===t)break t;if(S===r&&++_===s&&(c=u),S===i&&++b===n&&(v=u),(I=x.nextSibling)!==null)break;x=S,S=x.parentNode}x=I}r=c===-1||v===-1?null:{start:c,end:v}}else r=null}r=r||{start:0,end:0}}else r=null;for(o1={focusedElem:t,selectionRange:r},s0=!1,Xe=e;Xe!==null;)if(e=Xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xe=t;else for(;Xe!==null;){e=Xe;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,F=A.memoizedState,C=e.stateNode,R=C.getSnapshotBeforeUpdate(e.elementType===e.type?k:hi(e.type,k),F);C.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var V=e.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(U){vr(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}return A=ix,ix=!1,A}function jf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&M1(e,r,i)}s=s.next}while(s!==n)}}function wp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function E1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function mE(t){var e=t.alternate;e!==null&&(t.alternate=null,mE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Di],delete e[ch],delete e[f1],delete e[Ik],delete e[Tk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vE(t){return t.tag===5||t.tag===3||t.tag===4}function sx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function S1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=l0));else if(n!==4&&(t=t.child,t!==null))for(S1(t,e,r),t=t.sibling;t!==null;)S1(t,e,r),t=t.sibling}function I1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(I1(t,e,r),t=t.sibling;t!==null;)I1(t,e,r),t=t.sibling}var zr=null,ci=!1;function Ds(t,e,r){for(r=r.child;r!==null;)gE(t,e,r),r=r.sibling}function gE(t,e,r){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(hp,r)}catch{}switch(r.tag){case 5:sn||wl(r,e);case 6:var n=zr,s=ci;zr=null,Ds(t,e,r),zr=n,ci=s,zr!==null&&(ci?(t=zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):zr.removeChild(r.stateNode));break;case 18:zr!==null&&(ci?(t=zr,r=r.stateNode,t.nodeType===8?lv(t.parentNode,r):t.nodeType===1&&lv(t,r),oh(t)):lv(zr,r.stateNode));break;case 4:n=zr,s=ci,zr=r.stateNode.containerInfo,ci=!0,Ds(t,e,r),zr=n,ci=s;break;case 0:case 11:case 14:case 15:if(!sn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,u=i.destroy;i=i.tag,u!==void 0&&(i&2||i&4)&&M1(r,e,u),s=s.next}while(s!==n)}Ds(t,e,r);break;case 1:if(!sn&&(wl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){vr(r,e,c)}Ds(t,e,r);break;case 21:Ds(t,e,r);break;case 22:r.mode&1?(sn=(n=sn)||r.memoizedState!==null,Ds(t,e,r),sn=n):Ds(t,e,r);break;default:Ds(t,e,r)}}function ax(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $k),e.forEach(function(n){var s=Xk.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ui(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,u=e,c=u;e:for(;c!==null;){switch(c.tag){case 5:zr=c.stateNode,ci=!1;break e;case 3:zr=c.stateNode.containerInfo,ci=!0;break e;case 4:zr=c.stateNode.containerInfo,ci=!0;break e}c=c.return}if(zr===null)throw Error(ze(160));gE(i,u,s),zr=null,ci=!1;var v=s.alternate;v!==null&&(v.return=null),s.return=null}catch(_){vr(s,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yE(e,t),e=e.sibling}function yE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ui(e,t),Ai(t),n&4){try{jf(3,t,t.return),wp(3,t)}catch(k){vr(t,t.return,k)}try{jf(5,t,t.return)}catch(k){vr(t,t.return,k)}}break;case 1:ui(e,t),Ai(t),n&512&&r!==null&&wl(r,r.return);break;case 5:if(ui(e,t),Ai(t),n&512&&r!==null&&wl(r,r.return),t.flags&32){var s=t.stateNode;try{nh(s,"")}catch(k){vr(t,t.return,k)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,u=r!==null?r.memoizedProps:i,c=t.type,v=t.updateQueue;if(t.updateQueue=null,v!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&FM(s,i),Qg(c,u);var _=Qg(c,i);for(u=0;u<v.length;u+=2){var b=v[u],x=v[u+1];b==="style"?KM(s,x):b==="dangerouslySetInnerHTML"?$M(s,x):b==="children"?nh(s,x):r2(s,b,x,_)}switch(c){case"input":Kg(s,i);break;case"textarea":UM(s,i);break;case"select":var S=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?xl(s,!!i.multiple,I,!1):S!==!!i.multiple&&(i.defaultValue!=null?xl(s,!!i.multiple,i.defaultValue,!0):xl(s,!!i.multiple,i.multiple?[]:"",!1))}s[ch]=i}catch(k){vr(t,t.return,k)}}break;case 6:if(ui(e,t),Ai(t),n&4){if(t.stateNode===null)throw Error(ze(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){vr(t,t.return,k)}}break;case 3:if(ui(e,t),Ai(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{oh(e.containerInfo)}catch(k){vr(t,t.return,k)}break;case 4:ui(e,t),Ai(t);break;case 13:ui(e,t),Ai(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(O2=_r())),n&4&&ax(t);break;case 22:if(b=r!==null&&r.memoizedState!==null,t.mode&1?(sn=(_=sn)||b,ui(e,t),sn=_):ui(e,t),Ai(t),n&8192){if(_=t.memoizedState!==null,(t.stateNode.isHidden=_)&&!b&&t.mode&1)for(Xe=t,b=t.child;b!==null;){for(x=Xe=b;Xe!==null;){switch(S=Xe,I=S.child,S.tag){case 0:case 11:case 14:case 15:jf(4,S,S.return);break;case 1:wl(S,S.return);var A=S.stateNode;if(typeof A.componentWillUnmount=="function"){n=S,r=S.return;try{e=n,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){vr(n,r,k)}}break;case 5:wl(S,S.return);break;case 22:if(S.memoizedState!==null){lx(x);continue}}I!==null?(I.return=S,Xe=I):lx(x)}b=b.sibling}e:for(b=null,x=t;;){if(x.tag===5){if(b===null){b=x;try{s=x.stateNode,_?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=x.stateNode,v=x.memoizedProps.style,u=v!=null&&v.hasOwnProperty("display")?v.display:null,c.style.display=qM("display",u))}catch(k){vr(t,t.return,k)}}}else if(x.tag===6){if(b===null)try{x.stateNode.nodeValue=_?"":x.memoizedProps}catch(k){vr(t,t.return,k)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;b===x&&(b=null),x=x.return}b===x&&(b=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:ui(e,t),Ai(t),n&4&&ax(t);break;case 21:break;default:ui(e,t),Ai(t)}}function Ai(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(vE(r)){var n=r;break e}r=r.return}throw Error(ze(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(nh(s,""),n.flags&=-33);var i=sx(t);I1(t,i,s);break;case 3:case 4:var u=n.stateNode.containerInfo,c=sx(t);S1(t,c,u);break;default:throw Error(ze(161))}}catch(v){vr(t,t.return,v)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kk(t,e,r){Xe=t,wE(t)}function wE(t,e,r){for(var n=(t.mode&1)!==0;Xe!==null;){var s=Xe,i=s.child;if(s.tag===22&&n){var u=s.memoizedState!==null||Yc;if(!u){var c=s.alternate,v=c!==null&&c.memoizedState!==null||sn;c=Yc;var _=sn;if(Yc=u,(sn=v)&&!_)for(Xe=s;Xe!==null;)u=Xe,v=u.child,u.tag===22&&u.memoizedState!==null?ux(s):v!==null?(v.return=u,Xe=v):ux(s);for(;i!==null;)Xe=i,wE(i),i=i.sibling;Xe=s,Yc=c,sn=_}ox(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Xe=i):ox(t)}}function ox(t){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||wp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!sn)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:hi(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Kb(e,i,n);break;case 3:var u=e.updateQueue;if(u!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Kb(e,u,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var v=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&r.focus();break;case"img":v.src&&(r.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var b=_.memoizedState;if(b!==null){var x=b.dehydrated;x!==null&&oh(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}sn||e.flags&512&&E1(e)}catch(S){vr(e,e.return,S)}}if(e===t){Xe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function lx(t){for(;Xe!==null;){var e=Xe;if(e===t){Xe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Xe=r;break}Xe=e.return}}function ux(t){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{wp(4,e)}catch(v){vr(e,r,v)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(v){vr(e,s,v)}}var i=e.return;try{E1(e)}catch(v){vr(e,i,v)}break;case 5:var u=e.return;try{E1(e)}catch(v){vr(e,u,v)}}}catch(v){vr(e,e.return,v)}if(e===t){Xe=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Xe=c;break}Xe=e.return}}var Hk=Math.ceil,w0=Ss.ReactCurrentDispatcher,N2=Ss.ReactCurrentOwner,Yn=Ss.ReactCurrentBatchConfig,Kt=0,Lr=null,Er=null,Kr=0,Nn=0,_l=Ma(0),Pr=0,yh=null,go=0,_p=0,D2=0,Ff=null,xn=null,O2=0,Vl=1/0,ns=null,_0=!1,T1=null,sa=null,Jc=!1,Qs=null,b0=0,Uf=0,A1=null,Nd=-1,Dd=0;function pn(){return Kt&6?_r():Nd!==-1?Nd:Nd=_r()}function aa(t){return t.mode&1?Kt&2&&Kr!==0?Kr&-Kr:Rk.transition!==null?(Dd===0&&(Dd=n5()),Dd):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:f5(t.type)),t):1}function wi(t,e,r,n){if(50<Uf)throw Uf=0,A1=null,Error(ze(185));qh(t,r,n),(!(Kt&2)||t!==Lr)&&(t===Lr&&(!(Kt&2)&&(_p|=r),Pr===4&&Ws(t,Kr)),Tn(t,n),r===1&&Kt===0&&!(e.mode&1)&&(Vl=_r()+500,vp&&Ea()))}function Tn(t,e){var r=t.callbackNode;RR(t,e);var n=i0(t,t===Lr?Kr:0);if(n===0)r!==null&&yb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&yb(r),e===1)t.tag===0?Ak(fx.bind(null,t)):R5(fx.bind(null,t)),Ek(function(){!(Kt&6)&&Ea()}),r=null;else{switch(i5(n)){case 1:r=o2;break;case 4:r=t5;break;case 16:r=n0;break;case 536870912:r=r5;break;default:r=n0}r=TE(r,_E.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function _E(t,e){if(Nd=-1,Dd=0,Kt&6)throw Error(ze(327));var r=t.callbackNode;if(Tl()&&t.callbackNode!==r)return null;var n=i0(t,t===Lr?Kr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=x0(t,n);else{e=n;var s=Kt;Kt|=2;var i=xE();(Lr!==t||Kr!==e)&&(ns=null,Vl=_r()+500,oo(t,e));do try{Zk();break}catch(c){bE(t,c)}while(!0);_2(),w0.current=i,Kt=s,Er!==null?e=0:(Lr=null,Kr=0,e=Pr)}if(e!==0){if(e===2&&(s=t1(t),s!==0&&(n=s,e=R1(t,s))),e===1)throw r=yh,oo(t,0),Ws(t,n),Tn(t,_r()),r;if(e===6)Ws(t,n);else{if(s=t.current.alternate,!(n&30)&&!Wk(s)&&(e=x0(t,n),e===2&&(i=t1(t),i!==0&&(n=i,e=R1(t,i))),e===1))throw r=yh,oo(t,0),Ws(t,n),Tn(t,_r()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ze(345));case 2:za(t,xn,ns);break;case 3:if(Ws(t,n),(n&130023424)===n&&(e=O2+500-_r(),10<e)){if(i0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){pn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=u1(za.bind(null,t,xn,ns),e);break}za(t,xn,ns);break;case 4:if(Ws(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var u=31-yi(n);i=1<<u,u=e[u],u>s&&(s=u),n&=~i}if(n=s,n=_r()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hk(n/1960))-n,10<n){t.timeoutHandle=u1(za.bind(null,t,xn,ns),n);break}za(t,xn,ns);break;case 5:za(t,xn,ns);break;default:throw Error(ze(329))}}}return Tn(t,_r()),t.callbackNode===r?_E.bind(null,t):null}function R1(t,e){var r=Ff;return t.current.memoizedState.isDehydrated&&(oo(t,e).flags|=256),t=x0(t,e),t!==2&&(e=xn,xn=r,e!==null&&k1(e)),t}function k1(t){xn===null?xn=t:xn.push.apply(xn,t)}function Wk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!_i(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ws(t,e){for(e&=~D2,e&=~_p,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-yi(e),n=1<<r;t[r]=-1,e&=~n}}function fx(t){if(Kt&6)throw Error(ze(327));Tl();var e=i0(t,0);if(!(e&1))return Tn(t,_r()),null;var r=x0(t,e);if(t.tag!==0&&r===2){var n=t1(t);n!==0&&(e=n,r=R1(t,n))}if(r===1)throw r=yh,oo(t,0),Ws(t,e),Tn(t,_r()),r;if(r===6)throw Error(ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,za(t,xn,ns),Tn(t,_r()),null}function B2(t,e){var r=Kt;Kt|=1;try{return t(e)}finally{Kt=r,Kt===0&&(Vl=_r()+500,vp&&Ea())}}function yo(t){Qs!==null&&Qs.tag===0&&!(Kt&6)&&Tl();var e=Kt;Kt|=1;var r=Yn.transition,n=Qt;try{if(Yn.transition=null,Qt=1,t)return t()}finally{Qt=n,Yn.transition=r,Kt=e,!(Kt&6)&&Ea()}}function L2(){Nn=_l.current,ar(_l)}function oo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Mk(r)),Er!==null)for(r=Er.return;r!==null;){var n=r;switch(g2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&u0();break;case 3:Bl(),ar(Sn),ar(un),I2();break;case 5:S2(n);break;case 4:Bl();break;case 13:ar(hr);break;case 19:ar(hr);break;case 10:b2(n.type._context);break;case 22:case 23:L2()}r=r.return}if(Lr=t,Er=t=oa(t.current,null),Kr=Nn=e,Pr=0,yh=null,D2=_p=go=0,xn=Ff=null,to!==null){for(e=0;e<to.length;e++)if(r=to[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var u=i.next;i.next=s,n.next=u}r.pending=n}to=null}return t}function bE(t,e){do{var r=Er;try{if(_2(),kd.current=y0,g0){for(var n=dr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}g0=!1}if(vo=0,Or=Ar=dr=null,Vf=!1,mh=0,N2.current=null,r===null||r.return===null){Pr=1,yh=e,Er=null;break}e:{var i=t,u=r.return,c=r,v=e;if(e=Kr,c.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var _=v,b=c,x=b.tag;if(!(b.mode&1)&&(x===0||x===11||x===15)){var S=b.alternate;S?(b.updateQueue=S.updateQueue,b.memoizedState=S.memoizedState,b.lanes=S.lanes):(b.updateQueue=null,b.memoizedState=null)}var I=Yb(u);if(I!==null){I.flags&=-257,Jb(I,u,c,i,e),I.mode&1&&Qb(i,_,e),e=I,v=_;var A=e.updateQueue;if(A===null){var k=new Set;k.add(v),e.updateQueue=k}else A.add(v);break e}else{if(!(e&1)){Qb(i,_,e),V2();break e}v=Error(ze(426))}}else if(ur&&c.mode&1){var F=Yb(u);if(F!==null){!(F.flags&65536)&&(F.flags|=256),Jb(F,u,c,i,e),y2(Ll(v,c));break e}}i=v=Ll(v,c),Pr!==4&&(Pr=2),Ff===null?Ff=[i]:Ff.push(i),i=u;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var C=iE(i,v,e);qb(i,C);break e;case 1:c=v;var R=i.type,V=i.stateNode;if(!(i.flags&128)&&(typeof R.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(sa===null||!sa.has(V)))){i.flags|=65536,e&=-e,i.lanes|=e;var U=sE(i,c,e);qb(i,U);break e}}i=i.return}while(i!==null)}EE(r)}catch(Q){e=Q,Er===r&&r!==null&&(Er=r=r.return);continue}break}while(!0)}function xE(){var t=w0.current;return w0.current=y0,t===null?y0:t}function V2(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Lr===null||!(go&268435455)&&!(_p&268435455)||Ws(Lr,Kr)}function x0(t,e){var r=Kt;Kt|=2;var n=xE();(Lr!==t||Kr!==e)&&(ns=null,oo(t,e));do try{Gk();break}catch(s){bE(t,s)}while(!0);if(_2(),Kt=r,w0.current=n,Er!==null)throw Error(ze(261));return Lr=null,Kr=0,Pr}function Gk(){for(;Er!==null;)ME(Er)}function Zk(){for(;Er!==null&&!_R();)ME(Er)}function ME(t){var e=IE(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?EE(t):Er=e,N2.current=null}function EE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zk(r,e),r!==null){r.flags&=32767,Er=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,Er=null;return}}else if(r=Uk(r,e,Nn),r!==null){Er=r;return}if(e=e.sibling,e!==null){Er=e;return}Er=e=t}while(e!==null);Pr===0&&(Pr=5)}function za(t,e,r){var n=Qt,s=Yn.transition;try{Yn.transition=null,Qt=1,Qk(t,e,r,n)}finally{Yn.transition=s,Qt=n}return null}function Qk(t,e,r,n){do Tl();while(Qs!==null);if(Kt&6)throw Error(ze(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ze(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(kR(t,i),t===Lr&&(Er=Lr=null,Kr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jc||(Jc=!0,TE(n0,function(){return Tl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Yn.transition,Yn.transition=null;var u=Qt;Qt=1;var c=Kt;Kt|=4,N2.current=null,qk(t,r),yE(r,t),vk(o1),s0=!!a1,o1=a1=null,t.current=r,Kk(r),bR(),Kt=c,Qt=u,Yn.transition=i}else t.current=r;if(Jc&&(Jc=!1,Qs=t,b0=s),i=t.pendingLanes,i===0&&(sa=null),ER(r.stateNode),Tn(t,_r()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(_0)throw _0=!1,t=T1,T1=null,t;return b0&1&&t.tag!==0&&Tl(),i=t.pendingLanes,i&1?t===A1?Uf++:(Uf=0,A1=t):Uf=0,Ea(),null}function Tl(){if(Qs!==null){var t=i5(b0),e=Yn.transition,r=Qt;try{if(Yn.transition=null,Qt=16>t?16:t,Qs===null)var n=!1;else{if(t=Qs,Qs=null,b0=0,Kt&6)throw Error(ze(331));var s=Kt;for(Kt|=4,Xe=t.current;Xe!==null;){var i=Xe,u=i.child;if(Xe.flags&16){var c=i.deletions;if(c!==null){for(var v=0;v<c.length;v++){var _=c[v];for(Xe=_;Xe!==null;){var b=Xe;switch(b.tag){case 0:case 11:case 15:jf(8,b,i)}var x=b.child;if(x!==null)x.return=b,Xe=x;else for(;Xe!==null;){b=Xe;var S=b.sibling,I=b.return;if(mE(b),b===_){Xe=null;break}if(S!==null){S.return=I,Xe=S;break}Xe=I}}}var A=i.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var F=k.sibling;k.sibling=null,k=F}while(k!==null)}}Xe=i}}if(i.subtreeFlags&2064&&u!==null)u.return=i,Xe=u;else e:for(;Xe!==null;){if(i=Xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jf(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,Xe=C;break e}Xe=i.return}}var R=t.current;for(Xe=R;Xe!==null;){u=Xe;var V=u.child;if(u.subtreeFlags&2064&&V!==null)V.return=u,Xe=V;else e:for(u=R;Xe!==null;){if(c=Xe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:wp(9,c)}}catch(Q){vr(c,c.return,Q)}if(c===u){Xe=null;break e}var U=c.sibling;if(U!==null){U.return=c.return,Xe=U;break e}Xe=c.return}}if(Kt=s,Ea(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(hp,t)}catch{}n=!0}return n}finally{Qt=r,Yn.transition=e}}return!1}function hx(t,e,r){e=Ll(r,e),e=iE(t,e,1),t=ia(t,e,1),e=pn(),t!==null&&(qh(t,1,e),Tn(t,e))}function vr(t,e,r){if(t.tag===3)hx(t,t,r);else for(;e!==null;){if(e.tag===3){hx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sa===null||!sa.has(n))){t=Ll(r,t),t=sE(e,t,1),e=ia(e,t,1),t=pn(),e!==null&&(qh(e,1,t),Tn(e,t));break}}e=e.return}}function Yk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&r,Lr===t&&(Kr&r)===r&&(Pr===4||Pr===3&&(Kr&130023424)===Kr&&500>_r()-O2?oo(t,0):D2|=r),Tn(t,e)}function SE(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var r=pn();t=ms(t,e),t!==null&&(qh(t,e,r),Tn(t,r))}function Jk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),SE(t,r)}function Xk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ze(314))}n!==null&&n.delete(e),SE(t,r)}var IE;IE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)Mn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Mn=!1,Fk(t,e,r);Mn=!!(t.flags&131072)}else Mn=!1,ur&&e.flags&1048576&&k5(e,c0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Cd(t,e),t=e.pendingProps;var s=Nl(e,un.current);Il(e,r),s=A2(null,e,n,t,s,r);var i=R2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(n)?(i=!0,f0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,M2(e),s.updater=yp,e.stateNode=s,s._reactInternals=e,v1(e,n,t,r),e=w1(null,e,n,!0,i,r)):(e.tag=0,ur&&i&&v2(e),fn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Cd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=tP(n),t=hi(n,t),s){case 0:e=y1(null,e,n,t,r);break e;case 1:e=tx(null,e,n,t,r);break e;case 11:e=Xb(null,e,n,t,r);break e;case 14:e=ex(null,e,n,hi(n.type,t),r);break e}throw Error(ze(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hi(n,s),y1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hi(n,s),tx(t,e,n,s,r);case 3:e:{if(uE(e),t===null)throw Error(ze(387));n=e.pendingProps,i=e.memoizedState,s=i.element,B5(t,e),m0(e,n,null,r);var u=e.memoizedState;if(n=u.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ll(Error(ze(423)),e),e=rx(t,e,n,r,s);break e}else if(n!==s){s=Ll(Error(ze(424)),e),e=rx(t,e,n,r,s);break e}else for(Bn=na(e.stateNode.containerInfo.firstChild),Vn=e,ur=!0,mi=null,r=D5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Dl(),n===s){e=vs(t,e,r);break e}fn(t,e,n,r)}e=e.child}return e;case 5:return L5(e),t===null&&d1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,u=s.children,l1(n,s)?u=null:i!==null&&l1(n,i)&&(e.flags|=32),lE(t,e),fn(t,e,u,r),e.child;case 6:return t===null&&d1(e),null;case 13:return fE(t,e,r);case 4:return E2(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ol(e,null,n,r):fn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hi(n,s),Xb(t,e,n,s,r);case 7:return fn(t,e,e.pendingProps,r),e.child;case 8:return fn(t,e,e.pendingProps.children,r),e.child;case 12:return fn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,u=s.value,tr(d0,n._currentValue),n._currentValue=u,i!==null)if(_i(i.value,u)){if(i.children===s.children&&!Sn.current){e=vs(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){u=i.child;for(var v=c.firstContext;v!==null;){if(v.context===n){if(i.tag===1){v=fs(-1,r&-r),v.tag=2;var _=i.updateQueue;if(_!==null){_=_.shared;var b=_.pending;b===null?v.next=v:(v.next=b.next,b.next=v),_.pending=v}}i.lanes|=r,v=i.alternate,v!==null&&(v.lanes|=r),p1(i.return,r,e),c.lanes|=r;break}v=v.next}}else if(i.tag===10)u=i.type===e.type?null:i.child;else if(i.tag===18){if(u=i.return,u===null)throw Error(ze(341));u.lanes|=r,c=u.alternate,c!==null&&(c.lanes|=r),p1(u,r,e),u=i.sibling}else u=i.child;if(u!==null)u.return=i;else for(u=i;u!==null;){if(u===e){u=null;break}if(i=u.sibling,i!==null){i.return=u.return,u=i;break}u=u.return}i=u}fn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Il(e,r),s=Xn(s),n=n(s),e.flags|=1,fn(t,e,n,r),e.child;case 14:return n=e.type,s=hi(n,e.pendingProps),s=hi(n.type,s),ex(t,e,n,s,r);case 15:return aE(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hi(n,s),Cd(t,e),e.tag=1,In(n)?(t=!0,f0(e)):t=!1,Il(e,r),nE(e,n,s),v1(e,n,s,r),w1(null,e,n,!0,t,r);case 19:return hE(t,e,r);case 22:return oE(t,e,r)}throw Error(ze(156,e.tag))};function TE(t,e){return e5(t,e)}function eP(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,r,n){return new eP(t,e,r,n)}function j2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tP(t){if(typeof t=="function")return j2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i2)return 11;if(t===s2)return 14}return 2}function oa(t,e){var r=t.alternate;return r===null?(r=Zn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Od(t,e,r,n,s,i){var u=2;if(n=t,typeof t=="function")j2(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case fl:return lo(r.children,s,i,e);case n2:u=8,s|=8;break;case Fg:return t=Zn(12,r,e,s|2),t.elementType=Fg,t.lanes=i,t;case Ug:return t=Zn(13,r,e,s),t.elementType=Ug,t.lanes=i,t;case zg:return t=Zn(19,r,e,s),t.elementType=zg,t.lanes=i,t;case LM:return bp(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OM:u=10;break e;case BM:u=9;break e;case i2:u=11;break e;case s2:u=14;break e;case Us:u=16,n=null;break e}throw Error(ze(130,t==null?t:typeof t,""))}return e=Zn(u,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function lo(t,e,r,n){return t=Zn(7,t,n,e),t.lanes=r,t}function bp(t,e,r,n){return t=Zn(22,t,n,e),t.elementType=LM,t.lanes=r,t.stateNode={isHidden:!1},t}function vv(t,e,r){return t=Zn(6,t,null,e),t.lanes=r,t}function gv(t,e,r){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rP(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ym(0),this.expirationTimes=Ym(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ym(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function F2(t,e,r,n,s,i,u,c,v){return t=new rP(t,e,r,c,v),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},M2(i),t}function nP(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function AE(t){if(!t)return va;t=t._reactInternals;e:{if(No(t)!==t||t.tag!==1)throw Error(ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ze(171))}if(t.tag===1){var r=t.type;if(In(r))return A5(t,r,e)}return e}function RE(t,e,r,n,s,i,u,c,v){return t=F2(r,n,!0,t,s,i,u,c,v),t.context=AE(null),r=t.current,n=pn(),s=aa(r),i=fs(n,s),i.callback=e??null,ia(r,i,s),t.current.lanes=s,qh(t,s,n),Tn(t,n),t}function xp(t,e,r,n){var s=e.current,i=pn(),u=aa(s);return r=AE(r),e.context===null?e.context=r:e.pendingContext=r,e=fs(i,u),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ia(s,e,u),t!==null&&(wi(t,s,u,i),Rd(t,s,u)),u}function M0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function U2(t,e){cx(t,e),(t=t.alternate)&&cx(t,e)}function iP(){return null}var kE=typeof reportError=="function"?reportError:function(t){console.error(t)};function z2(t){this._internalRoot=t}Mp.prototype.render=z2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ze(409));xp(t,e,null,null)};Mp.prototype.unmount=z2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yo(function(){xp(null,t,null,null)}),e[ps]=null}};function Mp(t){this._internalRoot=t}Mp.prototype.unstable_scheduleHydration=function(t){if(t){var e=o5();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Hs.length&&e!==0&&e<Hs[r].priority;r++);Hs.splice(r,0,t),r===0&&u5(t)}};function $2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dx(){}function sP(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var _=M0(u);i.call(_)}}var u=RE(e,n,t,0,null,!1,!1,"",dx);return t._reactRootContainer=u,t[ps]=u.current,fh(t.nodeType===8?t.parentNode:t),yo(),u}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var _=M0(v);c.call(_)}}var v=F2(t,0,!1,null,null,!1,!1,"",dx);return t._reactRootContainer=v,t[ps]=v.current,fh(t.nodeType===8?t.parentNode:t),yo(function(){xp(e,v,r,n)}),v}function Sp(t,e,r,n,s){var i=r._reactRootContainer;if(i){var u=i;if(typeof s=="function"){var c=s;s=function(){var v=M0(u);c.call(v)}}xp(e,u,t,s)}else u=sP(r,e,t,s,n);return M0(u)}s5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xf(e.pendingLanes);r!==0&&(l2(e,r|1),Tn(e,_r()),!(Kt&6)&&(Vl=_r()+500,Ea()))}break;case 13:yo(function(){var n=ms(t,1);if(n!==null){var s=pn();wi(n,t,1,s)}}),U2(t,1)}};u2=function(t){if(t.tag===13){var e=ms(t,134217728);if(e!==null){var r=pn();wi(e,t,134217728,r)}U2(t,134217728)}};a5=function(t){if(t.tag===13){var e=aa(t),r=ms(t,e);if(r!==null){var n=pn();wi(r,t,e,n)}U2(t,e)}};o5=function(){return Qt};l5=function(t,e){var r=Qt;try{return Qt=t,e()}finally{Qt=r}};Jg=function(t,e,r){switch(e){case"input":if(Kg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=mp(n);if(!s)throw Error(ze(90));jM(n),Kg(n,s)}}}break;case"textarea":UM(t,r);break;case"select":e=r.value,e!=null&&xl(t,!!r.multiple,e,!1)}};GM=B2;ZM=yo;var aP={usingClientEntryPoint:!1,Events:[Hh,pl,mp,HM,WM,B2]},Qu={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:Qu.bundleType,version:Qu.version,rendererPackageName:Qu.rendererPackageName,rendererConfig:Qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=JM(t),t===null?null:t.stateNode},findFiberByHostInstance:Qu.findFiberByHostInstance||iP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xc.isDisabled&&Xc.supportsFiber)try{hp=Xc.inject(oP),Li=Xc}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aP;zn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$2(e))throw Error(ze(200));return nP(t,e,null,r)};zn.createRoot=function(t,e){if(!$2(t))throw Error(ze(299));var r=!1,n="",s=kE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=F2(t,1,!1,null,null,r,!1,n,s),t[ps]=e.current,fh(t.nodeType===8?t.parentNode:t),new z2(e)};zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ze(188)):(t=Object.keys(t).join(","),Error(ze(268,t)));return t=JM(e),t=t===null?null:t.stateNode,t};zn.flushSync=function(t){return yo(t)};zn.hydrate=function(t,e,r){if(!Ep(e))throw Error(ze(200));return Sp(null,t,e,!0,r)};zn.hydrateRoot=function(t,e,r){if(!$2(t))throw Error(ze(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",u=kE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),e=RE(e,null,t,1,r??null,s,!1,i,u),t[ps]=e.current,fh(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Mp(e)};zn.render=function(t,e,r){if(!Ep(e))throw Error(ze(200));return Sp(null,t,e,!1,r)};zn.unmountComponentAtNode=function(t){if(!Ep(t))throw Error(ze(40));return t._reactRootContainer?(yo(function(){Sp(null,null,t,!1,function(){t._reactRootContainer=null,t[ps]=null})}),!0):!1};zn.unstable_batchedUpdates=B2;zn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ep(r))throw Error(ze(200));if(t==null||t._reactInternals===void 0)throw Error(ze(38));return Sp(t,e,r,!1,n)};zn.version="18.3.1-next-f1338f8080-20240426";function PE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PE)}catch(t){console.error(t)}}PE(),PM.exports=zn;var Ip=PM.exports;const lP=yM(Ip),uP=gM({__proto__:null,default:lP},[Ip]);var px=Ip;Vg.createRoot=px.createRoot,Vg.hydrateRoot=px.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function or(){return or=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},or.apply(this,arguments)}var Mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mr||(Mr={}));const mx="popstate";function fP(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:u,hash:c}=n.location;return wh("",{pathname:i,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:wo(s)}return cP(e,r,null,t)}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hP(){return Math.random().toString(36).substr(2,8)}function vx(t,e){return{usr:t.state,key:t.key,idx:e}}function wh(t,e,r,n){return r===void 0&&(r=null),or({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sa(e):e,{state:r,key:e&&e.key||n||hP()})}function wo(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Sa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function cP(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,u=s.history,c=Mr.Pop,v=null,_=b();_==null&&(_=0,u.replaceState(or({},u.state,{idx:_}),""));function b(){return(u.state||{idx:null}).idx}function x(){c=Mr.Pop;let F=b(),C=F==null?null:F-_;_=F,v&&v({action:c,location:k.location,delta:C})}function S(F,C){c=Mr.Push;let R=wh(k.location,F,C);_=b()+1;let V=vx(R,_),U=k.createHref(R);try{u.pushState(V,"",U)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(U)}i&&v&&v({action:c,location:k.location,delta:1})}function I(F,C){c=Mr.Replace;let R=wh(k.location,F,C);_=b();let V=vx(R,_),U=k.createHref(R);u.replaceState(V,"",U),i&&v&&v({action:c,location:k.location,delta:0})}function A(F){let C=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof F=="string"?F:wo(F);return R=R.replace(/ $/,"%20"),Dt(C,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,C)}let k={get action(){return c},get location(){return t(s,u)},listen(F){if(v)throw new Error("A history only accepts one active listener");return s.addEventListener(mx,x),v=F,()=>{s.removeEventListener(mx,x),v=null}},createHref(F){return e(s,F)},createURL:A,encodeLocation(F){let C=A(F);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:S,replace:I,go(F){return u.go(F)}};return k}var Gt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gt||(Gt={}));const dP=new Set(["lazy","caseSensitive","path","id","index","children"]);function pP(t){return t.index===!0}function E0(t,e,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),t.map((s,i)=>{let u=[...r,String(i)],c=typeof s.id=="string"?s.id:u.join("-");if(Dt(s.index!==!0||!s.children,"Cannot specify children on an index route"),Dt(!n[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),pP(s)){let v=or({},s,e(s),{id:c});return n[c]=v,v}else{let v=or({},s,e(s),{id:c,children:void 0});return n[c]=v,s.children&&(v.children=E0(s.children,e,u,n)),v}})}function Ha(t,e,r){return r===void 0&&(r="/"),Bd(t,e,r,!1)}function Bd(t,e,r,n){let s=typeof e=="string"?Sa(e):e,i=gu(s.pathname||"/",r);if(i==null)return null;let u=CE(t);vP(u);let c=null;for(let v=0;c==null&&v<u.length;++v){let _=TP(i);c=SP(u[v],_,n)}return c}function mP(t,e){let{route:r,pathname:n,params:s}=t;return{id:r.id,pathname:n,params:s,data:e[r.id],handle:r.handle}}function CE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,u,c)=>{let v={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:u,route:i};v.relativePath.startsWith("/")&&(Dt(v.relativePath.startsWith(n),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(n.length));let _=hs([n,v.relativePath]),b=r.concat(v);i.children&&i.children.length>0&&(Dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),CE(i.children,e,b,_)),!(i.path==null&&!i.index)&&e.push({path:_,score:MP(_,i.index),routesMeta:b})};return t.forEach((i,u)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,u);else for(let v of NE(i.path))s(i,u,v)}),e}function NE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let u=NE(n.join("/")),c=[];return c.push(...u.map(v=>v===""?i:[i,v].join("/"))),s&&c.push(...u),c.map(v=>t.startsWith("/")&&v===""?"/":v)}function vP(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:EP(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gP=/^:[\w-]+$/,yP=3,wP=2,_P=1,bP=10,xP=-2,gx=t=>t==="*";function MP(t,e){let r=t.split("/"),n=r.length;return r.some(gx)&&(n+=xP),e&&(n+=wP),r.filter(s=>!gx(s)).reduce((s,i)=>s+(gP.test(i)?yP:i===""?_P:bP),n)}function EP(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function SP(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,s={},i="/",u=[];for(let c=0;c<n.length;++c){let v=n[c],_=c===n.length-1,b=i==="/"?e:e.slice(i.length)||"/",x=yx({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},b),S=v.route;if(!x&&_&&r&&!n[n.length-1].route.index&&(x=yx({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},b)),!x)return null;Object.assign(s,x.params),u.push({params:s,pathname:hs([i,x.pathname]),pathnameBase:kP(hs([i,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(i=hs([i,x.pathnameBase]))}return u}function yx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=IP(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],u=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((_,b,x)=>{let{paramName:S,isOptional:I}=b;if(S==="*"){let k=c[x]||"";u=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const A=c[x];return I&&!A?_[S]=void 0:_[S]=(A||"").replace(/%2F/g,"/"),_},{}),pathname:i,pathnameBase:u,pattern:t}}function IP(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),jl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,v)=>(n.push({paramName:c,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function TP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function AP(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Sa(t):t;return{pathname:r?r.startsWith("/")?r:RP(r,e):e,search:PP(n),hash:CP(s)}}function RP(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function yv(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Tp(t,e){let r=DE(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ap(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Sa(t):(s=or({},t),Dt(!s.pathname||!s.pathname.includes("?"),yv("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),yv("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),yv("#","search","hash",s)));let i=t===""||s.pathname==="",u=i?"/":s.pathname,c;if(u==null)c=r;else{let x=e.length-1;if(!n&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),x-=1;s.pathname=S.join("/")}c=x>=0?e[x]:"/"}let v=AP(s,c),_=u&&u!=="/"&&u.endsWith("/"),b=(i||u===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(_||b)&&(v.pathname+="/"),v}const hs=t=>t.join("/").replace(/\/\/+/g,"/"),kP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class S0{constructor(e,r,n,s){s===void 0&&(s=!1),this.status=e,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Fl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OE=["post","put","patch","delete"],NP=new Set(OE),DP=["get",...OE],OP=new Set(DP),BP=new Set([301,302,303,307,308]),LP=new Set([307,308]),wv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},VP={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},q2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jP=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),BE="remix-router-transitions";function FP(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!r;Dt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let q=t.detectErrorBoundary;s=G=>({hasErrorBoundary:q(G)})}else s=jP;let i={},u=E0(t.routes,s,void 0,i),c,v=t.basename||"/",_=t.dataStrategy||qP,b=t.patchRoutesOnNavigation,x=or({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),S=null,I=new Set,A=null,k=null,F=null,C=t.hydrationData!=null,R=Ha(u,t.history.location,v),V=!1,U=null;if(R==null&&!b){let q=_n(404,{pathname:t.history.location.pathname}),{matches:G,route:ue}=Rx(u);R=G,U={[ue.id]:q}}R&&!t.hydrationData&&yt(R,u,t.history.location.pathname).active&&(R=null);let Q;if(R)if(R.some(q=>q.route.lazy))Q=!1;else if(!R.some(q=>q.route.loader))Q=!0;else if(x.v7_partialHydration){let q=t.hydrationData?t.hydrationData.loaderData:null,G=t.hydrationData?t.hydrationData.errors:null;if(G){let ue=R.findIndex(J=>G[J.route.id]!==void 0);Q=R.slice(0,ue+1).every(J=>!C1(J.route,q,G))}else Q=R.every(ue=>!C1(ue.route,q,G))}else Q=t.hydrationData!=null;else if(Q=!1,R=[],x.v7_partialHydration){let q=yt(null,u,t.history.location.pathname);q.active&&q.matches&&(V=!0,R=q.matches)}let ee,j={historyAction:t.history.action,location:t.history.location,matches:R,initialized:Q,navigation:wv,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||U,fetchers:new Map,blockers:new Map},B=Mr.Pop,D=!1,$,g=!1,a=new Map,l=null,f=!1,h=!1,m=[],y=new Set,w=new Map,d=0,o=-1,p=new Map,E=new Set,T=new Map,z=new Map,K=new Set,Y=new Map,L=new Map,H;function Z(){if(S=t.history.listen(q=>{let{action:G,location:ue,delta:J}=q;if(H){H(),H=void 0;return}jl(L.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Ne({currentLocation:j.location,nextLocation:ue,historyAction:G});if(ie&&J!=null){let Fe=new Promise(ae=>{H=ae});t.history.go(J*-1),xe(ie,{state:"blocked",location:ue,proceed(){xe(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),Fe.then(()=>t.history.go(J))},reset(){let ae=new Map(j.blockers);ae.set(ie,Yu),ne({blockers:ae})}});return}return me(G,ue)}),r){iC(e,a);let q=()=>sC(e,a);e.addEventListener("pagehide",q),l=()=>e.removeEventListener("pagehide",q)}return j.initialized||me(Mr.Pop,j.location,{initialHydration:!0}),ee}function X(){S&&S(),l&&l(),I.clear(),$&&$.abort(),j.fetchers.forEach((q,G)=>ke(G)),j.blockers.forEach((q,G)=>_t(G))}function Ge(q){return I.add(q),()=>I.delete(q)}function ne(q,G){G===void 0&&(G={}),j=or({},j,q);let ue=[],J=[];x.v7_fetcherPersist&&j.fetchers.forEach((ie,Fe)=>{ie.state==="idle"&&(K.has(Fe)?J.push(Fe):ue.push(Fe))}),K.forEach(ie=>{!j.fetchers.has(ie)&&!w.has(ie)&&J.push(ie)}),[...I].forEach(ie=>ie(j,{deletedFetchers:J,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),x.v7_fetcherPersist?(ue.forEach(ie=>j.fetchers.delete(ie)),J.forEach(ie=>ke(ie))):J.forEach(ie=>K.delete(ie))}function se(q,G,ue){var J,ie;let{flushSync:Fe}=ue===void 0?{}:ue,ae=j.actionData!=null&&j.navigation.formMethod!=null&&di(j.navigation.formMethod)&&j.navigation.state==="loading"&&((J=q.state)==null?void 0:J._isRedirect)!==!0,oe;G.actionData?Object.keys(G.actionData).length>0?oe=G.actionData:oe=null:ae?oe=j.actionData:oe=null;let je=G.loaderData?Tx(j.loaderData,G.loaderData,G.matches||[],G.errors):j.loaderData,re=j.blockers;re.size>0&&(re=new Map(re),re.forEach((qe,mt)=>re.set(mt,Yu)));let le=D===!0||j.navigation.formMethod!=null&&di(j.navigation.formMethod)&&((ie=q.state)==null?void 0:ie._isRedirect)!==!0;c&&(u=c,c=void 0),f||B===Mr.Pop||(B===Mr.Push?t.history.push(q,q.state):B===Mr.Replace&&t.history.replace(q,q.state));let $e;if(B===Mr.Pop){let qe=a.get(j.location.pathname);qe&&qe.has(q.pathname)?$e={currentLocation:j.location,nextLocation:q}:a.has(q.pathname)&&($e={currentLocation:q,nextLocation:j.location})}else if(g){let qe=a.get(j.location.pathname);qe?qe.add(q.pathname):(qe=new Set([q.pathname]),a.set(j.location.pathname,qe)),$e={currentLocation:j.location,nextLocation:q}}ne(or({},G,{actionData:oe,loaderData:je,historyAction:B,location:q,initialized:!0,navigation:wv,revalidation:"idle",restoreScrollPosition:Re(q,G.matches||j.matches),preventScrollReset:le,blockers:re}),{viewTransitionOpts:$e,flushSync:Fe===!0}),B=Mr.Pop,D=!1,g=!1,f=!1,h=!1,m=[]}async function Ze(q,G){if(typeof q=="number"){t.history.go(q);return}let ue=P1(j.location,j.matches,v,x.v7_prependBasename,q,x.v7_relativeSplatPath,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:J,submission:ie,error:Fe}=wx(x.v7_normalizeFormMethod,!1,ue,G),ae=j.location,oe=wh(j.location,J,G&&G.state);oe=or({},oe,t.history.encodeLocation(oe));let je=G&&G.replace!=null?G.replace:void 0,re=Mr.Push;je===!0?re=Mr.Replace:je===!1||ie!=null&&di(ie.formMethod)&&ie.formAction===j.location.pathname+j.location.search&&(re=Mr.Replace);let le=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,$e=(G&&G.flushSync)===!0,qe=Ne({currentLocation:ae,nextLocation:oe,historyAction:re});if(qe){xe(qe,{state:"blocked",location:oe,proceed(){xe(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:oe}),Ze(q,G)},reset(){let mt=new Map(j.blockers);mt.set(qe,Yu),ne({blockers:mt})}});return}return await me(re,oe,{submission:ie,pendingError:Fe,preventScrollReset:le,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:$e})}function fe(){if(he(),ne({revalidation:"loading"}),j.navigation.state!=="submitting"){if(j.navigation.state==="idle"){me(j.historyAction,j.location,{startUninterruptedRevalidation:!0});return}me(B||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:g===!0})}}async function me(q,G,ue){$&&$.abort(),$=null,B=q,f=(ue&&ue.startUninterruptedRevalidation)===!0,Ie(j.location,j.matches),D=(ue&&ue.preventScrollReset)===!0,g=(ue&&ue.enableViewTransition)===!0;let J=c||u,ie=ue&&ue.overrideNavigation,Fe=ue!=null&&ue.initialHydration&&j.matches&&j.matches.length>0&&!V?j.matches:Ha(J,G,v),ae=(ue&&ue.flushSync)===!0;if(Fe&&j.initialized&&!h&&QP(j.location,G)&&!(ue&&ue.submission&&di(ue.submission.formMethod))){se(G,{matches:Fe},{flushSync:ae});return}let oe=yt(Fe,J,G.pathname);if(oe.active&&oe.matches&&(Fe=oe.matches),!Fe){let{error:st,notFoundMatches:tt,route:ut}=pt(G.pathname);se(G,{matches:tt,loaderData:{},errors:{[ut.id]:st}},{flushSync:ae});return}$=new AbortController;let je=Ko(t.history,G,$.signal,ue&&ue.submission),re;if(ue&&ue.pendingError)re=[Wa(Fe).route.id,{type:Gt.error,error:ue.pendingError}];else if(ue&&ue.submission&&di(ue.submission.formMethod)){let st=await at(je,G,ue.submission,Fe,oe.active,{replace:ue.replace,flushSync:ae});if(st.shortCircuited)return;if(st.pendingActionResult){let[tt,ut]=st.pendingActionResult;if(Dn(ut)&&Fl(ut.error)&&ut.error.status===404){$=null,se(G,{matches:st.matches,loaderData:{},errors:{[tt]:ut.error}});return}}Fe=st.matches||Fe,re=st.pendingActionResult,ie=_v(G,ue.submission),ae=!1,oe.active=!1,je=Ko(t.history,je.url,je.signal)}let{shortCircuited:le,matches:$e,loaderData:qe,errors:mt}=await ge(je,G,Fe,oe.active,ie,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,ae,re);le||($=null,se(G,or({matches:$e||Fe},Ax(re),{loaderData:qe,errors:mt})))}async function at(q,G,ue,J,ie,Fe){Fe===void 0&&(Fe={}),he();let ae=rC(G,ue);if(ne({navigation:ae},{flushSync:Fe.flushSync===!0}),ie){let re=await we(J,G.pathname,q.signal);if(re.type==="aborted")return{shortCircuited:!0};if(re.type==="error"){let le=Wa(re.partialMatches).route.id;return{matches:re.partialMatches,pendingActionResult:[le,{type:Gt.error,error:re.error}]}}else if(re.matches)J=re.matches;else{let{notFoundMatches:le,error:$e,route:qe}=pt(G.pathname);return{matches:le,pendingActionResult:[qe.id,{type:Gt.error,error:$e}]}}}let oe,je=Ef(J,G);if(!je.route.action&&!je.route.lazy)oe={type:Gt.error,error:_n(405,{method:q.method,pathname:G.pathname,routeId:je.route.id})};else if(oe=(await _e("action",j,q,[je],J,null))[je.route.id],q.signal.aborted)return{shortCircuited:!0};if(no(oe)){let re;return Fe&&Fe.replace!=null?re=Fe.replace:re=Ex(oe.response.headers.get("Location"),new URL(q.url),v)===j.location.pathname+j.location.search,await ce(q,oe,!0,{submission:ue,replace:re}),{shortCircuited:!0}}if(Ys(oe))throw _n(400,{type:"defer-action"});if(Dn(oe)){let re=Wa(J,je.route.id);return(Fe&&Fe.replace)!==!0&&(B=Mr.Push),{matches:J,pendingActionResult:[re.route.id,oe]}}return{matches:J,pendingActionResult:[je.route.id,oe]}}async function ge(q,G,ue,J,ie,Fe,ae,oe,je,re,le){let $e=ie||_v(G,Fe),qe=Fe||ae||Px($e),mt=!f&&(!x.v7_partialHydration||!je);if(J){if(mt){let ct=be(le);ne(or({navigation:$e},ct!==void 0?{actionData:ct}:{}),{flushSync:re})}let nt=await we(ue,G.pathname,q.signal);if(nt.type==="aborted")return{shortCircuited:!0};if(nt.type==="error"){let ct=Wa(nt.partialMatches).route.id;return{matches:nt.partialMatches,loaderData:{},errors:{[ct]:nt.error}}}else if(nt.matches)ue=nt.matches;else{let{error:ct,notFoundMatches:Nt,route:Vt}=pt(G.pathname);return{matches:Nt,loaderData:{},errors:{[Vt.id]:ct}}}}let st=c||u,[tt,ut]=bx(t.history,j,ue,qe,G,x.v7_partialHydration&&je===!0,x.v7_skipActionErrorRevalidation,h,m,y,K,T,E,st,v,le);if(Me(nt=>!(ue&&ue.some(ct=>ct.route.id===nt))||tt&&tt.some(ct=>ct.route.id===nt)),o=++d,tt.length===0&&ut.length===0){let nt=wt();return se(G,or({matches:ue,loaderData:{},errors:le&&Dn(le[1])?{[le[0]]:le[1].error}:null},Ax(le),nt?{fetchers:new Map(j.fetchers)}:{}),{flushSync:re}),{shortCircuited:!0}}if(mt){let nt={};if(!J){nt.navigation=$e;let ct=be(le);ct!==void 0&&(nt.actionData=ct)}ut.length>0&&(nt.fetchers=et(ut)),ne(nt,{flushSync:re})}ut.forEach(nt=>{ye(nt.key),nt.controller&&w.set(nt.key,nt.controller)});let Pt=()=>ut.forEach(nt=>ye(nt.key));$&&$.signal.addEventListener("abort",Pt);let{loaderResults:Bt,fetcherResults:Tt}=await Je(j,ue,tt,ut,q);if(q.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",Pt),ut.forEach(nt=>w.delete(nt.key));let xt=ed(Bt);if(xt)return await ce(q,xt.result,!0,{replace:oe}),{shortCircuited:!0};if(xt=ed(Tt),xt)return E.add(xt.key),await ce(q,xt.result,!0,{replace:oe}),{shortCircuited:!0};let{loaderData:zt,errors:Ct}=Ix(j,ue,Bt,le,ut,Tt,Y);Y.forEach((nt,ct)=>{nt.subscribe(Nt=>{(Nt||nt.done)&&Y.delete(ct)})}),x.v7_partialHydration&&je&&j.errors&&(Ct=or({},j.errors,Ct));let Mt=wt(),St=Se(o),Lt=Mt||St||ut.length>0;return or({matches:ue,loaderData:zt,errors:Ct},Lt?{fetchers:new Map(j.fetchers)}:{})}function be(q){if(q&&!Dn(q[1]))return{[q[0]]:q[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function et(q){return q.forEach(G=>{let ue=j.fetchers.get(G.key),J=Ju(void 0,ue?ue.data:void 0);j.fetchers.set(G.key,J)}),new Map(j.fetchers)}function pe(q,G,ue,J){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ye(q);let ie=(J&&J.flushSync)===!0,Fe=c||u,ae=P1(j.location,j.matches,v,x.v7_prependBasename,ue,x.v7_relativeSplatPath,G,J==null?void 0:J.relative),oe=Ha(Fe,ae,v),je=yt(oe,Fe,ae);if(je.active&&je.matches&&(oe=je.matches),!oe){lt(q,G,_n(404,{pathname:ae}),{flushSync:ie});return}let{path:re,submission:le,error:$e}=wx(x.v7_normalizeFormMethod,!0,ae,J);if($e){lt(q,G,$e,{flushSync:ie});return}let qe=Ef(oe,re),mt=(J&&J.preventScrollReset)===!0;if(le&&di(le.formMethod)){Ae(q,G,re,qe,oe,je.active,ie,mt,le);return}T.set(q,{routeId:G,path:re}),ht(q,G,re,qe,oe,je.active,ie,mt,le)}async function Ae(q,G,ue,J,ie,Fe,ae,oe,je){he(),T.delete(q);function re(Xt){if(!Xt.route.action&&!Xt.route.lazy){let yn=_n(405,{method:je.formMethod,pathname:ue,routeId:G});return lt(q,G,yn,{flushSync:ae}),!0}return!1}if(!Fe&&re(J))return;let le=j.fetchers.get(q);Te(q,nC(je,le),{flushSync:ae});let $e=new AbortController,qe=Ko(t.history,ue,$e.signal,je);if(Fe){let Xt=await we(ie,new URL(qe.url).pathname,qe.signal,q);if(Xt.type==="aborted")return;if(Xt.type==="error"){lt(q,G,Xt.error,{flushSync:ae});return}else if(Xt.matches){if(ie=Xt.matches,J=Ef(ie,ue),re(J))return}else{lt(q,G,_n(404,{pathname:ue}),{flushSync:ae});return}}w.set(q,$e);let mt=d,tt=(await _e("action",j,qe,[J],ie,q))[J.route.id];if(qe.signal.aborted){w.get(q)===$e&&w.delete(q);return}if(x.v7_fetcherPersist&&K.has(q)){if(no(tt)||Dn(tt)){Te(q,js(void 0));return}}else{if(no(tt))if(w.delete(q),o>mt){Te(q,js(void 0));return}else return E.add(q),Te(q,Ju(je)),ce(qe,tt,!1,{fetcherSubmission:je,preventScrollReset:oe});if(Dn(tt)){lt(q,G,tt.error);return}}if(Ys(tt))throw _n(400,{type:"defer-action"});let ut=j.navigation.location||j.location,Pt=Ko(t.history,ut,$e.signal),Bt=c||u,Tt=j.navigation.state!=="idle"?Ha(Bt,j.navigation.location,v):j.matches;Dt(Tt,"Didn't find any matches after fetcher action");let xt=++d;p.set(q,xt);let zt=Ju(je,tt.data);j.fetchers.set(q,zt);let[Ct,Mt]=bx(t.history,j,Tt,je,ut,!1,x.v7_skipActionErrorRevalidation,h,m,y,K,T,E,Bt,v,[J.route.id,tt]);Mt.filter(Xt=>Xt.key!==q).forEach(Xt=>{let yn=Xt.key,Ou=j.fetchers.get(yn),Sc=Ju(void 0,Ou?Ou.data:void 0);j.fetchers.set(yn,Sc),ye(yn),Xt.controller&&w.set(yn,Xt.controller)}),ne({fetchers:new Map(j.fetchers)});let St=()=>Mt.forEach(Xt=>ye(Xt.key));$e.signal.addEventListener("abort",St);let{loaderResults:Lt,fetcherResults:nt}=await Je(j,Tt,Ct,Mt,Pt);if($e.signal.aborted)return;$e.signal.removeEventListener("abort",St),p.delete(q),w.delete(q),Mt.forEach(Xt=>w.delete(Xt.key));let ct=ed(Lt);if(ct)return ce(Pt,ct.result,!1,{preventScrollReset:oe});if(ct=ed(nt),ct)return E.add(ct.key),ce(Pt,ct.result,!1,{preventScrollReset:oe});let{loaderData:Nt,errors:Vt}=Ix(j,Tt,Lt,void 0,Mt,nt,Y);if(j.fetchers.has(q)){let Xt=js(tt.data);j.fetchers.set(q,Xt)}Se(xt),j.navigation.state==="loading"&&xt>o?(Dt(B,"Expected pending action"),$&&$.abort(),se(j.navigation.location,{matches:Tt,loaderData:Nt,errors:Vt,fetchers:new Map(j.fetchers)})):(ne({errors:Vt,loaderData:Tx(j.loaderData,Nt,Tt,Vt),fetchers:new Map(j.fetchers)}),h=!1)}async function ht(q,G,ue,J,ie,Fe,ae,oe,je){let re=j.fetchers.get(q);Te(q,Ju(je,re?re.data:void 0),{flushSync:ae});let le=new AbortController,$e=Ko(t.history,ue,le.signal);if(Fe){let tt=await we(ie,new URL($e.url).pathname,$e.signal,q);if(tt.type==="aborted")return;if(tt.type==="error"){lt(q,G,tt.error,{flushSync:ae});return}else if(tt.matches)ie=tt.matches,J=Ef(ie,ue);else{lt(q,G,_n(404,{pathname:ue}),{flushSync:ae});return}}w.set(q,le);let qe=d,st=(await _e("loader",j,$e,[J],ie,q))[J.route.id];if(Ys(st)&&(st=await K2(st,$e.signal,!0)||st),w.get(q)===le&&w.delete(q),!$e.signal.aborted){if(K.has(q)){Te(q,js(void 0));return}if(no(st))if(o>qe){Te(q,js(void 0));return}else{E.add(q),await ce($e,st,!1,{preventScrollReset:oe});return}if(Dn(st)){lt(q,G,st.error);return}Dt(!Ys(st),"Unhandled fetcher deferred data"),Te(q,js(st.data))}}async function ce(q,G,ue,J){let{submission:ie,fetcherSubmission:Fe,preventScrollReset:ae,replace:oe}=J===void 0?{}:J;G.response.headers.has("X-Remix-Revalidate")&&(h=!0);let je=G.response.headers.get("Location");Dt(je,"Expected a Location header on the redirect Response"),je=Ex(je,new URL(q.url),v);let re=wh(j.location,je,{_isRedirect:!0});if(r){let tt=!1;if(G.response.headers.has("X-Remix-Reload-Document"))tt=!0;else if(q2.test(je)){const ut=t.history.createURL(je);tt=ut.origin!==e.location.origin||gu(ut.pathname,v)==null}if(tt){oe?e.location.replace(je):e.location.assign(je);return}}$=null;let le=oe===!0||G.response.headers.has("X-Remix-Replace")?Mr.Replace:Mr.Push,{formMethod:$e,formAction:qe,formEncType:mt}=j.navigation;!ie&&!Fe&&$e&&qe&&mt&&(ie=Px(j.navigation));let st=ie||Fe;if(LP.has(G.response.status)&&st&&di(st.formMethod))await me(le,re,{submission:or({},st,{formAction:je}),preventScrollReset:ae||D,enableViewTransition:ue?g:void 0});else{let tt=_v(re,ie);await me(le,re,{overrideNavigation:tt,fetcherSubmission:Fe,preventScrollReset:ae||D,enableViewTransition:ue?g:void 0})}}async function _e(q,G,ue,J,ie,Fe){let ae,oe={};try{ae=await KP(_,q,G,ue,J,ie,Fe,i,s)}catch(je){return J.forEach(re=>{oe[re.route.id]={type:Gt.error,error:je}}),oe}for(let[je,re]of Object.entries(ae))if(YP(re)){let le=re.result;oe[je]={type:Gt.redirect,response:GP(le,ue,je,ie,v,x.v7_relativeSplatPath)}}else oe[je]=await WP(re);return oe}async function Je(q,G,ue,J,ie){let Fe=q.matches,ae=_e("loader",q,ie,ue,G,null),oe=Promise.all(J.map(async le=>{if(le.matches&&le.match&&le.controller){let qe=(await _e("loader",q,Ko(t.history,le.path,le.controller.signal),[le.match],le.matches,le.key))[le.match.route.id];return{[le.key]:qe}}else return Promise.resolve({[le.key]:{type:Gt.error,error:_n(404,{pathname:le.path})}})})),je=await ae,re=(await oe).reduce((le,$e)=>Object.assign(le,$e),{});return await Promise.all([eC(G,je,ie.signal,Fe,q.loaderData),tC(G,re,J)]),{loaderResults:je,fetcherResults:re}}function he(){h=!0,m.push(...Me()),T.forEach((q,G)=>{w.has(G)&&y.add(G),ye(G)})}function Te(q,G,ue){ue===void 0&&(ue={}),j.fetchers.set(q,G),ne({fetchers:new Map(j.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function lt(q,G,ue,J){J===void 0&&(J={});let ie=Wa(j.matches,G);ke(q),ne({errors:{[ie.route.id]:ue},fetchers:new Map(j.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Ee(q){return z.set(q,(z.get(q)||0)+1),K.has(q)&&K.delete(q),j.fetchers.get(q)||VP}function ke(q){let G=j.fetchers.get(q);w.has(q)&&!(G&&G.state==="loading"&&p.has(q))&&ye(q),T.delete(q),p.delete(q),E.delete(q),x.v7_fetcherPersist&&K.delete(q),y.delete(q),j.fetchers.delete(q)}function gt(q){let G=(z.get(q)||0)-1;G<=0?(z.delete(q),K.add(q),x.v7_fetcherPersist||ke(q)):z.set(q,G),ne({fetchers:new Map(j.fetchers)})}function ye(q){let G=w.get(q);G&&(G.abort(),w.delete(q))}function Ce(q){for(let G of q){let ue=Ee(G),J=js(ue.data);j.fetchers.set(G,J)}}function wt(){let q=[],G=!1;for(let ue of E){let J=j.fetchers.get(ue);Dt(J,"Expected fetcher: "+ue),J.state==="loading"&&(E.delete(ue),q.push(ue),G=!0)}return Ce(q),G}function Se(q){let G=[];for(let[ue,J]of p)if(J<q){let ie=j.fetchers.get(ue);Dt(ie,"Expected fetcher: "+ue),ie.state==="loading"&&(ye(ue),p.delete(ue),G.push(ue))}return Ce(G),G.length>0}function Be(q,G){let ue=j.blockers.get(q)||Yu;return L.get(q)!==G&&L.set(q,G),ue}function _t(q){j.blockers.delete(q),L.delete(q)}function xe(q,G){let ue=j.blockers.get(q)||Yu;Dt(ue.state==="unblocked"&&G.state==="blocked"||ue.state==="blocked"&&G.state==="blocked"||ue.state==="blocked"&&G.state==="proceeding"||ue.state==="blocked"&&G.state==="unblocked"||ue.state==="proceeding"&&G.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+G.state);let J=new Map(j.blockers);J.set(q,G),ne({blockers:J})}function Ne(q){let{currentLocation:G,nextLocation:ue,historyAction:J}=q;if(L.size===0)return;L.size>1&&jl(!1,"A router only supports one blocker at a time");let ie=Array.from(L.entries()),[Fe,ae]=ie[ie.length-1],oe=j.blockers.get(Fe);if(!(oe&&oe.state==="proceeding")&&ae({currentLocation:G,nextLocation:ue,historyAction:J}))return Fe}function pt(q){let G=_n(404,{pathname:q}),ue=c||u,{matches:J,route:ie}=Rx(ue);return Me(),{notFoundMatches:J,route:ie,error:G}}function Me(q){let G=[];return Y.forEach((ue,J)=>{(!q||q(J))&&(ue.cancel(),G.push(J),Y.delete(J))}),G}function De(q,G,ue){if(A=q,F=G,k=ue||null,!C&&j.navigation===wv){C=!0;let J=Re(j.location,j.matches);J!=null&&ne({restoreScrollPosition:J})}return()=>{A=null,F=null,k=null}}function dt(q,G){return k&&k(q,G.map(J=>mP(J,j.loaderData)))||q.key}function Ie(q,G){if(A&&F){let ue=dt(q,G);A[ue]=F()}}function Re(q,G){if(A){let ue=dt(q,G),J=A[ue];if(typeof J=="number")return J}return null}function yt(q,G,ue){if(b)if(q){if(Object.keys(q[0].params).length>0)return{active:!0,matches:Bd(G,ue,v,!0)}}else return{active:!0,matches:Bd(G,ue,v,!0)||[]};return{active:!1,matches:null}}async function we(q,G,ue,J){if(!b)return{type:"success",matches:q};let ie=q;for(;;){let Fe=c==null,ae=c||u,oe=i;try{await b({signal:ue,path:G,matches:ie,fetcherKey:J,patch:(le,$e)=>{ue.aborted||Mx(le,$e,ae,oe,s)}})}catch(le){return{type:"error",error:le,partialMatches:ie}}finally{Fe&&!ue.aborted&&(u=[...u])}if(ue.aborted)return{type:"aborted"};let je=Ha(ae,G,v);if(je)return{type:"success",matches:je};let re=Bd(ae,G,v,!0);if(!re||ie.length===re.length&&ie.every((le,$e)=>le.route.id===re[$e].route.id))return{type:"success",matches:null};ie=re}}function Oe(q){i={},c=E0(q,s,void 0,i)}function ot(q,G){let ue=c==null;Mx(q,G,c||u,i,s),ue&&(u=[...u],ne({}))}return ee={get basename(){return v},get future(){return x},get state(){return j},get routes(){return u},get window(){return e},initialize:Z,subscribe:Ge,enableScrollRestoration:De,navigate:Ze,fetch:pe,revalidate:fe,createHref:q=>t.history.createHref(q),encodeLocation:q=>t.history.encodeLocation(q),getFetcher:Ee,deleteFetcher:gt,dispose:X,getBlocker:Be,deleteBlocker:_t,patchRoutes:ot,_internalFetchControllers:w,_internalActiveDeferreds:Y,_internalSetRoutes:Oe},ee}function UP(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function P1(t,e,r,n,s,i,u,c){let v,_;if(u){v=[];for(let x of e)if(v.push(x),x.route.id===u){_=x;break}}else v=e,_=e[e.length-1];let b=Ap(s||".",Tp(v,i),gu(t.pathname,r)||t.pathname,c==="path");if(s==null&&(b.search=t.search,b.hash=t.hash),(s==null||s===""||s===".")&&_){let x=H2(b.search);if(_.route.index&&!x)b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index";else if(!_.route.index&&x){let S=new URLSearchParams(b.search),I=S.getAll("index");S.delete("index"),I.filter(k=>k).forEach(k=>S.append("index",k));let A=S.toString();b.search=A?"?"+A:""}}return n&&r!=="/"&&(b.pathname=b.pathname==="/"?r:hs([r,b.pathname])),wo(b)}function wx(t,e,r,n){if(!n||!UP(n))return{path:r};if(n.formMethod&&!XP(n.formMethod))return{path:r,error:_n(405,{method:n.formMethod})};let s=()=>({path:r,error:_n(400,{type:"invalid-body"})}),i=n.formMethod||"get",u=t?i.toUpperCase():i.toLowerCase(),c=jE(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!di(u))return s();let S=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((I,A)=>{let[k,F]=A;return""+I+k+"="+F+`
`},""):String(n.body);return{path:r,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:S}}}else if(n.formEncType==="application/json"){if(!di(u))return s();try{let S=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:S,text:void 0}}}catch{return s()}}}Dt(typeof FormData=="function","FormData is not available in this environment");let v,_;if(n.formData)v=N1(n.formData),_=n.formData;else if(n.body instanceof FormData)v=N1(n.body),_=n.body;else if(n.body instanceof URLSearchParams)v=n.body,_=Sx(v);else if(n.body==null)v=new URLSearchParams,_=new FormData;else try{v=new URLSearchParams(n.body),_=Sx(v)}catch{return s()}let b={formMethod:u,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:_,json:void 0,text:void 0};if(di(b.formMethod))return{path:r,submission:b};let x=Sa(r);return e&&x.search&&H2(x.search)&&v.append("index",""),x.search="?"+v,{path:wo(x),submission:b}}function _x(t,e,r){r===void 0&&(r=!1);let n=t.findIndex(s=>s.route.id===e);return n>=0?t.slice(0,r?n+1:n):t}function bx(t,e,r,n,s,i,u,c,v,_,b,x,S,I,A,k){let F=k?Dn(k[1])?k[1].error:k[1].data:void 0,C=t.createURL(e.location),R=t.createURL(s),V=r;i&&e.errors?V=_x(r,Object.keys(e.errors)[0],!0):k&&Dn(k[1])&&(V=_x(r,k[0]));let U=k?k[1].statusCode:void 0,Q=u&&U&&U>=400,ee=V.filter((B,D)=>{let{route:$}=B;if($.lazy)return!0;if($.loader==null)return!1;if(i)return C1($,e.loaderData,e.errors);if(zP(e.loaderData,e.matches[D],B)||v.some(l=>l===B.route.id))return!0;let g=e.matches[D],a=B;return xx(B,or({currentUrl:C,currentParams:g.params,nextUrl:R,nextParams:a.params},n,{actionResult:F,actionStatus:U,defaultShouldRevalidate:Q?!1:c||C.pathname+C.search===R.pathname+R.search||C.search!==R.search||LE(g,a)}))}),j=[];return x.forEach((B,D)=>{if(i||!r.some(f=>f.route.id===B.routeId)||b.has(D))return;let $=Ha(I,B.path,A);if(!$){j.push({key:D,routeId:B.routeId,path:B.path,matches:null,match:null,controller:null});return}let g=e.fetchers.get(D),a=Ef($,B.path),l=!1;S.has(D)?l=!1:_.has(D)?(_.delete(D),l=!0):g&&g.state!=="idle"&&g.data===void 0?l=c:l=xx(a,or({currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:R,nextParams:r[r.length-1].params},n,{actionResult:F,actionStatus:U,defaultShouldRevalidate:Q?!1:c})),l&&j.push({key:D,routeId:B.routeId,path:B.path,matches:$,match:a,controller:new AbortController})}),[ee,j]}function C1(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,s=r!=null&&r[t.id]!==void 0;return!n&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!s}function zP(t,e,r){let n=!e||r.route.id!==e.route.id,s=t[r.route.id]===void 0;return n||s}function LE(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function xx(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function Mx(t,e,r,n,s){var i;let u;if(t){let _=n[t];Dt(_,"No route found to patch children into: routeId = "+t),_.children||(_.children=[]),u=_.children}else u=r;let c=e.filter(_=>!u.some(b=>VE(_,b))),v=E0(c,s,[t||"_","patch",String(((i=u)==null?void 0:i.length)||"0")],n);u.push(...v)}function VE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var s;return(s=e.children)==null?void 0:s.some(i=>VE(r,i))}):!1}async function $P(t,e,r){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=r[t.id];Dt(s,"No route found in manifest");let i={};for(let u in n){let v=s[u]!==void 0&&u!=="hasErrorBoundary";jl(!v,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!v&&!dP.has(u)&&(i[u]=n[u])}Object.assign(s,i),Object.assign(s,or({},e(s),{lazy:void 0}))}async function qP(t){let{matches:e}=t,r=e.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,i,u)=>Object.assign(s,{[r[u].route.id]:i}),{})}async function KP(t,e,r,n,s,i,u,c,v,_){let b=i.map(I=>I.route.lazy?$P(I.route,v,c):void 0),x=i.map((I,A)=>{let k=b[A],F=s.some(R=>R.route.id===I.route.id);return or({},I,{shouldLoad:F,resolve:async R=>(R&&n.method==="GET"&&(I.route.lazy||I.route.loader)&&(F=!0),F?HP(e,n,I,k,R,_):Promise.resolve({type:Gt.data,result:void 0}))})}),S=await t({matches:x,request:n,params:i[0].params,fetcherKey:u,context:_});try{await Promise.all(b)}catch{}return S}async function HP(t,e,r,n,s,i){let u,c,v=_=>{let b,x=new Promise((A,k)=>b=k);c=()=>b(),e.signal.addEventListener("abort",c);let S=A=>typeof _!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):_({request:e,params:r.params,context:i},...A!==void 0?[A]:[]),I=(async()=>{try{return{type:"data",result:await(s?s(k=>S(k)):S())}}catch(A){return{type:"error",result:A}}})();return Promise.race([I,x])};try{let _=r.route[t];if(n)if(_){let b,[x]=await Promise.all([v(_).catch(S=>{b=S}),n]);if(b!==void 0)throw b;u=x}else if(await n,_=r.route[t],_)u=await v(_);else if(t==="action"){let b=new URL(e.url),x=b.pathname+b.search;throw _n(405,{method:e.method,pathname:x,routeId:r.route.id})}else return{type:Gt.data,result:void 0};else if(_)u=await v(_);else{let b=new URL(e.url),x=b.pathname+b.search;throw _n(404,{pathname:x})}Dt(u.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(_){return{type:Gt.error,result:_}}finally{c&&e.signal.removeEventListener("abort",c)}return u}async function WP(t){let{result:e,type:r}=t;if(FE(e)){let x;try{let S=e.headers.get("Content-Type");S&&/\bapplication\/json\b/.test(S)?e.body==null?x=null:x=await e.json():x=await e.text()}catch(S){return{type:Gt.error,error:S}}return r===Gt.error?{type:Gt.error,error:new S0(e.status,e.statusText,x),statusCode:e.status,headers:e.headers}:{type:Gt.data,data:x,statusCode:e.status,headers:e.headers}}if(r===Gt.error){if(kx(e)){var n,s;if(e.data instanceof Error){var i,u;return{type:Gt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Gt.error,error:new S0(((n=e.init)==null?void 0:n.status)||500,void 0,e.data),statusCode:Fl(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Gt.error,error:e,statusCode:Fl(e)?e.status:void 0}}if(JP(e)){var c,v;return{type:Gt.deferred,deferredData:e,statusCode:(c=e.init)==null?void 0:c.status,headers:((v=e.init)==null?void 0:v.headers)&&new Headers(e.init.headers)}}if(kx(e)){var _,b;return{type:Gt.data,data:e.data,statusCode:(_=e.init)==null?void 0:_.status,headers:(b=e.init)!=null&&b.headers?new Headers(e.init.headers):void 0}}return{type:Gt.data,data:e}}function GP(t,e,r,n,s,i){let u=t.headers.get("Location");if(Dt(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!q2.test(u)){let c=n.slice(0,n.findIndex(v=>v.route.id===r)+1);u=P1(new URL(e.url),c,s,!0,u,i),t.headers.set("Location",u)}return t}function Ex(t,e,r){if(q2.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),i=gu(s.pathname,r)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Ko(t,e,r,n){let s=t.createURL(jE(e)).toString(),i={signal:r};if(n&&di(n.formMethod)){let{formMethod:u,formEncType:c}=n;i.method=u.toUpperCase(),c==="application/json"?(i.headers=new Headers({"Content-Type":c}),i.body=JSON.stringify(n.json)):c==="text/plain"?i.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?i.body=N1(n.formData):i.body=n.formData}return new Request(s,i)}function N1(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function Sx(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function ZP(t,e,r,n,s){let i={},u=null,c,v=!1,_={},b=r&&Dn(r[1])?r[1].error:void 0;return t.forEach(x=>{if(!(x.route.id in e))return;let S=x.route.id,I=e[S];if(Dt(!no(I),"Cannot handle redirect results in processLoaderData"),Dn(I)){let A=I.error;b!==void 0&&(A=b,b=void 0),u=u||{};{let k=Wa(t,S);u[k.route.id]==null&&(u[k.route.id]=A)}i[S]=void 0,v||(v=!0,c=Fl(I.error)?I.error.status:500),I.headers&&(_[S]=I.headers)}else Ys(I)?(n.set(S,I.deferredData),i[S]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!v&&(c=I.statusCode),I.headers&&(_[S]=I.headers)):(i[S]=I.data,I.statusCode&&I.statusCode!==200&&!v&&(c=I.statusCode),I.headers&&(_[S]=I.headers))}),b!==void 0&&r&&(u={[r[0]]:b},i[r[0]]=void 0),{loaderData:i,errors:u,statusCode:c||200,loaderHeaders:_}}function Ix(t,e,r,n,s,i,u){let{loaderData:c,errors:v}=ZP(e,r,n,u);return s.forEach(_=>{let{key:b,match:x,controller:S}=_,I=i[b];if(Dt(I,"Did not find corresponding fetcher result"),!(S&&S.signal.aborted))if(Dn(I)){let A=Wa(t.matches,x==null?void 0:x.route.id);v&&v[A.route.id]||(v=or({},v,{[A.route.id]:I.error})),t.fetchers.delete(b)}else if(no(I))Dt(!1,"Unhandled fetcher revalidation redirect");else if(Ys(I))Dt(!1,"Unhandled fetcher deferred data");else{let A=js(I.data);t.fetchers.set(b,A)}}),{loaderData:c,errors:v}}function Tx(t,e,r,n){let s=or({},e);for(let i of r){let u=i.route.id;if(e.hasOwnProperty(u)?e[u]!==void 0&&(s[u]=e[u]):t[u]!==void 0&&i.route.loader&&(s[u]=t[u]),n&&n.hasOwnProperty(u))break}return s}function Ax(t){return t?Dn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Wa(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Rx(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _n(t,e){let{pathname:r,routeId:n,method:s,type:i,message:u}=e===void 0?{}:e,c="Unknown Server Error",v="Unknown @remix-run/router error";return t===400?(c="Bad Request",s&&r&&n?v="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":i==="defer-action"?v="defer() is not supported in actions":i==="invalid-body"&&(v="Unable to encode submission body")):t===403?(c="Forbidden",v='Route "'+n+'" does not match URL "'+r+'"'):t===404?(c="Not Found",v='No route matches URL "'+r+'"'):t===405&&(c="Method Not Allowed",s&&r&&n?v="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(v='Invalid request method "'+s.toUpperCase()+'"')),new S0(t||500,c,new Error(v),!0)}function ed(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,s]=e[r];if(no(s))return{key:n,result:s}}}function jE(t){let e=typeof t=="string"?Sa(t):t;return wo(or({},e,{hash:""}))}function QP(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function YP(t){return FE(t.result)&&BP.has(t.result.status)}function Ys(t){return t.type===Gt.deferred}function Dn(t){return t.type===Gt.error}function no(t){return(t&&t.type)===Gt.redirect}function kx(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function JP(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function FE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function XP(t){return OP.has(t.toLowerCase())}function di(t){return NP.has(t.toLowerCase())}async function eC(t,e,r,n,s){let i=Object.entries(e);for(let u=0;u<i.length;u++){let[c,v]=i[u],_=t.find(S=>(S==null?void 0:S.route.id)===c);if(!_)continue;let b=n.find(S=>S.route.id===_.route.id),x=b!=null&&!LE(b,_)&&(s&&s[_.route.id])!==void 0;Ys(v)&&x&&await K2(v,r,!1).then(S=>{S&&(e[c]=S)})}}async function tC(t,e,r){for(let n=0;n<r.length;n++){let{key:s,routeId:i,controller:u}=r[n],c=e[s];t.find(_=>(_==null?void 0:_.route.id)===i)&&Ys(c)&&(Dt(u,"Expected an AbortController for revalidating fetcher deferred result"),await K2(c,u.signal,!0).then(_=>{_&&(e[s]=_)}))}}async function K2(t,e,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(e)){if(r)try{return{type:Gt.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Gt.error,error:s}}return{type:Gt.data,data:t.deferredData.data}}}function H2(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ef(t,e){let r=typeof e=="string"?Sa(e).search:e.search;if(t[t.length-1].route.index&&H2(r||""))return t[t.length-1];let n=DE(t);return n[n.length-1]}function Px(t){let{formMethod:e,formAction:r,formEncType:n,text:s,formData:i,json:u}=t;if(!(!e||!r||!n)){if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:r,formEncType:n,formData:i,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function _v(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function rC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ju(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function nC(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function js(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function iC(t,e){try{let r=t.sessionStorage.getItem(BE);if(r){let n=JSON.parse(r);for(let[s,i]of Object.entries(n||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function sC(t,e){if(e.size>0){let r={};for(let[n,s]of e)r[n]=[...s];try{t.sessionStorage.setItem(BE,JSON.stringify(r))}catch(n){jl(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I0.apply(this,arguments)}const Rp=te.createContext(null),UE=te.createContext(null),Ia=te.createContext(null),W2=te.createContext(null),Is=te.createContext({outlet:null,matches:[],isDataRoute:!1}),zE=te.createContext(null);function aC(t,e){let{relative:r}=e===void 0?{}:e;yu()||Dt(!1);let{basename:n,navigator:s}=te.useContext(Ia),{hash:i,pathname:u,search:c}=qE(t,{relative:r}),v=u;return n!=="/"&&(v=u==="/"?n:hs([n,u])),s.createHref({pathname:v,search:c,hash:i})}function yu(){return te.useContext(W2)!=null}function Do(){return yu()||Dt(!1),te.useContext(W2).location}function $E(t){te.useContext(Ia).static||te.useLayoutEffect(t)}function kp(){let{isDataRoute:t}=te.useContext(Is);return t?wC():oC()}function oC(){yu()||Dt(!1);let t=te.useContext(Rp),{basename:e,future:r,navigator:n}=te.useContext(Ia),{matches:s}=te.useContext(Is),{pathname:i}=Do(),u=JSON.stringify(Tp(s,r.v7_relativeSplatPath)),c=te.useRef(!1);return $E(()=>{c.current=!0}),te.useCallback(function(_,b){if(b===void 0&&(b={}),!c.current)return;if(typeof _=="number"){n.go(_);return}let x=Ap(_,JSON.parse(u),i,b.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:hs([e,x.pathname])),(b.replace?n.replace:n.push)(x,b.state,b)},[e,n,u,i,t])}const lC=te.createContext(null);function uC(t){let e=te.useContext(Is).outlet;return e&&te.createElement(lC.Provider,{value:t},e)}function qE(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=te.useContext(Ia),{matches:s}=te.useContext(Is),{pathname:i}=Do(),u=JSON.stringify(Tp(s,n.v7_relativeSplatPath));return te.useMemo(()=>Ap(t,JSON.parse(u),i,r==="path"),[t,u,i,r])}function fC(t,e,r,n){yu()||Dt(!1);let{navigator:s,static:i}=te.useContext(Ia),{matches:u}=te.useContext(Is),c=u[u.length-1],v=c?c.params:{};c&&c.pathname;let _=c?c.pathnameBase:"/";c&&c.route;let b=Do(),x;x=b;let S=x.pathname||"/",I=S;if(_!=="/"){let F=_.replace(/^\//,"").split("/");I="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let A=!i&&r&&r.matches&&r.matches.length>0?r.matches:Ha(t,{pathname:I});return mC(A&&A.map(F=>Object.assign({},F,{params:Object.assign({},v,F.params),pathname:hs([_,s.encodeLocation?s.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?_:hs([_,s.encodeLocation?s.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),u,r,n)}function hC(){let t=GE(),e=Fl(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),r?te.createElement("pre",{style:s},r):null,null)}const cC=te.createElement(hC,null);class dC extends te.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?te.createElement(Is.Provider,{value:this.props.routeContext},te.createElement(zE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pC(t){let{routeContext:e,match:r,children:n}=t,s=te.useContext(Rp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),te.createElement(Is.Provider,{value:e},n)}function mC(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let u=t,c=(s=r)==null?void 0:s.errors;if(c!=null){let b=u.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);b>=0||Dt(!1),u=u.slice(0,Math.min(u.length,b+1))}let v=!1,_=-1;if(r&&n&&n.v7_partialHydration)for(let b=0;b<u.length;b++){let x=u[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(_=b),x.route.id){let{loaderData:S,errors:I}=r,A=x.route.loader&&S[x.route.id]===void 0&&(!I||I[x.route.id]===void 0);if(x.route.lazy||A){v=!0,_>=0?u=u.slice(0,_+1):u=[u[0]];break}}}return u.reduceRight((b,x,S)=>{let I,A=!1,k=null,F=null;r&&(I=c&&x.route.id?c[x.route.id]:void 0,k=x.route.errorElement||cC,v&&(_<0&&S===0?(_C("route-fallback"),A=!0,F=null):_===S&&(A=!0,F=x.route.hydrateFallbackElement||null)));let C=e.concat(u.slice(0,S+1)),R=()=>{let V;return I?V=k:A?V=F:x.route.Component?V=te.createElement(x.route.Component,null):x.route.element?V=x.route.element:V=b,te.createElement(pC,{match:x,routeContext:{outlet:b,matches:C,isDataRoute:r!=null},children:V})};return r&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?te.createElement(dC,{location:r.location,revalidation:r.revalidation,component:k,error:I,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):R()},null)}var KE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KE||{}),HE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(HE||{});function vC(t){let e=te.useContext(Rp);return e||Dt(!1),e}function gC(t){let e=te.useContext(UE);return e||Dt(!1),e}function yC(t){let e=te.useContext(Is);return e||Dt(!1),e}function WE(t){let e=yC(),r=e.matches[e.matches.length-1];return r.route.id||Dt(!1),r.route.id}function GE(){var t;let e=te.useContext(zE),r=gC(HE.UseRouteError),n=WE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function wC(){let{router:t}=vC(KE.UseNavigateStable),e=WE(),r=te.useRef(!1);return $E(()=>{r.current=!0}),te.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,I0({fromRouteId:e},i)))},[t,e])}const Cx={};function _C(t,e,r){Cx[t]||(Cx[t]=!0)}function bC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ZE(t){let{to:e,replace:r,state:n,relative:s}=t;yu()||Dt(!1);let{future:i,static:u}=te.useContext(Ia),{matches:c}=te.useContext(Is),{pathname:v}=Do(),_=kp(),b=Ap(e,Tp(c,i.v7_relativeSplatPath),v,s==="path"),x=JSON.stringify(b);return te.useEffect(()=>_(JSON.parse(x),{replace:r,state:n,relative:s}),[_,x,s,r,n]),null}function D1(t){return uC(t.context)}function xC(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Mr.Pop,navigator:i,static:u=!1,future:c}=t;yu()&&Dt(!1);let v=e.replace(/^\/*/,"/"),_=te.useMemo(()=>({basename:v,navigator:i,static:u,future:I0({v7_relativeSplatPath:!1},c)}),[v,c,i,u]);typeof n=="string"&&(n=Sa(n));let{pathname:b="/",search:x="",hash:S="",state:I=null,key:A="default"}=n,k=te.useMemo(()=>{let F=gu(b,v);return F==null?null:{location:{pathname:F,search:x,hash:S,state:I,key:A},navigationType:s}},[v,b,x,S,I,A,s]);return k==null?null:te.createElement(Ia.Provider,{value:_},te.createElement(W2.Provider,{children:r,value:k}))}new Promise(()=>{});function MC(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:te.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:te.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:te.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_h.apply(this,arguments)}function EC(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function SC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IC(t,e){return t.button===0&&(!e||e==="_self")&&!SC(t)}const TC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AC="6";try{window.__reactRouterVersion=AC}catch{}function RC(t,e){return FP({basename:void 0,future:_h({},void 0,{v7_prependBasename:!0}),history:fP({window:void 0}),hydrationData:kC(),routes:t,mapRouteProperties:MC,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function kC(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_h({},e,{errors:PC(e.errors)})),e}function PC(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")r[n]=new S0(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let u=new i(s.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let i=new Error(s.message);i.stack="",r[n]=i}}else r[n]=s;return r}const CC=te.createContext({isTransitioning:!1}),NC=te.createContext(new Map),DC="startTransition",Nx=YA[DC],OC="flushSync",Dx=uP[OC];function BC(t){Nx?Nx(t):t()}function Xu(t){Dx?Dx(t):t()}let LC=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function VC(t){let{fallbackElement:e,router:r,future:n}=t,[s,i]=te.useState(r.state),[u,c]=te.useState(),[v,_]=te.useState({isTransitioning:!1}),[b,x]=te.useState(),[S,I]=te.useState(),[A,k]=te.useState(),F=te.useRef(new Map),{v7_startTransition:C}=n||{},R=te.useCallback(B=>{C?BC(B):B()},[C]),V=te.useCallback((B,D)=>{let{deletedFetchers:$,flushSync:g,viewTransitionOpts:a}=D;B.fetchers.forEach((f,h)=>{f.data!==void 0&&F.current.set(h,f.data)}),$.forEach(f=>F.current.delete(f));let l=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!a||l){g?Xu(()=>i(B)):R(()=>i(B));return}if(g){Xu(()=>{S&&(b&&b.resolve(),S.skipTransition()),_({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})});let f=r.window.document.startViewTransition(()=>{Xu(()=>i(B))});f.finished.finally(()=>{Xu(()=>{x(void 0),I(void 0),c(void 0),_({isTransitioning:!1})})}),Xu(()=>I(f));return}S?(b&&b.resolve(),S.skipTransition(),k({state:B,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(c(B),_({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))},[r.window,S,b,F,R]);te.useLayoutEffect(()=>r.subscribe(V),[r,V]),te.useEffect(()=>{v.isTransitioning&&!v.flushSync&&x(new LC)},[v]),te.useEffect(()=>{if(b&&u&&r.window){let B=u,D=b.promise,$=r.window.document.startViewTransition(async()=>{R(()=>i(B)),await D});$.finished.finally(()=>{x(void 0),I(void 0),c(void 0),_({isTransitioning:!1})}),I($)}},[R,u,b,r.window]),te.useEffect(()=>{b&&u&&s.location.key===u.location.key&&b.resolve()},[b,S,s.location,u]),te.useEffect(()=>{!v.isTransitioning&&A&&(c(A.state),_({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}),k(void 0))},[v.isTransitioning,A]),te.useEffect(()=>{},[]);let U=te.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:B=>r.navigate(B),push:(B,D,$)=>r.navigate(B,{state:D,preventScrollReset:$==null?void 0:$.preventScrollReset}),replace:(B,D,$)=>r.navigate(B,{replace:!0,state:D,preventScrollReset:$==null?void 0:$.preventScrollReset})}),[r]),Q=r.basename||"/",ee=te.useMemo(()=>({router:r,navigator:U,static:!1,basename:Q}),[r,U,Q]),j=te.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return te.useEffect(()=>bC(n,r.future),[n,r.future]),te.createElement(te.Fragment,null,te.createElement(Rp.Provider,{value:ee},te.createElement(UE.Provider,{value:s},te.createElement(NC.Provider,{value:F.current},te.createElement(CC.Provider,{value:v},te.createElement(xC,{basename:Q,location:s.location,navigationType:s.historyAction,navigator:U,future:j},s.initialized||r.future.v7_partialHydration?te.createElement(jC,{routes:r.routes,future:r.future,state:s}):e))))),null)}const jC=te.memo(FC);function FC(t){let{routes:e,future:r,state:n}=t;return fC(e,void 0,n,r)}const UC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zf=te.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:u,state:c,target:v,to:_,preventScrollReset:b,viewTransition:x}=e,S=EC(e,TC),{basename:I}=te.useContext(Ia),A,k=!1;if(typeof _=="string"&&zC.test(_)&&(A=_,UC))try{let V=new URL(window.location.href),U=_.startsWith("//")?new URL(V.protocol+_):new URL(_),Q=gu(U.pathname,I);U.origin===V.origin&&Q!=null?_=Q+U.search+U.hash:k=!0}catch{}let F=aC(_,{relative:s}),C=$C(_,{replace:u,state:c,target:v,preventScrollReset:b,relative:s,viewTransition:x});function R(V){n&&n(V),V.defaultPrevented||C(V)}return te.createElement("a",_h({},S,{href:A||F,onClick:k||i?n:R,ref:r,target:v}))});var Ox;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ox||(Ox={}));var Bx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bx||(Bx={}));function $C(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:u,viewTransition:c}=e===void 0?{}:e,v=kp(),_=Do(),b=qE(t,{relative:u});return te.useCallback(x=>{if(IC(x,r)){x.preventDefault();let S=n!==void 0?n:wo(_)===wo(b);v(t,{replace:S,state:s,preventScrollReset:i,relative:u,viewTransition:c})}},[_,v,b,n,s,r,t,i,u,c])}var qC=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function QE({packageName:t,customMessages:e}){let r=t;const n={...qC,...e};function s(i,u){if(!u)return`${r}: ${i}`;let c=i;const v=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const _ of v){const b=(u[_[1]]||"").toString();c=c.replace(`{{${_[1]}}}`,b)}return`${r}: ${c}`}return{setPackageName({packageName:i}){return typeof i=="string"&&(r=i),this},setMessages({customMessages:i}){return Object.assign(n,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(s(n.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(s(n.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(s(n.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(s(n.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(s(n.MissingClerkProvider,i))},throw(i){throw new Error(s(i))}}}var YE=Object.defineProperty,KC=Object.getOwnPropertyDescriptor,HC=Object.getOwnPropertyNames,WC=Object.prototype.hasOwnProperty,GC=(t,e)=>{for(var r in e)YE(t,r,{get:e[r],enumerable:!0})},ZC=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of HC(e))!WC.call(t,s)&&s!==r&&YE(t,s,{get:()=>e[s],enumerable:!(n=KC(e,s))||n.enumerable});return t},QC=(t,e,r)=>(ZC(t,e,"default"),r),YC={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},JC=new Set(["first_factor","second_factor","multi_factor"]),XC=new Set(["strict_mfa","strict","moderate","lax"]),eN=t=>typeof t=="number"&&t>0,tN=t=>JC.has(t),rN=t=>XC.has(t),nN=(t,e)=>{const{orgId:r,orgRole:n,orgPermissions:s}=e;return!t.role&&!t.permission||!r||!n||!s?null:t.permission?s.includes(t.permission):t.role?n===t.role:null},iN=t=>{if(!t)return!1;const e=s=>typeof s=="string"?YC[s]:s,r=typeof t=="string"&&rN(t),n=typeof t=="object"&&tN(t.level)&&eN(t.afterMinutes);return r||n?e.bind(null,t):!1},sN=(t,{factorVerificationAge:e})=>{if(!t.reverification||!e)return null;const r=iN(t.reverification);if(!r)return null;const{level:n,afterMinutes:s}=r(),[i,u]=e,c=i!==-1?s>i:null,v=u!==-1?s>u:null;switch(n){case"first_factor":return c;case"second_factor":return u!==-1?v:c;case"multi_factor":return u===-1?c:c&&v}},aN=t=>e=>{if(!t.userId)return!1;const r=nN(e,t),n=sN(e,t);return[r,n].some(s=>s===null)?[r,n].some(s=>s===!0):[r,n].every(s=>s===!0)},JE=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,oN=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],XE="pk_live_",lN="pk_test_";function Lx(t,e={}){if(t=t||"",!t||!O1(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!O1(t))throw new Error("Publishable key not valid.");return null}const r=t.startsWith(XE)?"production":"development";let n=JE(t.split("_")[2]);return n=n.slice(0,-1),e.proxyUrl?n=e.proxyUrl:r!=="development"&&e.domain&&(n=`clerk.${e.domain}`),{instanceType:r,frontendApi:n}}function O1(t=""){try{const e=t.startsWith(XE)||t.startsWith(lN),r=JE(t.split("_")[2]||"").endsWith("$");return e&&r}catch{return!1}}function uN(){const t=new Map;return{isDevOrStagingUrl:e=>{if(!e)return!1;const r=typeof e=="string"?e:e.hostname;let n=t.get(r);return n===void 0&&(n=oN.some(s=>r.endsWith(s)),t.set(r,n)),n}}}var e8={exports:{}},t8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=te;function fN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hN=typeof Object.is=="function"?Object.is:fN,cN=Ul.useState,dN=Ul.useEffect,pN=Ul.useLayoutEffect,mN=Ul.useDebugValue;function vN(t,e){var r=e(),n=cN({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return pN(function(){s.value=r,s.getSnapshot=e,bv(s)&&i({inst:s})},[t,r,e]),dN(function(){return bv(s)&&i({inst:s}),t(function(){bv(s)&&i({inst:s})})},[t]),mN(r),r}function bv(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hN(t,r)}catch{return!0}}function gN(t,e){return e()}var yN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gN:vN;t8.useSyncExternalStore=Ul.useSyncExternalStore!==void 0?Ul.useSyncExternalStore:yN;e8.exports=t8;var r8=e8.exports;const n8=0,i8=1,s8=2,Vx=3;var jx=Object.prototype.hasOwnProperty;function B1(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&B1(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(jx.call(t,r)&&++n&&!jx.call(e,r)||!(r in e)||!B1(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const gi=new WeakMap,Js=()=>{},Rr=Js(),T0=Object,It=t=>t===Rr,Gn=t=>typeof t=="function",gs=(t,e)=>({...t,...e}),a8=t=>Gn(t.then),xv={},td={},G2="undefined",Gh=typeof window!=G2,L1=typeof document!=G2,wN=Gh&&"Deno"in window,_N=()=>Gh&&typeof window.requestAnimationFrame!=G2,$s=(t,e)=>{const r=gi.get(t);return[()=>!It(e)&&t.get(e)||xv,n=>{if(!It(e)){const s=t.get(e);e in td||(td[e]=s),r[5](e,gs(s,n),s||xv)}},r[6],()=>!It(e)&&e in td?td[e]:!It(e)&&t.get(e)||xv]};let V1=!0;const bN=()=>V1,[j1,F1]=Gh&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Js,Js],xN=()=>{const t=L1&&document.visibilityState;return It(t)||t!=="hidden"},MN=t=>(L1&&document.addEventListener("visibilitychange",t),j1("focus",t),()=>{L1&&document.removeEventListener("visibilitychange",t),F1("focus",t)}),EN=t=>{const e=()=>{V1=!0,t()},r=()=>{V1=!1};return j1("online",e),j1("offline",r),()=>{F1("online",e),F1("offline",r)}},SN={isOnline:bN,isVisible:xN},IN={initFocus:MN,initReconnect:EN},Fx=!Ve.useId,bh=!Gh||wN,TN=t=>_N()?window.requestAnimationFrame(t):setTimeout(t,1),$f=bh?te.useEffect:te.useLayoutEffect,Mv=typeof navigator<"u"&&navigator.connection,Ux=!bh&&Mv&&(["slow-2g","2g"].includes(Mv.effectiveType)||Mv.saveData),rd=new WeakMap,Ev=(t,e)=>T0.prototype.toString.call(t)===`[object ${e}]`;let AN=0;const U1=t=>{const e=typeof t,r=Ev(t,"Date"),n=Ev(t,"RegExp"),s=Ev(t,"Object");let i,u;if(T0(t)===t&&!r&&!n){if(i=rd.get(t),i)return i;if(i=++AN+"~",rd.set(t,i),Array.isArray(t)){for(i="@",u=0;u<t.length;u++)i+=U1(t[u])+",";rd.set(t,i)}if(s){i="#";const c=T0.keys(t).sort();for(;!It(u=c.pop());)It(t[u])||(i+=u+":"+U1(t[u])+",");rd.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},zl=t=>{if(Gn(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?U1(t):"",[t,e]};let RN=0;const z1=()=>++RN;async function o8(...t){const[e,r,n,s]=t,i=gs({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let u=i.populateCache;const c=i.rollbackOnError;let v=i.optimisticData;const _=S=>typeof c=="function"?c(S):c!==!1,b=i.throwOnError;if(Gn(r)){const S=r,I=[],A=e.keys();for(const k of A)!/^\$(inf|sub)\$/.test(k)&&S(e.get(k)._k)&&I.push(k);return Promise.all(I.map(x))}return x(r);async function x(S){const[I]=zl(S);if(!I)return;const[A,k]=$s(e,I),[F,C,R,V]=gi.get(e),U=()=>{const l=F[I];return(Gn(i.revalidate)?i.revalidate(A().data,S):i.revalidate!==!1)&&(delete R[I],delete V[I],l&&l[0])?l[0](s8).then(()=>A().data):A().data};if(t.length<3)return U();let Q=n,ee;const j=z1();C[I]=[j,0];const B=!It(v),D=A(),$=D.data,g=D._c,a=It(g)?$:g;if(B&&(v=Gn(v)?v(a,$):v,k({data:v,_c:a})),Gn(Q))try{Q=Q(a)}catch(l){ee=l}if(Q&&a8(Q))if(Q=await Q.catch(l=>{ee=l}),j!==C[I][0]){if(ee)throw ee;return Q}else ee&&B&&_(ee)&&(u=!0,k({data:a,_c:Rr}));if(u&&!ee)if(Gn(u)){const l=u(Q,a);k({data:l,error:Rr,_c:Rr})}else k({data:Q,error:Rr,_c:Rr});if(C[I][1]=z1(),Promise.resolve(U()).then(()=>{k({_c:Rr})}),ee){if(b)throw ee;return}return Q}}const zx=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},l8=(t,e)=>{if(!gi.has(t)){const r=gs(IN,e),n=Object.create(null),s=o8.bind(Rr,t);let i=Js;const u=Object.create(null),c=(b,x)=>{const S=u[b]||[];return u[b]=S,S.push(x),()=>S.splice(S.indexOf(x),1)},v=(b,x,S)=>{t.set(b,x);const I=u[b];if(I)for(const A of I)A(x,S)},_=()=>{if(!gi.has(t)&&(gi.set(t,[n,Object.create(null),Object.create(null),Object.create(null),s,v,c]),!bh)){const b=r.initFocus(setTimeout.bind(Rr,zx.bind(Rr,n,n8))),x=r.initReconnect(setTimeout.bind(Rr,zx.bind(Rr,n,i8)));i=()=>{b&&b(),x&&x(),gi.delete(t)}}};return _(),[t,s,_,i]}return[t,gi.get(t)[4]]},kN=(t,e,r,n,s)=>{const i=r.errorRetryCount,u=s.retryCount,c=~~((Math.random()+.5)*(1<<(u<8?u:8)))*r.errorRetryInterval;!It(i)&&u>i||setTimeout(n,c,s)},PN=B1,[Zh,u8]=l8(new Map),f8=gs({onLoadingSlow:Js,onSuccess:Js,onError:Js,onErrorRetry:kN,onDiscarded:Js,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ux?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ux?5e3:3e3,compare:PN,isPaused:()=>!1,cache:Zh,mutate:u8,fallback:{}},SN),h8=(t,e)=>{const r=gs(t,e);if(e){const{use:n,fallback:s}=t,{use:i,fallback:u}=e;n&&i&&(r.use=n.concat(i)),s&&u&&(r.fallback=gs(s,u))}return r},$1=te.createContext({}),CN=t=>{const{value:e}=t,r=te.useContext($1),n=Gn(e),s=te.useMemo(()=>n?e(r):e,[n,r,e]),i=te.useMemo(()=>n?s:h8(r,s),[n,r,s]),u=s&&s.provider,c=te.useRef(Rr);u&&!c.current&&(c.current=l8(u(i.cache||Zh),s));const v=c.current;return v&&(i.cache=v[0],i.mutate=v[1]),$f(()=>{if(v)return v[2]&&v[2](),v[3]},[]),te.createElement($1.Provider,gs(t,{value:i}))},c8="$inf$",d8=Gh&&window.__SWR_DEVTOOLS_USE__,NN=d8?window.__SWR_DEVTOOLS_USE__:[],DN=()=>{d8&&(window.__SWR_DEVTOOLS_REACT__=Ve)},p8=t=>Gn(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],m8=()=>gs(f8,te.useContext($1)),ON=(t,e)=>{const[r,n]=zl(t),[,,,s]=gi.get(Zh);if(s[r])return s[r];const i=e(n);return s[r]=i,i},BN=t=>(e,r,n)=>t(e,r&&((...i)=>{const[u]=zl(e),[,,,c]=gi.get(Zh);if(u.startsWith(c8))return r(...i);const v=c[u];return It(v)?r(...i):(delete c[u],v)}),n),LN=NN.concat(BN),VN=t=>function(...r){const n=m8(),[s,i,u]=p8(r),c=h8(n,u);let v=t;const{use:_}=c,b=(_||[]).concat(LN);for(let x=b.length;x--;)v=b[x](v);return v(s,i||c.fetcher||null,c)},jN=(t,e,r)=>{const n=e[t]||(e[t]=[]);return n.push(r),()=>{const s=n.indexOf(r);s>=0&&(n[s]=n[n.length-1],n.pop())}},FN=(t,e)=>(...r)=>{const[n,s,i]=p8(r),u=(i.use||[]).concat(e);return t(n,s,{...i,use:u})};DN();const UN=()=>{},zN=UN(),q1=Object,$x=t=>t===zN,$N=t=>typeof t=="function",nd=new WeakMap,Sv=(t,e)=>q1.prototype.toString.call(t)===`[object ${e}]`;let qN=0;const K1=t=>{const e=typeof t,r=Sv(t,"Date"),n=Sv(t,"RegExp"),s=Sv(t,"Object");let i,u;if(q1(t)===t&&!r&&!n){if(i=nd.get(t),i)return i;if(i=++qN+"~",nd.set(t,i),Array.isArray(t)){for(i="@",u=0;u<t.length;u++)i+=K1(t[u])+",";nd.set(t,i)}if(s){i="#";const c=q1.keys(t).sort();for(;!$x(u=c.pop());)$x(t[u])||(i+=u+":"+K1(t[u])+",");nd.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},KN=t=>{if($N(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?K1(t):"",[t,e]},HN=t=>KN(t)[0],Iv=Ve.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Tv={dedupe:!0},WN=(t,e,r)=>{const{cache:n,compare:s,suspense:i,fallbackData:u,revalidateOnMount:c,revalidateIfStale:v,refreshInterval:_,refreshWhenHidden:b,refreshWhenOffline:x,keepPreviousData:S}=r,[I,A,k,F]=gi.get(n),[C,R]=zl(t),V=te.useRef(!1),U=te.useRef(!1),Q=te.useRef(C),ee=te.useRef(e),j=te.useRef(r),B=()=>j.current,D=()=>B().isVisible()&&B().isOnline(),[$,g,a,l]=$s(n,C),f=te.useRef({}).current,h=It(u)?It(r.fallback)?Rr:r.fallback[C]:u,m=(se,Ze)=>{for(const fe in f){const me=fe;if(me==="data"){if(!s(se[me],Ze[me])&&(!It(se[me])||!s(K,Ze[me])))return!1}else if(Ze[me]!==se[me])return!1}return!0},y=te.useMemo(()=>{const se=!C||!e?!1:It(c)?B().isPaused()||i?!1:v!==!1:c,Ze=et=>{const pe=gs(et);return delete pe._k,se?{isValidating:!0,isLoading:!0,...pe}:pe},fe=$(),me=l(),at=Ze(fe),ge=fe===me?at:Ze(me);let be=at;return[()=>{const et=Ze($());return m(et,be)?(be.data=et.data,be.isLoading=et.isLoading,be.isValidating=et.isValidating,be.error=et.error,be):(be=et,et)},()=>ge]},[n,C]),w=r8.useSyncExternalStore(te.useCallback(se=>a(C,(Ze,fe)=>{m(fe,Ze)||se()}),[n,C]),y[0],y[1]),d=!V.current,o=I[C]&&I[C].length>0,p=w.data,E=It(p)?h&&a8(h)?Iv(h):h:p,T=w.error,z=te.useRef(E),K=S?It(p)?It(z.current)?E:z.current:p:E,Y=o&&!It(T)?!1:d&&!It(c)?c:B().isPaused()?!1:i?It(E)?!1:v:It(E)||v,L=!!(C&&e&&d&&Y),H=It(w.isValidating)?L:w.isValidating,Z=It(w.isLoading)?L:w.isLoading,X=te.useCallback(async se=>{const Ze=ee.current;if(!C||!Ze||U.current||B().isPaused())return!1;let fe,me,at=!0;const ge=se||{},be=!k[C]||!ge.dedupe,et=()=>Fx?!U.current&&C===Q.current&&V.current:C===Q.current,pe={isValidating:!1,isLoading:!1},Ae=()=>{g(pe)},ht=()=>{const _e=k[C];_e&&_e[1]===me&&delete k[C]},ce={isValidating:!0};It($().data)&&(ce.isLoading=!0);try{if(be&&(g(ce),r.loadingTimeout&&It($().data)&&setTimeout(()=>{at&&et()&&B().onLoadingSlow(C,r)},r.loadingTimeout),k[C]=[Ze(R),z1()]),[fe,me]=k[C],fe=await fe,be&&setTimeout(ht,r.dedupingInterval),!k[C]||k[C][1]!==me)return be&&et()&&B().onDiscarded(C),!1;pe.error=Rr;const _e=A[C];if(!It(_e)&&(me<=_e[0]||me<=_e[1]||_e[1]===0))return Ae(),be&&et()&&B().onDiscarded(C),!1;const Je=$().data;pe.data=s(Je,fe)?Je:fe,be&&et()&&B().onSuccess(fe,C,r)}catch(_e){ht();const Je=B(),{shouldRetryOnError:he}=Je;Je.isPaused()||(pe.error=_e,be&&et()&&(Je.onError(_e,C,Je),(he===!0||Gn(he)&&he(_e))&&(!B().revalidateOnFocus||!B().revalidateOnReconnect||D())&&Je.onErrorRetry(_e,C,Je,Te=>{const lt=I[C];lt&&lt[0]&&lt[0](Vx,Te)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return at=!1,Ae(),!0},[C,n]),Ge=te.useCallback((...se)=>o8(n,Q.current,...se),[]);if($f(()=>{ee.current=e,j.current=r,It(p)||(z.current=p)}),$f(()=>{if(!C)return;const se=X.bind(Rr,Tv);let Ze=0;B().revalidateOnFocus&&(Ze=Date.now()+B().focusThrottleInterval);const me=jN(C,I,(at,ge={})=>{if(at==n8){const be=Date.now();B().revalidateOnFocus&&be>Ze&&D()&&(Ze=be+B().focusThrottleInterval,se())}else if(at==i8)B().revalidateOnReconnect&&D()&&se();else{if(at==s8)return X();if(at==Vx)return X(ge)}});return U.current=!1,Q.current=C,V.current=!0,g({_k:R}),Y&&(It(E)||bh?se():TN(se)),()=>{U.current=!0,me()}},[C]),$f(()=>{let se;function Ze(){const me=Gn(_)?_($().data):_;me&&se!==-1&&(se=setTimeout(fe,me))}function fe(){!$().error&&(b||B().isVisible())&&(x||B().isOnline())?X(Tv).then(Ze):Ze()}return Ze(),()=>{se&&(clearTimeout(se),se=-1)}},[_,b,x,C]),te.useDebugValue(K),i&&It(E)&&C){if(!Fx&&bh)throw new Error("Fallback data is required when using Suspense in SSR.");ee.current=e,j.current=r,U.current=!1;const se=F[C];if(!It(se)){const Ze=Ge(se);Iv(Ze)}if(It(T)){const Ze=X(Tv);It(K)||(Ze.status="fulfilled",Ze.value=!0),Iv(Ze)}else throw T}return{mutate:Ge,get data(){return f.data=!0,K},get error(){return f.error=!0,T},get isValidating(){return f.isValidating=!0,H},get isLoading(){return f.isLoading=!0,Z}}},GN=T0.defineProperty(CN,"defaultValue",{value:f8}),Z2=VN(WN),ZN=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:GN,default:Z2,mutate:u8,preload:ON,unstable_serialize:HN,useSWRConfig:m8},Symbol.toStringTag,{value:"Module"})),QN=()=>{},YN=QN(),H1=Object,qx=t=>t===YN,JN=t=>typeof t=="function",id=new WeakMap,Av=(t,e)=>H1.prototype.toString.call(t)===`[object ${e}]`;let XN=0;const W1=t=>{const e=typeof t,r=Av(t,"Date"),n=Av(t,"RegExp"),s=Av(t,"Object");let i,u;if(H1(t)===t&&!r&&!n){if(i=id.get(t),i)return i;if(i=++XN+"~",id.set(t,i),Array.isArray(t)){for(i="@",u=0;u<t.length;u++)i+=W1(t[u])+",";id.set(t,i)}if(s){i="#";const c=H1.keys(t).sort();for(;!qx(u=c.pop());)qx(t[u])||(i+=u+":"+W1(t[u])+",");id.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},eD=t=>{if(JN(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?W1(t):"",[t,e]},tD=t=>eD(t?t(0,null):null)[0],Rv=Promise.resolve(),rD=t=>(e,r,n)=>{const s=te.useRef(!1),{cache:i,initialSize:u=1,revalidateAll:c=!1,persistSize:v=!1,revalidateFirstPage:_=!0,revalidateOnMount:b=!1,parallel:x=!1}=n,[,,,S]=gi.get(Zh);let I;try{I=tD(e),I&&(I=c8+I)}catch{}const[A,k,F]=$s(i,I),C=te.useCallback(()=>It(A()._l)?u:A()._l,[i,I,u]);r8.useSyncExternalStore(te.useCallback(B=>I?F(I,()=>{B()}):()=>{},[i,I]),C,C);const R=te.useCallback(()=>{const B=A()._l;return It(B)?u:B},[I,u]),V=te.useRef(R());$f(()=>{if(!s.current){s.current=!0;return}I&&k({_l:v?V.current:R()})},[I,i]);const U=b&&!s.current,Q=t(I,async B=>{const D=A()._i,$=A()._r;k({_r:Rr});const g=[],a=R(),[l]=$s(i,B),f=l().data,h=[];let m=null;for(let y=0;y<a;++y){const[w,d]=zl(e(y,x?null:m));if(!w)break;const[o,p]=$s(i,w);let E=o().data;const T=c||D||It(E)||_&&!y&&!It(f)||U||f&&!It(f[y])&&!n.compare(f[y],E);if(r&&(typeof $=="function"?$(E,d):T)){const z=async()=>{if(!(w in S))E=await r(d);else{const Y=S[w];delete S[w],E=await Y}p({data:E,_k:d}),g[y]=E};x?h.push(z):await z()}else g[y]=E;x||(m=E)}return x&&await Promise.all(h.map(y=>y())),k({_i:Rr}),g},n),ee=te.useCallback(function(B,D){const $=typeof D=="boolean"?{revalidate:D}:D||{},g=$.revalidate!==!1;return I?(g&&(It(B)?k({_i:!0,_r:$.revalidate}):k({_i:!1,_r:$.revalidate})),arguments.length?Q.mutate(B,{...$,revalidate:g}):Q.mutate()):Rv},[I,i]),j=te.useCallback(B=>{if(!I)return Rv;const[,D]=$s(i,I);let $;if(Gn(B)?$=B(R()):typeof B=="number"&&($=B),typeof $!="number")return Rv;D({_l:$}),V.current=$;const g=[],[a]=$s(i,I);let l=null;for(let f=0;f<$;++f){const[h]=zl(e(f,l)),[m]=$s(i,h),y=h?m().data:Rr;if(It(y))return ee(a().data);g.push(y),l=y}return ee(g)},[I,i,ee,R]);return{size:R(),setSize:j,mutate:ee,get data(){return Q.data},get error(){return Q.error},get isValidating(){return Q.isValidating},get isLoading(){return Q.isLoading}}},nD=FN(Z2,rD);var Kx=Object.prototype.hasOwnProperty;function Hx(t,e,r){for(r of t.keys())if(qf(r,e))return r}function qf(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&qf(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=Hx(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=Hx(e,s),!s)||!qf(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(Kx.call(t,r)&&++n&&!Kx.call(e,r)||!(r in e)||!qf(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}function iD(t,e){if(!t)throw typeof e=="string"?new Error(e):new Error(`${e.displayName} not found`)}var wu=(t,e)=>{const{assertCtxFn:r=iD}={},n=Ve.createContext(void 0);return n.displayName=t,[n,()=>{const u=Ve.useContext(n);return r(u,`${t} not found`),u.value},()=>{const u=Ve.useContext(n);return u?u.value:{}}]},Q2={};GC(Q2,{useSWR:()=>Z2,useSWRInfinite:()=>nD});QC(Q2,ZN);var[v8,sD]=wu("ClerkInstanceContext"),[aD,oD]=wu("UserContext"),[lD,YZ]=wu("ClientContext"),[uD,JZ]=wu("SessionContext");Ve.createContext({});var[fD,XZ]=wu("OrganizationContext"),hD=({children:t,organization:e,swrConfig:r})=>Ve.createElement(Q2.SWRConfig,{value:r},Ve.createElement(fD.Provider,{value:{value:{organization:e}}},t));function g8(t){if(!Ve.useContext(v8)){if(typeof t=="function"){t();return}throw new Error(`${t} can only be used within the <ClerkProvider /> component.

Possible fixes:
1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.
2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.

Learn more: https://clerk.com/docs/components/clerk-provider`.trim())}}typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;function Qi(){g8("useUser");const t=oD();return t===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:t===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:t}}var Wx=qf,cD=()=>{try{return!1}catch{}return!1},dD=()=>{try{return!1}catch{}return!1},pD=()=>{try{return!0}catch{}return!1},Gx=new Set,Y2=(t,e,r)=>{const n=dD()||pD(),s=t;Gx.has(s)||n||(Gx.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},ji=QE({packageName:"@clerk/clerk-react"});function mD(t){ji.setMessages(t).setPackageName(t)}var[vD,J2]=wu("AuthContext"),gD=v8,y8=sD,yD="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",wD=t=>`You've passed multiple children components to <${t}/>. You can only pass a single child component or text.`,_D="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",kv="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",bD="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",xD="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",MD="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ED="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",SD=t=>`<${t} /> can only accept <${t}.Page /> and <${t}.Link /> as its children. Any other provided component will be ignored.`,ID=t=>`Missing props. <${t}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,TD=t=>`Missing props. <${t}.Link /> component requires the following props: url, label and labelIcon.`,AD="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored.",RD="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored.",kD="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",PD="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",CD="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",ND="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",DD="Missing props. <UserButton.Action /> component requires the following props: label.",Pp=t=>{g8(()=>{ji.throwMissingClerkProviderError({source:t})})},w8=t=>new Promise(e=>{t.loaded&&e(),t.addOnLoaded(e)}),OD=t=>async e=>(await w8(t),t.session?t.session.getToken(e):null),BD=t=>async(...e)=>(await w8(t),t.signOut(...e)),_8=(t={})=>{Pp("useAuth");let r=J2();r.sessionId===void 0&&r.userId===void 0&&(r=t??{});const{sessionId:n,userId:s,actor:i,orgId:u,orgRole:c,orgSlug:v,orgPermissions:_,factorVerificationAge:b}=r,x=y8(),S=te.useCallback(OD(x),[x]),I=te.useCallback(BD(x),[x]);return LD({sessionId:n,userId:s,actor:i,orgId:u,orgSlug:v,orgRole:c,getToken:S,signOut:I,orgPermissions:_,factorVerificationAge:b})};function LD(t){const{sessionId:e,userId:r,actor:n,orgId:s,orgSlug:i,orgRole:u,has:c,signOut:v,getToken:_,orgPermissions:b,factorVerificationAge:x}=t??{},S=te.useCallback(I=>c?c(I):aN({userId:r,orgId:s,orgRole:u,orgPermissions:b,factorVerificationAge:x})(I),[r,x,s,u,b]);return e===void 0&&r===void 0?{isLoaded:!1,isSignedIn:void 0,sessionId:e,userId:r,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:v,getToken:_}:e===null&&r===null?{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:r,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:v,getToken:_}:e&&r&&s&&u?{isLoaded:!0,isSignedIn:!0,sessionId:e,userId:r,actor:n||null,orgId:s,orgRole:u,orgSlug:i||null,has:S,signOut:v,getToken:_}:e&&r&&!s?{isLoaded:!0,isSignedIn:!0,sessionId:e,userId:r,actor:n||null,orgId:null,orgRole:null,orgSlug:null,has:S,signOut:v,getToken:_}:ji.throw(_D)}var Ir=(t,e)=>{const n=(typeof e=="string"?e:e==null?void 0:e.component)||t.displayName||t.name||"Component";t.displayName=n;const s=typeof e=="string"?void 0:e,i=u=>{Pp(n||"withClerk");const c=y8();return!c.loaded&&!(s!=null&&s.renderWhileLoading)?null:Ve.createElement(t,{...u,component:n,clerk:c})};return i.displayName=`withClerk(${n})`,i},G1=({children:t})=>{Pp("SignedIn");const{userId:e}=J2();return e?t:null},b8=({children:t})=>{Pp("SignedOut");const{userId:e}=J2();return e===null?t:null};Ir(({clerk:t,...e})=>{const{client:r,session:n}=t,s=r.signedInSessions?r.signedInSessions.length>0:r.activeSessions&&r.activeSessions.length>0;return Ve.useEffect(()=>{n===null&&s?t.redirectToAfterSignOut():t.redirectToSignIn(e)},[]),null},"RedirectToSignIn");Ir(({clerk:t,...e})=>(Ve.useEffect(()=>{t.redirectToSignUp(e)},[]),null),"RedirectToSignUp");Ir(({clerk:t})=>(Ve.useEffect(()=>{Y2("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),t.redirectToUserProfile()},[]),null),"RedirectToUserProfile");Ir(({clerk:t})=>(Ve.useEffect(()=>{Y2("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),t.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");Ir(({clerk:t})=>(Ve.useEffect(()=>{Y2("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),t.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");Ir(({clerk:t,...e})=>(Ve.useEffect(()=>{t.handleRedirectCallback(e)},[]),null),"AuthenticateWithRedirectCallback");var x8=t=>{throw TypeError(t)},X2=(t,e,r)=>e.has(t)||x8("Cannot "+r),Ke=(t,e,r)=>(X2(t,e,"read from private field"),r?r.call(t):e.get(t)),tl=(t,e,r)=>e.has(t)?x8("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ho=(t,e,r,n)=>(X2(t,e,"write to private field"),e.set(t,r),r),Zx=(t,e,r)=>(X2(t,e,"access private method"),r);function VD(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}var jD=(t,e="5.57.2")=>{if(t)return t;const r=FD(e);return r?r==="snapshot"?"5.57.2":r:UD(e)},FD=t=>{var e;return(e=t.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:e[1]},UD=t=>t.trim().replace(/^v/,"").split(".")[0];function zD(t){return t?$D(t)||M8(t):!0}function $D(t){return/^http(s)?:\/\//.test(t||"")}function M8(t){return t.startsWith("/")}function qD(t){return t?M8(t)?new URL(t,window.location.origin).toString():t:""}var KD={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(t,e)=>e<5,retryImmediately:!0,jitter:!0},HD=100,E8=async t=>new Promise(e=>setTimeout(e,t)),S8=(t,e)=>e?t*(1+Math.random()):t,WD=t=>{let e=0;const r=()=>{const n=t.initialDelay,s=t.factor;let i=n*Math.pow(s,e);return i=S8(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)};return async()=>{await E8(r()),e++}},GD=async(t,e={})=>{let r=0;const{shouldRetry:n,initialDelay:s,maxDelayBetweenRetries:i,factor:u,retryImmediately:c,jitter:v}={...KD,...e},_=WD({initialDelay:s,maxDelayBetweenRetries:i,factor:u,jitter:v});for(;;)try{return await t()}catch(b){if(r++,!n(b,r))throw b;c&&r===1?await E8(S8(HD,v)):await _()}},ZD="loadScript cannot be called when document does not exist",QD="loadScript cannot be called without a src";async function YD(t="",e){const{async:r,defer:n,beforeLoad:s,crossOrigin:i,nonce:u}=e||{};return GD(()=>new Promise((v,_)=>{t||_(new Error(QD)),(!document||!document.body)&&_(ZD);const b=document.createElement("script");i&&b.setAttribute("crossorigin",i),b.async=r||!1,b.defer=n||!1,b.addEventListener("load",()=>{b.remove(),v(b)}),b.addEventListener("error",()=>{b.remove(),_()}),b.src=t,b.nonce=u,s==null||s(b),document.body.appendChild(b)}),{shouldRetry:(v,_)=>_<=5})}var Qx="Clerk: Failed to load Clerk",{isDevOrStagingUrl:JD}=uN(),I8=QE({packageName:"@clerk/shared"});function XD(t){I8.setPackageName({packageName:t})}var eO=async t=>{const e=document.querySelector("script[data-clerk-js-script]");if(e)return new Promise((r,n)=>{e.addEventListener("load",()=>{r(e)}),e.addEventListener("error",()=>{n(Qx)})});if(!(t!=null&&t.publishableKey)){I8.throwMissingPublishableKeyError();return}return YD(tO(t),{async:!0,crossOrigin:"anonymous",nonce:t.nonce,beforeLoad:nO(t)}).catch(()=>{throw new Error(Qx)})},tO=t=>{var b,x;const{clerkJSUrl:e,clerkJSVariant:r,clerkJSVersion:n,proxyUrl:s,domain:i,publishableKey:u}=t;if(e)return e;let c="";s&&zD(s)?c=qD(s).replace(/http(s)?:\/\//,""):i&&!JD(((b=Lx(u))==null?void 0:b.frontendApi)||"")?c=VD(i):c=((x=Lx(u))==null?void 0:x.frontendApi)||"";const v=r?`${r.replace(/\.+$/,"")}.`:"",_=jD(n);return`https://${c}/npm/@clerk/clerk-js@${_}/dist/clerk.${v}browser.js`},rO=t=>{const e={};return t.publishableKey&&(e["data-clerk-publishable-key"]=t.publishableKey),t.proxyUrl&&(e["data-clerk-proxy-url"]=t.proxyUrl),t.domain&&(e["data-clerk-domain"]=t.domain),t.nonce&&(e.nonce=t.nonce),e},nO=t=>e=>{const r=rO(t);for(const n in r)e.setAttribute(n,r[n])},cn=t=>{cD()&&console.error(`Clerk: ${t}`)};function Pv(t,e,r){if(typeof t=="function")return t(e);if(typeof t<"u")return t;if(typeof r<"u")return r}var Yx=(t,...e)=>{const r={...t};for(const n of e)delete r[n];return r},iO=(t,e,r)=>!t&&r?sO(r):aO(e),sO=t=>{const e=t.userId,r=t.user,n=t.sessionId,s=t.session,i=t.organization,u=t.orgId,c=t.orgRole,v=t.orgPermissions,_=t.orgSlug,b=t.actor,x=t.factorVerificationAge;return{userId:e,user:r,sessionId:n,session:s,organization:i,orgId:u,orgRole:c,orgPermissions:v,orgSlug:_,actor:b,factorVerificationAge:x}},aO=t=>{var I;const e=t.user?t.user.id:t.user,r=t.user,n=t.session?t.session.id:t.session,s=t.session,i=t.session?t.session.factorVerificationAge:null,u=s==null?void 0:s.actor,c=t.organization,v=t.organization?t.organization.id:t.organization,_=c==null?void 0:c.slug,b=c&&((I=r==null?void 0:r.organizationMemberships)==null?void 0:I.find(A=>A.organization.id===v)),x=b&&b.permissions,S=b&&b.role;return{userId:e,user:r,sessionId:n,session:s,organization:c,orgId:v,orgRole:S,orgSlug:_,orgPermissions:x,actor:u,factorVerificationAge:i}};function Jx(){return typeof window<"u"}typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var Cp=t=>e=>{try{return Ve.Children.only(t)}catch{return ji.throw(wD(e))}},Np=(t,e)=>(t||(t=e),typeof t=="string"&&(t=Ve.createElement("button",null,t)),t),Dp=t=>(...e)=>{if(t&&typeof t=="function")return t(...e)};function oO(t){return typeof t=="function"}var sd=new Map;function lO(t,e,r=1){Ve.useEffect(()=>{const n=sd.get(t)||0;return n==r?ji.throw(e):(sd.set(t,n+1),()=>{sd.set(t,(sd.get(t)||1)-1)})},[])}function uO(t,e,r){const n=t.displayName||t.name||e||"Component",s=i=>(lO(e,r),Ve.createElement(t,{...i}));return s.displayName=`withMaxAllowedInstancesGuard(${n})`,s}var Kf=t=>{const e=Array(t.length).fill(null),[r,n]=te.useState(e);return t.map((s,i)=>({id:s.id,mount:u=>n(c=>c.map((v,_)=>_===i?u:v)),unmount:()=>n(u=>u.map((c,v)=>v===i?null:c)),portal:()=>Ve.createElement(Ve.Fragment,null,r[i]?Ip.createPortal(s.component,r[i]):null)}))},hn=(t,e)=>!!t&&Ve.isValidElement(t)&&(t==null?void 0:t.type)===e,T8=(t,e)=>k8({children:t,reorderItemsLabels:["account","security"],LinkComponent:Yh,PageComponent:Qh,MenuItemsComponent:Bp,componentName:"UserProfile"},e),A8=(t,e)=>k8({children:t,reorderItemsLabels:["general","members"],LinkComponent:Vp,PageComponent:Lp,componentName:"OrganizationProfile"},e),R8=t=>{const e=[],r=[Vp,Lp,Bp,Qh,Yh];return Ve.Children.forEach(t,n=>{r.some(s=>hn(n,s))||e.push(n)}),e},k8=(t,e)=>{const{children:r,LinkComponent:n,PageComponent:s,MenuItemsComponent:i,reorderItemsLabels:u,componentName:c}=t,{allowForAnyChildren:v=!1}=e||{},_=[];Ve.Children.forEach(r,R=>{if(!hn(R,s)&&!hn(R,n)&&!hn(R,i)){R&&!v&&cn(SD(c));return}const{props:V}=R,{children:U,label:Q,url:ee,labelIcon:j}=V;if(hn(R,s))if(Xx(V,u))_.push({label:Q});else if(Cv(V))_.push({label:Q,labelIcon:j,children:U,url:ee});else{cn(ID(c));return}if(hn(R,n))if(Nv(V))_.push({label:Q,labelIcon:j,url:ee});else{cn(TD(c));return}});const b=[],x=[],S=[];_.forEach((R,V)=>{if(Cv(R)){b.push({component:R.children,id:V}),x.push({component:R.labelIcon,id:V});return}Nv(R)&&S.push({component:R.labelIcon,id:V})});const I=Kf(b),A=Kf(x),k=Kf(S),F=[],C=[];return _.forEach((R,V)=>{if(Xx(R,u)){F.push({label:R.label});return}if(Cv(R)){const{portal:U,mount:Q,unmount:ee}=I.find($=>$.id===V),{portal:j,mount:B,unmount:D}=A.find($=>$.id===V);F.push({label:R.label,url:R.url,mount:Q,unmount:ee,mountIcon:B,unmountIcon:D}),C.push(U),C.push(j);return}if(Nv(R)){const{portal:U,mount:Q,unmount:ee}=k.find(j=>j.id===V);F.push({label:R.label,url:R.url,mountIcon:Q,unmountIcon:ee}),C.push(U);return}}),{customPages:F,customPagesPortals:C}},Xx=(t,e)=>{const{children:r,label:n,url:s,labelIcon:i}=t;return!r&&!s&&!i&&e.some(u=>u===n)},Cv=t=>{const{children:e,label:r,url:n,labelIcon:s}=t;return!!e&&!!n&&!!s&&!!r},Nv=t=>{const{children:e,label:r,url:n,labelIcon:s}=t;return!e&&!!n&&!!s&&!!r},fO=t=>hO({children:t,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:Bp,MenuActionComponent:N8,MenuLinkComponent:D8,UserProfileLinkComponent:Yh,UserProfilePageComponent:Qh}),hO=({children:t,MenuItemsComponent:e,MenuActionComponent:r,MenuLinkComponent:n,UserProfileLinkComponent:s,UserProfilePageComponent:i,reorderItemsLabels:u})=>{const c=[],v=[],_=[];Ve.Children.forEach(t,A=>{if(!hn(A,e)&&!hn(A,s)&&!hn(A,i)){A&&cn(AD);return}if(hn(A,s)||hn(A,i))return;const{props:k}=A;Ve.Children.forEach(k.children,F=>{if(!hn(F,r)&&!hn(F,n)){F&&cn(RD);return}const{props:C}=F,{label:R,labelIcon:V,href:U,onClick:Q,open:ee}=C;if(hn(F,r))if(e3(C,u))c.push({label:R});else if(Dv(C)){const j={label:R,labelIcon:V};if(Q!==void 0)c.push({...j,onClick:Q});else if(ee!==void 0)c.push({...j,open:ee.startsWith("/")?ee:`/${ee}`});else{cn("Custom menu item must have either onClick or open property");return}}else{cn(DD);return}if(hn(F,n))if(Ov(C))c.push({label:R,labelIcon:V,href:U});else{cn(ND);return}})});const b=[],x=[];c.forEach((A,k)=>{Dv(A)&&b.push({component:A.labelIcon,id:k}),Ov(A)&&x.push({component:A.labelIcon,id:k})});const S=Kf(b),I=Kf(x);return c.forEach((A,k)=>{if(e3(A,u)&&v.push({label:A.label}),Dv(A)){const{portal:F,mount:C,unmount:R}=S.find(U=>U.id===k),V={label:A.label,mountIcon:C,unmountIcon:R};"onClick"in A?V.onClick=A.onClick:"open"in A&&(V.open=A.open),v.push(V),_.push(F)}if(Ov(A)){const{portal:F,mount:C,unmount:R}=I.find(V=>V.id===k);v.push({label:A.label,href:A.href,mountIcon:C,unmountIcon:R}),_.push(F)}}),{customMenuItems:v,customMenuItemsPortals:_}},e3=(t,e)=>{const{children:r,label:n,onClick:s,labelIcon:i}=t;return!r&&!s&&!i&&e.some(u=>u===n)},Dv=t=>{const{label:e,labelIcon:r,onClick:n,open:s}=t;return!!r&&!!e&&(typeof n=="function"||typeof s=="string")},Ov=t=>{const{label:e,href:r,labelIcon:n}=t;return!!r&&!!n&&!!e};function cO(t){const{root:e=document==null?void 0:document.body,selector:r,timeout:n=0}=t;return new Promise((s,i)=>{if(!e){i(new Error("No root element provided"));return}let u=e;if(r&&(u=e==null?void 0:e.querySelector(r)),(u==null?void 0:u.childElementCount)&&u.childElementCount>0){s();return}const v=new MutationObserver(_=>{for(const b of _)if(b.type==="childList"&&(!u&&r&&(u=e==null?void 0:e.querySelector(r)),u!=null&&u.childElementCount&&u.childElementCount>0)){v.disconnect(),s();return}});v.observe(e,{childList:!0,subtree:!0}),n>0&&setTimeout(()=>{v.disconnect(),i(new Error("Timeout waiting for element children"))},n)})}function Yi(t){const e=te.useRef(),[r,n]=te.useState("rendering");return te.useEffect(()=>{if(!t)throw new Error("Clerk: no component name provided, unable to detect mount.");typeof window<"u"&&!e.current&&(e.current=cO({selector:`[data-clerk-component="${t}"]`}).then(()=>{n("rendered")}).catch(()=>{n("error")}))},[t]),r}var ad=t=>"mount"in t,t3=t=>"open"in t,r3=t=>t==null?void 0:t.map(({mountIcon:e,unmountIcon:r,...n})=>n),ri=class extends Ve.PureComponent{constructor(){super(...arguments),this.rootRef=Ve.createRef()}componentDidUpdate(t){var e,r,n,s;if(!ad(t)||!ad(this.props))return;const i=Yx(t.props,"customPages","customMenuItems","children"),u=Yx(this.props.props,"customPages","customMenuItems","children"),c=((e=i.customPages)==null?void 0:e.length)!==((r=u.customPages)==null?void 0:r.length),v=((n=i.customMenuItems)==null?void 0:n.length)!==((s=u.customMenuItems)==null?void 0:s.length),_=r3(t.props.customMenuItems),b=r3(this.props.props.customMenuItems);(!Wx(i,u)||!Wx(_,b)||c||v)&&this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(ad(this.props)&&this.props.mount(this.rootRef.current,this.props.props),t3(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(ad(this.props)&&this.props.unmount(this.rootRef.current),t3(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:t=!1}=this.props,e={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return Ve.createElement(Ve.Fragment,null,!t&&Ve.createElement("div",{...e}),this.props.children)}},Op=t=>{var e,r;return Ve.createElement(Ve.Fragment,null,(e=t==null?void 0:t.customPagesPortals)==null?void 0:e.map((n,s)=>te.createElement(n,{key:s})),(r=t==null?void 0:t.customMenuItemsPortals)==null?void 0:r.map((n,s)=>te.createElement(n,{key:s})))},P8=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountSignIn,unmount:t.unmountSignIn,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"SignIn",renderWhileLoading:!0}),dO=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountSignUp,unmount:t.unmountSignUp,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"SignUp",renderWhileLoading:!0});function Qh({children:t}){return cn(bD),Ve.createElement(Ve.Fragment,null,t)}function Yh({children:t}){return cn(xD),Ve.createElement(Ve.Fragment,null,t)}var pO=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}},{customPages:c,customPagesPortals:v}=T8(n.children);return Ve.createElement(Ve.Fragment,null,i&&r,Ve.createElement(ri,{component:e,mount:t.mountUserProfile,unmount:t.unmountUserProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:c},rootProps:u},Ve.createElement(Op,{customPagesPortals:v})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(pO,{Page:Qh,Link:Yh});var C8=te.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),mO=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}},{customPages:c,customPagesPortals:v}=T8(n.children,{allowForAnyChildren:!!n.__experimental_asProvider}),_=Object.assign(n.userProfileProps||{},{customPages:c}),{customMenuItems:b,customMenuItemsPortals:x}=fO(n.children),S=R8(n.children),I={mount:t.mountUserButton,unmount:t.unmountUserButton,updateProps:t.__unstable__updateProps,props:{...n,userProfileProps:_,customMenuItems:b}},A={customPagesPortals:v,customMenuItemsPortals:x};return Ve.createElement(C8.Provider,{value:I},i&&r,t.loaded&&Ve.createElement(ri,{component:e,...I,hideRootHtmlElement:!!n.__experimental_asProvider,rootProps:u},n.__experimental_asProvider?S:null,Ve.createElement(Op,{...A})))},{component:"UserButton",renderWhileLoading:!0});function Bp({children:t}){return cn(kD),Ve.createElement(Ve.Fragment,null,t)}function N8({children:t}){return cn(PD),Ve.createElement(Ve.Fragment,null,t)}function D8({children:t}){return cn(CD),Ve.createElement(Ve.Fragment,null,t)}function vO(t){const e=te.useContext(C8),r={...e,props:{...e.props,...t}};return Ve.createElement(ri,{...r})}var O8=Object.assign(mO,{UserProfilePage:Qh,UserProfileLink:Yh,MenuItems:Bp,Action:N8,Link:D8,__experimental_Outlet:vO});function Lp({children:t}){return cn(MD),Ve.createElement(Ve.Fragment,null,t)}function Vp({children:t}){return cn(ED),Ve.createElement(Ve.Fragment,null,t)}var gO=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}},{customPages:c,customPagesPortals:v}=A8(n.children);return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountOrganizationProfile,unmount:t.unmountOrganizationProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:c},rootProps:u},Ve.createElement(Op,{customPagesPortals:v})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(gO,{Page:Lp,Link:Vp});Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountCreateOrganization,unmount:t.unmountCreateOrganization,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"CreateOrganization",renderWhileLoading:!0});var B8=te.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),yO=Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}},{customPages:c,customPagesPortals:v}=A8(n.children,{allowForAnyChildren:!!n.__experimental_asProvider}),_=Object.assign(n.organizationProfileProps||{},{customPages:c}),b=R8(n.children),x={mount:t.mountOrganizationSwitcher,unmount:t.unmountOrganizationSwitcher,updateProps:t.__unstable__updateProps,props:{...n,organizationProfileProps:_},rootProps:u,component:e};return t.__experimental_prefetchOrganizationSwitcher(),Ve.createElement(B8.Provider,{value:x},Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{...x,hideRootHtmlElement:!!n.__experimental_asProvider},n.__experimental_asProvider?b:null,Ve.createElement(Op,{customPagesPortals:v}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});function wO(t){const e=te.useContext(B8),r={...e,props:{...e.props,...t}};return Ve.createElement(ri,{...r})}Object.assign(yO,{OrganizationProfilePage:Lp,OrganizationProfileLink:Vp,__experimental_Outlet:wO});Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountOrganizationList,unmount:t.unmountOrganizationList,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"OrganizationList",renderWhileLoading:!0});Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,open:t.openGoogleOneTap,close:t.closeGoogleOneTap,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"GoogleOneTap",renderWhileLoading:!0});Ir(({clerk:t,component:e,fallback:r,...n})=>{const i=Yi(e)==="rendering"||!t.loaded,u={...i&&r&&{style:{display:"none"}}};return Ve.createElement(Ve.Fragment,null,i&&r,t.loaded&&Ve.createElement(ri,{component:e,mount:t.mountWaitlist,unmount:t.unmountWaitlist,updateProps:t.__unstable__updateProps,props:n,rootProps:u}))},{component:"Waitlist",renderWhileLoading:!0});var L8=Ir(({clerk:t,children:e,...r})=>{const{signUpFallbackRedirectUrl:n,forceRedirectUrl:s,fallbackRedirectUrl:i,signUpForceRedirectUrl:u,mode:c,initialValues:v,withSignUp:_,...b}=r;e=Np(e,"Sign in");const x=Cp(e)("SignInButton"),S=()=>{const k={forceRedirectUrl:s,fallbackRedirectUrl:i,signUpFallbackRedirectUrl:n,signUpForceRedirectUrl:u,initialValues:v,withSignUp:_};return c==="modal"?t.openSignIn({...k,appearance:r.appearance}):t.redirectToSignIn({...k,signInFallbackRedirectUrl:i,signInForceRedirectUrl:s})},A={...b,onClick:async k=>(x&&typeof x=="object"&&"props"in x&&await Dp(x.props.onClick)(k),S())};return Ve.cloneElement(x,A)},{component:"SignInButton",renderWhileLoading:!0});Ir(({clerk:t,children:e,...r})=>{const{fallbackRedirectUrl:n,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:u,mode:c,unsafeMetadata:v,initialValues:_,...b}=r;e=Np(e,"Sign up");const x=Cp(e)("SignUpButton"),S=()=>{const k={fallbackRedirectUrl:n,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:u,unsafeMetadata:v,initialValues:_};return c==="modal"?t.openSignUp({...k,appearance:r.appearance}):t.redirectToSignUp({...k,signUpFallbackRedirectUrl:n,signUpForceRedirectUrl:s})},A={...b,onClick:async k=>(x&&typeof x=="object"&&"props"in x&&await Dp(x.props.onClick)(k),S())};return Ve.cloneElement(x,A)},{component:"SignUpButton",renderWhileLoading:!0});Ir(({clerk:t,children:e,...r})=>{const{redirectUrl:n="/",signOutOptions:s,...i}=r;e=Np(e,"Sign out");const u=Cp(e)("SignOutButton"),c=()=>t.signOut({redirectUrl:n,...s}),_={...i,onClick:async b=>(await Dp(u.props.onClick)(b),c())};return Ve.cloneElement(u,_)},{component:"SignOutButton",renderWhileLoading:!0});Ir(({clerk:t,children:e,...r})=>{const{redirectUrl:n,...s}=r;e=Np(e,"Sign in with Metamask");const i=Cp(e)("SignInWithMetamaskButton"),u=async()=>{async function _(){await t.authenticateWithMetamask({redirectUrl:n||void 0})}_()},v={...s,onClick:async _=>(await Dp(i.props.onClick)(_),u())};return Ve.cloneElement(i,v)},{component:"SignInWithMetamask",renderWhileLoading:!0});typeof globalThis.__BUILD_DISABLE_RHC__>"u"&&(globalThis.__BUILD_DISABLE_RHC__=!1);var _O={name:"@clerk/clerk-react",version:"5.25.2",environment:"production"},Qe,rl,nl,Fs,qs,Ld,Z1,V8=class j8{constructor(e){tl(this,Ld),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],tl(this,Qe,!1),tl(this,rl),tl(this,nl),tl(this,Fs),this.buildSignInUrl=s=>{const i=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildSignInUrl(s))||""};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("buildSignInUrl",i)},this.buildSignUpUrl=s=>{const i=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildSignUpUrl(s))||""};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("buildSignUpUrl",i)},this.buildAfterSignInUrl=(...s)=>{const i=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildAfterSignInUrl(...s))||""};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("buildAfterSignInUrl",i)},this.buildAfterSignUpUrl=(...s)=>{const i=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildAfterSignUpUrl(...s))||""};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("buildAfterSignUpUrl",i)},this.buildAfterSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterSignOutUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildAfterSignOutUrl",s)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",s)},this.buildUserProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildUserProfileUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildUserProfileUrl",s)},this.buildCreateOrganizationUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildCreateOrganizationUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildCreateOrganizationUrl",s)},this.buildOrganizationProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildOrganizationProfileUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildOrganizationProfileUrl",s)},this.buildWaitlistUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildWaitlistUrl())||""};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("buildWaitlistUrl",s)},this.buildUrlWithAuth=s=>{const i=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildUrlWithAuth(s))||""};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("buildUrlWithAuth",i)},this.handleUnauthenticated=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.handleUnauthenticated()};this.clerkjs&&Ke(this,Qe)?s():this.premountMethodCalls.set("handleUnauthenticated",s)},this.addOnLoaded=s=>{this.loadedListeners.push(s),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(s=>s()),this.loadedListeners=[]},this.hydrateClerkJS=s=>{if(!s)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=s,this.premountMethodCalls.forEach(i=>i()),this.premountAddListenerCalls.forEach((i,u)=>{i.nativeUnsubscribe=s.addListener(u)}),this.preopenSignIn!==null&&s.openSignIn(this.preopenSignIn),this.preopenSignUp!==null&&s.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&s.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&s.__internal_openReverification(this.preopenUserVerification),this.preopenOneTap!==null&&s.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&s.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&s.openCreateOrganization(this.preopenCreateOrganization),this.preOpenWaitlist!==null&&s.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((i,u)=>{s.mountSignIn(u,i)}),this.premountSignUpNodes.forEach((i,u)=>{s.mountSignUp(u,i)}),this.premountUserProfileNodes.forEach((i,u)=>{s.mountUserProfile(u,i)}),this.premountUserButtonNodes.forEach((i,u)=>{s.mountUserButton(u,i)}),this.premountOrganizationListNodes.forEach((i,u)=>{s.mountOrganizationList(u,i)}),this.premountWaitlistNodes.forEach((i,u)=>{s.mountWaitlist(u,i)}),this.premountPricingTableNodes.forEach((i,u)=>{s.__experimental_mountPricingTable(u,i)}),Ho(this,Qe,!0),this.emitLoaded(),this.clerkjs},this.__unstable__updateProps=async s=>{const i=await Zx(this,Ld,Z1).call(this);if(i&&"__unstable__updateProps"in i)return i.__unstable__updateProps(s)},this.__experimental_nextTask=async s=>this.clerkjs?this.clerkjs.__experimental_nextTask(s):Promise.reject(),this.setActive=s=>this.clerkjs?this.clerkjs.setActive(s):Promise.reject(),this.openSignIn=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openSignIn(s):this.preopenSignIn=s},this.closeSignIn=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openReverification=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.__internal_openReverification(s):this.preopenUserVerification=s},this.__internal_closeReverification=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openGoogleOneTap(s):this.preopenOneTap=s},this.closeGoogleOneTap=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openUserProfile(s):this.preopenUserProfile=s},this.closeUserProfile=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openOrganizationProfile(s):this.preopenOrganizationProfile=s},this.closeOrganizationProfile=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openCreateOrganization(s):this.preopenCreateOrganization=s},this.closeCreateOrganization=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openWaitlist(s):this.preOpenWaitlist=s},this.closeWaitlist=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.openSignUp(s):this.preopenSignUp=s},this.closeSignUp=()=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountSignIn(s,i):this.premountSignInNodes.set(s,i)},this.unmountSignIn=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountSignIn(s):this.premountSignInNodes.delete(s)},this.__experimental_mountPricingTable=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.__experimental_mountPricingTable(s,i):this.premountPricingTableNodes.set(s,i)},this.__experimental_unmountPricingTable=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.__experimental_unmountPricingTable(s):this.premountPricingTableNodes.delete(s)},this.mountSignUp=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountSignUp(s,i):this.premountSignUpNodes.set(s,i)},this.unmountSignUp=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountSignUp(s):this.premountSignUpNodes.delete(s)},this.mountUserProfile=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountUserProfile(s,i):this.premountUserProfileNodes.set(s,i)},this.unmountUserProfile=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountUserProfile(s):this.premountUserProfileNodes.delete(s)},this.mountOrganizationProfile=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountOrganizationProfile(s,i):this.premountOrganizationProfileNodes.set(s,i)},this.unmountOrganizationProfile=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountOrganizationProfile(s):this.premountOrganizationProfileNodes.delete(s)},this.mountCreateOrganization=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountCreateOrganization(s,i):this.premountCreateOrganizationNodes.set(s,i)},this.unmountCreateOrganization=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountCreateOrganization(s):this.premountCreateOrganizationNodes.delete(s)},this.mountOrganizationSwitcher=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountOrganizationSwitcher(s,i):this.premountOrganizationSwitcherNodes.set(s,i)},this.unmountOrganizationSwitcher=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountOrganizationSwitcher(s):this.premountOrganizationSwitcherNodes.delete(s)},this.__experimental_prefetchOrganizationSwitcher=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&Ke(this,Qe)?s():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",s)},this.mountOrganizationList=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountOrganizationList(s,i):this.premountOrganizationListNodes.set(s,i)},this.unmountOrganizationList=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountOrganizationList(s):this.premountOrganizationListNodes.delete(s)},this.mountUserButton=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountUserButton(s,i):this.premountUserButtonNodes.set(s,i)},this.unmountUserButton=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountUserButton(s):this.premountUserButtonNodes.delete(s)},this.mountWaitlist=(s,i)=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.mountWaitlist(s,i):this.premountWaitlistNodes.set(s,i)},this.unmountWaitlist=s=>{this.clerkjs&&Ke(this,Qe)?this.clerkjs.unmountWaitlist(s):this.premountWaitlistNodes.delete(s)},this.addListener=s=>{if(this.clerkjs)return this.clerkjs.addListener(s);{const i=()=>{var u;const c=this.premountAddListenerCalls.get(s);c&&((u=c.nativeUnsubscribe)==null||u.call(c),this.premountAddListenerCalls.delete(s))};return this.premountAddListenerCalls.set(s,{unsubscribe:i,nativeUnsubscribe:void 0}),i}},this.navigate=s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.navigate(s)};this.clerkjs&&Ke(this,Qe)?i():this.premountMethodCalls.set("navigate",i)},this.redirectWithAuth=async(...s)=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectWithAuth(...s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("redirectWithAuth",i)},this.redirectToSignIn=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectToSignIn(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("redirectToSignIn",i)},this.redirectToSignUp=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectToSignUp(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("redirectToSignUp",i)},this.redirectToUserProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToUserProfile()};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("redirectToUserProfile",s)},this.redirectToAfterSignUp=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignUp()};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("redirectToAfterSignUp",s)},this.redirectToAfterSignIn=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignIn()};this.clerkjs&&Ke(this,Qe)?s():this.premountMethodCalls.set("redirectToAfterSignIn",s)},this.redirectToAfterSignOut=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignOut()};this.clerkjs&&Ke(this,Qe)?s():this.premountMethodCalls.set("redirectToAfterSignOut",s)},this.redirectToOrganizationProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToOrganizationProfile()};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("redirectToOrganizationProfile",s)},this.redirectToCreateOrganization=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToCreateOrganization()};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("redirectToCreateOrganization",s)},this.redirectToWaitlist=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToWaitlist()};if(this.clerkjs&&Ke(this,Qe))return s();this.premountMethodCalls.set("redirectToWaitlist",s)},this.handleRedirectCallback=async s=>{var i;const u=()=>{var c;return(c=this.clerkjs)==null?void 0:c.handleRedirectCallback(s)};this.clerkjs&&Ke(this,Qe)?(i=u())==null||i.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",u)},this.handleGoogleOneTapCallback=async(s,i)=>{var u;const c=()=>{var v;return(v=this.clerkjs)==null?void 0:v.handleGoogleOneTapCallback(s,i)};this.clerkjs&&Ke(this,Qe)?(u=c())==null||u.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",c)},this.handleEmailLinkVerification=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.handleEmailLinkVerification(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("handleEmailLinkVerification",i)},this.authenticateWithMetamask=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithMetamask(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("authenticateWithMetamask",i)},this.authenticateWithCoinbaseWallet=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithCoinbaseWallet(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",i)},this.authenticateWithOKXWallet=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithOKXWallet(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("authenticateWithOKXWallet",i)},this.authenticateWithWeb3=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithWeb3(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("authenticateWithWeb3",i)},this.authenticateWithGoogleOneTap=async s=>(await Zx(this,Ld,Z1).call(this)).authenticateWithGoogleOneTap(s),this.createOrganization=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.createOrganization(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("createOrganization",i)},this.getOrganization=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.getOrganization(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("getOrganization",i)},this.joinWaitlist=async s=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.joinWaitlist(s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("joinWaitlist",i)},this.signOut=async(...s)=>{const i=()=>{var u;return(u=this.clerkjs)==null?void 0:u.signOut(...s)};if(this.clerkjs&&Ke(this,Qe))return i();this.premountMethodCalls.set("signOut",i)};const{Clerk:r=null,publishableKey:n}=e||{};Ho(this,Fs,n),Ho(this,nl,e==null?void 0:e.proxyUrl),Ho(this,rl,e==null?void 0:e.domain),this.options=e,this.Clerk=r,this.mode=Jx()?"browser":"server",this.options.sdkMetadata||(this.options.sdkMetadata=_O),Ke(this,Fs)&&this.loadClerkJS()}get publishableKey(){return Ke(this,Fs)}get loaded(){return Ke(this,Qe)}static getOrCreateInstance(e){return(!Jx()||!Ke(this,qs)||e.Clerk&&Ke(this,qs).Clerk!==e.Clerk||Ke(this,qs).publishableKey!==e.publishableKey)&&Ho(this,qs,new j8(e)),Ke(this,qs)}static clearInstance(){Ho(this,qs,null)}get domain(){return typeof window<"u"&&window.location?Pv(Ke(this,rl),new URL(window.location.href),""):typeof Ke(this,rl)=="function"?ji.throw(kv):Ke(this,rl)||""}get proxyUrl(){return typeof window<"u"&&window.location?Pv(Ke(this,nl),new URL(window.location.href),""):typeof Ke(this,nl)=="function"?ji.throw(kv):Ke(this,nl)||""}__internal_getOption(e){var r;return(r=this.clerkjs)==null?void 0:r.__internal_getOption(e)}get sdkMetadata(){var e;return((e=this.clerkjs)==null?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return(e=this.clerkjs)==null?void 0:e.instanceType}get frontendApi(){var e;return((e=this.clerkjs)==null?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return((e=this.clerkjs)==null?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?Pv(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?ji.throw(kv):!1}async loadClerkJS(){var e;if(!(this.mode!=="browser"||Ke(this,Qe))){typeof window<"u"&&(window.__clerk_publishable_key=Ke(this,Fs),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let r;oO(this.Clerk)?(r=new this.Clerk(Ke(this,Fs),{proxyUrl:this.proxyUrl,domain:this.domain}),await r.load(this.options)):(r=this.Clerk,r.loaded||await r.load(this.options)),global.Clerk=r}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await eO({...this.options,publishableKey:Ke(this,Fs),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");await global.Clerk.load(this.options)}return(e=global.Clerk)!=null&&e.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(r){const n=r;console.error(n.stack||n.message||n);return}}}get version(){var e;return(e=this.clerkjs)==null?void 0:e.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}get isSignedIn(){return this.clerkjs?this.clerkjs.isSignedIn:!1}get __experimental_commerce(){var e;return(e=this.clerkjs)==null?void 0:e.__experimental_commerce}__unstable__setEnvironment(...e){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(e);else return}};Qe=new WeakMap;rl=new WeakMap;nl=new WeakMap;Fs=new WeakMap;qs=new WeakMap;Ld=new WeakSet;Z1=function(){return new Promise(t=>{this.addOnLoaded(()=>t(this.clerkjs))})};tl(V8,qs);var n3=V8;function bO(t){const{isomorphicClerkOptions:e,initialState:r,children:n}=t,{isomorphicClerk:s,loaded:i}=xO(e),[u,c]=Ve.useState({client:s.client,session:s.session,user:s.user,organization:s.organization});Ve.useEffect(()=>s.addListener($=>c({...$})),[]);const v=iO(i,u,r),_=Ve.useMemo(()=>({value:s}),[i]),b=Ve.useMemo(()=>({value:u.client}),[u.client]),{sessionId:x,session:S,userId:I,user:A,orgId:k,actor:F,organization:C,orgRole:R,orgSlug:V,orgPermissions:U,factorVerificationAge:Q}=v,ee=Ve.useMemo(()=>({value:{sessionId:x,userId:I,actor:F,orgId:k,orgRole:R,orgSlug:V,orgPermissions:U,factorVerificationAge:Q}}),[x,I,F,k,R,V,Q]),j=Ve.useMemo(()=>({value:S}),[x,S]),B=Ve.useMemo(()=>({value:A}),[I,A]),D=Ve.useMemo(()=>({value:{organization:C}}),[k,C]);return Ve.createElement(gD.Provider,{value:_},Ve.createElement(lD.Provider,{value:b},Ve.createElement(uD.Provider,{value:j},Ve.createElement(hD,{...D.value},Ve.createElement(vD.Provider,{value:ee},Ve.createElement(aD.Provider,{value:B},n))))))}var xO=t=>{const[e,r]=Ve.useState(!1),n=Ve.useMemo(()=>n3.getOrCreateInstance(t),[]);return Ve.useEffect(()=>{n.__unstable__updateProps({appearance:t.appearance})},[t.appearance]),Ve.useEffect(()=>{n.__unstable__updateProps({options:t})},[t.localization]),Ve.useEffect(()=>{n.addOnLoaded(()=>r(!0))},[]),Ve.useEffect(()=>()=>{n3.clearInstance(),r(!1)},[]),{isomorphicClerk:n,loaded:e}};function MO(t){const{initialState:e,children:r,__internal_bypassMissingPublishableKey:n,...s}=t,{publishableKey:i="",Clerk:u}=s;return!u&&!n&&(i?i&&!O1(i)&&ji.throwInvalidPublishableKeyError({key:i}):ji.throwMissingPublishableKeyError()),Ve.createElement(bO,{initialState:e,isomorphicClerkOptions:s},r)}var F8=uO(MO,"ClerkProvider",yD);F8.displayName="ClerkProvider";mD({packageName:"@clerk/clerk-react"});XD("@clerk/clerk-react");const EO={},SO=Object.freeze(Object.defineProperty({__proto__:null,default:EO},Symbol.toStringTag,{value:"Module"})),wr=wM(SO),IO={isPremium:!1,paymentStatus:void 0,analysisCount:0,theme:"dark",trades:[],settings:{preferredTimeframes:["15M","1H"],notifications:!0},tradingStats:{wins:0,losses:0,winRate:0,lastUpdated:new Date().toISOString()},supportMessages:[]};async function os(t){const e=await t.unsafeMetadata;return{...IO,...e}}async function la(t,e){try{const r=await os(t);await t.update({unsafeMetadata:{...r,...e}})}catch(r){throw console.error("Failed to update user metadata:",r),new Error("Failed to save your data. Please try again.")}}async function TO(t,e,r,n){try{const i=(await os(t)).supportMessages||[],u=i.findIndex(c=>c.messageId===e);return u>=0?i[u].replies.push(n):i.push({messageId:e,originalMessage:r,replies:[n],createdAt:new Date().toISOString()}),await la(t,{supportMessages:i}),!0}catch(s){return console.error("Failed to save support message to metadata:",s),!1}}const AO=te.createContext(void 0);function RO({children:t}){const{user:e,isLoaded:r}=Qi(),[n,s]=te.useState("dark");te.useEffect(()=>{!r||!e||os(e).then(u=>{s(u.theme),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(u.theme)})},[e,r]);const i=async()=>{if(!e)return;const u=n==="dark"?"light":"dark";s(u),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(u),await la(e,{theme:u})};return N.jsx(AO.Provider,{value:{theme:n,toggleTheme:i},children:t})}const U8=te.createContext(void 0);function kO({children:t}){const[e,r]=te.useState([]),[n,s]=te.useState(0),[i,u]=te.useState(0),[c,v]=te.useState(0),[,_]=te.useState(null),{user:b}=Qi();te.useEffect(()=>{(async()=>{if(b)try{const F=await os(b);r((F==null?void 0:F.trades)||[])}catch(F){console.error("Failed to load trades:",F),_("Failed to load your trades")}})()},[b]),te.useEffect(()=>{(async()=>{var F;if(b)try{const R=((F=(await os(b)).trades)==null?void 0:F.filter(Q=>Q.result))||[],V=R.filter(Q=>Q.result==="WIN").length,U=R.filter(Q=>Q.result==="LOSS").length;s(V),u(U),v(V+U>0?V/(V+U)*100:0)}catch(C){console.error("Failed to load trading stats:",C)}})()},[b]);const x=async k=>{if(!b)throw new Error("User not authenticated");try{const F=crypto.randomUUID(),C={...k,id:F,date:new Date().toISOString()},R=await os(b),V=[C,...R.trades||[]];return await la(b,{trades:V}),r(V),F}catch(F){throw console.error("Failed to save trade:",F),new Error("Failed to save trade. Please try again.")}},S=async(k,F,C)=>{if(!b)throw new Error("User not authenticated");const R=e.map(V=>V.id===k?{...V,result:F,tradeStats:C,lastModified:new Date().toISOString()}:V);try{await la(b,{trades:R}),r(R)}catch(V){throw console.error("Failed to update trade result:",V),new Error("Failed to update trade result. Please try again.")}},I=async k=>{if(!b)return;const F=k==="WIN"?n+1:n,C=k==="LOSS"?i+1:i,R=F+C,V=R>0?F/R*100:0;try{s(F),u(C),v(V),await la(b,{tradingStats:{wins:F,losses:C,winRate:V,lastUpdated:new Date().toISOString()}})}catch(U){console.error("Failed to update trading stats:",U),await A()}},A=async()=>{if(b)try{const F=(await os(b)).tradingStats||{wins:0,losses:0,winRate:0};s(F.wins),u(F.losses),v(F.winRate)}catch(k){console.error("Failed to load trading stats:",k)}};return N.jsx(U8.Provider,{value:{trades:e,saveTrade:x,updateTradeResult:S,updateWinRateStats:I,winRate:c,totalTrades:e.length,wins:n,losses:i},children:t})}const z8=()=>{const t=te.useContext(U8);if(!t)throw new Error("useTrades must be used within TradesProvider");return t};var $8={},Q1=function(t,e){return Q1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Q1(t,e)};function q8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Q1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var A0=function(){return A0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},A0.apply(this,arguments)};function K8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function H8(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(u=t[c])&&(i=(s<3?u(i):s>3?u(e,r,i):u(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function W8(t,e){return function(r,n){e(r,n,t)}}function G8(t,e,r,n,s,i){function u(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var c=n.kind,v=c==="getter"?"get":c==="setter"?"set":"value",_=!e&&t?n.static?t:t.prototype:null,b=e||(_?Object.getOwnPropertyDescriptor(_,n.name):{}),x,S=!1,I=r.length-1;I>=0;I--){var A={};for(var k in n)A[k]=k==="access"?{}:n[k];for(var k in n.access)A.access[k]=n.access[k];A.addInitializer=function(C){if(S)throw new TypeError("Cannot add initializers after decoration has completed");i.push(u(C||null))};var F=(0,r[I])(c==="accessor"?{get:b.get,set:b.set}:b[v],A);if(c==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(x=u(F.get))&&(b.get=x),(x=u(F.set))&&(b.set=x),(x=u(F.init))&&s.unshift(x)}else(x=u(F))&&(c==="field"?s.unshift(x):b[v]=x)}_&&Object.defineProperty(_,n.name,b),S=!0}function Z8(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function Q8(t){return typeof t=="symbol"?t:"".concat(t)}function Y8(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function J8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function X8(t,e,r,n){function s(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function c(b){try{_(n.next(b))}catch(x){u(x)}}function v(b){try{_(n.throw(b))}catch(x){u(x)}}function _(b){b.done?i(b.value):s(b.value).then(c,v)}_((n=n.apply(t,e||[])).next())})}function eS(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=c(0),u.throw=c(1),u.return=c(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(_){return function(b){return v([_,b])}}function v(_){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,_[0]&&(r=0)),r;)try{if(n=1,s&&(i=_[0]&2?s.return:_[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,_[1])).done)return i;switch(s=0,i&&(_=[_[0]&2,i.value]),_[0]){case 0:case 1:i=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,s=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!i||_[1]>i[0]&&_[1]<i[3])){r.label=_[1];break}if(_[0]===6&&r.label<i[1]){r.label=i[1],i=_;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(_);break}i[2]&&r.ops.pop(),r.trys.pop();continue}_=e.call(t,r)}catch(b){_=[6,b],s=0}finally{n=i=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var jp=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function tS(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jp(e,t,r)}function R0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ew(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],u;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return i}function rS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ew(arguments[e]));return t}function nS(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],u=0,c=i.length;u<c;u++,s++)n[s]=i[u];return n}function iS(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function $l(t){return this instanceof $l?(this.v=t,this):new $l(t)}function sS(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(I){return function(A){return Promise.resolve(A).then(I,x)}}function c(I,A){n[I]&&(s[I]=function(k){return new Promise(function(F,C){i.push([I,k,F,C])>1||v(I,k)})},A&&(s[I]=A(s[I])))}function v(I,A){try{_(n[I](A))}catch(k){S(i[0][3],k)}}function _(I){I.value instanceof $l?Promise.resolve(I.value.v).then(b,x):S(i[0][2],I)}function b(I){v("next",I)}function x(I){v("throw",I)}function S(I,A){I(A),i.shift(),i.length&&v(i[0][0],i[0][1])}}function aS(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(u){return(r=!r)?{value:$l(t[s](u)),done:!1}:i?i(u):u}:i}}function oS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof R0=="function"?R0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(u){return new Promise(function(c,v){u=t[i](u),s(c,v,u.done,u.value)})}}function s(i,u,c,v){Promise.resolve(v).then(function(_){i({value:_,done:c})},u)}}function lS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var PO=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Y1=function(t){return Y1=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Y1(t)};function uS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Y1(t),n=0;n<r.length;n++)r[n]!=="default"&&jp(e,t,r[n]);return PO(e,t),e}function fS(t){return t&&t.__esModule?t:{default:t}}function hS(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function cS(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function dS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function pS(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var CO=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function mS(t){function e(i){t.error=t.hasError?new CO(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(u){return e(u),s()})}else n|=1}catch(u){e(u)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function vS(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,u){return n?e?".jsx":".js":s&&(!i||!u)?r:s+i+"."+u.toLowerCase()+"js"}):t}const NO={__extends:q8,__assign:A0,__rest:K8,__decorate:H8,__param:W8,__esDecorate:G8,__runInitializers:Z8,__propKey:Q8,__setFunctionName:Y8,__metadata:J8,__awaiter:X8,__generator:eS,__createBinding:jp,__exportStar:tS,__values:R0,__read:ew,__spread:rS,__spreadArrays:nS,__spreadArray:iS,__await:$l,__asyncGenerator:sS,__asyncDelegator:aS,__asyncValues:oS,__makeTemplateObject:lS,__importStar:uS,__importDefault:fS,__classPrivateFieldGet:hS,__classPrivateFieldSet:cS,__classPrivateFieldIn:dS,__addDisposableResource:pS,__disposeResources:mS,__rewriteRelativeImportExtension:vS},DO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pS,get __assign(){return A0},__asyncDelegator:aS,__asyncGenerator:sS,__asyncValues:oS,__await:$l,__awaiter:X8,__classPrivateFieldGet:hS,__classPrivateFieldIn:dS,__classPrivateFieldSet:cS,__createBinding:jp,__decorate:H8,__disposeResources:mS,__esDecorate:G8,__exportStar:tS,__extends:q8,__generator:eS,__importDefault:fS,__importStar:uS,__makeTemplateObject:lS,__metadata:J8,__param:W8,__propKey:Q8,__read:ew,__rest:K8,__rewriteRelativeImportExtension:vS,__runInitializers:Z8,__setFunctionName:Y8,__spread:rS,__spreadArray:iS,__spreadArrays:nS,__values:R0,default:NO},Symbol.toStringTag,{value:"Module"})),gS=wM(DO);var ef={},i3;function Jh(){if(i3)return ef;i3=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.experimental_createTheme=void 0;const t=e=>({...e,__type:"prebuilt_appearance"});return ef.experimental_createTheme=t,ef}var Bv={},tf={},s3;function yS(){if(s3)return tf;s3=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.dark=void 0;const t=Jh();return tf.dark=(0,t.experimental_createTheme)({variables:{colorBackground:"#212126",colorNeutral:"white",colorPrimary:"#ffffff",colorTextOnPrimaryBackground:"black",colorText:"white",colorInputText:"white",colorInputBackground:"#26262B"},elements:{providerIcon__apple:{filter:"invert(1)"},providerIcon__github:{filter:"invert(1)"},providerIcon__okx_wallet:{filter:"invert(1)"},activeDeviceIcon:{"--cl-chassis-bottom":"#d2d2d2","--cl-chassis-back":"#e6e6e6","--cl-chassis-screen":"#e6e6e6","--cl-screen":"#111111"}}}),tf}var rf={},a3;function OO(){if(a3)return rf;a3=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.shadesOfPurple=void 0;const t=Jh(),e=yS();return rf.shadesOfPurple=(0,t.experimental_createTheme)({baseTheme:e.dark,variables:{colorBackground:"#3f3c77",colorPrimary:"#f8d80d",colorTextOnPrimaryBackground:"#38375f",colorInputText:"#a1fdfe",colorShimmer:"rgba(161,253,254,0.36)"}}),rf}var nf={},o3;function BO(){if(o3)return nf;o3=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.neobrutalism=void 0;const t=Jh(),e={boxShadow:"3px 3px 0px #000",border:"2px solid #000","&:focus":{boxShadow:"4px 4px 0px #000",border:"2px solid #000",transform:"scale(1.01)"},"&:active":{boxShadow:"2px 2px 0px #000",transform:"translate(1px)"}},r={boxShadow:"3px 3px 0px #000",border:"2px solid #000"};return nf.neobrutalism=(0,t.experimental_createTheme)({simpleStyles:!0,variables:{colorPrimary:"#DF1B1B",colorShimmer:"rgba(255,255,255,0.64)",fontWeight:{normal:500,medium:600,bold:700}},elements:{cardBox:{boxShadow:"7px 7px 0px #000",border:"3px solid #000"},card:{borderRadius:"0"},headerSubtitle:{color:"#212126"},alternativeMethodsBlockButton:e,socialButtonsIconButton:{...e},selectButton:{...e,...r,transition:"all 0.2s ease-in-out","&:focus":{boxShadow:"4px 4px 0px #000",border:"2px solid #000",transform:"scale(1.01)"}},socialButtonsBlockButton:{...e,color:"#212126"},profileSectionPrimaryButton:e,profileSectionItem:{color:"#212126"},avatarImageActionsUpload:e,menuButton:r,menuList:r,formButtonPrimary:e,navbarButton:e,formFieldAction:{fontWeight:"700"},formFieldInput:{...r,transition:"all 0.2s ease-in-out","&:focus":{boxShadow:"4px 4px 0px #000",border:"2px solid #000",transform:"scale(1.01)"},"&:hover":{...r,transform:"scale(1.01)"}},table:r,tableHead:{color:"#212126"},dividerLine:{background:"#000"},dividerText:{fontWeight:"700",color:"#212126"},footer:{background:"#fff","& div":{color:"#212126"}},footerActionText:{color:"#212126"},footerActionLink:{fontWeight:"700",borderBottom:"3px solid","&:focus":{boxShadow:"none"}},actionCard:{...r},badge:{border:"1px solid #000",background:"#fff",color:"#212126"}}}),nf}var sf={},l3;function LO(){if(l3)return sf;l3=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.experimental__simple=void 0;const t=Jh();return sf.experimental__simple=(0,t.experimental_createTheme)({simpleStyles:!0}),sf}var u3;function VO(){return u3||(u3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gS;e.__exportStar(yS(),t),e.__exportStar(OO(),t),e.__exportStar(BO(),t),e.__exportStar(LO(),t)}(Bv)),Bv}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gS;e.__exportStar(Jh(),t),e.__exportStar(VO(),t)})($8);function jO({children:t}){return N.jsx(F8,{publishableKey:"pk_test_ZnJlZS1jYWxmLTc4LmNsZXJrLmFjY291bnRzLmRldiQ",appearance:{baseTheme:$8.dark,variables:{colorPrimary:"#60A5FA",colorBackground:"rgba(15, 23, 42, 0.3)",colorText:"#fff",colorTextSecondary:"#94A3B8"},elements:{card:"bg-slate-900/30 backdrop-blur-xl border border-blue-500/20 shadow-2xl shadow-blue-500/5 rounded-xl mx-auto max-w-md w-full",headerTitle:"text-white text-2xl font-bold",headerSubtitle:"text-blue-200/80",socialButtonsBlockButton:"bg-slate-800/50 border border-blue-300/10 hover:bg-slate-700/50 hover:border-blue-400/20 transition-all duration-200",socialButtonsBlockButtonText:"text-white",formButtonPrimary:"bg-blue-500/80 hover:bg-blue-600/80 shadow-lg shadow-blue-500/20 transition-all duration-200",formFieldInput:"bg-slate-800/30 border-blue-300/20 text-white placeholder-blue-200/30 focus:border-blue-400/50 transition-all duration-200",formFieldLabel:"text-blue-100/80",dividerLine:"bg-blue-300/10",dividerText:"text-blue-200/50",footerActionLink:"text-blue-400 hover:text-blue-300",footer:"[&>*:first-child]:block [&>*:nth-child(n+2)]:!hidden",rootBox:"p-4 sm:p-6 z-50",main:"relative",card__main:"relative z-10 p-6",badge:"[&_div[data-localization-key='developmentBadge']]:!hidden"}},children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Jt=(t,e)=>{const r=te.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:u,className:c="",children:v,..._},b)=>te.createElement("svg",{ref:b,...FO,width:s,height:s,stroke:n,strokeWidth:u?Number(i)*24/Number(s):i,className:["lucide",`lucide-${UO(t)}`,c].join(" "),..._},[...e.map(([x,S])=>te.createElement(x,S)),...Array.isArray(v)?v:[v]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Jt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=Jt("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=Jt("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=Jt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=Jt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Jt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=Jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=Jt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=Jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=Jt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=Jt("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=Jt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=Jt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Jt("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Jt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=Jt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=Jt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=Jt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=Jt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=Jt("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=Jt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=Jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=Jt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=Jt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Jt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=Jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=Jt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rB=()=>{const{winRate:t,wins:e,losses:r}=z8(),[n,s]=te.useState(!1),[i,u]=te.useState(t);return te.useEffect(()=>{s(!0),u(t);const c=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(c)},[t,e,r]),N.jsxs("div",{className:"relative group",children:[N.jsxs("button",{className:`flex items-center justify-center gap-1.5 w-auto px-2.5 h-8 rounded-lg 
        bg-gray-700/40 hover:bg-gray-700 border border-gray-600/50 
        hover:border-green-500/30 transition-all duration-300
        ${n?"animate-pulse text-blue-400":"text-green-400"}`,children:[N.jsx(xS,{className:"w-4 h-4"}),N.jsxs("span",{className:`text-sm ${n?"animate-[countUpdate_0.5s_ease-out]":""}`,children:[i.toFixed(0),"%"]})]}),N.jsx("div",{className:`absolute right-0 top-full mt-2 p-3 \r
        bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-lg\r
        opacity-0 group-hover:opacity-100 transition-opacity\r
        pointer-events-none min-w-[140px]`,children:N.jsxs("div",{className:"space-y-1 text-sm whitespace-nowrap",children:[N.jsxs("p",{className:"text-green-400",children:["Wins: ",e]}),N.jsxs("p",{className:"text-red-400",children:["Losses: ",r]}),N.jsx("div",{className:"pt-1 mt-1 border-t border-gray-700",children:N.jsxs("p",{className:"text-blue-400",children:["Win Rate: ",(e/(e+r)*100||0).toFixed(1),"%"]})})]})})]})},X1=10,TS=()=>{const{user:t,isLoaded:e}=Qi(),[r,n]=te.useState(0),[s,i]=te.useState(!1),[u,c]=te.useState(!1);return te.useEffect(()=>{!e||!t||os(t).then(x=>{n(x.analysisCount||0),i(x.isPremium||!1)})},[t,e]),{isPremium:s,showPopup:u,incrementAnalysisCount:async()=>{if(!t)return!1;if(s)return!0;if(r>=X1)return c(!0),!1;try{const x=r+1;return n(x),await la(t,{analysisCount:x}),x>=X1&&c(!0),!0}catch(x){return console.error("Failed to update analysis count:",x),n(r),!1}},handlePayment:async()=>{t&&(await la(t,{isPremium:!0}),i(!0),c(!1))},closePopup:()=>{c(!1)},analysisCount:r}},nB=()=>{const{analysisCount:t,isPremium:e}=TS(),r=Math.max(0,X1-t);return e?null:N.jsxs("div",{className:"relative group",children:[N.jsxs("button",{className:`flex items-center justify-center gap-1.5 w-auto px-2.5 h-8 rounded-lg 
        ${r===0||r<=3?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-700/40 text-blue-400 border-gray-600/50"} 
        hover:bg-gray-700 border hover:border-blue-500/30 
        transition-all duration-300`,children:[N.jsx(tw,{className:"w-4 h-4"}),N.jsx("span",{className:"text-sm",children:r})]}),N.jsx("div",{className:`absolute right-0 top-full mt-2 p-3 \r
        bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-lg\r
        opacity-0 group-hover:opacity-100 transition-opacity\r
        pointer-events-none min-w-[180px] text-sm`,children:N.jsx("p",{className:"text-gray-300",children:r===0?"No analyses remaining":`${r} free ${r===1?"analysis":"analyses"} remaining`})})]})},iB=["user_2v0X4Rfy4U6wsZnT6OMKJGSpNqo`","user_2sF7P8RmU30ZAPZRMJkJ1NjUBib"],sB=()=>{const{user:t,isLoaded:e}=Qi();return!e||!t||!iB.includes(t.id)?null:N.jsxs(zf,{to:"/admin",className:`flex items-center gap-2 px-3 py-2 rounded-lg\r
        bg-gray-700/40 hover:bg-gray-700/60\r
        border border-gray-600/50 hover:border-blue-500/30\r
        text-gray-300 hover:text-white\r
        transition-all duration-300`,children:[N.jsx(JO,{className:"w-4 h-4"}),N.jsx("span",{className:"text-sm",children:"Admin"})]})},aB=()=>{};var d3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},oB=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],u=t[r++],c=t[r++],v=((s&7)<<18|(i&63)<<12|(u&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(v>>10)),e[n++]=String.fromCharCode(56320+(v&1023))}else{const i=t[r++],u=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|u&63)}}return e.join("")},RS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],u=s+1<t.length,c=u?t[s+1]:0,v=s+2<t.length,_=v?t[s+2]:0,b=i>>2,x=(i&3)<<4|c>>4;let S=(c&15)<<2|_>>6,I=_&63;v||(I=64,u||(S=64)),n.push(r[b],r[x],r[S],r[I])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],c=s<t.length?r[t.charAt(s)]:0;++s;const _=s<t.length?r[t.charAt(s)]:64;++s;const x=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||c==null||_==null||x==null)throw new lB;const S=i<<2|c>>4;if(n.push(S),_!==64){const I=c<<4&240|_>>2;if(n.push(I),x!==64){const A=_<<6&192|x;n.push(A)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uB=function(t){const e=AS(t);return RS.encodeByteArray(e,!0)},P0=function(t){return uB(t).replace(/\./g,"")},fB=function(t){try{return RS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=()=>hB().__FIREBASE_DEFAULTS__,dB=()=>{if(typeof process>"u"||typeof d3>"u")return;const t=d3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fB(t[1]);return e&&JSON.parse(e)},rw=()=>{try{return aB()||cB()||dB()||pB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mB=t=>{var e,r;return(r=(e=rw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},vB=t=>{const e=mB(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},kS=()=>{var t;return(t=rw())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[P0(JSON.stringify(r)),P0(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wB(){var t;const e=(t=rw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PS(){return!wB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CS(){try{return typeof indexedDB=="object"}catch{return!1}}function _B(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="FirebaseError";class _u extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=bB,Object.setPrototypeOf(this,_u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NS.prototype.create)}}class NS{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],u=i?xB(i,n):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new _u(s,c,n)}}function xB(t,e){return t.replace(MB,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const MB=/\{\$([^}]+)}/g;function N0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],u=e[s];if(p3(i)&&p3(u)){if(!N0(i,u))return!1}else if(i!==u)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function p3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){return t&&t._delegate?t._delegate:t}class Mh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new gB;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IB(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&u.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const u=this.instances.get(s);return u&&e(u,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:SB(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SB(t){return t===$a?void 0:t}function IB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new EB(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qt||(qt={}));const AB={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},RB=qt.INFO,kB={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},PB=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=kB[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class DS{constructor(e){this.name=e,this._logLevel=RB,this._logHandler=PB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const CB=(t,e)=>e.some(r=>t instanceof r);let m3,v3;function NB(){return m3||(m3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DB(){return v3||(v3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,ey=new WeakMap,BS=new WeakMap,Lv=new WeakMap,nw=new WeakMap;function OB(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",u)},i=()=>{r(ua(t.result)),s()},u=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",u)});return e.then(r=>{r instanceof IDBCursor&&OS.set(r,t)}).catch(()=>{}),nw.set(e,t),e}function BB(t){if(ey.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",u),t.removeEventListener("abort",u)},i=()=>{r(),s()},u=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",u),t.addEventListener("abort",u)});ey.set(t,e)}let ty={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BS.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ua(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LB(t){ty=t(ty)}function VB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Vv(this),e,...r);return BS.set(n,e.sort?e.sort():[e]),ua(n)}:DB().includes(t)?function(...e){return t.apply(Vv(this),e),ua(OS.get(this))}:function(...e){return ua(t.apply(Vv(this),e))}}function jB(t){return typeof t=="function"?VB(t):(t instanceof IDBTransaction&&BB(t),CB(t,NB())?new Proxy(t,ty):t)}function ua(t){if(t instanceof IDBRequest)return OB(t);if(Lv.has(t))return Lv.get(t);const e=jB(t);return e!==t&&(Lv.set(t,e),nw.set(e,t)),e}const Vv=t=>nw.get(t);function FB(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const u=indexedDB.open(t,e),c=ua(u);return n&&u.addEventListener("upgradeneeded",v=>{n(ua(u.result),v.oldVersion,v.newVersion,ua(u.transaction),v)}),r&&u.addEventListener("blocked",v=>r(v.oldVersion,v.newVersion,v)),c.then(v=>{i&&v.addEventListener("close",()=>i()),s&&v.addEventListener("versionchange",_=>s(_.oldVersion,_.newVersion,_))}).catch(()=>{}),c}const UB=["get","getKey","getAll","getAllKeys","count"],zB=["put","add","delete","clear"],jv=new Map;function g3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jv.get(e))return jv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=zB.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||UB.includes(r)))return;const i=async function(u,...c){const v=this.transaction(u,s?"readwrite":"readonly");let _=v.store;return n&&(_=_.index(c.shift())),(await Promise.all([_[r](...c),s&&v.done]))[0]};return jv.set(e,i),i}LB(t=>({...t,get:(e,r,n)=>g3(e,r)||t.get(e,r,n),has:(e,r)=>!!g3(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(qB(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function qB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ry="@firebase/app",y3="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new DS("@firebase/app"),KB="@firebase/app-compat",HB="@firebase/analytics-compat",WB="@firebase/analytics",GB="@firebase/app-check-compat",ZB="@firebase/app-check",QB="@firebase/auth",YB="@firebase/auth-compat",JB="@firebase/database",XB="@firebase/data-connect",eL="@firebase/database-compat",tL="@firebase/functions",rL="@firebase/functions-compat",nL="@firebase/installations",iL="@firebase/installations-compat",sL="@firebase/messaging",aL="@firebase/messaging-compat",oL="@firebase/performance",lL="@firebase/performance-compat",uL="@firebase/remote-config",fL="@firebase/remote-config-compat",hL="@firebase/storage",cL="@firebase/storage-compat",dL="@firebase/firestore",pL="@firebase/vertexai",mL="@firebase/firestore-compat",vL="firebase",gL="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]",yL={[ry]:"fire-core",[KB]:"fire-core-compat",[WB]:"fire-analytics",[HB]:"fire-analytics-compat",[ZB]:"fire-app-check",[GB]:"fire-app-check-compat",[QB]:"fire-auth",[YB]:"fire-auth-compat",[JB]:"fire-rtdb",[XB]:"fire-data-connect",[eL]:"fire-rtdb-compat",[tL]:"fire-fn",[rL]:"fire-fn-compat",[nL]:"fire-iid",[iL]:"fire-iid-compat",[sL]:"fire-fcm",[aL]:"fire-fcm-compat",[oL]:"fire-perf",[lL]:"fire-perf-compat",[uL]:"fire-rc",[fL]:"fire-rc-compat",[hL]:"fire-gcs",[cL]:"fire-gcs-compat",[dL]:"fire-fst",[mL]:"fire-fst-compat",[pL]:"fire-vertex","fire-js":"fire-js",[vL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=new Map,wL=new Map,iy=new Map;function w3(t,e){try{t.container.addComponent(e)}catch(r){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function O0(t){const e=t.name;if(iy.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,t);for(const r of D0.values())w3(r,t);for(const r of wL.values())w3(r,t);return!0}function _L(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function bL(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fa=new NS("app","Firebase",xL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Mh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=gL;function LS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ny,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw fa.create("bad-app-name",{appName:String(s)});if(r||(r=kS()),!r)throw fa.create("no-options");const i=D0.get(s);if(i){if(N0(r,i.options)&&N0(n,i.config))return i;throw fa.create("duplicate-app",{appName:s})}const u=new TB(s);for(const v of iy.values())u.addComponent(v);const c=new ML(r,n,u);return D0.set(s,c),c}function SL(t=ny){const e=D0.get(t);if(!e&&t===ny&&kS())return LS();if(!e)throw fa.create("no-app",{appName:t});return e}function Al(t,e,r){var n;let s=(n=yL[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),u=e.match(/\s|\//);if(i||u){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(c.join(" "));return}O0(new Mh(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-heartbeat-database",TL=1,Eh="firebase-heartbeat-store";let Fv=null;function VS(){return Fv||(Fv=FB(IL,TL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Eh)}catch(r){console.warn(r)}}}}).catch(t=>{throw fa.create("idb-open",{originalErrorMessage:t.message})})),Fv}async function AL(t){try{const r=(await VS()).transaction(Eh),n=await r.objectStore(Eh).get(jS(t));return await r.done,n}catch(e){if(e instanceof _u)ys.warn(e.message);else{const r=fa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(r.message)}}}async function _3(t,e){try{const n=(await VS()).transaction(Eh,"readwrite");await n.objectStore(Eh).put(e,jS(t)),await n.done}catch(r){if(r instanceof _u)ys.warn(r.message);else{const n=fa.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ys.warn(n.message)}}}function jS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1024,kL=30;class PL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new NL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b3();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(u=>u.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>kL){const u=DL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ys.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=b3(),{heartbeatsToSend:n,unsentEntries:s}=CL(this._heartbeatsCache.heartbeats),i=P0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ys.warn(r),""}}}function b3(){return new Date().toISOString().substring(0,10)}function CL(t,e=RL){const r=[];let n=t.slice();for(const s of t){const i=r.find(u=>u.agent===s.agent);if(i){if(i.dates.push(s.date),x3(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),x3(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class NL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CS()?_B().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await AL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return _3(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return _3(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x3(t){return P0(JSON.stringify({version:2,heartbeats:t})).length}function DL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){O0(new Mh("platform-logger",e=>new $B(e),"PRIVATE")),O0(new Mh("heartbeat",e=>new PL(e),"PRIVATE")),Al(ry,y3,t),Al(ry,y3,"esm2017"),Al("fire-js","")}OL("");var BL="firebase",LL="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al(BL,LL,"app");var M3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ha,FS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,B){function D(){}D.prototype=B.prototype,j.D=B.prototype,j.prototype=new D,j.prototype.constructor=j,j.C=function($,g,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return B.prototype[g].apply($,l)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,B,D){D||(D=0);var $=Array(16);if(typeof B=="string")for(var g=0;16>g;++g)$[g]=B.charCodeAt(D++)|B.charCodeAt(D++)<<8|B.charCodeAt(D++)<<16|B.charCodeAt(D++)<<24;else for(g=0;16>g;++g)$[g]=B[D++]|B[D++]<<8|B[D++]<<16|B[D++]<<24;B=j.g[0],D=j.g[1],g=j.g[2];var a=j.g[3],l=B+(a^D&(g^a))+$[0]+3614090360&4294967295;B=D+(l<<7&4294967295|l>>>25),l=a+(g^B&(D^g))+$[1]+3905402710&4294967295,a=B+(l<<12&4294967295|l>>>20),l=g+(D^a&(B^D))+$[2]+606105819&4294967295,g=a+(l<<17&4294967295|l>>>15),l=D+(B^g&(a^B))+$[3]+3250441966&4294967295,D=g+(l<<22&4294967295|l>>>10),l=B+(a^D&(g^a))+$[4]+4118548399&4294967295,B=D+(l<<7&4294967295|l>>>25),l=a+(g^B&(D^g))+$[5]+1200080426&4294967295,a=B+(l<<12&4294967295|l>>>20),l=g+(D^a&(B^D))+$[6]+2821735955&4294967295,g=a+(l<<17&4294967295|l>>>15),l=D+(B^g&(a^B))+$[7]+4249261313&4294967295,D=g+(l<<22&4294967295|l>>>10),l=B+(a^D&(g^a))+$[8]+1770035416&4294967295,B=D+(l<<7&4294967295|l>>>25),l=a+(g^B&(D^g))+$[9]+2336552879&4294967295,a=B+(l<<12&4294967295|l>>>20),l=g+(D^a&(B^D))+$[10]+4294925233&4294967295,g=a+(l<<17&4294967295|l>>>15),l=D+(B^g&(a^B))+$[11]+2304563134&4294967295,D=g+(l<<22&4294967295|l>>>10),l=B+(a^D&(g^a))+$[12]+1804603682&4294967295,B=D+(l<<7&4294967295|l>>>25),l=a+(g^B&(D^g))+$[13]+4254626195&4294967295,a=B+(l<<12&4294967295|l>>>20),l=g+(D^a&(B^D))+$[14]+2792965006&4294967295,g=a+(l<<17&4294967295|l>>>15),l=D+(B^g&(a^B))+$[15]+1236535329&4294967295,D=g+(l<<22&4294967295|l>>>10),l=B+(g^a&(D^g))+$[1]+4129170786&4294967295,B=D+(l<<5&4294967295|l>>>27),l=a+(D^g&(B^D))+$[6]+3225465664&4294967295,a=B+(l<<9&4294967295|l>>>23),l=g+(B^D&(a^B))+$[11]+643717713&4294967295,g=a+(l<<14&4294967295|l>>>18),l=D+(a^B&(g^a))+$[0]+3921069994&4294967295,D=g+(l<<20&4294967295|l>>>12),l=B+(g^a&(D^g))+$[5]+3593408605&4294967295,B=D+(l<<5&4294967295|l>>>27),l=a+(D^g&(B^D))+$[10]+38016083&4294967295,a=B+(l<<9&4294967295|l>>>23),l=g+(B^D&(a^B))+$[15]+3634488961&4294967295,g=a+(l<<14&4294967295|l>>>18),l=D+(a^B&(g^a))+$[4]+3889429448&4294967295,D=g+(l<<20&4294967295|l>>>12),l=B+(g^a&(D^g))+$[9]+568446438&4294967295,B=D+(l<<5&4294967295|l>>>27),l=a+(D^g&(B^D))+$[14]+3275163606&4294967295,a=B+(l<<9&4294967295|l>>>23),l=g+(B^D&(a^B))+$[3]+4107603335&4294967295,g=a+(l<<14&4294967295|l>>>18),l=D+(a^B&(g^a))+$[8]+1163531501&4294967295,D=g+(l<<20&4294967295|l>>>12),l=B+(g^a&(D^g))+$[13]+2850285829&4294967295,B=D+(l<<5&4294967295|l>>>27),l=a+(D^g&(B^D))+$[2]+4243563512&4294967295,a=B+(l<<9&4294967295|l>>>23),l=g+(B^D&(a^B))+$[7]+1735328473&4294967295,g=a+(l<<14&4294967295|l>>>18),l=D+(a^B&(g^a))+$[12]+2368359562&4294967295,D=g+(l<<20&4294967295|l>>>12),l=B+(D^g^a)+$[5]+4294588738&4294967295,B=D+(l<<4&4294967295|l>>>28),l=a+(B^D^g)+$[8]+2272392833&4294967295,a=B+(l<<11&4294967295|l>>>21),l=g+(a^B^D)+$[11]+1839030562&4294967295,g=a+(l<<16&4294967295|l>>>16),l=D+(g^a^B)+$[14]+4259657740&4294967295,D=g+(l<<23&4294967295|l>>>9),l=B+(D^g^a)+$[1]+2763975236&4294967295,B=D+(l<<4&4294967295|l>>>28),l=a+(B^D^g)+$[4]+1272893353&4294967295,a=B+(l<<11&4294967295|l>>>21),l=g+(a^B^D)+$[7]+4139469664&4294967295,g=a+(l<<16&4294967295|l>>>16),l=D+(g^a^B)+$[10]+3200236656&4294967295,D=g+(l<<23&4294967295|l>>>9),l=B+(D^g^a)+$[13]+681279174&4294967295,B=D+(l<<4&4294967295|l>>>28),l=a+(B^D^g)+$[0]+3936430074&4294967295,a=B+(l<<11&4294967295|l>>>21),l=g+(a^B^D)+$[3]+3572445317&4294967295,g=a+(l<<16&4294967295|l>>>16),l=D+(g^a^B)+$[6]+76029189&4294967295,D=g+(l<<23&4294967295|l>>>9),l=B+(D^g^a)+$[9]+3654602809&4294967295,B=D+(l<<4&4294967295|l>>>28),l=a+(B^D^g)+$[12]+3873151461&4294967295,a=B+(l<<11&4294967295|l>>>21),l=g+(a^B^D)+$[15]+530742520&4294967295,g=a+(l<<16&4294967295|l>>>16),l=D+(g^a^B)+$[2]+3299628645&4294967295,D=g+(l<<23&4294967295|l>>>9),l=B+(g^(D|~a))+$[0]+4096336452&4294967295,B=D+(l<<6&4294967295|l>>>26),l=a+(D^(B|~g))+$[7]+1126891415&4294967295,a=B+(l<<10&4294967295|l>>>22),l=g+(B^(a|~D))+$[14]+2878612391&4294967295,g=a+(l<<15&4294967295|l>>>17),l=D+(a^(g|~B))+$[5]+4237533241&4294967295,D=g+(l<<21&4294967295|l>>>11),l=B+(g^(D|~a))+$[12]+1700485571&4294967295,B=D+(l<<6&4294967295|l>>>26),l=a+(D^(B|~g))+$[3]+2399980690&4294967295,a=B+(l<<10&4294967295|l>>>22),l=g+(B^(a|~D))+$[10]+4293915773&4294967295,g=a+(l<<15&4294967295|l>>>17),l=D+(a^(g|~B))+$[1]+2240044497&4294967295,D=g+(l<<21&4294967295|l>>>11),l=B+(g^(D|~a))+$[8]+1873313359&4294967295,B=D+(l<<6&4294967295|l>>>26),l=a+(D^(B|~g))+$[15]+4264355552&4294967295,a=B+(l<<10&4294967295|l>>>22),l=g+(B^(a|~D))+$[6]+2734768916&4294967295,g=a+(l<<15&4294967295|l>>>17),l=D+(a^(g|~B))+$[13]+1309151649&4294967295,D=g+(l<<21&4294967295|l>>>11),l=B+(g^(D|~a))+$[4]+4149444226&4294967295,B=D+(l<<6&4294967295|l>>>26),l=a+(D^(B|~g))+$[11]+3174756917&4294967295,a=B+(l<<10&4294967295|l>>>22),l=g+(B^(a|~D))+$[2]+718787259&4294967295,g=a+(l<<15&4294967295|l>>>17),l=D+(a^(g|~B))+$[9]+3951481745&4294967295,j.g[0]=j.g[0]+B&4294967295,j.g[1]=j.g[1]+(g+(l<<21&4294967295|l>>>11))&4294967295,j.g[2]=j.g[2]+g&4294967295,j.g[3]=j.g[3]+a&4294967295}n.prototype.u=function(j,B){B===void 0&&(B=j.length);for(var D=B-this.blockSize,$=this.B,g=this.h,a=0;a<B;){if(g==0)for(;a<=D;)s(this,j,a),a+=this.blockSize;if(typeof j=="string"){for(;a<B;)if($[g++]=j.charCodeAt(a++),g==this.blockSize){s(this,$),g=0;break}}else for(;a<B;)if($[g++]=j[a++],g==this.blockSize){s(this,$),g=0;break}}this.h=g,this.o+=B},n.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var B=1;B<j.length-8;++B)j[B]=0;var D=8*this.o;for(B=j.length-8;B<j.length;++B)j[B]=D&255,D/=256;for(this.u(j),j=Array(16),B=D=0;4>B;++B)for(var $=0;32>$;$+=8)j[D++]=this.g[B]>>>$&255;return j};function i(j,B){var D=c;return Object.prototype.hasOwnProperty.call(D,j)?D[j]:D[j]=B(j)}function u(j,B){this.h=B;for(var D=[],$=!0,g=j.length-1;0<=g;g--){var a=j[g]|0;$&&a==B||(D[g]=a,$=!1)}this.g=D}var c={};function v(j){return-128<=j&&128>j?i(j,function(B){return new u([B|0],0>B?-1:0)}):new u([j|0],0>j?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return x;if(0>j)return F(_(-j));for(var B=[],D=1,$=0;j>=D;$++)B[$]=j/D|0,D*=4294967296;return new u(B,0)}function b(j,B){if(j.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(j.charAt(0)=="-")return F(b(j.substring(1),B));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=_(Math.pow(B,8)),$=x,g=0;g<j.length;g+=8){var a=Math.min(8,j.length-g),l=parseInt(j.substring(g,g+a),B);8>a?(a=_(Math.pow(B,a)),$=$.j(a).add(_(l))):($=$.j(D),$=$.add(_(l)))}return $}var x=v(0),S=v(1),I=v(16777216);t=u.prototype,t.m=function(){if(k(this))return-F(this).m();for(var j=0,B=1,D=0;D<this.g.length;D++){var $=this.i(D);j+=(0<=$?$:4294967296+$)*B,B*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A(this))return"0";if(k(this))return"-"+F(this).toString(j);for(var B=_(Math.pow(j,6)),D=this,$="";;){var g=U(D,B).g;D=C(D,g.j(B));var a=((0<D.g.length?D.g[0]:D.h)>>>0).toString(j);if(D=g,A(D))return a+$;for(;6>a.length;)a="0"+a;$=a+$}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function A(j){if(j.h!=0)return!1;for(var B=0;B<j.g.length;B++)if(j.g[B]!=0)return!1;return!0}function k(j){return j.h==-1}t.l=function(j){return j=C(this,j),k(j)?-1:A(j)?0:1};function F(j){for(var B=j.g.length,D=[],$=0;$<B;$++)D[$]=~j.g[$];return new u(D,~j.h).add(S)}t.abs=function(){return k(this)?F(this):this},t.add=function(j){for(var B=Math.max(this.g.length,j.g.length),D=[],$=0,g=0;g<=B;g++){var a=$+(this.i(g)&65535)+(j.i(g)&65535),l=(a>>>16)+(this.i(g)>>>16)+(j.i(g)>>>16);$=l>>>16,a&=65535,l&=65535,D[g]=l<<16|a}return new u(D,D[D.length-1]&-2147483648?-1:0)};function C(j,B){return j.add(F(B))}t.j=function(j){if(A(this)||A(j))return x;if(k(this))return k(j)?F(this).j(F(j)):F(F(this).j(j));if(k(j))return F(this.j(F(j)));if(0>this.l(I)&&0>j.l(I))return _(this.m()*j.m());for(var B=this.g.length+j.g.length,D=[],$=0;$<2*B;$++)D[$]=0;for($=0;$<this.g.length;$++)for(var g=0;g<j.g.length;g++){var a=this.i($)>>>16,l=this.i($)&65535,f=j.i(g)>>>16,h=j.i(g)&65535;D[2*$+2*g]+=l*h,R(D,2*$+2*g),D[2*$+2*g+1]+=a*h,R(D,2*$+2*g+1),D[2*$+2*g+1]+=l*f,R(D,2*$+2*g+1),D[2*$+2*g+2]+=a*f,R(D,2*$+2*g+2)}for($=0;$<B;$++)D[$]=D[2*$+1]<<16|D[2*$];for($=B;$<2*B;$++)D[$]=0;return new u(D,0)};function R(j,B){for(;(j[B]&65535)!=j[B];)j[B+1]+=j[B]>>>16,j[B]&=65535,B++}function V(j,B){this.g=j,this.h=B}function U(j,B){if(A(B))throw Error("division by zero");if(A(j))return new V(x,x);if(k(j))return B=U(F(j),B),new V(F(B.g),F(B.h));if(k(B))return B=U(j,F(B)),new V(F(B.g),B.h);if(30<j.g.length){if(k(j)||k(B))throw Error("slowDivide_ only works with positive integers.");for(var D=S,$=B;0>=$.l(j);)D=Q(D),$=Q($);var g=ee(D,1),a=ee($,1);for($=ee($,2),D=ee(D,2);!A($);){var l=a.add($);0>=l.l(j)&&(g=g.add(D),a=l),$=ee($,1),D=ee(D,1)}return B=C(j,g.j(B)),new V(g,B)}for(g=x;0<=j.l(B);){for(D=Math.max(1,Math.floor(j.m()/B.m())),$=Math.ceil(Math.log(D)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),a=_(D),l=a.j(B);k(l)||0<l.l(j);)D-=$,a=_(D),l=a.j(B);A(a)&&(a=S),g=g.add(a),j=C(j,l)}return new V(g,j)}t.A=function(j){return U(this,j).h},t.and=function(j){for(var B=Math.max(this.g.length,j.g.length),D=[],$=0;$<B;$++)D[$]=this.i($)&j.i($);return new u(D,this.h&j.h)},t.or=function(j){for(var B=Math.max(this.g.length,j.g.length),D=[],$=0;$<B;$++)D[$]=this.i($)|j.i($);return new u(D,this.h|j.h)},t.xor=function(j){for(var B=Math.max(this.g.length,j.g.length),D=[],$=0;$<B;$++)D[$]=this.i($)^j.i($);return new u(D,this.h^j.h)};function Q(j){for(var B=j.g.length+1,D=[],$=0;$<B;$++)D[$]=j.i($)<<1|j.i($-1)>>>31;return new u(D,j.h)}function ee(j,B){var D=B>>5;B%=32;for(var $=j.g.length-D,g=[],a=0;a<$;a++)g[a]=0<B?j.i(a+D)>>>B|j.i(a+D+1)<<32-B:j.i(a+D);return new u(g,j.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,FS=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=_,u.fromString=b,ha=u}).apply(typeof M3<"u"?M3:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,Sf,zS,Vd,sy,$S,qS,KS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(M,P,O){return M==Array.prototype||M==Object.prototype||(M[P]=O.value),M};function r(M){M=[typeof globalThis=="object"&&globalThis,M,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var P=0;P<M.length;++P){var O=M[P];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var n=r(this);function s(M,P){if(P)e:{var O=n;M=M.split(".");for(var W=0;W<M.length-1;W++){var ve=M[W];if(!(ve in O))break e;O=O[ve]}M=M[M.length-1],W=O[M],P=P(W),P!=W&&P!=null&&e(O,M,{configurable:!0,writable:!0,value:P})}}function i(M,P){M instanceof String&&(M+="");var O=0,W=!1,ve={next:function(){if(!W&&O<M.length){var Pe=O++;return{value:P(Pe,M[Pe]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ve[Symbol.iterator]=function(){return ve},ve}s("Array.prototype.values",function(M){return M||function(){return i(this,function(P,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function v(M){var P=typeof M;return P=P!="object"?P:M?Array.isArray(M)?"array":P:"null",P=="array"||P=="object"&&typeof M.length=="number"}function _(M){var P=typeof M;return P=="object"&&M!=null||P=="function"}function b(M,P,O){return M.call.apply(M.bind,arguments)}function x(M,P,O){if(!M)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ve,W),M.apply(P,ve)}}return function(){return M.apply(P,arguments)}}function S(M,P,O){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:x,S.apply(null,arguments)}function I(M,P){var O=Array.prototype.slice.call(arguments,1);return function(){var W=O.slice();return W.push.apply(W,arguments),M.apply(this,W)}}function A(M,P){function O(){}O.prototype=P.prototype,M.aa=P.prototype,M.prototype=new O,M.prototype.constructor=M,M.Qb=function(W,ve,Pe){for(var He=Array(arguments.length-2),er=2;er<arguments.length;er++)He[er-2]=arguments[er];return P.prototype[ve].apply(W,He)}}function k(M){const P=M.length;if(0<P){const O=Array(P);for(let W=0;W<P;W++)O[W]=M[W];return O}return[]}function F(M,P){for(let O=1;O<arguments.length;O++){const W=arguments[O];if(v(W)){const ve=M.length||0,Pe=W.length||0;M.length=ve+Pe;for(let He=0;He<Pe;He++)M[ve+He]=W[He]}else M.push(W)}}class C{constructor(P,O){this.i=P,this.j=O,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function R(M){return/^[\s\xa0]*$/.test(M)}function V(){var M=c.navigator;return M&&(M=M.userAgent)?M:""}function U(M){return U[" "](M),M}U[" "]=function(){};var Q=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ee(M,P,O){for(const W in M)P.call(O,M[W],W,M)}function j(M,P){for(const O in M)P.call(void 0,M[O],O,M)}function B(M){const P={};for(const O in M)P[O]=M[O];return P}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(M,P){let O,W;for(let ve=1;ve<arguments.length;ve++){W=arguments[ve];for(O in W)M[O]=W[O];for(let Pe=0;Pe<D.length;Pe++)O=D[Pe],Object.prototype.hasOwnProperty.call(W,O)&&(M[O]=W[O])}}function g(M){var P=1;M=M.split(":");const O=[];for(;0<P&&M.length;)O.push(M.shift()),P--;return M.length&&O.push(M.join(":")),O}function a(M){c.setTimeout(()=>{throw M},0)}function l(){var M=d;let P=null;return M.g&&(P=M.g,M.g=M.g.next,M.g||(M.h=null),P.next=null),P}class f{constructor(){this.h=this.g=null}add(P,O){const W=h.get();W.set(P,O),this.h?this.h.next=W:this.g=W,this.h=W}}var h=new C(()=>new m,M=>M.reset());class m{constructor(){this.next=this.g=this.h=null}set(P,O){this.h=P,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let y,w=!1,d=new f,o=()=>{const M=c.Promise.resolve(void 0);y=()=>{M.then(p)}};var p=()=>{for(var M;M=l();){try{M.h.call(M.g)}catch(O){a(O)}var P=h;P.j(M),100>P.h&&(P.h++,M.next=P.g,P.g=M)}w=!1};function E(){this.s=this.s,this.C=this.C}E.prototype.s=!1,E.prototype.ma=function(){this.s||(this.s=!0,this.N())},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(M,P){this.type=M,this.g=this.target=P,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var M=!1,P=Object.defineProperty({},"passive",{get:function(){M=!0}});try{const O=()=>{};c.addEventListener("test",O,P),c.removeEventListener("test",O,P)}catch{}return M}();function K(M,P){if(T.call(this,M?M.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,M){var O=this.type=M.type,W=M.changedTouches&&M.changedTouches.length?M.changedTouches[0]:null;if(this.target=M.target||M.srcElement,this.g=P,P=M.relatedTarget){if(Q){e:{try{U(P.nodeName);var ve=!0;break e}catch{}ve=!1}ve||(P=null)}}else O=="mouseover"?P=M.fromElement:O=="mouseout"&&(P=M.toElement);this.relatedTarget=P,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0),this.button=M.button,this.key=M.key||"",this.ctrlKey=M.ctrlKey,this.altKey=M.altKey,this.shiftKey=M.shiftKey,this.metaKey=M.metaKey,this.pointerId=M.pointerId||0,this.pointerType=typeof M.pointerType=="string"?M.pointerType:Y[M.pointerType]||"",this.state=M.state,this.i=M,M.defaultPrevented&&K.aa.h.call(this)}}A(K,T);var Y={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var M=this.i;M.preventDefault?M.preventDefault():M.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),H=0;function Z(M,P,O,W,ve){this.listener=M,this.proxy=null,this.src=P,this.type=O,this.capture=!!W,this.ha=ve,this.key=++H,this.da=this.fa=!1}function X(M){M.da=!0,M.listener=null,M.proxy=null,M.src=null,M.ha=null}function Ge(M){this.src=M,this.g={},this.h=0}Ge.prototype.add=function(M,P,O,W,ve){var Pe=M.toString();M=this.g[Pe],M||(M=this.g[Pe]=[],this.h++);var He=se(M,P,W,ve);return-1<He?(P=M[He],O||(P.fa=!1)):(P=new Z(P,this.src,Pe,!!W,ve),P.fa=O,M.push(P)),P};function ne(M,P){var O=P.type;if(O in M.g){var W=M.g[O],ve=Array.prototype.indexOf.call(W,P,void 0),Pe;(Pe=0<=ve)&&Array.prototype.splice.call(W,ve,1),Pe&&(X(P),M.g[O].length==0&&(delete M.g[O],M.h--))}}function se(M,P,O,W){for(var ve=0;ve<M.length;++ve){var Pe=M[ve];if(!Pe.da&&Pe.listener==P&&Pe.capture==!!O&&Pe.ha==W)return ve}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),fe={};function me(M,P,O,W,ve){if(Array.isArray(P)){for(var Pe=0;Pe<P.length;Pe++)me(M,P[Pe],O,W,ve);return null}return O=_e(O),M&&M[L]?M.K(P,O,_(W)?!!W.capture:!1,ve):at(M,P,O,!1,W,ve)}function at(M,P,O,W,ve,Pe){if(!P)throw Error("Invalid event type");var He=_(ve)?!!ve.capture:!!ve,er=ht(M);if(er||(M[Ze]=er=new Ge(M)),O=er.add(P,O,W,He,Pe),O.proxy)return O;if(W=ge(),O.proxy=W,W.src=M,W.listener=O,M.addEventListener)z||(ve=He),ve===void 0&&(ve=!1),M.addEventListener(P.toString(),W,ve);else if(M.attachEvent)M.attachEvent(pe(P.toString()),W);else if(M.addListener&&M.removeListener)M.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return O}function ge(){function M(O){return P.call(M.src,M.listener,O)}const P=Ae;return M}function be(M,P,O,W,ve){if(Array.isArray(P))for(var Pe=0;Pe<P.length;Pe++)be(M,P[Pe],O,W,ve);else W=_(W)?!!W.capture:!!W,O=_e(O),M&&M[L]?(M=M.i,P=String(P).toString(),P in M.g&&(Pe=M.g[P],O=se(Pe,O,W,ve),-1<O&&(X(Pe[O]),Array.prototype.splice.call(Pe,O,1),Pe.length==0&&(delete M.g[P],M.h--)))):M&&(M=ht(M))&&(P=M.g[P.toString()],M=-1,P&&(M=se(P,O,W,ve)),(O=-1<M?P[M]:null)&&et(O))}function et(M){if(typeof M!="number"&&M&&!M.da){var P=M.src;if(P&&P[L])ne(P.i,M);else{var O=M.type,W=M.proxy;P.removeEventListener?P.removeEventListener(O,W,M.capture):P.detachEvent?P.detachEvent(pe(O),W):P.addListener&&P.removeListener&&P.removeListener(W),(O=ht(P))?(ne(O,M),O.h==0&&(O.src=null,P[Ze]=null)):X(M)}}}function pe(M){return M in fe?fe[M]:fe[M]="on"+M}function Ae(M,P){if(M.da)M=!0;else{P=new K(P,this);var O=M.listener,W=M.ha||M.src;M.fa&&et(M),M=O.call(W,P)}return M}function ht(M){return M=M[Ze],M instanceof Ge?M:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(M){return typeof M=="function"?M:(M[ce]||(M[ce]=function(P){return M.handleEvent(P)}),M[ce])}function Je(){E.call(this),this.i=new Ge(this),this.M=this,this.F=null}A(Je,E),Je.prototype[L]=!0,Je.prototype.removeEventListener=function(M,P,O,W){be(this,M,P,O,W)};function he(M,P){var O,W=M.F;if(W)for(O=[];W;W=W.F)O.push(W);if(M=M.M,W=P.type||P,typeof P=="string")P=new T(P,M);else if(P instanceof T)P.target=P.target||M;else{var ve=P;P=new T(W,M),$(P,ve)}if(ve=!0,O)for(var Pe=O.length-1;0<=Pe;Pe--){var He=P.g=O[Pe];ve=Te(He,W,!0,P)&&ve}if(He=P.g=M,ve=Te(He,W,!0,P)&&ve,ve=Te(He,W,!1,P)&&ve,O)for(Pe=0;Pe<O.length;Pe++)He=P.g=O[Pe],ve=Te(He,W,!1,P)&&ve}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var M=this.i,P;for(P in M.g){for(var O=M.g[P],W=0;W<O.length;W++)X(O[W]);delete M.g[P],M.h--}}this.F=null},Je.prototype.K=function(M,P,O,W){return this.i.add(String(M),P,!1,O,W)},Je.prototype.L=function(M,P,O,W){return this.i.add(String(M),P,!0,O,W)};function Te(M,P,O,W){if(P=M.i.g[String(P)],!P)return!0;P=P.concat();for(var ve=!0,Pe=0;Pe<P.length;++Pe){var He=P[Pe];if(He&&!He.da&&He.capture==O){var er=He.listener,Ur=He.ha||He.src;He.fa&&ne(M.i,He),ve=er.call(Ur,W)!==!1&&ve}}return ve&&!W.defaultPrevented}function lt(M,P,O){if(typeof M=="function")O&&(M=S(M,O));else if(M&&typeof M.handleEvent=="function")M=S(M.handleEvent,M);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(M,P||0)}function Ee(M){M.g=lt(()=>{M.g=null,M.i&&(M.i=!1,Ee(M))},M.l);const P=M.h;M.h=null,M.m.apply(null,P)}class ke extends E{constructor(P,O){super(),this.m=P,this.l=O,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(M){E.call(this),this.h=M,this.g={}}A(gt,E);var ye=[];function Ce(M){ee(M.g,function(P,O){this.g.hasOwnProperty(O)&&et(P)},M),M.g={}}gt.prototype.N=function(){gt.aa.N.call(this),Ce(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wt=c.JSON.stringify,Se=c.JSON.parse,Be=class{stringify(M){return c.JSON.stringify(M,void 0)}parse(M){return c.JSON.parse(M,void 0)}};function _t(){}_t.prototype.h=null;function xe(M){return M.h||(M.h=M.i())}function Ne(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Me(){T.call(this,"d")}A(Me,T);function De(){T.call(this,"c")}A(De,T);var dt={},Ie=null;function Re(){return Ie=Ie||new Je}dt.La="serverreachability";function yt(M){T.call(this,dt.La,M)}A(yt,T);function we(M){const P=Re();he(P,new yt(P))}dt.STAT_EVENT="statevent";function Oe(M,P){T.call(this,dt.STAT_EVENT,M),this.stat=P}A(Oe,T);function ot(M){const P=Re();he(P,new Oe(P,M))}dt.Ma="timingevent";function q(M,P){T.call(this,dt.Ma,M),this.size=P}A(q,T);function G(M,P){if(typeof M!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){M()},P)}function ue(){this.g=!0}ue.prototype.xa=function(){this.g=!1};function J(M,P,O,W,ve,Pe){M.info(function(){if(M.g)if(Pe)for(var He="",er=Pe.split("&"),Ur=0;Ur<er.length;Ur++){var Ht=er[Ur].split("=");if(1<Ht.length){var Gr=Ht[0];Ht=Ht[1];var Zr=Gr.split("_");He=2<=Zr.length&&Zr[1]=="type"?He+(Gr+"="+Ht+"&"):He+(Gr+"=redacted&")}}else He=null;else He=Pe;return"XMLHTTP REQ ("+W+") [attempt "+ve+"]: "+P+`
`+O+`
`+He})}function ie(M,P,O,W,ve,Pe,He){M.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ve+"]: "+P+`
`+O+`
`+Pe+" "+He})}function Fe(M,P,O,W){M.info(function(){return"XMLHTTP TEXT ("+P+"): "+oe(M,O)+(W?" "+W:"")})}function ae(M,P){M.info(function(){return"TIMEOUT: "+P})}ue.prototype.info=function(){};function oe(M,P){if(!M.g)return P;if(!P)return null;try{var O=JSON.parse(P);if(O){for(M=0;M<O.length;M++)if(Array.isArray(O[M])){var W=O[M];if(!(2>W.length)){var ve=W[1];if(Array.isArray(ve)&&!(1>ve.length)){var Pe=ve[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var He=1;He<ve.length;He++)ve[He]=""}}}}return wt(O)}catch{return P}}var je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},le;function $e(){}A($e,_t),$e.prototype.g=function(){return new XMLHttpRequest},$e.prototype.i=function(){return{}},le=new $e;function qe(M,P,O,W){this.j=M,this.i=P,this.l=O,this.R=W||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var st={},tt={};function ut(M,P,O){M.L=1,M.v=Ac(es(P)),M.m=O,M.P=!0,Pt(M,null)}function Pt(M,P){M.F=Date.now(),xt(M),M.A=es(M.v);var O=M.A,W=M.R;Array.isArray(W)||(W=[String(W)]),V_(O.i,"t",W),M.C=0,O=M.j.J,M.h=new mt,M.g=rb(M.j,O?P:null,!M.m),0<M.O&&(M.M=new ke(S(M.Y,M,M.g),M.O)),P=M.U,O=M.g,W=M.ca;var ve="readystatechange";Array.isArray(ve)||(ve&&(ye[0]=ve.toString()),ve=ye);for(var Pe=0;Pe<ve.length;Pe++){var He=me(O,ve[Pe],W||P.handleEvent,!1,P.h||P);if(!He)break;P.g[He.key]=He}P=M.H?B(M.H):{},M.m?(M.u||(M.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",M.g.ea(M.A,M.u,M.m,P)):(M.u="GET",M.g.ea(M.A,M.u,null,P)),we(),J(M.i,M.u,M.A,M.l,M.R,M.m)}qe.prototype.ca=function(M){M=M.target;const P=this.M;P&&ts(M)==3?P.j():this.Y(M)},qe.prototype.Y=function(M){try{if(M==this.g)e:{const Zr=ts(this.g);var P=this.g.Ba();const $o=this.g.Z();if(!(3>Zr)&&(Zr!=3||this.g&&(this.h.h||this.g.oa()||K_(this.g)))){this.J||Zr!=4||P==7||(P==8||0>=$o?we(3):we(2)),Ct(this);var O=this.g.Z();this.X=O;t:if(Bt(this)){var W=K_(this.g);M="";var ve=W.length,Pe=ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){St(this),Mt(this);var He="";break t}this.h.i=new c.TextDecoder}for(P=0;P<ve;P++)this.h.h=!0,M+=this.h.i.decode(W[P],{stream:!(Pe&&P==ve-1)});W.length=0,this.h.g+=M,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=O==200,ie(this.i,this.u,this.A,this.l,this.R,Zr,O),this.o){if(this.T&&!this.K){t:{if(this.g){var er,Ur=this.g;if((er=Ur.g?Ur.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(er)){var Ht=er;break t}}Ht=null}if(O=Ht)Fe(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lt(this,O);else{this.o=!1,this.s=3,ot(12),St(this),Mt(this);break e}}if(this.P){O=!0;let li;for(;!this.J&&this.C<He.length;)if(li=Tt(this,He),li==tt){Zr==4&&(this.s=4,ot(14),O=!1),Fe(this.i,this.l,null,"[Incomplete Response]");break}else if(li==st){this.s=4,ot(15),Fe(this.i,this.l,He,"[Invalid Chunk]"),O=!1;break}else Fe(this.i,this.l,li,null),Lt(this,li);if(Bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zr!=4||He.length!=0||this.h.h||(this.s=1,ot(16),O=!1),this.o=this.o&&O,!O)Fe(this.i,this.l,He,"[Invalid Chunked Response]"),St(this),Mt(this);else if(0<He.length&&!this.W){this.W=!0;var Gr=this.j;Gr.g==this&&Gr.ba&&!Gr.M&&(Gr.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),qm(Gr),Gr.M=!0,ot(11))}}else Fe(this.i,this.l,He,null),Lt(this,He);Zr==4&&St(this),this.o&&!this.J&&(Zr==4?J_(this.j,this):(this.o=!1,xt(this)))}else PA(this.g),O==400&&0<He.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),St(this),Mt(this)}}}catch{}finally{}};function Bt(M){return M.g?M.u=="GET"&&M.L!=2&&M.j.Ca:!1}function Tt(M,P){var O=M.C,W=P.indexOf(`
`,O);return W==-1?tt:(O=Number(P.substring(O,W)),isNaN(O)?st:(W+=1,W+O>P.length?tt:(P=P.slice(W,W+O),M.C=W+O,P)))}qe.prototype.cancel=function(){this.J=!0,St(this)};function xt(M){M.S=Date.now()+M.I,zt(M,M.I)}function zt(M,P){if(M.B!=null)throw Error("WatchDog timer not null");M.B=G(S(M.ba,M),P)}function Ct(M){M.B&&(c.clearTimeout(M.B),M.B=null)}qe.prototype.ba=function(){this.B=null;const M=Date.now();0<=M-this.S?(ae(this.i,this.A),this.L!=2&&(we(),ot(17)),St(this),this.s=2,Mt(this)):zt(this,this.S-M)};function Mt(M){M.j.G==0||M.J||J_(M.j,M)}function St(M){Ct(M);var P=M.M;P&&typeof P.ma=="function"&&P.ma(),M.M=null,Ce(M.U),M.g&&(P=M.g,M.g=null,P.abort(),P.ma())}function Lt(M,P){try{var O=M.j;if(O.G!=0&&(O.g==M||Xt(O.h,M))){if(!M.K&&Xt(O.h,M)&&O.G==3){try{var W=O.Da.g.parse(P)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ve=W;if(ve[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<M.F)Dc(O),Cc(O);else break e;$m(O),ot(18)}}else O.za=ve[1],0<O.za-O.T&&37500>ve[2]&&O.F&&O.v==0&&!O.C&&(O.C=G(S(O.Za,O),6e3));if(1>=Vt(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else Da(O,11)}else if((M.K||O.g==M)&&Dc(O),!R(P))for(ve=O.Da.g.parse(P),P=0;P<ve.length;P++){let Ht=ve[P];if(O.T=Ht[0],Ht=Ht[1],O.G==2)if(Ht[0]=="c"){O.K=Ht[1],O.ia=Ht[2];const Gr=Ht[3];Gr!=null&&(O.la=Gr,O.j.info("VER="+O.la));const Zr=Ht[4];Zr!=null&&(O.Aa=Zr,O.j.info("SVER="+O.Aa));const $o=Ht[5];$o!=null&&typeof $o=="number"&&0<$o&&(W=1.5*$o,O.L=W,O.j.info("backChannelRequestTimeoutMs_="+W)),W=O;const li=M.g;if(li){const Bc=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bc){var Pe=W.h;Pe.g||Bc.indexOf("spdy")==-1&&Bc.indexOf("quic")==-1&&Bc.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(yn(Pe,Pe.h),Pe.h=null))}if(W.D){const Km=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;Km&&(W.ya=Km,ir(W.I,W.D,Km))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-M.F,O.j.info("Handshake RTT: "+O.R+"ms")),W=O;var He=M;if(W.qa=tb(W,W.J?W.ia:null,W.W),He.K){Ou(W.h,He);var er=He,Ur=W.L;Ur&&(er.I=Ur),er.B&&(Ct(er),xt(er)),W.g=He}else Q_(W);0<O.i.length&&Nc(O)}else Ht[0]!="stop"&&Ht[0]!="close"||Da(O,7);else O.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Da(O,7):zm(O):Ht[0]!="noop"&&O.l&&O.l.ta(Ht),O.v=0)}}we(4)}catch{}}var nt=class{constructor(M,P){this.g=M,this.map=P}};function ct(M){this.l=M||10,c.PerformanceNavigationTiming?(M=c.performance.getEntriesByType("navigation"),M=0<M.length&&(M[0].nextHopProtocol=="hq"||M[0].nextHopProtocol=="h2")):M=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=M?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(M){return M.h?!0:M.g?M.g.size>=M.j:!1}function Vt(M){return M.h?1:M.g?M.g.size:0}function Xt(M,P){return M.h?M.h==P:M.g?M.g.has(P):!1}function yn(M,P){M.g?M.g.add(P):M.h=P}function Ou(M,P){M.h&&M.h==P?M.h=null:M.g&&M.g.has(P)&&M.g.delete(P)}ct.prototype.cancel=function(){if(this.i=Sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const M of this.g.values())M.cancel();this.g.clear()}};function Sc(M){if(M.h!=null)return M.i.concat(M.h.D);if(M.g!=null&&M.g.size!==0){let P=M.i;for(const O of M.g.values())P=P.concat(O.D);return P}return k(M.i)}function vA(M){if(M.V&&typeof M.V=="function")return M.V();if(typeof Map<"u"&&M instanceof Map||typeof Set<"u"&&M instanceof Set)return Array.from(M.values());if(typeof M=="string")return M.split("");if(v(M)){for(var P=[],O=M.length,W=0;W<O;W++)P.push(M[W]);return P}P=[],O=0;for(W in M)P[O++]=M[W];return P}function gA(M){if(M.na&&typeof M.na=="function")return M.na();if(!M.V||typeof M.V!="function"){if(typeof Map<"u"&&M instanceof Map)return Array.from(M.keys());if(!(typeof Set<"u"&&M instanceof Set)){if(v(M)||typeof M=="string"){var P=[];M=M.length;for(var O=0;O<M;O++)P.push(O);return P}P=[],O=0;for(const W in M)P[O++]=W;return P}}}function C_(M,P){if(M.forEach&&typeof M.forEach=="function")M.forEach(P,void 0);else if(v(M)||typeof M=="string")Array.prototype.forEach.call(M,P,void 0);else for(var O=gA(M),W=vA(M),ve=W.length,Pe=0;Pe<ve;Pe++)P.call(void 0,W[Pe],O&&O[Pe],M)}var N_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yA(M,P){if(M){M=M.split("&");for(var O=0;O<M.length;O++){var W=M[O].indexOf("="),ve=null;if(0<=W){var Pe=M[O].substring(0,W);ve=M[O].substring(W+1)}else Pe=M[O];P(Pe,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function Na(M){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,M instanceof Na){this.h=M.h,Ic(this,M.j),this.o=M.o,this.g=M.g,Tc(this,M.s),this.l=M.l;var P=M.i,O=new Vu;O.i=P.i,P.g&&(O.g=new Map(P.g),O.h=P.h),D_(this,O),this.m=M.m}else M&&(P=String(M).match(N_))?(this.h=!1,Ic(this,P[1]||"",!0),this.o=Bu(P[2]||""),this.g=Bu(P[3]||"",!0),Tc(this,P[4]),this.l=Bu(P[5]||"",!0),D_(this,P[6]||"",!0),this.m=Bu(P[7]||"")):(this.h=!1,this.i=new Vu(null,this.h))}Na.prototype.toString=function(){var M=[],P=this.j;P&&M.push(Lu(P,O_,!0),":");var O=this.g;return(O||P=="file")&&(M.push("//"),(P=this.o)&&M.push(Lu(P,O_,!0),"@"),M.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&M.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&M.push("/"),M.push(Lu(O,O.charAt(0)=="/"?bA:_A,!0))),(O=this.i.toString())&&M.push("?",O),(O=this.m)&&M.push("#",Lu(O,MA)),M.join("")};function es(M){return new Na(M)}function Ic(M,P,O){M.j=O?Bu(P,!0):P,M.j&&(M.j=M.j.replace(/:$/,""))}function Tc(M,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);M.s=P}else M.s=null}function D_(M,P,O){P instanceof Vu?(M.i=P,EA(M.i,M.h)):(O||(P=Lu(P,xA)),M.i=new Vu(P,M.h))}function ir(M,P,O){M.i.set(P,O)}function Ac(M){return ir(M,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),M}function Bu(M,P){return M?P?decodeURI(M.replace(/%25/g,"%2525")):decodeURIComponent(M):""}function Lu(M,P,O){return typeof M=="string"?(M=encodeURI(M).replace(P,wA),O&&(M=M.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M):null}function wA(M){return M=M.charCodeAt(0),"%"+(M>>4&15).toString(16)+(M&15).toString(16)}var O_=/[#\/\?@]/g,_A=/[#\?:]/g,bA=/[#\?]/g,xA=/[#\?@]/g,MA=/#/g;function Vu(M,P){this.h=this.g=null,this.i=M||null,this.j=!!P}function Cs(M){M.g||(M.g=new Map,M.h=0,M.i&&yA(M.i,function(P,O){M.add(decodeURIComponent(P.replace(/\+/g," ")),O)}))}t=Vu.prototype,t.add=function(M,P){Cs(this),this.i=null,M=Uo(this,M);var O=this.g.get(M);return O||this.g.set(M,O=[]),O.push(P),this.h+=1,this};function B_(M,P){Cs(M),P=Uo(M,P),M.g.has(P)&&(M.i=null,M.h-=M.g.get(P).length,M.g.delete(P))}function L_(M,P){return Cs(M),P=Uo(M,P),M.g.has(P)}t.forEach=function(M,P){Cs(this),this.g.forEach(function(O,W){O.forEach(function(ve){M.call(P,ve,W,this)},this)},this)},t.na=function(){Cs(this);const M=Array.from(this.g.values()),P=Array.from(this.g.keys()),O=[];for(let W=0;W<P.length;W++){const ve=M[W];for(let Pe=0;Pe<ve.length;Pe++)O.push(P[W])}return O},t.V=function(M){Cs(this);let P=[];if(typeof M=="string")L_(this,M)&&(P=P.concat(this.g.get(Uo(this,M))));else{M=Array.from(this.g.values());for(let O=0;O<M.length;O++)P=P.concat(M[O])}return P},t.set=function(M,P){return Cs(this),this.i=null,M=Uo(this,M),L_(this,M)&&(this.h-=this.g.get(M).length),this.g.set(M,[P]),this.h+=1,this},t.get=function(M,P){return M?(M=this.V(M),0<M.length?String(M[0]):P):P};function V_(M,P,O){B_(M,P),0<O.length&&(M.i=null,M.g.set(Uo(M,P),k(O)),M.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const M=[],P=Array.from(this.g.keys());for(var O=0;O<P.length;O++){var W=P[O];const Pe=encodeURIComponent(String(W)),He=this.V(W);for(W=0;W<He.length;W++){var ve=Pe;He[W]!==""&&(ve+="="+encodeURIComponent(String(He[W]))),M.push(ve)}}return this.i=M.join("&")};function Uo(M,P){return P=String(P),M.j&&(P=P.toLowerCase()),P}function EA(M,P){P&&!M.j&&(Cs(M),M.i=null,M.g.forEach(function(O,W){var ve=W.toLowerCase();W!=ve&&(B_(this,W),V_(this,ve,O))},M)),M.j=P}function SA(M,P){const O=new ue;if(c.Image){const W=new Image;W.onload=I(Ns,O,"TestLoadImage: loaded",!0,P,W),W.onerror=I(Ns,O,"TestLoadImage: error",!1,P,W),W.onabort=I(Ns,O,"TestLoadImage: abort",!1,P,W),W.ontimeout=I(Ns,O,"TestLoadImage: timeout",!1,P,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=M}else P(!1)}function IA(M,P){const O=new ue,W=new AbortController,ve=setTimeout(()=>{W.abort(),Ns(O,"TestPingServer: timeout",!1,P)},1e4);fetch(M,{signal:W.signal}).then(Pe=>{clearTimeout(ve),Pe.ok?Ns(O,"TestPingServer: ok",!0,P):Ns(O,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(ve),Ns(O,"TestPingServer: error",!1,P)})}function Ns(M,P,O,W,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),W(O)}catch{}}function TA(){this.g=new Be}function AA(M,P,O){const W=O||"";try{C_(M,function(ve,Pe){let He=ve;_(ve)&&(He=wt(ve)),P.push(W+Pe+"="+encodeURIComponent(He))})}catch(ve){throw P.push(W+"type="+encodeURIComponent("_badmap")),ve}}function Rc(M){this.l=M.Ub||null,this.j=M.eb||!1}A(Rc,_t),Rc.prototype.g=function(){return new kc(this.l,this.j)},Rc.prototype.i=function(M){return function(){return M}}({});function kc(M,P){Je.call(this),this.D=M,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(kc,Je),t=kc.prototype,t.open=function(M,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=M,this.A=P,this.readyState=1,Fu(this)},t.send=function(M){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};M&&(P.body=M),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ju(this)),this.readyState=0},t.Sa=function(M){if(this.g&&(this.l=M,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=M.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if(this.responseType==="arraybuffer")M.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in M){if(this.j=M.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j_(this)}else M.text().then(this.Ra.bind(this),this.ga.bind(this))};function j_(M){M.j.read().then(M.Pa.bind(M)).catch(M.ga.bind(M))}t.Pa=function(M){if(this.g){if(this.o&&M.value)this.response.push(M.value);else if(!this.o){var P=M.value?M.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!M.done}))&&(this.response=this.responseText+=P)}M.done?ju(this):Fu(this),this.readyState==3&&j_(this)}},t.Ra=function(M){this.g&&(this.response=this.responseText=M,ju(this))},t.Qa=function(M){this.g&&(this.response=M,ju(this))},t.ga=function(){this.g&&ju(this)};function ju(M){M.readyState=4,M.l=null,M.j=null,M.v=null,Fu(M)}t.setRequestHeader=function(M,P){this.u.append(M,P)},t.getResponseHeader=function(M){return this.h&&this.h.get(M.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const M=[],P=this.h.entries();for(var O=P.next();!O.done;)O=O.value,M.push(O[0]+": "+O[1]),O=P.next();return M.join(`\r
`)};function Fu(M){M.onreadystatechange&&M.onreadystatechange.call(M)}Object.defineProperty(kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(M){this.m=M?"include":"same-origin"}});function F_(M){let P="";return ee(M,function(O,W){P+=W,P+=":",P+=O,P+=`\r
`}),P}function Um(M,P,O){e:{for(W in O){var W=!1;break e}W=!0}W||(O=F_(O),typeof M=="string"?O!=null&&encodeURIComponent(String(O)):ir(M,P,O))}function mr(M){Je.call(this),this.headers=new Map,this.o=M||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(mr,Je);var RA=/^https?$/i,kA=["POST","PUT"];t=mr.prototype,t.Ha=function(M){this.J=M},t.ea=function(M,P,O,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+M);P=P?P.toUpperCase():"GET",this.D=M,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():le.g(),this.v=this.o?xe(this.o):xe(le),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(P,String(M),!0),this.B=!1}catch(Pe){U_(this,Pe);return}if(M=O||"",O=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ve in W)O.set(ve,W[ve]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Pe of W.keys())O.set(Pe,W.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(O.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),ve=c.FormData&&M instanceof c.FormData,!(0<=Array.prototype.indexOf.call(kA,P,void 0))||W||ve||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,He]of O)this.g.setRequestHeader(Pe,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{q_(this),this.u=!0,this.g.send(M),this.u=!1}catch(Pe){U_(this,Pe)}};function U_(M,P){M.h=!1,M.g&&(M.j=!0,M.g.abort(),M.j=!1),M.l=P,M.m=5,z_(M),Pc(M)}function z_(M){M.A||(M.A=!0,he(M,"complete"),he(M,"error"))}t.abort=function(M){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=M||7,he(this,"complete"),he(this,"abort"),Pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),mr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$_(this):this.bb())},t.bb=function(){$_(this)};function $_(M){if(M.h&&typeof u<"u"&&(!M.v[1]||ts(M)!=4||M.Z()!=2)){if(M.u&&ts(M)==4)lt(M.Ea,0,M);else if(he(M,"readystatechange"),ts(M)==4){M.h=!1;try{const He=M.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var O;if(!(O=P)){var W;if(W=He===0){var ve=String(M.D).match(N_)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),W=!RA.test(ve?ve.toLowerCase():"")}O=W}if(O)he(M,"complete"),he(M,"success");else{M.m=6;try{var Pe=2<ts(M)?M.g.statusText:""}catch{Pe=""}M.l=Pe+" ["+M.Z()+"]",z_(M)}}finally{Pc(M)}}}}function Pc(M,P){if(M.g){q_(M);const O=M.g,W=M.v[0]?()=>{}:null;M.g=null,M.v=null,P||he(M,"ready");try{O.onreadystatechange=W}catch{}}}function q_(M){M.I&&(c.clearTimeout(M.I),M.I=null)}t.isActive=function(){return!!this.g};function ts(M){return M.g?M.g.readyState:0}t.Z=function(){try{return 2<ts(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(M){if(this.g){var P=this.g.responseText;return M&&P.indexOf(M)==0&&(P=P.substring(M.length)),Se(P)}};function K_(M){try{if(!M.g)return null;if("response"in M.g)return M.g.response;switch(M.H){case"":case"text":return M.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in M.g)return M.g.mozResponseArrayBuffer}return null}catch{return null}}function PA(M){const P={};M=(M.g&&2<=ts(M)&&M.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<M.length;W++){if(R(M[W]))continue;var O=g(M[W]);const ve=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Pe=P[ve]||[];P[ve]=Pe,Pe.push(O)}j(P,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uu(M,P,O){return O&&O.internalChannelParams&&O.internalChannelParams[M]||P}function H_(M){this.Aa=0,this.i=[],this.j=new ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uu("failFast",!1,M),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uu("baseRetryDelayMs",5e3,M),this.cb=Uu("retryDelaySeedMs",1e4,M),this.Wa=Uu("forwardChannelMaxRetries",2,M),this.wa=Uu("forwardChannelRequestTimeoutMs",2e4,M),this.pa=M&&M.xmlHttpFactory||void 0,this.Xa=M&&M.Tb||void 0,this.Ca=M&&M.useFetchStreams||!1,this.L=void 0,this.J=M&&M.supportsCrossDomainXhr||!1,this.K="",this.h=new ct(M&&M.concurrentRequestLimit),this.Da=new TA,this.P=M&&M.fastHandshake||!1,this.O=M&&M.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=M&&M.Rb||!1,M&&M.xa&&this.j.xa(),M&&M.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&M&&M.detectBufferingProxy||!1,this.ja=void 0,M&&M.longPollingTimeout&&0<M.longPollingTimeout&&(this.ja=M.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=H_.prototype,t.la=8,t.G=1,t.connect=function(M,P,O,W){ot(0),this.W=M,this.H=P||{},O&&W!==void 0&&(this.H.OSID=O,this.H.OAID=W),this.F=this.X,this.I=tb(this,null,this.W),Nc(this)};function zm(M){if(W_(M),M.G==3){var P=M.U++,O=es(M.I);if(ir(O,"SID",M.K),ir(O,"RID",P),ir(O,"TYPE","terminate"),zu(M,O),P=new qe(M,M.j,P),P.L=2,P.v=Ac(es(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!O&&c.Image&&(new Image().src=P.v,O=!0),O||(P.g=rb(P.j,null),P.g.ea(P.v)),P.F=Date.now(),xt(P)}eb(M)}function Cc(M){M.g&&(qm(M),M.g.cancel(),M.g=null)}function W_(M){Cc(M),M.u&&(c.clearTimeout(M.u),M.u=null),Dc(M),M.h.cancel(),M.s&&(typeof M.s=="number"&&c.clearTimeout(M.s),M.s=null)}function Nc(M){if(!Nt(M.h)&&!M.s){M.s=!0;var P=M.Ga;y||o(),w||(y(),w=!0),d.add(P,M),M.B=0}}function CA(M,P){return Vt(M.h)>=M.h.j-(M.s?1:0)?!1:M.s?(M.i=P.D.concat(M.i),!0):M.G==1||M.G==2||M.B>=(M.Va?0:M.Wa)?!1:(M.s=G(S(M.Ga,M,P),X_(M,M.B)),M.B++,!0)}t.Ga=function(M){if(this.s)if(this.s=null,this.G==1){if(!M){this.U=Math.floor(1e5*Math.random()),M=this.U++;const ve=new qe(this,this.j,M);let Pe=this.o;if(this.S&&(Pe?(Pe=B(Pe),$(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(ve.H=Pe,Pe=null),this.P)e:{for(var P=0,O=0;O<this.i.length;O++){t:{var W=this.i[O];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(P+=W,4096<P){P=O;break e}if(P===4096||O===this.i.length-1){P=O+1;break e}}P=1e3}else P=1e3;P=Z_(this,ve,P),O=es(this.I),ir(O,"RID",M),ir(O,"CVER",22),this.D&&ir(O,"X-HTTP-Session-Id",this.D),zu(this,O),Pe&&(this.O?P="headers="+encodeURIComponent(String(F_(Pe)))+"&"+P:this.m&&Um(O,this.m,Pe)),yn(this.h,ve),this.Ua&&ir(O,"TYPE","init"),this.P?(ir(O,"$req",P),ir(O,"SID","null"),ve.T=!0,ut(ve,O,null)):ut(ve,O,P),this.G=2}}else this.G==3&&(M?G_(this,M):this.i.length==0||Nt(this.h)||G_(this))};function G_(M,P){var O;P?O=P.l:O=M.U++;const W=es(M.I);ir(W,"SID",M.K),ir(W,"RID",O),ir(W,"AID",M.T),zu(M,W),M.m&&M.o&&Um(W,M.m,M.o),O=new qe(M,M.j,O,M.B+1),M.m===null&&(O.H=M.o),P&&(M.i=P.D.concat(M.i)),P=Z_(M,O,1e3),O.I=Math.round(.5*M.wa)+Math.round(.5*M.wa*Math.random()),yn(M.h,O),ut(O,W,P)}function zu(M,P){M.H&&ee(M.H,function(O,W){ir(P,W,O)}),M.l&&C_({},function(O,W){ir(P,W,O)})}function Z_(M,P,O){O=Math.min(M.i.length,O);var W=M.l?S(M.l.Na,M.l,M):null;e:{var ve=M.i;let Pe=-1;for(;;){const He=["count="+O];Pe==-1?0<O?(Pe=ve[0].g,He.push("ofs="+Pe)):Pe=0:He.push("ofs="+Pe);let er=!0;for(let Ur=0;Ur<O;Ur++){let Ht=ve[Ur].g;const Gr=ve[Ur].map;if(Ht-=Pe,0>Ht)Pe=Math.max(0,ve[Ur].g-100),er=!1;else try{AA(Gr,He,"req"+Ht+"_")}catch{W&&W(Gr)}}if(er){W=He.join("&");break e}}}return M=M.i.splice(0,O),P.D=M,W}function Q_(M){if(!M.g&&!M.u){M.Y=1;var P=M.Fa;y||o(),w||(y(),w=!0),d.add(P,M),M.v=0}}function $m(M){return M.g||M.u||3<=M.v?!1:(M.Y++,M.u=G(S(M.Fa,M),X_(M,M.v)),M.v++,!0)}t.Fa=function(){if(this.u=null,Y_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var M=2*this.R;this.j.info("BP detection timer enabled: "+M),this.A=G(S(this.ab,this),M)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Cc(this),Y_(this))};function qm(M){M.A!=null&&(c.clearTimeout(M.A),M.A=null)}function Y_(M){M.g=new qe(M,M.j,"rpc",M.Y),M.m===null&&(M.g.H=M.o),M.g.O=0;var P=es(M.qa);ir(P,"RID","rpc"),ir(P,"SID",M.K),ir(P,"AID",M.T),ir(P,"CI",M.F?"0":"1"),!M.F&&M.ja&&ir(P,"TO",M.ja),ir(P,"TYPE","xmlhttp"),zu(M,P),M.m&&M.o&&Um(P,M.m,M.o),M.L&&(M.g.I=M.L);var O=M.g;M=M.ia,O.L=1,O.v=Ac(es(P)),O.m=null,O.P=!0,Pt(O,M)}t.Za=function(){this.C!=null&&(this.C=null,Cc(this),$m(this),ot(19))};function Dc(M){M.C!=null&&(c.clearTimeout(M.C),M.C=null)}function J_(M,P){var O=null;if(M.g==P){Dc(M),qm(M),M.g=null;var W=2}else if(Xt(M.h,P))O=P.D,Ou(M.h,P),W=1;else return;if(M.G!=0){if(P.o)if(W==1){O=P.m?P.m.length:0,P=Date.now()-P.F;var ve=M.B;W=Re(),he(W,new q(W,O)),Nc(M)}else Q_(M);else if(ve=P.s,ve==3||ve==0&&0<P.X||!(W==1&&CA(M,P)||W==2&&$m(M)))switch(O&&0<O.length&&(P=M.h,P.i=P.i.concat(O)),ve){case 1:Da(M,5);break;case 4:Da(M,10);break;case 3:Da(M,6);break;default:Da(M,2)}}}function X_(M,P){let O=M.Ta+Math.floor(Math.random()*M.cb);return M.isActive()||(O*=2),O*P}function Da(M,P){if(M.j.info("Error code "+P),P==2){var O=S(M.fb,M),W=M.Xa;const ve=!W;W=new Na(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ic(W,"https"),Ac(W),ve?SA(W.toString(),O):IA(W.toString(),O)}else ot(2);M.G=0,M.l&&M.l.sa(P),eb(M),W_(M)}t.fb=function(M){M?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function eb(M){if(M.G=0,M.ka=[],M.l){const P=Sc(M.h);(P.length!=0||M.i.length!=0)&&(F(M.ka,P),F(M.ka,M.i),M.h.i.length=0,k(M.i),M.i.length=0),M.l.ra()}}function tb(M,P,O){var W=O instanceof Na?es(O):new Na(O);if(W.g!="")P&&(W.g=P+"."+W.g),Tc(W,W.s);else{var ve=c.location;W=ve.protocol,P=P?P+"."+ve.hostname:ve.hostname,ve=+ve.port;var Pe=new Na(null);W&&Ic(Pe,W),P&&(Pe.g=P),ve&&Tc(Pe,ve),O&&(Pe.l=O),W=Pe}return O=M.D,P=M.ya,O&&P&&ir(W,O,P),ir(W,"VER",M.la),zu(M,W),W}function rb(M,P,O){if(P&&!M.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=M.Ca&&!M.pa?new mr(new Rc({eb:O})):new mr(M.pa),P.Ha(M.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nb(){}t=nb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(M,P){return new Cn(M,P)};function Cn(M,P){Je.call(this),this.g=new H_(P),this.l=M,this.h=P&&P.messageUrlParams||null,M=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(M?M["X-Client-Protocol"]="webchannel":M={"X-Client-Protocol":"webchannel"}),this.g.o=M,M=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(M?M["X-WebChannel-Content-Type"]=P.messageContentType:M={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(M?M["X-WebChannel-Client-Profile"]=P.va:M={"X-WebChannel-Client-Profile":P.va}),this.g.S=M,(M=P&&P.Sb)&&!R(M)&&(this.g.m=M),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!R(P)&&(this.g.D=P,M=this.h,M!==null&&P in M&&(M=this.h,P in M&&delete M[P])),this.j=new zo(this)}A(Cn,Je),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){zm(this.g)},Cn.prototype.o=function(M){var P=this.g;if(typeof M=="string"){var O={};O.__data__=M,M=O}else this.u&&(O={},O.__data__=wt(M),M=O);P.i.push(new nt(P.Ya++,M)),P.G==3&&Nc(P)},Cn.prototype.N=function(){this.g.l=null,delete this.j,zm(this.g),delete this.g,Cn.aa.N.call(this)};function ib(M){Me.call(this),M.__headers__&&(this.headers=M.__headers__,this.statusCode=M.__status__,delete M.__headers__,delete M.__status__);var P=M.__sm__;if(P){e:{for(const O in P){M=O;break e}M=void 0}(this.i=M)&&(M=this.i,P=P!==null&&M in P?P[M]:void 0),this.data=P}else this.data=M}A(ib,Me);function sb(){De.call(this),this.status=1}A(sb,De);function zo(M){this.g=M}A(zo,nb),zo.prototype.ua=function(){he(this.g,"a")},zo.prototype.ta=function(M){he(this.g,new ib(M))},zo.prototype.sa=function(M){he(this.g,new sb)},zo.prototype.ra=function(){he(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,KS=function(){return new Oc},qS=function(){return Re()},$S=dt,sy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Vd=je,re.COMPLETE="complete",zS=re,Ne.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Sf=Ne,mr.prototype.listenOnce=mr.prototype.L,mr.prototype.getLastError=mr.prototype.Ka,mr.prototype.getLastErrorCode=mr.prototype.Ba,mr.prototype.getStatus=mr.prototype.Z,mr.prototype.getResponseJson=mr.prototype.Oa,mr.prototype.getResponseText=mr.prototype.oa,mr.prototype.send=mr.prototype.ea,mr.prototype.setWithCredentials=mr.prototype.Ha,US=mr}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const E3="@firebase/firestore",S3="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new DS("@firebase/firestore");function il(){return _o.logLevel}function Ue(t,...e){if(_o.logLevel<=qt.DEBUG){const r=e.map(iw);_o.debug(`Firestore (${bu}): ${t}`,...r)}}function dn(t,...e){if(_o.logLevel<=qt.ERROR){const r=e.map(iw);_o.error(`Firestore (${bu}): ${t}`,...r)}}function bo(t,...e){if(_o.logLevel<=qt.WARN){const r=e.map(iw);_o.warn(`Firestore (${bu}): ${t}`,...r)}}function iw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t="Unexpected state"){const e=`FIRESTORE (${bu}) INTERNAL ASSERTION FAILED: `+t;throw dn(e),new Error(e)}function it(t,e){t||rt()}function bt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends _u{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r($r.UNAUTHENTICATED))}shutdown(){}}class jL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class FL{constructor(e){this.t=e,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){it(this.o===void 0);let n=this.i;const s=v=>this.i!==n?(n=this.i,r(v)):Promise.resolve();let i=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fi,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const v=i;e.enqueueRetryable(async()=>{await v.promise,await s(this.currentUser)})},c=v=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(v=>c(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?c(v):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fi)}},0),u()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(it(typeof n.accessToken=="string"),new HS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new $r(e)}}class UL{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=$r.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zL{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new UL(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r($r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $L{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,bL(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){it(this.o===void 0);const n=i=>{i.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const u=i.token!==this.R;return this.R=i.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new I3(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string"),this.R=r.token,new I3(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=qL(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function vt(t,e){return t<e?-1:t>e?1:0}function ay(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return vt(n,s);{const i=WS(),u=KL(i.encode(T3(t,r)),i.encode(T3(e,r)));return u!==0?u:vt(n,s)}}r+=n>65535?2:1}return vt(t.length,e.length)}function T3(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KL(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return vt(t[r],e[r]);return vt(t.length,e.length)}function ql(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function ZS(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=-62135596800,R3=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*R3);return new rr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new We(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new We(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<A3)throw new We(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/R3}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-A3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new rr(0,0))}static max(){return new ft(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="__name__";class ki{constructor(e,r,n){r===void 0?r=0:r>e.length&&rt(),n===void 0?n=e.length-r:n>e.length-r&&rt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=ki.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return vt(e.length,r.length)}static compareSegments(e,r){const n=ki.isNumericId(e),s=ki.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?ki.extractNumericId(e).compare(ki.extractNumericId(r)):ay(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class Wt extends ki{construct(e,r,n){return new Wt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new We(Le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Wt(r)}static emptyPath(){return new Wt([])}}const HL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends ki{construct(e,r,n){return new cr(e,r,n)}static isValidIdentifier(e){return HL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k3}static keyField(){return new cr([k3])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new We(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new We(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new We(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=v,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(n+=c,s++):(i(),s++)}if(i(),u)throw new We(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(r)}static emptyPath(){return new cr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(Wt.fromString(e))}static fromName(e){return new Ye(Wt.fromString(e).popFirst(5))}static empty(){return new Ye(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=-1;class B0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function oy(t){return t.fields.find(e=>e.kind===2)}function qa(t){return t.fields.filter(e=>e.kind!==2)}B0.UNKNOWN_ID=-1;class jd{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ih{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ih(0,Fn.min())}}function WL(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(n===1e9?new rr(r+1,0):new rr(r,n));return new Fn(s,Ye.empty(),e)}function QS(t){return new Fn(t.readTime,t.key,Sh)}class Fn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Fn(ft.min(),Ye.empty(),Sh)}static max(){return new Fn(ft.max(),Ye.empty(),Sh)}}function sw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ye.comparator(t.documentKey,e.documentKey),r!==0?r:vt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==YS)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):de.reject(r)}static resolve(e){return new de((r,n)=>{r(e)})}static reject(e){return new de((r,n)=>{n(e)})}static waitFor(e){return new de((r,n)=>{let s=0,i=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++i,u&&i===s&&r()},v=>n(v))}),u=!0,i===s&&r()})}static or(e){let r=de.resolve(!1);for(const n of e)r=r.next(s=>s?de.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new de((n,s)=>{const i=e.length,u=new Array(i);let c=0;for(let v=0;v<i;v++){const _=v;r(e[_]).next(b=>{u[_]=b,++c,c===i&&n(u)},b=>s(b))}})}static doWhile(e,r){return new de((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class Fp{static open(e,r,n,s){try{return new Fp(r,e.transaction(s,n))}catch(i){throw new Hf(r,i)}}constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.m=new Fi,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{r.error?this.m.reject(new Hf(e,r.error)):this.m.resolve()},this.transaction.onerror=n=>{const s=aw(n.target.error);this.m.reject(new Hf(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Ue(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ZL(r)}}class ca{static delete(e){return Ue(On,"Removing database:",e),Ga(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!CS())return!1;if(ca.v())return!0;const e=C0(),r=ca.C(e),n=0<r&&r<10,s=XS(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,r){return e.store(r)}static C(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,r,n){this.name=e,this.version=r,this.O=n,ca.C(C0())===12.2&&dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(Ue(On,"Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const u=i.target.result;r(u)},s.onblocked=()=>{n(new Hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const u=i.target.error;u.name==="VersionError"?n(new We(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new We(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Hf(e,u))},s.onupgradeneeded=i=>{Ue(On,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const u=i.target.result;this.O.B(u,s.transaction,i.oldVersion,this.version).next(()=>{Ue(On,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=r=>this.L(r)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const c=Fp.open(this.db,e,i?"readonly":"readwrite",n),v=s(c).next(_=>(c.S(),_)).catch(_=>(c.abort(_),de.reject(_))).toPromise();return v.catch(()=>{}),await c.p,v}catch(c){const v=c,_=v.name!=="FirebaseError"&&u<3;if(Ue(On,"Transaction failed with error:",v.message,"Retrying:",_),this.close(),!_)return Promise.reject(v)}}}close(){this.db&&this.db.close(),this.db=void 0}}function XS(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class GL{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Ga(this.q.delete())}}class Hf extends We{constructor(e,r){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ta(t){return t.name==="IndexedDbTransactionError"}class ZL{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ue(On,"PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ue(On,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ga(n)}add(e){return Ue(On,"ADD",this.store.name,e,e),Ga(this.store.add(e))}get(e){return Ga(this.store.get(e)).next(r=>(r===void 0&&(r=null),Ue(On,"GET",this.store.name,e,r),r))}delete(e){return Ue(On,"DELETE",this.store.name,e),Ga(this.store.delete(e))}count(){return Ue(On,"COUNT",this.store.name),Ga(this.store.count())}G(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new de((u,c)=>{i.onerror=v=>{c(v.target.error)},i.onsuccess=v=>{u(v.target.result)}})}{const i=this.cursor(n),u=[];return this.j(i,(c,v)=>{u.push(v)}).next(()=>u)}}H(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new de((s,i)=>{n.onerror=u=>{i(u.target.error)},n.onsuccess=u=>{s(u.target.result)}})}J(e,r){Ue(On,"DELETE ALL",this.store.name);const n=this.options(e,r);n.Y=!1;const s=this.cursor(n);return this.j(s,(i,u,c)=>c.delete())}Z(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.j(s,r)}X(e){const r=this.cursor({});return new de((n,s)=>{r.onerror=i=>{const u=aw(i.target.error);s(u)},r.onsuccess=i=>{const u=i.target.result;u?e(u.primaryKey,u.value).next(c=>{c?u.continue():n()}):n()}})}j(e,r){const n=[];return new de((s,i)=>{e.onerror=u=>{i(u.target.error)},e.onsuccess=u=>{const c=u.target.result;if(!c)return void s();const v=new GL(c),_=r(c.primaryKey,c.value,v);if(_ instanceof de){const b=_.catch(x=>(v.done(),de.reject(x)));n.push(b)}v.isDone?s():v.K===null?c.continue():c.continue(v.K)}}).next(()=>de.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Ga(t){return new de((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=aw(n.target.error);r(s)}})}let P3=!1;function aw(t){const e=ca.C(C0());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return P3||(P3=!0,setTimeout(()=>{throw n},0)),n}}return t}const Wf="IndexBackfiller";class QL{constructor(e,r){this.asyncQueue=e,this.ee=r,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){Ue(Wf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const r=await this.ee.ne();Ue(Wf,`Documents written: ${r}`)}catch(r){Ta(r)?Ue(Wf,"Ignoring IndexedDB error during index backfill: ",r):await Oo(r)}await this.te(6e4)})}}class YL{constructor(e,r){this.localStore=e,this.persistence=r}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.re(r,e))}re(e,r){const n=new Set;let s=r,i=!0;return de.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!n.has(u))return Ue(Wf,`Processing collection: ${u}`),this.ie(e,u,s).next(c=>{s-=c,n.add(u)});i=!1})).next(()=>r-s)}ie(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const u=i.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(s,i)).next(c=>(Ue(Wf,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c))).next(()=>u.size)}))}se(e,r){let n=e;return r.changes.forEach((s,i)=>{const u=QS(i);sw(u,n)>0&&(n=u)}),new Fn(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.oe(n),this._e=n=>r.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=-1;function Up(t){return t==null}function Th(t){return t===0&&1/t==-1/0}function JL(t){return typeof t=="number"&&Number.isInteger(t)&&!Th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="";function on(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=C3(e)),e=XL(t.get(r),e);return C3(e)}function XL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case L0:r+="";break;default:r+=i}}return r}function C3(t){return t+L0+""}function Oi(t){const e=t.length;if(it(e>=2),e===2)return it(t.charAt(0)===L0&&t.charAt(1)===""),Wt.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const u=t.indexOf(L0,i);switch((u<0||u>r)&&rt(),t.charAt(u+1)){case"":const c=t.substring(i,u);let v;s.length===0?v=c:(s+=c,v=s,s=""),n.push(v);break;case"":s+=t.substring(i,u),s+="\0";break;case"":s+=t.substring(i,u+1);break;default:rt()}i=u+2}return new Wt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="remoteDocuments",Xh="owner",Wo="owner",Ah="mutationQueues",eV="userId",pi="mutations",N3="batchId",io="userMutationsIndex",D3=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t,e){return[t,on(e)]}function e9(t,e,r){return[t,on(e),r]}const tV={},Kl="documentMutations",V0="remoteDocumentsV14",rV=["prefixPath","collectionGroup","readTime","documentId"],Ud="documentKeyIndex",nV=["prefixPath","collectionGroup","documentId"],t9="collectionGroupIndex",iV=["collectionGroup","readTime","prefixPath","documentId"],Rh="remoteDocumentGlobal",ly="remoteDocumentGlobalKey",Hl="targets",r9="queryTargetsIndex",sV=["canonicalId","targetId"],Wl="targetDocuments",aV=["targetId","path"],ow="documentTargetsIndex",oV=["path","targetId"],j0="targetGlobalKey",fo="targetGlobal",kh="collectionParents",lV=["collectionId","parent"],Gl="clientMetadata",uV="clientId",zp="bundles",fV="bundleId",$p="namedQueries",hV="name",lw="indexConfiguration",cV="indexId",uy="collectionGroupIndex",dV="collectionGroup",F0="indexState",pV=["indexId","uid"],n9="sequenceNumberIndex",mV=["uid","sequenceNumber"],U0="indexEntries",vV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],i9="documentKeyIndex",gV=["indexId","uid","orderedDocumentKey"],qp="documentOverlays",yV=["userId","collectionPath","documentId"],fy="collectionPathOverlayIndex",wV=["userId","collectionPath","largestBatchId"],s9="collectionGroupOverlayIndex",_V=["userId","collectionGroup","largestBatchId"],uw="globals",bV="name",a9=[Ah,pi,Kl,Ka,Hl,Xh,fo,Wl,Gl,Rh,kh,zp,$p],xV=[...a9,qp],o9=[Ah,pi,Kl,V0,Hl,Xh,fo,Wl,Gl,Rh,kh,zp,$p,qp],l9=o9,fw=[...l9,lw,F0,U0],MV=fw,EV=[...fw,uw];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends JS{constructor(e,r){super(),this.ue=e,this.currentSequenceNumber=r}}function Cr(t,e){const r=bt(t);return ca.M(r.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Aa(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function u9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,r){this.comparator=e,this.root=r||qr.EMPTY}insert(e,r){return new fr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??qr.RED,this.left=s??qr.EMPTY,this.right=i??qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new qr(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return qr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new qr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new B3(this.data.getIterator())}getIteratorFrom(e){return new B3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yt(this.comparator);return r.data=e,r}}class B3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Go(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new En([])}unionWith(e){let r=new Yt(cr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new En(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new f9("Invalid base64 string: "+i):i}}(e);return new Sr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let u=0;u<s.length;++u)i+=String.fromCharCode(s[u]);return i}(e);return new Sr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const SV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(it(!!t),typeof t=="string"){let e=0;const r=SV.exec(t);if(it(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:lr(t.seconds),nanos:lr(t.nanos)}}function lr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _s(t){return typeof t=="string"?Sr.fromBase64String(t):Sr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="server_timestamp",c9="__type__",d9="__previous_value__",p9="__local_write_time__";function hw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[c9])===null||r===void 0?void 0:r.stringValue)===h9}function Kp(t){const e=t.mapValue.fields[d9];return hw(e)?Kp(e):e}function Ph(t){const e=ws(t.mapValue.fields[p9].timestampValue);return new rr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,r,n,s,i,u,c,v,_){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=v,this.useFetchStreams=_}}const z0="(default)";class xo{constructor(e,r){this.projectId=e,this.database=r||z0}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===z0}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="__type__",m9="__max__",Xs={mapValue:{fields:{__type__:{stringValue:m9}}}},dw="__vector__",Zl="value",zd={nullValue:"NULL_VALUE"};function ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hw(t)?4:v9(t)?9007199254740991:Hp(t)?10:11:rt()}function Ki(t,e){if(t===e)return!0;const r=ga(t);if(r!==ga(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ph(t).isEqual(Ph(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const u=ws(s.timestampValue),c=ws(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _s(s.bytesValue).isEqual(_s(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lr(s.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(s.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lr(s.integerValue)===lr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const u=lr(s.doubleValue),c=lr(i.doubleValue);return u===c?Th(u)===Th(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return ql(t.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return function(s,i){const u=s.mapValue.fields||{},c=i.mapValue.fields||{};if(O3(u)!==O3(c))return!1;for(const v in u)if(u.hasOwnProperty(v)&&(c[v]===void 0||!Ki(u[v],c[v])))return!1;return!0}(t,e);default:return rt()}}function Ch(t,e){return(t.values||[]).find(r=>Ki(r,e))!==void 0}function ya(t,e){if(t===e)return 0;const r=ga(t),n=ga(e);if(r!==n)return vt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return vt(t.booleanValue,e.booleanValue);case 2:return function(i,u){const c=lr(i.integerValue||i.doubleValue),v=lr(u.integerValue||u.doubleValue);return c<v?-1:c>v?1:c===v?0:isNaN(c)?isNaN(v)?0:-1:1}(t,e);case 3:return L3(t.timestampValue,e.timestampValue);case 4:return L3(Ph(t),Ph(e));case 5:return ay(t.stringValue,e.stringValue);case 6:return function(i,u){const c=_s(i),v=_s(u);return c.compareTo(v)}(t.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),v=u.split("/");for(let _=0;_<c.length&&_<v.length;_++){const b=vt(c[_],v[_]);if(b!==0)return b}return vt(c.length,v.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,u){const c=vt(lr(i.latitude),lr(u.latitude));return c!==0?c:vt(lr(i.longitude),lr(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return V3(t.arrayValue,e.arrayValue);case 10:return function(i,u){var c,v,_,b;const x=i.fields||{},S=u.fields||{},I=(c=x[Zl])===null||c===void 0?void 0:c.arrayValue,A=(v=S[Zl])===null||v===void 0?void 0:v.arrayValue,k=vt(((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0,((b=A==null?void 0:A.values)===null||b===void 0?void 0:b.length)||0);return k!==0?k:V3(I,A)}(t.mapValue,e.mapValue);case 11:return function(i,u){if(i===Xs.mapValue&&u===Xs.mapValue)return 0;if(i===Xs.mapValue)return 1;if(u===Xs.mapValue)return-1;const c=i.fields||{},v=Object.keys(c),_=u.fields||{},b=Object.keys(_);v.sort(),b.sort();for(let x=0;x<v.length&&x<b.length;++x){const S=ay(v[x],b[x]);if(S!==0)return S;const I=ya(c[v[x]],_[b[x]]);if(I!==0)return I}return vt(v.length,b.length)}(t.mapValue,e.mapValue);default:throw rt()}}function L3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return vt(t,e);const r=ws(t),n=ws(e),s=vt(r.seconds,n.seconds);return s!==0?s:vt(r.nanos,n.nanos)}function V3(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=ya(r[s],n[s]);if(i)return i}return vt(r.length,n.length)}function Ql(t){return cy(t)}function cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ws(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return _s(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ye.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=cy(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const u of n)i?i=!1:s+=",",s+=`${u}:${cy(r.fields[u])}`;return s+"}"}(t.mapValue):rt()}function $d(t){switch(ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kp(t);return e?16+$d(e):16;case 5:return 2*t.stringValue.length;case 6:return _s(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+$d(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Aa(n.fields,(i,u)=>{s+=i.length+$d(u)}),s}(t.mapValue);default:throw rt()}}function Nh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dy(t){return!!t&&"integerValue"in t}function Dh(t){return!!t&&"arrayValue"in t}function j3(t){return!!t&&"nullValue"in t}function F3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qd(t){return!!t&&"mapValue"in t}function Hp(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cw])===null||r===void 0?void 0:r.stringValue)===dw}function Gf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Aa(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Gf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Gf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function v9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m9}const g9={mapValue:{fields:{[cw]:{stringValue:dw},[Zl]:{arrayValue:{}}}}};function TV(t){return"nullValue"in t?zd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Nh(xo.empty(),Ye.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Hp(t)?g9:{mapValue:{}}:rt()}function AV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Nh(xo.empty(),Ye.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?g9:"mapValue"in t?Hp(t)?{mapValue:{}}:Xs:rt()}function U3(t,e){const r=ya(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function z3(t,e){const r=ya(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gf(r)}setAll(e){let r=cr.emptyPath(),n={},s=[];e.forEach((u,c)=>{if(!r.isImmediateParentOf(c)){const v=this.getFieldsMap(r);this.applyChanges(v,n,s),n={},s=[],r=c.popLast()}u?n[c.lastSegment()]=Gf(u):s.push(c.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());qd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];qd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Aa(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new an(Gf(this.value))}}function y9(t){const e=[];return Aa(t.fields,(r,n)=>{const s=new cr([r]);if(qd(n)){const i=y9(n.mapValue).fields;if(i.length===0)e.push(s);else for(const u of i)e.push(s.child(u))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,r,n,s,i,u,c){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new gr(e,0,ft.min(),ft.min(),ft.min(),an.empty(),0)}static newFoundDocument(e,r,n,s){return new gr(e,1,r,ft.min(),n,s,0)}static newNoDocument(e,r){return new gr(e,2,r,ft.min(),ft.min(),an.empty(),0)}static newUnknownDocument(e,r){return new gr(e,3,r,ft.min(),ft.min(),an.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,r){this.position=e,this.inclusive=r}}function $3(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],u=t.position[s];if(i.field.isKeyField()?n=Ye.comparator(Ye.fromName(u.referenceValue),r.key):n=ya(u,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function q3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ki(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,r="asc"){this.field=e,this.dir=r}}function RV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{}class Ft extends w9{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new kV(e,r,n):r==="array-contains"?new NV(e,n):r==="in"?new S9(e,n):r==="not-in"?new DV(e,n):r==="array-contains-any"?new OV(e,n):new Ft(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new PV(e,n):new CV(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ya(r,this.value)):r!==null&&ga(this.value)===ga(r)&&this.matchesComparison(ya(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends w9{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Zt(e,r)}matches(e){return Jl(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Jl(t){return t.op==="and"}function py(t){return t.op==="or"}function pw(t){return _9(t)&&Jl(t)}function _9(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function my(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Ql(t.value);if(pw(t))return t.filters.map(e=>my(e)).join(",");{const e=t.filters.map(r=>my(r)).join(",");return`${t.op}(${e})`}}function b9(t,e){return t instanceof Ft?function(n,s){return s instanceof Ft&&n.op===s.op&&n.field.isEqual(s.field)&&Ki(n.value,s.value)}(t,e):t instanceof Zt?function(n,s){return s instanceof Zt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,u,c)=>i&&b9(u,s.filters[c]),!0):!1}(t,e):void rt()}function x9(t,e){const r=t.filters.concat(e);return Zt.create(r,t.op)}function M9(t){return t instanceof Ft?function(r){return`${r.field.canonicalString()} ${r.op} ${Ql(r.value)}`}(t):t instanceof Zt?function(r){return r.op.toString()+" {"+r.getFilters().map(M9).join(" ,")+"}"}(t):"Filter"}class kV extends Ft{constructor(e,r,n){super(e,r,n),this.key=Ye.fromName(n.referenceValue)}matches(e){const r=Ye.comparator(e.key,this.key);return this.matchesComparison(r)}}class PV extends Ft{constructor(e,r){super(e,"in",r),this.keys=E9("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class CV extends Ft{constructor(e,r){super(e,"not-in",r),this.keys=E9("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function E9(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ye.fromName(n.referenceValue))}class NV extends Ft{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Dh(r)&&Ch(r.arrayValue,this.value)}}class S9 extends Ft{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ch(this.value.arrayValue,r)}}class DV extends Ft{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ch(this.value.arrayValue,r)}}class OV extends Ft{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Dh(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ch(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,r=null,n=[],s=[],i=null,u=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=u,this.endAt=c,this.le=null}}function vy(t,e=null,r=[],n=[],s=null,i=null,u=null){return new BV(t,e,r,n,s,i,u)}function Mo(t){const e=bt(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>my(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Up(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ql(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ql(n)).join(",")),e.le=r}return e.le}function ec(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!RV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!b9(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q3(t.startAt,e.startAt)&&q3(t.endAt,e.endAt)}function $0(t){return Ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function q0(t,e){return t.filters.filter(r=>r instanceof Ft&&r.field.isEqual(e))}function K3(t,e,r){let n=zd,s=!0;for(const i of q0(t,e)){let u=zd,c=!0;switch(i.op){case"<":case"<=":u=TV(i.value);break;case"==":case"in":case">=":u=i.value;break;case">":u=i.value,c=!1;break;case"!=":case"not-in":u=zd}U3({value:n,inclusive:s},{value:u,inclusive:c})<0&&(n=u,s=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const u=r.position[i];U3({value:n,inclusive:s},{value:u,inclusive:r.inclusive})<0&&(n=u,s=r.inclusive);break}}return{value:n,inclusive:s}}function H3(t,e,r){let n=Xs,s=!0;for(const i of q0(t,e)){let u=Xs,c=!0;switch(i.op){case">=":case">":u=AV(i.value),c=!1;break;case"==":case"in":case"<=":u=i.value;break;case"<":u=i.value,c=!1;break;case"!=":case"not-in":u=Xs}z3({value:n,inclusive:s},{value:u,inclusive:c})>0&&(n=u,s=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const u=r.position[i];z3({value:n,inclusive:s},{value:u,inclusive:r.inclusive})>0&&(n=u,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,r=null,n=[],s=[],i=null,u="F",c=null,v=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=u,this.startAt=c,this.endAt=v,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function LV(t,e,r,n,s,i,u,c){return new xu(t,e,r,n,s,i,u,c)}function Wp(t){return new xu(t)}function W3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I9(t){return t.collectionGroup!==null}function Zf(t){const e=bt(t);if(e.he===null){e.he=[];const r=new Set;for(const i of e.explicitOrderBy)e.he.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Yt(cr.comparator);return u.filters.forEach(v=>{v.getFlattenedFilters().forEach(_=>{_.isInequality()&&(c=c.add(_.field))})}),c})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.he.push(new Oh(i,n))}),r.has(cr.keyField().canonicalString())||e.he.push(new Oh(cr.keyField(),n))}return e.he}function Jn(t){const e=bt(t);return e.Pe||(e.Pe=VV(e,Zf(t))),e.Pe}function VV(t,e){if(t.limitType==="F")return vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Oh(s.field,i)});const r=t.endAt?new Yl(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Yl(t.startAt.position,t.startAt.inclusive):null;return vy(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function gy(t,e){const r=t.filters.concat([e]);return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function yy(t,e,r){return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Gp(t,e){return ec(Jn(t),Jn(e))&&t.limitType===e.limitType}function T9(t){return`${Mo(Jn(t))}|lt:${t.limitType}`}function sl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>M9(s)).join(", ")}]`),Up(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Ql(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Ql(s)).join(",")),`Target(${n})`}(Jn(t))}; limitType=${t.limitType})`}function tc(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ye.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Zf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(u,c,v){const _=$3(u,c,v);return u.inclusive?_<=0:_<0}(n.startAt,Zf(n),s)||n.endAt&&!function(u,c,v){const _=$3(u,c,v);return u.inclusive?_>=0:_>0}(n.endAt,Zf(n),s))}(t,e)}function jV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function A9(t){return(e,r)=>{let n=!1;for(const s of Zf(t)){const i=FV(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function FV(t,e,r){const n=t.field.isKeyField()?Ye.comparator(e.key,r.key):function(i,u,c){const v=u.data.field(i),_=c.data.field(i);return v!==null&&_!==null?ya(v,_):rt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return rt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return u9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=new fr(Ye.comparator);function Ln(){return UV}const R9=new fr(Ye.comparator);function If(...t){let e=R9;for(const r of t)e=e.insert(r.key,r);return e}function k9(t){let e=R9;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Bi(){return Qf()}function P9(){return Qf()}function Qf(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const zV=new fr(Ye.comparator),$V=new Yt(Ye.comparator);function At(...t){let e=$V;for(const r of t)e=e.add(r);return e}const qV=new Yt(vt);function KV(){return qV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function C9(t){return{integerValue:""+t}}function N9(t,e){return JL(e)?C9(e):mw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this._=void 0}}function HV(t,e,r){return t instanceof Xl?function(s,i){const u={fields:{[c9]:{stringValue:h9},[p9]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hw(i)&&(i=Kp(i)),i&&(u.fields[d9]=i),{mapValue:u}}(r,e):t instanceof eu?O9(t,e):t instanceof tu?B9(t,e):function(s,i){const u=D9(s,i),c=G3(u)+G3(s.Ie);return dy(u)&&dy(s.Ie)?C9(c):mw(s.serializer,c)}(t,e)}function WV(t,e,r){return t instanceof eu?O9(t,e):t instanceof tu?B9(t,e):r}function D9(t,e){return t instanceof ru?function(n){return dy(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Xl extends Zp{}class eu extends Zp{constructor(e){super(),this.elements=e}}function O9(t,e){const r=L9(e);for(const n of t.elements)r.some(s=>Ki(s,n))||r.push(n);return{arrayValue:{values:r}}}class tu extends Zp{constructor(e){super(),this.elements=e}}function B9(t,e){let r=L9(e);for(const n of t.elements)r=r.filter(s=>!Ki(s,n));return{arrayValue:{values:r}}}class ru extends Zp{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function G3(t){return lr(t.integerValue||t.doubleValue)}function L9(t){return Dh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,r){this.field=e,this.transform=r}}function GV(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof eu&&s instanceof eu||n instanceof tu&&s instanceof tu?ql(n.elements,s.elements,Ki):n instanceof ru&&s instanceof ru?Ki(n.Ie,s.Ie):n instanceof Xl&&s instanceof Xl}(t.transform,e.transform)}class ZV{constructor(e,r){this.version=e,this.transformResults=r}}class Br{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qp{}function V9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rc(t.key,Br.none()):new Mu(t.key,t.data,Br.none());{const r=t.data,n=an.empty();let s=new Yt(cr.comparator);for(let i of e.fields)if(!s.has(i)){let u=r.field(i);u===null&&i.length>1&&(i=i.popLast(),u=r.field(i)),u===null?n.delete(i):n.set(i,u),s=s.add(i)}return new As(t.key,n,new En(s.toArray()),Br.none())}}function QV(t,e,r){t instanceof Mu?function(s,i,u){const c=s.value.clone(),v=Q3(s.fieldTransforms,i,u.transformResults);c.setAll(v),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,r):t instanceof As?function(s,i,u){if(!Kd(s.precondition,i))return void i.convertToUnknownDocument(u.version);const c=Q3(s.fieldTransforms,i,u.transformResults),v=i.data;v.setAll(j9(s)),v.setAll(c),i.convertToFoundDocument(u.version,v).setHasCommittedMutations()}(t,e,r):function(s,i,u){i.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,r)}function Yf(t,e,r,n){return t instanceof Mu?function(i,u,c,v){if(!Kd(i.precondition,u))return c;const _=i.value.clone(),b=Y3(i.fieldTransforms,v,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(t,e,r,n):t instanceof As?function(i,u,c,v){if(!Kd(i.precondition,u))return c;const _=Y3(i.fieldTransforms,v,u),b=u.data;return b.setAll(j9(i)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(t,e,r,n):function(i,u,c){return Kd(i.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,r)}function YV(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=D9(n.transform,s||null);i!=null&&(r===null&&(r=an.empty()),r.set(n.field,i))}return r||null}function Z3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ql(n,s,(i,u)=>GV(i,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mu extends Qp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Qp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function j9(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Q3(t,e,r){const n=new Map;it(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],u=i.transform,c=e.data.field(i.field);n.set(i.field,WV(u,c,r[s]))}return n}function Y3(t,e,r){const n=new Map;for(const s of t){const i=s.transform,u=r.data.field(s.field);n.set(s.field,HV(i,u,e))}return n}class rc extends Qp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F9 extends Qp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&QV(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Yf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Yf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=P9();return this.mutations.forEach(s=>{const i=e.get(s.key),u=i.overlayedDocument;let c=this.applyToLocalView(u,i.mutatedFields);c=r.has(s.key)?null:c;const v=V9(u,c);v!==null&&n.set(s.key,v),u.isValidDocument()||u.convertToNoDocument(ft.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),At())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(r,n)=>Z3(r,n))&&ql(this.baseMutations,e.baseMutations,(r,n)=>Z3(r,n))}}class yw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){it(e.mutations.length===n.length);let s=function(){return zV}();const i=e.mutations;for(let u=0;u<i.length;u++)s=s.insert(i[u].key,n[u].version);return new yw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br,$t;function XV(t){switch(t){case Le.OK:return rt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0;default:return rt()}}function U9(t){if(t===void 0)return dn("GRPC error has no .code"),Le.UNKNOWN;switch(t){case br.OK:return Le.OK;case br.CANCELLED:return Le.CANCELLED;case br.UNKNOWN:return Le.UNKNOWN;case br.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case br.INTERNAL:return Le.INTERNAL;case br.UNAVAILABLE:return Le.UNAVAILABLE;case br.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case br.NOT_FOUND:return Le.NOT_FOUND;case br.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case br.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case br.ABORTED:return Le.ABORTED;case br.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case br.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case br.DATA_LOSS:return Le.DATA_LOSS;default:return rt()}}($t=br||(br={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new ha([4294967295,4294967295],0);function J3(t){const e=WS().encode(t),r=new FS;return r.update(e),new Uint8Array(r.digest())}function X3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ha([r,n],0),new ha([s,i],0)]}class _w{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Tf(`Invalid padding: ${r}`);if(n<0)throw new Tf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Tf(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Tf(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=ha.fromNumber(this.Ee)}Ae(e,r,n){let s=e.add(r.multiply(ha.fromNumber(n)));return s.compare(ej)===1&&(s=new ha([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=J3(e),[n,s]=X3(r);for(let i=0;i<this.hashCount;i++){const u=this.Ae(n,s,i);if(!this.Re(u))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),u=new _w(i,s,r);return n.forEach(c=>u.insert(c)),u}insert(e){if(this.Ee===0)return;const r=J3(e),[n,s]=X3(r);for(let i=0;i<this.hashCount;i++){const u=this.Ae(n,s,i);this.Ve(u)}}Ve(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Tf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Yp(ft.min(),s,new fr(vt),Ln(),At())}}class nc{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new nc(n,r,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,s){this.me=e,this.removedTargetIds=r,this.key=n,this.fe=s}}class z9{constructor(e,r){this.targetId=e,this.ge=r}}class $9{constructor(e,r,n=Sr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class e6{constructor(){this.pe=0,this.ye=t6(),this.we=Sr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=At(),r=At(),n=At();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:rt()}}),new nc(this.we,this.Se,e,r,n)}Me(){this.be=!1,this.ye=t6()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,it(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class tj{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ln(),this.$e=ud(),this.Ue=ud(),this.Ke=new fr(vt)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const n=this.He(r);switch(e.state){case 0:this.Je(r)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(r);break;case 3:this.Je(r)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),n.Ce(e.resumeToken));break;default:rt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((n,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,n=e.ge.count,s=this.Xe(r);if(s){const i=s.target;if($0(i))if(n===0){const u=new Ye(i.path);this.ze(r,u,gr.newNoDocument(u,ft.min()))}else it(n===1);else{const u=this.et(r);if(u!==n){const c=this.tt(e),v=c?this.nt(c,e,u):1;if(v!==0){this.Ye(r);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,_)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let u,c;try{u=_s(n).toUint8Array()}catch(v){if(v instanceof f9)return bo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{c=new _w(u,s,i)}catch(v){return bo(v instanceof Tf?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return c.Ee===0?null:c}nt(e,r,n){return r.ge.count===n-this.st(e,r.targetId)?0:2}st(e,r){const n=this.ke.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const u=this.ke.it(),c=`projects/${u.projectId}/databases/${u.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.ze(r,i,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((i,u)=>{const c=this.Xe(u);if(c){if(i.current&&$0(c.target)){const v=new Ye(c.target.path);this._t(v).has(u)||this.ut(u,v)||this.ze(u,v,gr.newNoDocument(v,e))}i.ve&&(r.set(u,i.Fe()),i.Me())}});let n=At();this.Ue.forEach((i,u)=>{let c=!0;u.forEachWhile(v=>{const _=this.Xe(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(i))}),this.Qe.forEach((i,u)=>u.setReadTime(e));const s=new Yp(e,r,this.Ke,this.Qe,n);return this.Qe=Ln(),this.$e=ud(),this.Ue=ud(),this.Ke=new fr(vt),s}Ge(e,r){if(!this.Je(e))return;const n=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,n),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ue=this.Ue.insert(r.key,this.ct(r.key).add(e))}ze(e,r,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ue=this.Ue.insert(r,this.ct(r).delete(e)),this.Ue=this.Ue.insert(r,this.ct(r).add(e)),n&&(this.Qe=this.Qe.insert(r,n))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new e6,this.qe.set(e,r)),r}ct(e){let r=this.Ue.get(e);return r||(r=new Yt(vt),this.Ue=this.Ue.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Yt(vt),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||Ue("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new e6),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function ud(){return new fr(Ye.comparator)}function t6(){return new fr(Ye.comparator)}const rj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ij={and:"AND",or:"OR"};class sj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function wy(t,e){return t.useProto3Json||Up(e)?e:{value:e}}function nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aj(t,e){return nu(t,e.toTimestamp())}function mn(t){return it(!!t),ft.fromTimestamp(function(r){const n=ws(r);return new rr(n.seconds,n.nanos)}(t))}function bw(t,e){return _y(t,e).canonicalString()}function _y(t,e){const r=function(s){return new Wt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function K9(t){const e=Wt.fromString(t);return it(e7(e)),e}function K0(t,e){return bw(t.databaseId,e.path)}function ho(t,e){const r=K9(e);if(r.get(1)!==t.databaseId.projectId)throw new We(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new We(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ye(G9(r))}function H9(t,e){return bw(t.databaseId,e)}function W9(t){const e=K9(t);return e.length===4?Wt.emptyPath():G9(e)}function by(t){return new Wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G9(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function r6(t,e,r){return{name:K0(t,e),fields:r.value.mapValue.fields}}function oj(t,e,r){const n=ho(t,e.name),s=mn(e.updateTime),i=e.createTime?mn(e.createTime):ft.min(),u=new an({mapValue:{fields:e.fields}}),c=gr.newFoundDocument(n,s,i,u);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function lj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:rt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(_,b){return _.useProto3Json?(it(b===void 0||typeof b=="string"),Sr.fromBase64String(b||"")):(it(b===void 0||b instanceof Buffer||b instanceof Uint8Array),Sr.fromUint8Array(b||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(_){const b=_.code===void 0?Le.UNKNOWN:U9(_.code);return new We(b,_.message||"")}(u);r=new $9(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=ho(t,n.document.name),i=mn(n.document.updateTime),u=n.document.createTime?mn(n.document.createTime):ft.min(),c=new an({mapValue:{fields:n.document.fields}}),v=gr.newFoundDocument(s,i,u,c),_=n.targetIds||[],b=n.removedTargetIds||[];r=new Hd(_,b,v.key,v)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=ho(t,n.document),i=n.readTime?mn(n.readTime):ft.min(),u=gr.newNoDocument(s,i),c=n.removedTargetIds||[];r=new Hd([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=ho(t,n.document),i=n.removedTargetIds||[];r=new Hd([],i,s,null)}else{if(!("filter"in e))return rt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,u=new JV(s,i),c=n.targetId;r=new z9(c,u)}}return r}function H0(t,e){let r;if(e instanceof Mu)r={update:r6(t,e.key,e.value)};else if(e instanceof rc)r={delete:K0(t,e.key)};else if(e instanceof As)r={update:r6(t,e.key,e.data),updateMask:pj(e.fieldMask)};else{if(!(e instanceof F9))return rt();r={verify:K0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,u){const c=u.transform;if(c instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof tu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ru)return{fieldPath:u.field.canonicalString(),increment:c.Ie};throw rt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:aj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt()}(t,e.precondition)),r}function xy(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Br.updateTime(mn(i.updateTime)):i.exists!==void 0?Br.exists(i.exists):Br.none()}(e.currentDocument):Br.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let v=null;if("setToServerValue"in c)it(c.setToServerValue==="REQUEST_TIME"),v=new Xl;else if("appendMissingElements"in c){const b=c.appendMissingElements.values||[];v=new eu(b)}else if("removeAllFromArray"in c){const b=c.removeAllFromArray.values||[];v=new tu(b)}else"increment"in c?v=new ru(u,c.increment):rt();const _=cr.fromServerFormat(c.fieldPath);return new vw(_,v)}(t,s)):[];if(e.update){e.update.name;const s=ho(t,e.update.name),i=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(v){const _=v.fieldPaths||[];return new En(_.map(b=>cr.fromServerFormat(b)))}(e.updateMask);return new As(s,i,u,r,n)}return new Mu(s,i,r,n)}if(e.delete){const s=ho(t,e.delete);return new rc(s,r)}if(e.verify){const s=ho(t,e.verify);return new F9(s,r)}return rt()}function uj(t,e){return t&&t.length>0?(it(e!==void 0),t.map(r=>function(s,i){let u=s.updateTime?mn(s.updateTime):mn(i);return u.isEqual(ft.min())&&(u=mn(i)),new ZV(u,s.transformResults||[])}(r,e))):[]}function Z9(t,e){return{documents:[H9(t,e.path)]}}function Q9(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=H9(t,s);const i=function(_){if(_.length!==0)return X9(Zt.create(_,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const u=function(_){if(_.length!==0)return _.map(b=>function(S){return{field:al(S.field),direction:hj(S.dir)}}(b))}(e.orderBy);u&&(r.structuredQuery.orderBy=u);const c=wy(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ht:r,parent:s}}function Y9(t){let e=W9(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){it(n===1);const b=r.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let i=[];r.where&&(i=function(x){const S=J9(x);return S instanceof Zt&&pw(S)?S.getFilters():[S]}(r.where));let u=[];r.orderBy&&(u=function(x){return x.map(S=>function(A){return new Oh(ol(A.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(S))}(r.orderBy));let c=null;r.limit&&(c=function(x){let S;return S=typeof x=="object"?x.value:x,Up(S)?null:S}(r.limit));let v=null;r.startAt&&(v=function(x){const S=!!x.before,I=x.values||[];return new Yl(I,S)}(r.startAt));let _=null;return r.endAt&&(_=function(x){const S=!x.before,I=x.values||[];return new Yl(I,S)}(r.endAt)),LV(e,s,u,i,c,"F",v,_)}function fj(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function J9(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ol(r.unaryFilter.field);return Ft.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ol(r.unaryFilter.field);return Ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ol(r.unaryFilter.field);return Ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ol(r.unaryFilter.field);return Ft.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(t):t.fieldFilter!==void 0?function(r){return Ft.create(ol(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Zt.create(r.compositeFilter.filters.map(n=>J9(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return rt()}}(r.compositeFilter.op))}(t):rt()}function hj(t){return rj[t]}function cj(t){return nj[t]}function dj(t){return ij[t]}function al(t){return{fieldPath:t.canonicalString()}}function ol(t){return cr.fromServerFormat(t.fieldPath)}function X9(t){return t instanceof Ft?function(r){if(r.op==="=="){if(F3(r.value))return{unaryFilter:{field:al(r.field),op:"IS_NAN"}};if(j3(r.value))return{unaryFilter:{field:al(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(F3(r.value))return{unaryFilter:{field:al(r.field),op:"IS_NOT_NAN"}};if(j3(r.value))return{unaryFilter:{field:al(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(r.field),op:cj(r.op),value:r.value}}}(t):t instanceof Zt?function(r){const n=r.getFilters().map(s=>X9(s));return n.length===1?n[0]:{compositeFilter:{op:dj(r.op),filters:n}}}(t):rt()}function pj(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function e7(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,r,n,s,i=ft.min(),u=ft.min(),c=Sr.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=v}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.Tt=e}}function mj(t,e){let r;if(e.document)r=oj(t.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Ye.fromSegments(e.noDocument.path),s=So(e.noDocument.readTime);r=gr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const n=Ye.fromSegments(e.unknownDocument.path),s=So(e.unknownDocument.version);r=gr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new rr(s[0],s[1]);return ft.fromTimestamp(i)}(e.readTime)),r}function n6(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:W0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,u){return{name:K0(i,u.key),fields:u.data.value.mapValue.fields,updateTime:nu(i,u.version.toTimestamp()),createTime:nu(i,u.createTime.toTimestamp())}}(t.Tt,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Eo(e.version)};else{if(!e.isUnknownDocument())return rt();n.unknownDocument={path:r.path.toArray(),version:Eo(e.version)}}return n}function W0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Eo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function So(t){const e=new rr(t.seconds,t.nanoseconds);return ft.fromTimestamp(e)}function Za(t,e){const r=(e.baseMutations||[]).map(i=>xy(t.Tt,i));for(let i=0;i<e.mutations.length-1;++i){const u=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];u.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>xy(t.Tt,i)),s=rr.fromMillis(e.localWriteTimeMs);return new gw(e.batchId,s,r,n)}function Af(t){const e=So(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?So(t.lastLimboFreeSnapshotVersion):ft.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return it(i.documents.length===1),Jn(Wp(W9(i.documents[0])))}(t.query):function(i){return Jn(Y9(i))}(t.query),new ls(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Sr.fromBase64String(t.resumeToken))}function r7(t,e){const r=Eo(e.snapshotVersion),n=Eo(e.lastLimboFreeSnapshotVersion);let s;s=$0(e.target)?Z9(t.Tt,e.target):Q9(t.Tt,e.target).ht;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function n7(t){const e=Y9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yy(e,e.limit,"L"):e}function Uv(t,e){return new ww(e.largestBatchId,xy(t.Tt,e.overlayMutation))}function i6(t,e){const r=e.path.lastSegment();return[t,on(e.path.popLast()),r]}function s6(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Eo(n.readTime),documentKey:on(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{getBundleMetadata(e,r){return a6(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:So(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return a6(e).put(function(s){return{bundleId:s.id,createTime:Eo(mn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return o6(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:n7(i.bundledQuery),readTime:So(i.readTime)}}(n)})}saveNamedQuery(e,r){return o6(e).put(function(s){return{name:s.name,readTime:Eo(mn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function a6(t){return Cr(t,zp)}function o6(t){return Cr(t,$p)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,r){this.serializer=e,this.userId=r}static It(e,r){const n=r.uid||"";return new Jp(e,n)}getOverlay(e,r){return af(e).get(i6(this.userId,r)).next(n=>n?Uv(this.serializer,n):null)}getOverlays(e,r){const n=Bi();return de.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,u)=>{const c=new ww(r,u);s.push(this.Et(e,c))}),de.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(u=>s.add(on(u.getCollectionPath())));const i=[];return s.forEach(u=>{const c=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);i.push(af(e).J(fy,c))}),de.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Bi(),i=on(r),u=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return af(e).G(fy,u).next(c=>{for(const v of c){const _=Uv(this.serializer,v);s.set(_.getKey(),_)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Bi();let u;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return af(e).Z({index:s9,range:c},(v,_,b)=>{const x=Uv(this.serializer,_);i.size()<s||x.largestBatchId===u?(i.set(x.getKey(),x),u=x.largestBatchId):b.done()}).next(()=>i)}Et(e,r){return af(e).put(function(s,i,u){const[c,v,_]=i6(i,u.mutation.key);return{userId:i,collectionPath:v,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:H0(s.Tt,u.mutation)}}(this.serializer,this.userId,r))}}function af(t){return Cr(t,qp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{dt(e){return Cr(e,uw)}getSessionToken(e){return this.dt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Sr.fromUint8Array(n):Sr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.dt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){}At(e,r){this.Rt(e,r),r.Vt()}Rt(e,r){if("nullValue"in e)this.ft(r,5);else if("booleanValue"in e)this.ft(r,10),r.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(r,15),r.gt(lr(e.integerValue));else if("doubleValue"in e){const n=lr(e.doubleValue);isNaN(n)?this.ft(r,13):(this.ft(r,15),Th(n)?r.gt(0):r.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(r,20),typeof n=="string"&&(n=ws(n)),r.yt(`${n.seconds||""}`),r.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,r),this.St(r);else if("bytesValue"in e)this.ft(r,30),r.bt(_s(e.bytesValue)),this.St(r);else if("referenceValue"in e)this.Dt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(r,45),r.gt(n.latitude||0),r.gt(n.longitude||0)}else"mapValue"in e?v9(e)?this.ft(r,Number.MAX_SAFE_INTEGER):Hp(e)?this.vt(e.mapValue,r):(this.Ct(e.mapValue,r),this.St(r)):"arrayValue"in e?(this.Ft(e.arrayValue,r),this.St(r)):rt()}wt(e,r){this.ft(r,25),this.Mt(e,r)}Mt(e,r){r.yt(e)}Ct(e,r){const n=e.fields||{};this.ft(r,55);for(const s of Object.keys(n))this.wt(s,r),this.Rt(n[s],r)}vt(e,r){var n,s;const i=e.fields||{};this.ft(r,53);const u=Zl,c=((s=(n=i[u].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.ft(r,15),r.gt(lr(c)),this.wt(u,r),this.Rt(i[u],r)}Ft(e,r){const n=e.values||[];this.ft(r,50);for(const s of n)this.Rt(s,r)}Dt(e,r){this.ft(r,37),Ye.fromName(e).path.forEach(n=>{this.ft(r,60),this.Mt(n,r)})}ft(e,r){e.gt(r)}St(e){e.gt(2)}}Qa.xt=new Qa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=255;function yj(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function l6(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const u=yj(255&n[i]);if(s+=u,u!==8)break}return s}(t);return Math.ceil(e/8)}class wj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Nt(n.value),n=r.next();this.Bt()}Lt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.kt(n.value),n=r.next();this.qt()}Qt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const s=r.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const s=r.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Ut(e){const r=this.Kt(e),n=l6(r);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Gt(e){const r=this.Kt(e),n=l6(r);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}zt(){this.jt(Zo),this.jt(255)}Ht(){this.Jt(Zo),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const r=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),n=!!(128&r[0]);r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Nt(e){const r=255&e;r===0?(this.jt(0),this.jt(255)):r===Zo?(this.jt(Zo),this.jt(0)):this.jt(r)}kt(e){const r=255&e;r===0?(this.Jt(0),this.Jt(255)):r===Zo?(this.Jt(Zo),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class _j{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class bj{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class of{constructor(){this.Zt=new wj,this.Xt=new _j(this.Zt),this.en=new bj(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}nn(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ya(this.indexId,this.documentKey,this.arrayValue,n)}}function Os(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=u6(t.arrayValue,e.arrayValue),r!==0?r:(r=u6(t.directionalValue,e.directionalValue),r!==0?r:Ye.comparator(t.documentKey,e.documentKey)))}function u6(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.rn=new Yt((r,n)=>cr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const r of e.filters){const n=r;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(it(e.collectionGroup===this.collectionId),this.an)return!1;const r=oy(e);if(r!==void 0&&!this.cn(r))return!1;const n=qa(e);let s=new Set,i=0,u=0;for(;i<n.length&&this.cn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const v=n[i];if(!this.ln(c,v)||!this.hn(this.sn[u++],v))return!1}++i}for(;i<n.length;++i){const c=n[i];if(u>=this.sn.length||!this.hn(this.sn[u++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new Yt(cr.comparator);const r=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new jd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new jd(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new jd(n.field,n.dir==="asc"?0:1)));return new B0(B0.UNKNOWN_ID,this.collectionId,r,Ih.empty())}cn(e){for(const r of this._n)if(this.ln(r,e))return!0;return!1}ln(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}hn(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){var e,r;if(it(t instanceof Ft||t instanceof Zt),t instanceof Ft){if(t instanceof S9){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>Ft.create(t.field,"==",i)))||[];return Zt.create(s,"or")}return t}const n=t.filters.map(s=>i7(s));return Zt.create(n,t.op)}function xj(t){if(t.getFilters().length===0)return[];const e=Sy(i7(t));return it(s7(e)),My(e)||Ey(e)?[e]:e.getFilters()}function My(t){return t instanceof Ft}function Ey(t){return t instanceof Zt&&pw(t)}function s7(t){return My(t)||Ey(t)||function(r){if(r instanceof Zt&&py(r)){for(const n of r.getFilters())if(!My(n)&&!Ey(n))return!1;return!0}return!1}(t)}function Sy(t){if(it(t instanceof Ft||t instanceof Zt),t instanceof Ft)return t;if(t.filters.length===1)return Sy(t.filters[0]);const e=t.filters.map(n=>Sy(n));let r=Zt.create(e,t.op);return r=G0(r),s7(r)?r:(it(r instanceof Zt),it(Jl(r)),it(r.filters.length>1),r.filters.reduce((n,s)=>xw(n,s)))}function xw(t,e){let r;return it(t instanceof Ft||t instanceof Zt),it(e instanceof Ft||e instanceof Zt),r=t instanceof Ft?e instanceof Ft?function(s,i){return Zt.create([s,i],"and")}(t,e):h6(t,e):e instanceof Ft?h6(e,t):function(s,i){if(it(s.filters.length>0&&i.filters.length>0),Jl(s)&&Jl(i))return x9(s,i.getFilters());const u=py(s)?s:i,c=py(s)?i:s,v=u.filters.map(_=>xw(_,c));return Zt.create(v,"or")}(t,e),G0(r)}function h6(t,e){if(Jl(e))return x9(e,t.getFilters());{const r=e.filters.map(n=>xw(t,n));return Zt.create(r,"or")}}function G0(t){if(it(t instanceof Ft||t instanceof Zt),t instanceof Ft)return t;const e=t.getFilters();if(e.length===1)return G0(e[0]);if(_9(t))return t;const r=e.map(s=>G0(s)),n=[];return r.forEach(s=>{s instanceof Ft?n.push(s):s instanceof Zt&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Zt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.Tn=new Mw}addToCollectionParentIndex(e,r){return this.Tn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(Fn.min())}updateCollectionGroup(e,r,n){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class Mw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Yt(Wt.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Yt(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="IndexedDbIndexManager",fd=new Uint8Array(0);class Ej{constructor(e,r){this.databaseId=r,this.In=new Mw,this.En=new Ts(n=>Mo(n),(n,s)=>ec(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.In.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.In.add(r)});const i={collectionId:n,parent:on(s)};return d6(e).put(i)}return de.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[ZS(r),""],!1,!0);return d6(e).G(s).next(i=>{for(const u of i){if(u.collectionId!==r)break;n.push(Oi(u.parent))}return n})}addFieldIndex(e,r){const n=lf(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(v=>[v.fieldPath.canonicalString(),v.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const u=Yo(e);return i.next(c=>{u.put(s6(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=lf(e),s=Yo(e),i=Qo(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=lf(e),n=Qo(e),s=Yo(e);return r.J().next(()=>n.J()).next(()=>s.J())}createTargetIndexes(e,r){return de.forEach(this.dn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new f6(n).Pn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Qo(e);let s=!0;const i=new Map;return de.forEach(this.dn(r),u=>this.An(e,u).next(c=>{s&&(s=!!c),i.set(u,c)})).next(()=>{if(s){let u=At();const c=[];return de.forEach(i,(v,_)=>{Ue(c6,`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(v)} to execute ${Mo(r)}`);const b=function(V,U){const Q=oy(U);if(Q===void 0)return null;for(const ee of q0(V,Q.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(_,v),x=function(V,U){const Q=new Map;for(const ee of qa(U))for(const j of q0(V,ee.fieldPath))switch(j.op){case"==":case"in":Q.set(ee.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return Q.set(ee.fieldPath.canonicalString(),j.value),Array.from(Q.values())}return null}(_,v),S=function(V,U){const Q=[];let ee=!0;for(const j of qa(U)){const B=j.kind===0?K3(V,j.fieldPath,V.startAt):H3(V,j.fieldPath,V.startAt);Q.push(B.value),ee&&(ee=B.inclusive)}return new Yl(Q,ee)}(_,v),I=function(V,U){const Q=[];let ee=!0;for(const j of qa(U)){const B=j.kind===0?H3(V,j.fieldPath,V.endAt):K3(V,j.fieldPath,V.endAt);Q.push(B.value),ee&&(ee=B.inclusive)}return new Yl(Q,ee)}(_,v),A=this.Rn(v,_,S),k=this.Rn(v,_,I),F=this.Vn(v,_,x),C=this.mn(v.indexId,b,A,S.inclusive,k,I.inclusive,F);return de.forEach(C,R=>n.H(R,r.limit).next(V=>{V.forEach(U=>{const Q=Ye.fromSegments(U.documentKey);u.has(Q)||(u=u.add(Q),c.push(Q))})}))}).next(()=>c)}return de.resolve(null)})}dn(e){let r=this.En.get(e);return r||(e.filters.length===0?r=[e]:r=xj(Zt.create(e.filters,"and")).map(n=>vy(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,r),r)}mn(e,r,n,s,i,u,c){const v=(r!=null?r.length:1)*Math.max(n.length,i.length),_=v/(r!=null?r.length:1),b=[];for(let x=0;x<v;++x){const S=r?this.fn(r[x/_]):fd,I=this.gn(e,S,n[x%_],s),A=this.pn(e,S,i[x%_],u),k=c.map(F=>this.gn(e,S,F,!0));b.push(...this.createRange(I,A,k))}return b}gn(e,r,n,s){const i=new Ya(e,Ye.empty(),r,n);return s?i:i.nn()}pn(e,r,n,s){const i=new Ya(e,Ye.empty(),r,n);return s?i.nn():i}An(e,r){const n=new f6(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let u=null;for(const c of i)n.un(c)&&(!u||c.fields.length>u.fields.length)&&(u=c);return u})}getIndexType(e,r){let n=2;const s=this.dn(r);return de.forEach(s,i=>this.An(e,i).next(u=>{u?n!==0&&u.fields.length<function(v){let _=new Yt(cr.comparator),b=!1;for(const x of v.filters)for(const S of x.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?b=!0:_=_.add(S.field));for(const x of v.orderBy)x.field.isKeyField()||(_=_.add(x.field));return _.size+(b?1:0)}(i)&&(n=1):n=0})).next(()=>function(u){return u.limit!==null}(r)&&s.length>1&&n===2?1:n)}yn(e,r){const n=new of;for(const s of qa(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const u=n.tn(s.kind);Qa.xt.At(i,u)}return n.Yt()}fn(e){const r=new of;return Qa.xt.At(e,r.tn(0)),r.Yt()}wn(e,r){const n=new of;return Qa.xt.At(Nh(this.databaseId,r),n.tn(function(i){const u=qa(i);return u.length===0?0:u[u.length-1].kind}(e))),n.Yt()}Vn(e,r,n){if(n===null)return[];let s=[];s.push(new of);let i=0;for(const u of qa(e)){const c=n[i++];for(const v of s)if(this.Sn(r,u.fieldPath)&&Dh(c))s=this.bn(s,u,c);else{const _=v.tn(u.kind);Qa.xt.At(c,_)}}return this.Dn(s)}Rn(e,r,n){return this.Vn(e,r,n.position)}Dn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].Yt();return r}bn(e,r,n){const s=[...e],i=[];for(const u of n.arrayValue.values||[])for(const c of s){const v=new of;v.seed(c.Yt()),Qa.xt.At(u,v.tn(r.kind)),i.push(v)}return i}Sn(e,r){return!!e.filters.find(n=>n instanceof Ft&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=lf(e),s=Yo(e);return(r?n.G(uy,IDBKeyRange.bound(r,r)):n.G()).next(i=>{const u=[];return de.forEach(i,c=>s.get([c.indexId,this.uid]).next(v=>{u.push(function(b,x){const S=x?new Ih(x.sequenceNumber,new Fn(So(x.readTime),new Ye(Oi(x.documentKey)),x.largestBatchId)):Ih.empty(),I=b.fields.map(([A,k])=>new jd(cr.fromServerFormat(A),k));return new B0(b.indexId,b.collectionGroup,I,S)}(c,v))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:vt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=lf(e),i=Yo(e);return this.vn(e).next(u=>s.G(uy,IDBKeyRange.bound(r,r)).next(c=>de.forEach(c,v=>i.put(s6(v.indexId,this.uid,u,n)))))}updateIndexEntries(e,r){const n=new Map;return de.forEach(r,(s,i)=>{const u=n.get(s.collectionGroup);return(u?de.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(c=>(n.set(s.collectionGroup,c),de.forEach(c,v=>this.Cn(e,s,v).next(_=>{const b=this.Fn(i,v);return _.isEqual(b)?de.resolve():this.Mn(e,i,v,_,b)}))))})}xn(e,r,n,s){return Qo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(n,r.key),documentKey:r.key.path.toArray()})}On(e,r,n,s){return Qo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(n,r.key),r.key.path.toArray()])}Cn(e,r,n){const s=Qo(e);let i=new Yt(Os);return s.Z({index:i9,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,r)])},(u,c)=>{i=i.add(new Ya(n.indexId,r,c.arrayValue,c.directionalValue))}).next(()=>i)}Fn(e,r){let n=new Yt(Os);const s=this.yn(r,e);if(s==null)return n;const i=oy(r);if(i!=null){const u=e.data.field(i.fieldPath);if(Dh(u))for(const c of u.arrayValue.values||[])n=n.add(new Ya(r.indexId,e.key,this.fn(c),s))}else n=n.add(new Ya(r.indexId,e.key,fd,s));return n}Mn(e,r,n,s,i){Ue(c6,"Updating index entries for document '%s'",r.key);const u=[];return function(v,_,b,x,S){const I=v.getIterator(),A=_.getIterator();let k=Go(I),F=Go(A);for(;k||F;){let C=!1,R=!1;if(k&&F){const V=b(k,F);V<0?R=!0:V>0&&(C=!0)}else k!=null?R=!0:C=!0;C?(x(F),F=Go(A)):R?(S(k),k=Go(I)):(k=Go(I),F=Go(A))}}(s,i,Os,c=>{u.push(this.xn(e,r,n,c))},c=>{u.push(this.On(e,r,n,c))}),de.waitFor(u)}vn(e){let r=1;return Yo(e).Z({index:n9,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((u,c)=>Os(u,c)).filter((u,c,v)=>!c||Os(u,v[c-1])!==0);const s=[];s.push(e);for(const u of n){const c=Os(u,e),v=Os(u,r);if(c===0)s[0]=e.nn();else if(c>0&&v<0)s.push(u),s.push(u.nn());else if(v>0)break}s.push(r);const i=[];for(let u=0;u<s.length;u+=2){if(this.Nn(s[u],s[u+1]))return[];const c=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,fd,[]],v=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,fd,[]];i.push(IDBKeyRange.bound(c,v))}return i}Nn(e,r){return Os(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(p6)}getMinOffset(e,r){return de.mapArray(this.dn(r),n=>this.An(e,n).next(s=>s||rt())).next(p6)}}function d6(t){return Cr(t,kh)}function Qo(t){return Cr(t,U0)}function lf(t){return Cr(t,lw)}function Yo(t){return Cr(t,F0)}function p6(t){it(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;sw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new Fn(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a7=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t,e,r){const n=t.store(pi),s=t.store(Kl),i=[],u=IDBKeyRange.only(r.batchId);let c=0;const v=n.Z({range:u},(b,x,S)=>(c++,S.delete()));i.push(v.next(()=>{it(c===1)}));const _=[];for(const b of r.mutations){const x=e9(e,b.key.path,r.batchId);i.push(s.delete(x)),_.push(b.key)}return de.waitFor(i).next(()=>_)}function Z0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw rt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(a7,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Xp{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Bn={}}static It(e,r,n,s){it(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Xp(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).Z({index:io,range:n},(s,i,u)=>{r=!1,u.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=ll(e),u=Bs(e);return u.add({}).next(c=>{it(typeof c=="number");const v=new gw(c,r,n,s),_=function(I,A,k){const F=k.baseMutations.map(R=>H0(I.Tt,R)),C=k.mutations.map(R=>H0(I.Tt,R));return{userId:A,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:F,mutations:C}}(this.serializer,this.userId,v),b=[];let x=new Yt((S,I)=>vt(S.canonicalString(),I.canonicalString()));for(const S of s){const I=e9(this.userId,S.key.path,c);x=x.add(S.key.path.popLast()),b.push(u.put(_)),b.push(i.put(I,tV))}return x.forEach(S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.Bn[c]=v.keys()}),de.waitFor(b).next(()=>v)})}lookupMutationBatch(e,r){return Bs(e).get(r).next(n=>n?(it(n.userId===this.userId),Za(this.serializer,n)):null)}Ln(e,r){return this.Bn[r]?de.resolve(this.Bn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Bn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Bs(e).Z({index:io,range:s},(u,c,v)=>{c.userId===this.userId&&(it(c.batchId>=n),i=Za(this.serializer,c)),v.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=uo;return Bs(e).Z({index:io,range:r,reverse:!0},(s,i,u)=>{n=i.batchId,u.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,uo],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).G(io,r).next(n=>n.map(s=>Za(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Fd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return ll(e).Z({range:s},(u,c,v)=>{const[_,b,x]=u,S=Oi(b);if(_===this.userId&&r.path.isEqual(S))return Bs(e).get(x).next(I=>{if(!I)throw rt();it(I.userId===this.userId),i.push(Za(this.serializer,I))});v.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yt(vt);const s=[];return r.forEach(i=>{const u=Fd(this.userId,i.path),c=IDBKeyRange.lowerBound(u),v=ll(e).Z({range:c},(_,b,x)=>{const[S,I,A]=_,k=Oi(I);S===this.userId&&i.path.isEqual(k)?n=n.add(A):x.done()});s.push(v)}),de.waitFor(s).next(()=>this.kn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Fd(this.userId,n),u=IDBKeyRange.lowerBound(i);let c=new Yt(vt);return ll(e).Z({range:u},(v,_,b)=>{const[x,S,I]=v,A=Oi(S);x===this.userId&&n.isPrefixOf(A)?A.length===s&&(c=c.add(I)):b.done()}).next(()=>this.kn(e,c))}kn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(Bs(e).get(i).next(u=>{if(u===null)throw rt();it(u.userId===this.userId),n.push(Za(this.serializer,u))}))}),de.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return o7(e.ue,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.qn(r.batchId)}),de.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return de.resolve();const n=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return ll(e).Z({range:n},(i,u,c)=>{if(i[0]===this.userId){const v=Oi(i[1]);s.push(v)}else c.done()}).next(()=>{it(s.length===0)})})}containsKey(e,r){return l7(e,this.userId,r)}Qn(e){return u7(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:uo,lastStreamToken:""})}}function l7(t,e,r){const n=Fd(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let u=!1;return ll(t).Z({range:i,Y:!0},(c,v,_)=>{const[b,x,S]=c;b===e&&x===s&&(u=!0),_.done()}).next(()=>u)}function Bs(t){return Cr(t,pi)}function ll(t){return Cr(t,Kl)}function u7(t){return Cr(t,Ah)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Io(0)}static Kn(){return new Io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.Wn(e).next(r=>{const n=new Io(r.highestTargetId);return r.highestTargetId=n.next(),this.Gn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(r=>ft.fromTimestamp(new rr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Gn(e,s)))}addTargetData(e,r){return this.zn(e,r).next(()=>this.Wn(e).next(n=>(n.targetCount+=1,this.jn(r,n),this.Gn(e,n))))}updateTargetData(e,r){return this.zn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Jo(e).delete(r.targetId)).next(()=>this.Wn(e)).next(n=>(it(n.targetCount>0),n.targetCount-=1,this.Gn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Jo(e).Z((u,c)=>{const v=Af(c);v.sequenceNumber<=r&&n.get(v.targetId)===null&&(s++,i.push(this.removeTargetData(e,v)))}).next(()=>de.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Jo(e).Z((n,s)=>{const i=Af(s);r(i)})}Wn(e){return v6(e).get(j0).next(r=>(it(r!==null),r))}Gn(e,r){return v6(e).put(j0,r)}zn(e,r){return Jo(e).put(r7(this.serializer,r))}jn(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Mo(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Jo(e).Z({range:s,index:r9},(u,c,v)=>{const _=Af(c);ec(r,_.target)&&(i=_,v.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=Gs(e);return r.forEach(u=>{const c=on(u.path);s.push(i.put({targetId:n,path:c})),s.push(this.referenceDelegate.addReference(e,n,u))}),de.waitFor(s)}removeMatchingKeys(e,r,n){const s=Gs(e);return de.forEach(r,i=>{const u=on(i.path);return de.waitFor([s.delete([n,u]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=Gs(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=Gs(e);let i=At();return s.Z({range:n,Y:!0},(u,c,v)=>{const _=Oi(u[1]),b=new Ye(_);i=i.add(b)}).next(()=>i)}containsKey(e,r){const n=on(r.path),s=IDBKeyRange.bound([n],[ZS(n)],!1,!0);let i=0;return Gs(e).Z({index:ow,Y:!0,range:s},([u,c],v,_)=>{u!==0&&(i++,_.done())}).next(()=>i>0)}lt(e,r){return Jo(e).get(r).next(n=>n?Af(n):null)}}function Jo(t){return Cr(t,Hl)}function v6(t){return Cr(t,fo)}function Gs(t){return Cr(t,Wl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="LruGarbageCollector",Ij=1048576;function y6([t,e],[r,n]){const s=vt(t,r);return s===0?vt(e,n):s}class Tj{constructor(e){this.Hn=e,this.buffer=new Yt(y6),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();y6(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class f7{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ue(g6,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ta(r)?Ue(g6,"Ignoring IndexedDB error during garbage collection: ",r):await Oo(r)}await this.er(3e5)})}}class Aj{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return de.resolve(Qn.ae);const n=new Tj(r);return this.tr.forEachTarget(e,s=>n.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>n.Zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.tr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(m6)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m6):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let n,s,i,u,c,v,_;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,u=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(n=x,c=Date.now(),this.removeTargets(e,n,r))).next(x=>(i=x,v=Date.now(),this.removeOrphanedDocuments(e,n))).next(x=>(_=Date.now(),il()<=qt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${i} targets in `+(v-c)+`ms
	Removed ${x} documents in `+(_-v)+`ms
Total Duration: ${_-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:x})))}}function h7(t,e){return new Aj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,r){this.db=e,this.garbageCollector=h7(this,r)}nr(e){const r=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}sr(e){let r=0;return this.rr(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}rr(e,r){return this._r(e,(n,s)=>r(s))}addReference(e,r,n){return hd(e,n)}removeReference(e,r,n){return hd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return hd(e,r)}ar(e,r){return function(s,i){let u=!1;return u7(s).X(c=>l7(s,c,i).next(v=>(v&&(u=!0),de.resolve(!v)))).next(()=>u)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this._r(e,(u,c)=>{if(c<=r){const v=this.ar(e,u).next(_=>{if(!_)return i++,n.getEntry(e,u).next(()=>(n.removeEntry(u,ft.min()),Gs(e).delete(function(x){return[0,on(x.path)]}(u))))});s.push(v)}}).next(()=>de.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return hd(e,r)}_r(e,r){const n=Gs(e);let s,i=Qn.ae;return n.Z({index:ow},([u,c],{path:v,sequenceNumber:_})=>{u===0?(i!==Qn.ae&&r(new Ye(Oi(s)),i),i=_,s=v):i=Qn.ae}).next(()=>{i!==Qn.ae&&r(new Ye(Oi(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hd(t,e){return Gs(t).put(function(n,s){return{targetId:0,path:on(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(){this.changes=new Ts(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?de.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Ba(e).put(n)}removeEntry(e,r,n){return Ba(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],W0(u),c[c.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.ur(e,n)))}getEntry(e,r){let n=gr.newInvalidDocument(r);return Ba(e).Z({index:Ud,range:IDBKeyRange.only(uf(r))},(s,i)=>{n=this.cr(r,i)}).next(()=>n)}lr(e,r){let n={size:0,document:gr.newInvalidDocument(r)};return Ba(e).Z({index:Ud,range:IDBKeyRange.only(uf(r))},(s,i)=>{n={document:this.cr(r,i),size:Z0(i)}}).next(()=>n)}getEntries(e,r){let n=Ln();return this.hr(e,r,(s,i)=>{const u=this.cr(s,i);n=n.insert(s,u)}).next(()=>n)}Pr(e,r){let n=Ln(),s=new fr(Ye.comparator);return this.hr(e,r,(i,u)=>{const c=this.cr(i,u);n=n.insert(i,c),s=s.insert(i,Z0(u))}).next(()=>({documents:n,Tr:s}))}hr(e,r,n){if(r.isEmpty())return de.resolve();let s=new Yt(b6);r.forEach(v=>s=s.add(v));const i=IDBKeyRange.bound(uf(s.first()),uf(s.last())),u=s.getIterator();let c=u.getNext();return Ba(e).Z({index:Ud,range:i},(v,_,b)=>{const x=Ye.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;c&&b6(c,x)<0;)n(c,null),c=u.getNext();c&&c.isEqual(x)&&(n(c,_),c=u.hasNext()?u.getNext():null),c?b.W(uf(c)):b.done()}).next(()=>{for(;c;)n(c,null),c=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const u=r.path,c=[u.popLast().toArray(),u.lastSegment(),W0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],v=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ba(e).G(IDBKeyRange.bound(c,v,!0)).next(_=>{i==null||i.incrementDocumentReadCount(_.length);let b=Ln();for(const x of _){const S=this.cr(Ye.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);S.isFoundDocument()&&(tc(r,S)||s.has(S.key))&&(b=b.insert(S.key,S))}return b})}getAllFromCollectionGroup(e,r,n,s){let i=Ln();const u=_6(r,n),c=_6(r,Fn.max());return Ba(e).Z({index:t9,range:IDBKeyRange.bound(u,c,!0)},(v,_,b)=>{const x=this.cr(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);i=i.insert(x.key,x),i.size===s&&b.done()}).next(()=>i)}newChangeBuffer(e){return new Pj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return w6(e).get(ly).next(r=>(it(!!r),r))}ur(e,r){return w6(e).put(ly,r)}cr(e,r){if(r){const n=mj(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(ft.min())))return n}return gr.newInvalidDocument(e)}}function d7(t){return new kj(t)}class Pj extends c7{constructor(e,r){super(),this.Ir=e,this.trackRemovals=r,this.Er=new Ts(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Yt((i,u)=>vt(i.canonicalString(),u.canonicalString()));return this.changes.forEach((i,u)=>{const c=this.Er.get(i);if(r.push(this.Ir.removeEntry(e,i,c.readTime)),u.isValidDocument()){const v=n6(this.Ir.serializer,u);s=s.add(i.path.popLast());const _=Z0(v);n+=_-c.size,r.push(this.Ir.addEntry(e,i,v))}else if(n-=c.size,this.trackRemovals){const v=n6(this.Ir.serializer,u.convertToNoDocument(ft.min()));r.push(this.Ir.addEntry(e,i,v))}}),s.forEach(i=>{r.push(this.Ir.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.Ir.updateMetadata(e,n)),de.waitFor(r)}getFromCache(e,r){return this.Ir.lr(e,r).next(n=>(this.Er.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.Ir.Pr(e,r).next(({documents:n,Tr:s})=>(s.forEach((i,u)=>{this.Er.set(i,{size:u,readTime:n.get(i).readTime})}),n))}}function w6(t){return Cr(t,Rh)}function Ba(t){return Cr(t,V0)}function uf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _6(t,e){const r=e.documentKey.path.toArray();return[t,W0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function b6(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=vt(r[i],n[i]),s)return s;return s=vt(r.length,n.length),s||(s=vt(r[r.length-2],n[n.length-2]),s||vt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Yf(n.mutation,s,En.empty(),rr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,At()).next(()=>n))}getLocalViewOfDocuments(e,r,n=At()){const s=Bi();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let u=If();return i.forEach((c,v)=>{u=u.insert(c,v.overlayedDocument)}),u}))}getOverlayedDocuments(e,r){const n=Bi();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,At()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((u,c)=>{r.set(u,c)})})}computeViews(e,r,n,s){let i=Ln();const u=Qf(),c=function(){return Qf()}();return r.forEach((v,_)=>{const b=n.get(_.key);s.has(_.key)&&(b===void 0||b.mutation instanceof As)?i=i.insert(_.key,_):b!==void 0?(u.set(_.key,b.mutation.getFieldMask()),Yf(b.mutation,_,b.mutation.getFieldMask(),rr.now())):u.set(_.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(v=>(v.forEach((_,b)=>u.set(_,b)),r.forEach((_,b)=>{var x;return c.set(_,new Cj(b,(x=u.get(_))!==null&&x!==void 0?x:null))}),c))}recalculateAndSaveOverlays(e,r){const n=Qf();let s=new fr((u,c)=>u-c),i=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(u=>{for(const c of u)c.keys().forEach(v=>{const _=r.get(v);if(_===null)return;let b=n.get(v)||En.empty();b=c.applyToLocalView(_,b),n.set(v,b);const x=(s.get(c.batchId)||At()).add(v);s=s.insert(c.batchId,x)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const v=c.getNext(),_=v.key,b=v.value,x=P9();b.forEach(S=>{if(!i.has(S)){const I=V9(r.get(S),n.get(S));I!==null&&x.set(S,I),i=i.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,x))}return de.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(u){return Ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):I9(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const u=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):de.resolve(Bi());let c=Sh,v=i;return u.next(_=>de.forEach(_,(b,x)=>(c<x.largestBatchId&&(c=x.largestBatchId),i.get(b)?de.resolve():this.remoteDocumentCache.getEntry(e,b).next(S=>{v=v.insert(b,S)}))).next(()=>this.populateOverlays(e,_,i)).next(()=>this.computeViews(e,v,_,At())).next(b=>({batchId:c,changes:k9(b)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ye(r)).next(n=>{let s=If();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let u=If();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,v=>{const _=function(x,S){return new xu(S,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(r,v.child(i));return this.getDocumentsMatchingCollectionQuery(e,_,n,s).next(b=>{b.forEach((x,S)=>{u=u.insert(x,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(u=>{i.forEach((v,_)=>{const b=_.getKey();u.get(b)===null&&(u=u.insert(b,gr.newInvalidDocument(b)))});let c=If();return u.forEach((v,_)=>{const b=i.get(v);b!==void 0&&Yf(b.mutation,_,En.empty(),rr.now()),tc(r,_)&&(c=c.insert(v,_))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return de.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:n7(s.bundledQuery),readTime:mn(s.readTime)}}(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.overlays=new fr(Ye.comparator),this.Rr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bi();return de.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.Et(e,r,i)}),de.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Rr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(n)),de.resolve()}getOverlaysForCollection(e,r,n){const s=Bi(),i=r.length+1,u=new Ye(r.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const v=c.getNext().value,_=v.getKey();if(!r.isPrefixOf(_.path))break;_.path.length===i&&v.largestBatchId>n&&s.set(v.getKey(),v)}return de.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new fr((_,b)=>_-b);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===r&&_.largestBatchId>n){let b=i.get(_.largestBatchId);b===null&&(b=Bi(),i=i.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const c=Bi(),v=i.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((_,b)=>c.set(_,b)),!(c.size()>=s)););return de.resolve(c)}Et(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new ww(r,n));let i=this.Rr.get(r);i===void 0&&(i=At(),this.Rr.set(r,i)),this.Rr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.sessionToken=Sr.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.Vr=new Yt(Dr.mr),this.gr=new Yt(Dr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const n=new Dr(e,r);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.wr(new Dr(e,r))}Sr(e,r){e.forEach(n=>this.removeReference(n,r))}br(e){const r=new Ye(new Wt([])),n=new Dr(r,e),s=new Dr(r,e+1),i=[];return this.gr.forEachInRange([n,s],u=>{this.wr(u),i.push(u.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new Ye(new Wt([])),n=new Dr(r,e),s=new Dr(r,e+1);let i=At();return this.gr.forEachInRange([n,s],u=>{i=i.add(u.key)}),i}containsKey(e){const r=new Dr(e,0),n=this.Vr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Dr{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return Ye.comparator(e.key,r.key)||vt(e.Cr,r.Cr)}static pr(e,r){return vt(e.Cr,r.Cr)||Ye.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Yt(Dr.mr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new gw(i,r,n,s);this.mutationQueue.push(u);for(const c of s)this.Mr=this.Mr.add(new Dr(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,r){return de.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Nr(n),i=s<0?0:s;return de.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?uo:this.Fr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Dr(r,0),s=new Dr(r,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,s],u=>{const c=this.Or(u.Cr);i.push(c)}),de.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yt(vt);return r.forEach(s=>{const i=new Dr(s,0),u=new Dr(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,u],c=>{n=n.add(c.Cr)})}),de.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ye.isDocumentKey(i)||(i=i.child(""));const u=new Dr(new Ye(i),0);let c=new Yt(vt);return this.Mr.forEachWhile(v=>{const _=v.key.path;return!!n.isPrefixOf(_)&&(_.length===s&&(c=c.add(v.Cr)),!0)},u),de.resolve(this.Br(c))}Br(e){const r=[];return e.forEach(n=>{const s=this.Or(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){it(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return de.forEach(r.mutations,s=>{const i=new Dr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,r){const n=new Dr(r,0),s=this.Mr.firstAfterOrEqual(n);return de.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.kr=e,this.docs=function(){return new fr(Ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,u=this.kr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:u}),this.size+=u-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return de.resolve(n?n.document.mutableCopy():gr.newInvalidDocument(r))}getEntries(e,r){let n=Ln();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():gr.newInvalidDocument(s))}),de.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ln();const u=r.path,c=new Ye(u.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(c);for(;v.hasNext();){const{key:_,value:{document:b}}=v.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||sw(QS(b),n)<=0||(s.has(b.key)||tc(r,b))&&(i=i.insert(b.key,b.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,r,n,s){rt()}qr(e,r){return de.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Vj(this)}getSize(e){return de.resolve(this.size)}}class Vj extends c7{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)}),de.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.persistence=e,this.Qr=new Ts(r=>Mo(r),ec),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ew,this.targetCount=0,this.Kr=Io.Un()}forEachTarget(e,r){return this.Qr.forEach((n,s)=>r(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.$r&&(this.$r=r),de.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Kr=new Io(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.zn(r),de.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Ur.br(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Qr.forEach((u,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Qr.delete(u),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),de.waitFor(i).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const n=this.Qr.get(r)||null;return de.resolve(n)}addMatchingKeys(e,r,n){return this.Ur.yr(r,n),de.resolve()}removeMatchingKeys(e,r,n){this.Ur.Sr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(u=>{i.push(s.markPotentiallyOrphaned(e,u))}),de.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Ur.br(r),de.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Ur.vr(r);return de.resolve(n)}containsKey(e,r){return de.resolve(this.Ur.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new Qn(0),this.zr=!1,this.zr=!0,this.jr=new Oj,this.referenceDelegate=e(this),this.Hr=new jj(this),this.indexManager=new Mj,this.remoteDocumentCache=function(s){return new Lj(s)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new t7(r),this.Yr=new Nj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Dj,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Wr[e.toKey()];return n||(n=new Bj(r,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,n){Ue("MemoryPersistence","Starting transaction:",e);const s=new Fj(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,r){return de.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,r)))}}class Fj extends JS{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.ti=new Ew,this.ni=null}static ri(e){return new em(e)}get ii(){if(this.ni)return this.ni;throw rt()}addReference(e,r,n){return this.ti.addReference(n,r),this.ii.delete(n.toString()),de.resolve()}removeReference(e,r,n){return this.ti.removeReference(n,r),this.ii.add(n.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),de.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ii,n=>{const s=Ye.fromPath(n);return this.si(e,s).next(i=>{i||r.removeEntry(s,ft.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(n=>{n?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return de.or([()=>de.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Q0{constructor(e,r){this.persistence=e,this.oi=new Ts(n=>on(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=h7(this,r)}static ri(e,r){return new Q0(e,r)}Zr(){}Xr(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}sr(e){let r=0;return this.rr(e,n=>{r++}).next(()=>r)}rr(e,r){return de.forEach(this.oi,(n,s)=>this.ar(e,n,s).next(i=>i?de.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,r).next(c=>{c||(n++,i.removeEntry(u,ft.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.oi.set(n,e.currentSequenceNumber),de.resolve()}removeReference(e,r,n){return this.oi.set(n,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=$d(e.data.value)),r}ar(e,r,n){return de.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return de.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e}B(e,r,n,s){const i=new Fp("createOrUpgrade",r);n<1&&s>=1&&(function(v){v.createObjectStore(Xh)}(e),function(v){v.createObjectStore(Ah,{keyPath:eV}),v.createObjectStore(pi,{keyPath:N3,autoIncrement:!0}).createIndex(io,D3,{unique:!0}),v.createObjectStore(Kl)}(e),x6(e),function(v){v.createObjectStore(Ka)}(e));let u=de.resolve();return n<3&&s>=3&&(n!==0&&(function(v){v.deleteObjectStore(Wl),v.deleteObjectStore(Hl),v.deleteObjectStore(fo)}(e),x6(e)),u=u.next(()=>function(v){const _=v.store(fo),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return _.put(j0,b)}(i))),n<4&&s>=4&&(n!==0&&(u=u.next(()=>function(v,_){return _.store(pi).G().next(x=>{v.deleteObjectStore(pi),v.createObjectStore(pi,{keyPath:N3,autoIncrement:!0}).createIndex(io,D3,{unique:!0});const S=_.store(pi),I=x.map(A=>S.put(A));return de.waitFor(I)})}(e,i))),u=u.next(()=>{(function(v){v.createObjectStore(Gl,{keyPath:uV})})(e)})),n<5&&s>=5&&(u=u.next(()=>this._i(i))),n<6&&s>=6&&(u=u.next(()=>(function(v){v.createObjectStore(Rh)}(e),this.ai(i)))),n<7&&s>=7&&(u=u.next(()=>this.ui(i))),n<8&&s>=8&&(u=u.next(()=>this.ci(e,i))),n<9&&s>=9&&(u=u.next(()=>{(function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(u=u.next(()=>this.li(i))),n<11&&s>=11&&(u=u.next(()=>{(function(v){v.createObjectStore(zp,{keyPath:fV})})(e),function(v){v.createObjectStore($p,{keyPath:hV})}(e)})),n<12&&s>=12&&(u=u.next(()=>{(function(v){const _=v.createObjectStore(qp,{keyPath:yV});_.createIndex(fy,wV,{unique:!1}),_.createIndex(s9,_V,{unique:!1})})(e)})),n<13&&s>=13&&(u=u.next(()=>function(v){const _=v.createObjectStore(V0,{keyPath:rV});_.createIndex(Ud,nV),_.createIndex(t9,iV)}(e)).next(()=>this.hi(e,i)).next(()=>e.deleteObjectStore(Ka))),n<14&&s>=14&&(u=u.next(()=>this.Pi(e,i))),n<15&&s>=15&&(u=u.next(()=>function(v){v.createObjectStore(lw,{keyPath:cV,autoIncrement:!0}).createIndex(uy,dV,{unique:!1}),v.createObjectStore(F0,{keyPath:pV}).createIndex(n9,mV,{unique:!1}),v.createObjectStore(U0,{keyPath:vV}).createIndex(i9,gV,{unique:!1})}(e))),n<16&&s>=16&&(u=u.next(()=>{r.objectStore(F0).clear()}).next(()=>{r.objectStore(U0).clear()})),n<17&&s>=17&&(u=u.next(()=>{(function(v){v.createObjectStore(uw,{keyPath:bV})})(e)})),u}ai(e){let r=0;return e.store(Ka).Z((n,s)=>{r+=Z0(s)}).next(()=>{const n={byteSize:r};return e.store(Rh).put(ly,n)})}_i(e){const r=e.store(Ah),n=e.store(pi);return r.G().next(s=>de.forEach(s,i=>{const u=IDBKeyRange.bound([i.userId,uo],[i.userId,i.lastAcknowledgedBatchId]);return n.G(io,u).next(c=>de.forEach(c,v=>{it(v.userId===i.userId);const _=Za(this.serializer,v);return o7(e,i.userId,_).next(()=>{})}))}))}ui(e){const r=e.store(Wl),n=e.store(Ka);return e.store(fo).get(j0).next(s=>{const i=[];return n.Z((u,c)=>{const v=new Wt(u),_=function(x){return[0,on(x)]}(v);i.push(r.get(_).next(b=>b?de.resolve():(x=>r.put({targetId:0,path:on(x),sequenceNumber:s.highestListenSequenceNumber}))(v)))}).next(()=>de.waitFor(i))})}ci(e,r){e.createObjectStore(kh,{keyPath:lV});const n=r.store(kh),s=new Mw,i=u=>{if(s.add(u)){const c=u.lastSegment(),v=u.popLast();return n.put({collectionId:c,parent:on(v)})}};return r.store(Ka).Z({Y:!0},(u,c)=>{const v=new Wt(u);return i(v.popLast())}).next(()=>r.store(Kl).Z({Y:!0},([u,c,v],_)=>{const b=Oi(c);return i(b.popLast())}))}li(e){const r=e.store(Hl);return r.Z((n,s)=>{const i=Af(s),u=r7(this.serializer,i);return r.put(u)})}hi(e,r){const n=r.store(Ka),s=[];return n.Z((i,u)=>{const c=r.store(V0),v=function(x){return x.document?new Ye(Wt.fromString(x.document.name).popFirst(5)):x.noDocument?Ye.fromSegments(x.noDocument.path):x.unknownDocument?Ye.fromSegments(x.unknownDocument.path):rt()}(u).path.toArray(),_={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(c.put(_))}).next(()=>de.waitFor(s))}Pi(e,r){const n=r.store(pi),s=d7(this.serializer),i=new Sw(em.ri,this.serializer.Tt);return n.G().next(u=>{const c=new Map;return u.forEach(v=>{var _;let b=(_=c.get(v.userId))!==null&&_!==void 0?_:At();Za(this.serializer,v).keys().forEach(x=>b=b.add(x)),c.set(v.userId,b)}),de.forEach(c,(v,_)=>{const b=new $r(_),x=Jp.It(this.serializer,b),S=i.getIndexManager(b),I=Xp.It(b,this.serializer,S,i.referenceDelegate);return new p7(s,I,x,S).recalculateAndSaveOverlaysForDocumentKeys(new hy(r,Qn.ae),v).next()})})}}function x6(t){t.createObjectStore(Wl,{keyPath:aV}).createIndex(ow,oV,{unique:!0}),t.createObjectStore(Hl,{keyPath:"targetId"}).createIndex(r9,sV,{unique:!0}),t.createObjectStore(fo)}const Ls="IndexedDbPersistence",zv=18e5,$v=5e3,qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zj="main";class Iw{constructor(e,r,n,s,i,u,c,v,_,b,x=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.Ti=i,this.window=u,this.document=c,this.Ii=_,this.Ei=b,this.di=x,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=S=>Promise.resolve(),!Iw.D())throw new We(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rj(this,s),this.gi=r+zj,this.serializer=new t7(v),this.pi=new ca(this.gi,this.di,new Uj(this.serializer)),this.jr=new gj,this.Hr=new Sj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=d7(this.serializer),this.Yr=new vj,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,b===!1&&dn(Ls,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(Le.FAILED_PRECONDITION,qv);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Qn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(r=>{r||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(r=>this.isPrimary&&!r?this.xi(e).next(()=>!1):!!r&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ta(e))return Ue(Ls,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue(Ls,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return ff(e).get(Wo).next(r=>de.resolve(this.Ni(r)))}Bi(e){return cd(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,zv)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Cr(r,Gl);return n.G().next(s=>{const i=this.qi(s,zv),u=s.filter(c=>i.indexOf(c)===-1);return de.forEach(u,c=>n.delete(c.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const r of e)this.yi.removeItem(this.Qi(r.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?de.resolve(!0):ff(e).get(Wo).next(r=>{if(r!==null&&this.ki(r.leaseTimestampMs,$v)&&!this.$i(r.ownerId)){if(this.Ni(r)&&this.networkEnabled)return!0;if(!this.Ni(r)){if(!r.allowTabSynchronization)throw new We(Le.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||cd(e).G().next(n=>this.qi(n,$v).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(i||u&&c)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Ue(Ls,`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Xh,Gl],e=>{const r=new hy(e,Qn.ae);return this.xi(r).next(()=>this.Bi(r))}),this.pi.close(),this.Gi()}qi(e,r){return e.filter(n=>this.ki(n.updateTimeMs,r)&&!this.$i(n.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>cd(e).G().next(r=>this.qi(r,zv).map(n=>n.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,r){return Xp.It(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ej(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Jp.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,r,n){Ue(Ls,"Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(v){return v===17?EV:v===16?MV:v===15?fw:v===14?l9:v===13?o9:v===12?xV:v===11?a9:void rt()}(this.di);let u;return this.pi.runTransaction(e,s,i,c=>(u=new hy(c,this.Gr?this.Gr.next():Qn.ae),r==="readwrite-primary"?this.Fi(u).next(v=>!!v||this.Mi(u)).next(v=>{if(!v)throw dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new We(Le.FAILED_PRECONDITION,YS);return n(u)}).next(v=>this.Oi(u).next(()=>v)):this.ji(u).next(()=>n(u)))).then(c=>(u.raiseOnCommittedEvent(),c))}ji(e){return ff(e).get(Wo).next(r=>{if(r!==null&&this.ki(r.leaseTimestampMs,$v)&&!this.$i(r.ownerId)&&!this.Ni(r)&&!(this.Ei||this.allowTabSynchronization&&r.allowTabSynchronization))throw new We(Le.FAILED_PRECONDITION,qv)})}Oi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ff(e).put(Wo,r)}static D(){return ca.D()}xi(e){const r=ff(e);return r.get(Wo).next(n=>this.Ni(n)?(Ue(Ls,"Releasing primary lease."),r.delete(Wo)):de.resolve())}ki(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(dn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const r=/(?:Version|Mobile)\/1[456]/;PS()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var r;try{const n=((r=this.yi)===null||r===void 0?void 0:r.getItem(this.Qi(e)))!==null;return Ue(Ls,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return dn(Ls,"Failed to get zombied client id.",n),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){dn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ff(t){return Cr(t,Xh)}function cd(t){return Cr(t,Gl)}function $j(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Hi=n,this.Ji=s}static Yi(e,r){let n=At(),s=At();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Tw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return PS()?8:XS(C0())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.rs(e,r).next(u=>{i.result=u}).next(()=>{if(!i.result)return this.ss(e,r,s,n).next(u=>{i.result=u})}).next(()=>{if(i.result)return;const u=new qj;return this._s(e,r,u).next(c=>{if(i.result=c,this.Xi)return this.us(e,r,u,c.size)})}).next(()=>i.result)}us(e,r,n,s){return n.documentReadCount<this.es?(il()<=qt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",sl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),de.resolve()):(il()<=qt.DEBUG&&Ue("QueryEngine","Query:",sl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(il()<=qt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",sl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(r))):de.resolve())}rs(e,r){if(W3(r))return de.resolve(null);let n=Jn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=yy(r,null,"F"),n=Jn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const u=At(...i);return this.ns.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,n).next(v=>{const _=this.cs(r,c);return this.ls(r,_,u,v.readTime)?this.rs(e,yy(r,null,"F")):this.hs(e,_,r,v)}))})))}ss(e,r,n,s){return W3(r)||s.isEqual(ft.min())?de.resolve(null):this.ns.getDocuments(e,n).next(i=>{const u=this.cs(r,i);return this.ls(r,u,n,s)?de.resolve(null):(il()<=qt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sl(r)),this.hs(e,u,r,WL(s,Sh)).next(c=>c))})}cs(e,r){let n=new Yt(A9(e));return r.forEach((s,i)=>{tc(e,i)&&(n=n.add(i))}),n}ls(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,r,n){return il()<=qt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",sl(r)),this.ns.getDocumentsMatchingQuery(e,r,Fn.min(),n)}hs(e,r,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(u=>{i=i.insert(u.key,u)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="LocalStore",Kj=3e8;class Hj{constructor(e,r,n,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new fr(vt),this.Is=new Ts(i=>Mo(i),ec),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p7(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function v7(t,e,r,n){return new Hj(t,e,r,n)}async function g7(t,e){const r=bt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.As(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const u=[],c=[];let v=At();for(const _ of s){u.push(_.batchId);for(const b of _.mutations)v=v.add(b.key)}for(const _ of i){c.push(_.batchId);for(const b of _.mutations)v=v.add(b.key)}return r.localDocuments.getDocuments(n,v).next(_=>({Rs:_,removedBatchIds:u,addedBatchIds:c}))})})}function Wj(t,e){const r=bt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.ds.newChangeBuffer({trackRemovals:!0});return function(c,v,_,b){const x=_.batch,S=x.keys();let I=de.resolve();return S.forEach(A=>{I=I.next(()=>b.getEntry(v,A)).next(k=>{const F=_.docVersions.get(A);it(F!==null),k.version.compareTo(F)<0&&(x.applyToRemoteDocument(k,_),k.isValidDocument()&&(k.setReadTime(_.commitVersion),b.addEntry(k)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(v,x))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let v=At();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(v=v.add(c.batch.mutations[_].key));return v}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function y7(t){const e=bt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function Gj(t,e){const r=bt(t),n=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const u=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const c=[];e.targetChanges.forEach((b,x)=>{const S=s.get(x);if(!S)return;c.push(r.Hr.removeMatchingKeys(i,b.removedDocuments,x).next(()=>r.Hr.addMatchingKeys(i,b.addedDocuments,x)));let I=S.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(x)!==null?I=I.withResumeToken(Sr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):b.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(b.resumeToken,n)),s=s.insert(x,I),function(k,F,C){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Kj?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(S,I,b)&&c.push(r.Hr.updateTargetData(i,I))});let v=Ln(),_=At();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,b))}),c.push(Zj(i,u,e.documentUpdates).next(b=>{v=b.Vs,_=b.fs})),!n.isEqual(ft.min())){const b=r.Hr.getLastRemoteSnapshotVersion(i).next(x=>r.Hr.setTargetsMetadata(i,i.currentSequenceNumber,n));c.push(b)}return de.waitFor(c).next(()=>u.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,v,_)).next(()=>v)}).then(i=>(r.Ts=s,i))}function Zj(t,e,r){let n=At(),s=At();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let u=Ln();return r.forEach((c,v)=>{const _=i.get(c);v.isFoundDocument()!==_.isFoundDocument()&&(s=s.add(c)),v.isNoDocument()&&v.version.isEqual(ft.min())?(e.removeEntry(c,v.readTime),u=u.insert(c,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),u=u.insert(c,v)):Ue(Aw,"Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",v.version)}),{Vs:u,fs:s}})}function Qj(t,e){const r=bt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=uo),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Yj(t,e){const r=bt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Hr.getTargetData(n,e).next(i=>i?(s=i,de.resolve(s)):r.Hr.allocateTargetId(n).next(u=>(s=new ls(e,u,"TargetPurposeListen",n.currentSequenceNumber),r.Hr.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ts.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(n.targetId,n),r.Is.set(e,n.targetId)),n})}async function Iy(t,e,r){const n=bt(t),s=n.Ts.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,u=>n.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ta(u))throw u;Ue(Aw,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ts=n.Ts.remove(e),n.Is.delete(s.target)}function M6(t,e,r){const n=bt(t);let s=ft.min(),i=At();return n.persistence.runTransaction("Execute query","readwrite",u=>function(v,_,b){const x=bt(v),S=x.Is.get(b);return S!==void 0?de.resolve(x.Ts.get(S)):x.Hr.getTargetData(_,b)}(n,u,Jn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(u,c.targetId).next(v=>{i=v})}).next(()=>n.Ps.getDocumentsMatchingQuery(u,e,r?s:ft.min(),r?i:At())).next(c=>(Jj(n,jV(e),c),{documents:c,gs:i})))}function Jj(t,e,r){let n=t.Es.get(e)||ft.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Es.set(e,n)}class E6{constructor(){this.activeTargetIds=KV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w7{constructor(){this.ho=new E6,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,n){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new E6,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="ConnectivityMonitor";class I6{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ue(S6,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ue(S6,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function Ty(){return dd===null?dd=function(){return 268435456+Math.round(2147483648*Math.random())}():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="RestConnection",eF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===z0?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,r,n,s,i){const u=Ty(),c=this.bo(e,r.toUriEncodedString());Ue(Kv,`Sending RPC '${e}' ${u}:`,c,n);const v={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(v,s,i),this.vo(e,c,v,n).then(_=>(Ue(Kv,`Received RPC '${e}' ${u}: `,_),_),_=>{throw bo(Kv,`RPC '${e}' ${u} failed with error: `,_,"url: ",c,"request:",n),_})}Co(e,r,n,s,i,u){return this.So(e,r,n,s,i)}Do(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}bo(e,r){const n=eF[e];return`${this.po}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="WebChannelConnection";class nF extends tF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,n,s){const i=Ty();return new Promise((u,c)=>{const v=new US;v.setWithCredentials(!0),v.listenOnce(zS.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Vd.NO_ERROR:const b=v.getResponseJson();Ue(Jr,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(b)),u(b);break;case Vd.TIMEOUT:Ue(Jr,`RPC '${e}' ${i} timed out`),c(new We(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const x=v.getStatus();if(Ue(Jr,`RPC '${e}' ${i} failed with status:`,x,"response text:",v.getResponseText()),x>0){let S=v.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const A=function(F){const C=F.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(C)>=0?C:Le.UNKNOWN}(I.status);c(new We(A,I.message))}else c(new We(Le.UNKNOWN,"Server responded with status "+v.getStatus()))}else c(new We(Le.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ue(Jr,`RPC '${e}' ${i} completed.`)}});const _=JSON.stringify(s);Ue(Jr,`RPC '${e}' ${i} sending request:`,s),v.send(r,"POST",_,n,15)})}Wo(e,r,n){const s=Ty(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=KS(),c=qS(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Do(v.initMessageHeaders,r,n),v.encodeInitMessageHeaders=!0;const b=i.join("");Ue(Jr,`Creating RPC '${e}' stream ${s}: ${b}`,v);const x=u.createWebChannel(b,v);let S=!1,I=!1;const A=new rF({Fo:F=>{I?Ue(Jr,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(S||(Ue(Jr,`Opening RPC '${e}' stream ${s} transport.`),x.open(),S=!0),Ue(Jr,`RPC '${e}' stream ${s} sending:`,F),x.send(F))},Mo:()=>x.close()}),k=(F,C,R)=>{F.listen(C,V=>{try{R(V)}catch(U){setTimeout(()=>{throw U},0)}})};return k(x,Sf.EventType.OPEN,()=>{I||(Ue(Jr,`RPC '${e}' stream ${s} transport opened.`),A.Qo())}),k(x,Sf.EventType.CLOSE,()=>{I||(I=!0,Ue(Jr,`RPC '${e}' stream ${s} transport closed`),A.Uo())}),k(x,Sf.EventType.ERROR,F=>{I||(I=!0,bo(Jr,`RPC '${e}' stream ${s} transport errored:`,F),A.Uo(new We(Le.UNAVAILABLE,"The operation could not be completed")))}),k(x,Sf.EventType.MESSAGE,F=>{var C;if(!I){const R=F.data[0];it(!!R);const V=R,U=(V==null?void 0:V.error)||((C=V[0])===null||C===void 0?void 0:C.error);if(U){Ue(Jr,`RPC '${e}' stream ${s} received error:`,U);const Q=U.status;let ee=function(D){const $=br[D];if($!==void 0)return U9($)}(Q),j=U.message;ee===void 0&&(ee=Le.INTERNAL,j="Unknown error status: "+Q+" with message "+U.message),I=!0,A.Uo(new We(ee,j)),x.close()}else Ue(Jr,`RPC '${e}' stream ${s} received:`,R),A.Ko(R)}}),k(c,$S.STAT_EVENT,F=>{F.stat===sy.PROXY?Ue(Jr,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===sy.NOPROXY&&Ue(Jr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){return typeof window<"u"?window:null}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t){return new sj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=r,this.Go=n,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-n);s>0&&Ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="PersistentStream";class b7{constructor(e,r,n,s,i,u,c,v){this.Ti=e,this.n_=n,this.r_=s,this.connection=i,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=v,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new _7(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===Le.RESOURCE_EXHAUSTED?(dn(r.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.i_===r&&this.V_(n,s)},n=>{e(()=>{const s=new We(Le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(s)})})}V_(e,r){const n=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{n(()=>this.m_(s))}),this.stream.onMessage(s=>{n(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ue(T6,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(Ue(T6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sF extends b7{constructor(e,r,n,s,i,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,u),this.serializer=i}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=lj(this.serializer,e),n=function(i){if(!("targetChange"in i))return ft.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?ft.min():u.readTime?mn(u.readTime):ft.min()}(e);return this.listener.p_(r,n)}y_(e){const r={};r.database=by(this.serializer),r.addTarget=function(i,u){let c;const v=u.target;if(c=$0(v)?{documents:Z9(i,v)}:{query:Q9(i,v).ht},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=q9(i,u.resumeToken);const _=wy(i,u.expectedCount);_!==null&&(c.expectedCount=_)}else if(u.snapshotVersion.compareTo(ft.min())>0){c.readTime=nu(i,u.snapshotVersion.toTimestamp());const _=wy(i,u.expectedCount);_!==null&&(c.expectedCount=_)}return c}(this.serializer,e);const n=fj(this.serializer,e);n&&(r.labels=n),this.I_(r)}w_(e){const r={};r.database=by(this.serializer),r.removeTarget=e,this.I_(r)}}class aF extends b7{constructor(e,r,n,s,i,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,u),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=uj(e.writeResults,e.commitTime),n=mn(e.commitTime);return this.listener.v_(n,r)}C_(){const e={};e.database=by(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>H0(this.serializer,n))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{}class lF extends oF{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new We(Le.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.So(e,_y(r,n),s,i,u)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new We(Le.UNKNOWN,i.toString())})}Co(e,r,n,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,_y(r,n),s,u,c,i)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new We(Le.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class uF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(dn(r),this.N_=!1):Ue("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="RemoteStore";class fF{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(u=>{n.enqueueAndForget(async()=>{Bo(this)&&(Ue(To,"Restarting streams for network reachability change."),await async function(v){const _=bt(v);_.W_.add(4),await ic(_),_.j_.set("Unknown"),_.W_.delete(4),await rm(_)}(this))})}),this.j_=new uF(n,s)}}async function rm(t){if(Bo(t))for(const e of t.G_)await e(!0)}async function ic(t){for(const e of t.G_)await e(!1)}function x7(t,e){const r=bt(t);r.K_.has(e.targetId)||(r.K_.set(e.targetId,e),Cw(r)?Pw(r):Eu(r).c_()&&kw(r,e))}function Rw(t,e){const r=bt(t),n=Eu(r);r.K_.delete(e),n.c_()&&M7(r,e),r.K_.size===0&&(n.c_()?n.P_():Bo(r)&&r.j_.set("Unknown"))}function kw(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Eu(t).y_(e)}function M7(t,e){t.H_.Ne(e),Eu(t).w_(e)}function Pw(t){t.H_=new tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Eu(t).start(),t.j_.B_()}function Cw(t){return Bo(t)&&!Eu(t).u_()&&t.K_.size>0}function Bo(t){return bt(t).W_.size===0}function E7(t){t.H_=void 0}async function hF(t){t.j_.set("Online")}async function cF(t){t.K_.forEach((e,r)=>{kw(t,e)})}async function dF(t,e){E7(t),Cw(t)?(t.j_.q_(e),Pw(t)):t.j_.set("Unknown")}async function pF(t,e,r){if(t.j_.set("Online"),e instanceof $9&&e.state===2&&e.cause)try{await async function(s,i){const u=i.cause;for(const c of i.targetIds)s.K_.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.K_.delete(c),s.H_.removeTarget(c))}(t,e)}catch(n){Ue(To,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Y0(t,n)}else if(e instanceof Hd?t.H_.We(e):e instanceof z9?t.H_.Ze(e):t.H_.je(e),!r.isEqual(ft.min()))try{const n=await y7(t.localStore);r.compareTo(n)>=0&&await function(i,u){const c=i.H_.ot(u);return c.targetChanges.forEach((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const b=i.K_.get(_);b&&i.K_.set(_,b.withResumeToken(v.resumeToken,u))}}),c.targetMismatches.forEach((v,_)=>{const b=i.K_.get(v);if(!b)return;i.K_.set(v,b.withResumeToken(Sr.EMPTY_BYTE_STRING,b.snapshotVersion)),M7(i,v);const x=new ls(b.target,v,_,b.sequenceNumber);kw(i,x)}),i.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){Ue(To,"Failed to raise snapshot:",n),await Y0(t,n)}}async function Y0(t,e,r){if(!Ta(e))throw e;t.W_.add(1),await ic(t),t.j_.set("Offline"),r||(r=()=>y7(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ue(To,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await rm(t)})}function S7(t,e){return e().catch(r=>Y0(t,r,e))}async function sc(t){const e=bt(t),r=wa(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:uo;for(;mF(e);)try{const s=await Qj(e.localStore,n);if(s===null){e.U_.length===0&&r.P_();break}n=s.batchId,vF(e,s)}catch(s){await Y0(e,s)}I7(e)&&T7(e)}function mF(t){return Bo(t)&&t.U_.length<10}function vF(t,e){t.U_.push(e);const r=wa(t);r.c_()&&r.S_&&r.b_(e.mutations)}function I7(t){return Bo(t)&&!wa(t).u_()&&t.U_.length>0}function T7(t){wa(t).start()}async function gF(t){wa(t).C_()}async function yF(t){const e=wa(t);for(const r of t.U_)e.b_(r.mutations)}async function wF(t,e,r){const n=t.U_.shift(),s=yw.from(n,e,r);await S7(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sc(t)}async function _F(t,e){e&&wa(t).S_&&await async function(n,s){if(function(u){return XV(u)&&u!==Le.ABORTED}(s.code)){const i=n.U_.shift();wa(n).h_(),await S7(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await sc(n)}}(t,e),I7(t)&&T7(t)}async function A6(t,e){const r=bt(t);r.asyncQueue.verifyOperationInProgress(),Ue(To,"RemoteStore received new credentials");const n=Bo(r);r.W_.add(3),await ic(r),n&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await rm(r)}async function bF(t,e){const r=bt(t);e?(r.W_.delete(2),await rm(r)):e||(r.W_.add(2),await ic(r),r.j_.set("Unknown"))}function Eu(t){return t.J_||(t.J_=function(r,n,s){const i=bt(r);return i.M_(),new sF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:hF.bind(null,t),No:cF.bind(null,t),Lo:dF.bind(null,t),p_:pF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Cw(t)?Pw(t):t.j_.set("Unknown")):(await t.J_.stop(),E7(t))})),t.J_}function wa(t){return t.Y_||(t.Y_=function(r,n,s){const i=bt(r);return i.M_(),new aF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:gF.bind(null,t),Lo:_F.bind(null,t),D_:yF.bind(null,t),v_:wF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await sc(t)):(await t.Y_.stop(),t.U_.length>0&&(Ue(To,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const u=Date.now()+n,c=new Nw(e,r,u,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dw(t,e){if(dn("AsyncQueue",`${e}: ${t}`),Ta(t))return new We(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ye.comparator(r.key,n.key):(r,n)=>Ye.comparator(r.key,n.key),this.keyedMap=If(),this.sortedSet=new fr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Rl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.Z_=new fr(Ye.comparator)}track(e){const r=e.doc.key,n=this.Z_.get(r);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(r):e.type===1&&n.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):rt():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,n)=>{e.push(n)}),e}}class iu{constructor(e,r,n,s,i,u,c,v,_){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,r,n,s,i){const u=[];return r.forEach(c=>{u.push({type:0,doc:c})}),new iu(e,r,Rl.emptySet(r),u,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class MF{constructor(){this.queries=k6(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,n){const s=bt(r),i=s.queries;s.queries=k6(),i.forEach((u,c)=>{for(const v of c.ta)v.onError(n)})})(this,new We(Le.ABORTED,"Firestore shutting down"))}}function k6(){return new Ts(t=>T9(t),Gp)}async function A7(t,e){const r=bt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.na()&&e.ra()&&(n=2):(i=new xF,n=e.ra()?0:1);try{switch(n){case 0:i.ea=await r.onListen(s,!0);break;case 1:i.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(u){const c=Dw(u,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(c)}r.queries.set(s,i),i.ta.push(e),e.sa(r.onlineState),i.ea&&e.oa(i.ea)&&Ow(r)}async function R7(t,e){const r=bt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const u=i.ta.indexOf(e);u>=0&&(i.ta.splice(u,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function EF(t,e){const r=bt(t);let n=!1;for(const s of e){const i=s.query,u=r.queries.get(i);if(u){for(const c of u.ta)c.oa(s)&&(n=!0);u.ea=s}}n&&Ow(r)}function SF(t,e,r){const n=bt(t),s=n.queries.get(e);if(s)for(const i of s.ta)i.onError(r);n.queries.delete(e)}function Ow(t){t.ia.forEach(e=>{e.next()})}var Ay,P6;(P6=Ay||(Ay={}))._a="default",P6.Cache="cache";class k7{constructor(e,r,n){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new iu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const n=r!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.key=e}}class C7{constructor(e){this.key=e}}class IF{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=At(),this.mutatedKeys=At(),this.ya=A9(e),this.wa=new Rl(this.ya)}get Sa(){return this.fa}ba(e,r){const n=r?r.Da:new R6,s=r?r.wa:this.wa;let i=r?r.mutatedKeys:this.mutatedKeys,u=s,c=!1;const v=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,_=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,x)=>{const S=s.get(b),I=tc(this.query,x)?x:null,A=!!S&&this.mutatedKeys.has(S.key),k=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?A!==k&&(n.track({type:3,doc:I}),F=!0):this.va(S,I)||(n.track({type:2,doc:I}),F=!0,(v&&this.ya(I,v)>0||_&&this.ya(I,_)<0)&&(c=!0)):!S&&I?(n.track({type:0,doc:I}),F=!0):S&&!I&&(n.track({type:1,doc:S}),F=!0,(v||_)&&(c=!0)),F&&(I?(u=u.add(I),i=k?i.add(b):i.delete(b)):(u=u.delete(b),i=i.delete(b)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),i=i.delete(b.key),n.track({type:1,doc:b})}return{wa:u,Da:n,ls:c,mutatedKeys:i}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((b,x)=>function(I,A){const k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return k(I)-k(A)}(b.type,x.type)||this.ya(b.doc,x.doc)),this.Ca(n),s=s!=null&&s;const c=r&&!s?this.Fa():[],v=this.pa.size===0&&this.current&&!s?1:0,_=v!==this.ga;return this.ga=v,u.length!==0||_?{snapshot:new iu(this.query,e.wa,i,u,e.mutatedKeys,v===0,_,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new R6,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=At(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const r=[];return e.forEach(n=>{this.pa.has(n)||r.push(new C7(n))}),this.pa.forEach(n=>{e.has(n)||r.push(new P7(n))}),r}Oa(e){this.fa=e.gs,this.pa=At();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return iu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Bw="SyncEngine";class TF{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class AF{constructor(e){this.key=e,this.Ba=!1}}class RF{constructor(e,r,n,s,i,u){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ts(c=>T9(c),Gp),this.qa=new Map,this.Qa=new Set,this.$a=new fr(Ye.comparator),this.Ua=new Map,this.Ka=new Ew,this.Wa={},this.Ga=new Map,this.za=Io.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function kF(t,e,r=!0){const n=V7(t);let s;const i=n.ka.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await N7(n,e,r,!0),s}async function PF(t,e){const r=V7(t);await N7(r,e,!0,!1)}async function N7(t,e,r,n){const s=await Yj(t.localStore,Jn(e)),i=s.targetId,u=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await CF(t,e,i,u==="current",s.resumeToken)),t.isPrimaryClient&&r&&x7(t.remoteStore,s),c}async function CF(t,e,r,n,s){t.Ha=(x,S,I)=>async function(k,F,C,R){let V=F.view.ba(C);V.ls&&(V=await M6(k.localStore,F.query,!1).then(({documents:j})=>F.view.ba(j,V)));const U=R&&R.targetChanges.get(F.targetId),Q=R&&R.targetMismatches.get(F.targetId)!=null,ee=F.view.applyChanges(V,k.isPrimaryClient,U,Q);return N6(k,F.targetId,ee.Ma),ee.snapshot}(t,x,S,I);const i=await M6(t.localStore,e,!0),u=new IF(e,i.gs),c=u.ba(i.documents),v=nc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),_=u.applyChanges(c,t.isPrimaryClient,v);N6(t,r,_.Ma);const b=new TF(e,r,u);return t.ka.set(e,b),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),_.snapshot}async function NF(t,e,r){const n=bt(t),s=n.ka.get(e),i=n.qa.get(s.targetId);if(i.length>1)return n.qa.set(s.targetId,i.filter(u=>!Gp(u,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Iy(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Rw(n.remoteStore,s.targetId),Ry(n,s.targetId)}).catch(Oo)):(Ry(n,s.targetId),await Iy(n.localStore,s.targetId,!0))}async function DF(t,e){const r=bt(t),n=r.ka.get(e),s=r.qa.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Rw(r.remoteStore,n.targetId))}async function OF(t,e,r){const n=j7(t);try{const s=await function(u,c){const v=bt(u),_=rr.now(),b=c.reduce((I,A)=>I.add(A.key),At());let x,S;return v.persistence.runTransaction("Locally write mutations","readwrite",I=>{let A=Ln(),k=At();return v.ds.getEntries(I,b).next(F=>{A=F,A.forEach((C,R)=>{R.isValidDocument()||(k=k.add(C))})}).next(()=>v.localDocuments.getOverlayedDocuments(I,A)).next(F=>{x=F;const C=[];for(const R of c){const V=YV(R,x.get(R.key).overlayedDocument);V!=null&&C.push(new As(R.key,V,y9(V.value.mapValue),Br.exists(!0)))}return v.mutationQueue.addMutationBatch(I,_,C,c)}).next(F=>{S=F;const C=F.applyToLocalDocumentSet(x,k);return v.documentOverlayCache.saveOverlays(I,F.batchId,C)})}).then(()=>({batchId:S.batchId,changes:k9(x)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(u,c,v){let _=u.Wa[u.currentUser.toKey()];_||(_=new fr(vt)),_=_.insert(c,v),u.Wa[u.currentUser.toKey()]=_}(n,s.batchId,r),await ac(n,s.changes),await sc(n.remoteStore)}catch(s){const i=Dw(s,"Failed to persist write");r.reject(i)}}async function D7(t,e){const r=bt(t);try{const n=await Gj(r.localStore,e);e.targetChanges.forEach((s,i)=>{const u=r.Ua.get(i);u&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?it(u.Ba):s.removedDocuments.size>0&&(it(u.Ba),u.Ba=!1))}),await ac(r,n,e)}catch(n){await Oo(n)}}function C6(t,e,r){const n=bt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.ka.forEach((i,u)=>{const c=u.view.sa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const v=bt(u);v.onlineState=c;let _=!1;v.queries.forEach((b,x)=>{for(const S of x.ta)S.sa(c)&&(_=!0)}),_&&Ow(v)}(n.eventManager,e),s.length&&n.La.p_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function BF(t,e,r){const n=bt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Ua.get(e),i=s&&s.key;if(i){let u=new fr(Ye.comparator);u=u.insert(i,gr.newNoDocument(i,ft.min()));const c=At().add(i),v=new Yp(ft.min(),new Map,new fr(vt),u,c);await D7(n,v),n.$a=n.$a.remove(i),n.Ua.delete(e),Lw(n)}else await Iy(n.localStore,e,!1).then(()=>Ry(n,e,r)).catch(Oo)}async function LF(t,e){const r=bt(t),n=e.batch.batchId;try{const s=await Wj(r.localStore,e);B7(r,n,null),O7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ac(r,s)}catch(s){await Oo(s)}}async function VF(t,e,r){const n=bt(t);try{const s=await function(u,c){const v=bt(u);return v.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return v.mutationQueue.lookupMutationBatch(_,c).next(x=>(it(x!==null),b=x.keys(),v.mutationQueue.removeMutationBatch(_,x))).next(()=>v.mutationQueue.performConsistencyCheck(_)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(_,b,c)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>v.localDocuments.getDocuments(_,b))})}(n.localStore,e);B7(n,e,r),O7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ac(n,s)}catch(s){await Oo(s)}}function O7(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function B7(t,e,r){const n=bt(t);let s=n.Wa[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Wa[n.currentUser.toKey()]=s}}function Ry(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.qa.get(e))t.ka.delete(n),r&&t.La.Ja(n,r);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(n=>{t.Ka.containsKey(n)||L7(t,n)})}function L7(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(Rw(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ua.delete(r),Lw(t))}function N6(t,e,r){for(const n of r)n instanceof P7?(t.Ka.addReference(n.key,e),jF(t,n)):n instanceof C7?(Ue(Bw,"Document no longer in limbo: "+n.key),t.Ka.removeReference(n.key,e),t.Ka.containsKey(n.key)||L7(t,n.key)):rt()}function jF(t,e){const r=e.key,n=r.path.canonicalString();t.$a.get(r)||t.Qa.has(n)||(Ue(Bw,"New document in limbo: "+r),t.Qa.add(n),Lw(t))}function Lw(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new Ye(Wt.fromString(e)),n=t.za.next();t.Ua.set(n,new AF(r)),t.$a=t.$a.insert(r,n),x7(t.remoteStore,new ls(Jn(Wp(r.path)),n,"TargetPurposeLimboResolution",Qn.ae))}}async function ac(t,e,r){const n=bt(t),s=[],i=[],u=[];n.ka.isEmpty()||(n.ka.forEach((c,v)=>{u.push(n.Ha(v,e,r).then(_=>{var b;if((_||r)&&n.isPrimaryClient){const x=_?!_.fromCache:(b=r==null?void 0:r.targetChanges.get(v.targetId))===null||b===void 0?void 0:b.current;n.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(_){s.push(_);const x=Tw.Yi(v.targetId,_);i.push(x)}}))}),await Promise.all(u),n.La.p_(s),await async function(v,_){const b=bt(v);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>de.forEach(_,S=>de.forEach(S.Hi,I=>b.persistence.referenceDelegate.addReference(x,S.targetId,I)).next(()=>de.forEach(S.Ji,I=>b.persistence.referenceDelegate.removeReference(x,S.targetId,I)))))}catch(x){if(!Ta(x))throw x;Ue(Aw,"Failed to update sequence numbers: "+x)}for(const x of _){const S=x.targetId;if(!x.fromCache){const I=b.Ts.get(S),A=I.snapshotVersion,k=I.withLastLimboFreeSnapshotVersion(A);b.Ts=b.Ts.insert(S,k)}}}(n.localStore,i))}async function FF(t,e){const r=bt(t);if(!r.currentUser.isEqual(e)){Ue(Bw,"User change. New user:",e.toKey());const n=await g7(r.localStore,e);r.currentUser=e,function(i,u){i.Ga.forEach(c=>{c.forEach(v=>{v.reject(new We(Le.CANCELLED,u))})}),i.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ac(r,n.Rs)}}function UF(t,e){const r=bt(t),n=r.Ua.get(e);if(n&&n.Ba)return At().add(n.key);{let s=At();const i=r.qa.get(e);if(!i)return s;for(const u of i){const c=r.ka.get(u);s=s.unionWith(c.view.Sa)}return s}}function V7(t){const e=bt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=D7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BF.bind(null,e),e.La.p_=EF.bind(null,e.eventManager),e.La.Ja=SF.bind(null,e.eventManager),e}function j7(t){const e=bt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VF.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return v7(this.persistence,new m7,e.initialUser,this.serializer)}Xa(e){return new Sw(em.ri,this.serializer)}Za(e){return new w7}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class zF extends Bh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){it(this.persistence.referenceDelegate instanceof Q0);const n=this.persistence.referenceDelegate.garbageCollector;return new f7(n,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Sw(n=>Q0.ri(n,r),this.serializer)}}class $F extends Bh{constructor(e,r,n){super(),this.ru=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await j7(this.ru.syncEngine),await sc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return v7(this.persistence,new m7,e.initialUser,this.serializer)}tu(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new f7(n,e.asyncQueue,r)}nu(e,r){const n=new YL(r,this.persistence);return new QL(e.asyncQueue,n)}Xa(e){const r=$j(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Iw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,iF(),Wd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new w7}}class J0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>C6(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FF.bind(null,this.syncEngine),await bF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MF}()}createDatastore(e){const r=tm(e.databaseInfo.databaseId),n=function(i){return new nF(i)}(e.databaseInfo);return function(i,u,c,v){return new lF(i,u,c,v)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,u,c){return new fF(n,s,i,u,c)}(this.localStore,this.datastore,e.asyncQueue,r=>C6(this.syncEngine,r,0),function(){return I6.D()?new I6:new Xj}())}createSyncEngine(e,r){return function(s,i,u,c,v,_,b){const x=new RF(s,i,u,c,v,_);return b&&(x.ja=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=bt(s);Ue(To,"RemoteStore shutting down."),i.W_.add(5),await ic(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}J0.provider={build:()=>new J0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):dn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="FirestoreClient";class qF{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=$r.UNAUTHENTICATED,this.clientId=GS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async u=>{Ue(_a,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(Ue(_a,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Dw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Hv(t,e){t.asyncQueue.verifyOperationInProgress(),Ue(_a,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await g7(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D6(t,e){t.asyncQueue.verifyOperationInProgress();const r=await KF(t);Ue(_a,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>A6(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>A6(e.remoteStore,s)),t._onlineComponents=e}async function KF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue(_a,"Using user provided OfflineComponentProvider");try{await Hv(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Le.FAILED_PRECONDITION||s.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;bo("Error using user provided cache. Falling back to memory cache: "+r),await Hv(t,new Bh)}}else Ue(_a,"Using default OfflineComponentProvider"),await Hv(t,new zF(void 0));return t._offlineComponents}async function U7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue(_a,"Using user provided OnlineComponentProvider"),await D6(t,t._uninitializedComponentsProvider._online)):(Ue(_a,"Using default OnlineComponentProvider"),await D6(t,new J0))),t._onlineComponents}function HF(t){return U7(t).then(e=>e.syncEngine)}async function z7(t){const e=await U7(t),r=e.eventManager;return r.onListen=kF.bind(null,e.syncEngine),r.onUnlisten=NF.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=PF.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=DF.bind(null,e.syncEngine),r}function WF(t,e,r={}){const n=new Fi;return t.asyncQueue.enqueueAndForget(async()=>function(i,u,c,v,_){const b=new F7({next:S=>{b.su(),u.enqueueAndForget(()=>R7(i,x));const I=S.docs.has(c);!I&&S.fromCache?_.reject(new We(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&v&&v.source==="server"?_.reject(new We(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),x=new k7(Wp(c.path),b,{includeMetadataChanges:!0,Ta:!0});return A7(i,x)}(await z7(t),t.asyncQueue,e,r,n)),n.promise}function GF(t,e,r={}){const n=new Fi;return t.asyncQueue.enqueueAndForget(async()=>function(i,u,c,v,_){const b=new F7({next:S=>{b.su(),u.enqueueAndForget(()=>R7(i,x)),S.fromCache&&v.source==="server"?_.reject(new We(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),x=new k7(c,b,{includeMetadataChanges:!0,Ta:!0});return A7(i,x)}(await z7(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(t,e,r){if(!r)throw new We(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZF(t,e,r,n){if(e===!0&&n===!0)throw new We(Le.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function B6(t){if(!Ye.isDocumentKey(t))throw new We(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function L6(t){if(Ye.isDocumentKey(t))throw new We(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":rt()}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=nm(t);throw new We(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="firestore.googleapis.com",V6=!0;class j6{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new We(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K7,this.ssl=V6}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:V6;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ij)throw new We(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$7((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new We(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new We(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new We(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j6({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j6(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new VL;switch(n.type){case"firstParty":return new zL(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new We(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=O6.get(r);n&&(Ue("ComponentProvider","Removing Datastore"),O6.delete(r),n.terminate())}(this),Promise.resolve()}}function QF(t,e,r,n={}){var s;const i=(t=bi(t,im))._getSettings(),u=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;i.host!==K7&&i.host!==c&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},i),{host:c,ssl:!1,emulatorOptions:n});if(!N0(v,u)&&(t._setSettings(v),n.mockUserToken)){let _,b;if(typeof n.mockUserToken=="string")_=n.mockUserToken,b=$r.MOCK_USER;else{_=yB(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=n.mockUserToken.sub||n.mockUserToken.user_id;if(!x)throw new We(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $r(x)}t._authCredentials=new jL(new HS(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class An{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class da extends Lo{constructor(e,r,n){super(e,r,Wp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Ye(e))}withConverter(e){return new da(this.firestore,e,this._path)}}function Rs(t,e,...r){if(t=qi(t),q7("collection","path",e),t instanceof im){const n=Wt.fromString(e,...r);return L6(n),new da(t,null,n)}{if(!(t instanceof An||t instanceof da))throw new We(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Wt.fromString(e,...r));return L6(n),new da(t.firestore,null,n)}}function sm(t,e,...r){if(t=qi(t),arguments.length===1&&(e=GS.newId()),q7("doc","path",e),t instanceof im){const n=Wt.fromString(e,...r);return B6(n),new An(t,null,new Ye(n))}{if(!(t instanceof An||t instanceof da))throw new We(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Wt.fromString(e,...r));return B6(n),new An(t.firestore,t instanceof da?t.converter:null,new Ye(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="AsyncQueue";class U6{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new _7(this,"async_queue_retry"),this.Su=()=>{const n=Wd();n&&Ue(F6,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const r=Wd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=Wd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new Fi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ta(e))throw e;Ue(F6,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const s=function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(n);throw dn("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.pu=!1,n))));return this.bu=r,r}enqueueAfterDelay(e,r,n){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=Nw.createAndSchedule(this,e,r,n,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&rt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class Ra extends im{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new U6,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U6(e),this._firestoreClient=void 0,await e}}}function YF(t,e){const r=typeof t=="object"?t:SL(),n=typeof t=="string"?t:z0,s=_L(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=vB("firestore");i&&QF(s,...i)}return s}function am(t){if(t._terminated)throw new We(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||H7(t),t._firestoreClient}function H7(t){var e,r,n;const s=t._freezeSettings(),i=function(c,v,_,b){return new IV(c,v,_,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,$7(b.experimentalLongPollingOptions),b.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new qF(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const v=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(v),_online:v}}(t._componentsProvider))}function JF(t,e){bo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return XF(t,J0.provider,{build:n=>new $F(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function XF(t,e,r){if((t=bi(t,Ra))._firestoreClient||t._terminated)throw new We(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new We(Le.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},H7(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Sr.fromBase64String(e))}catch(r){throw new We(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new su(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new We(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new We(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new We(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=/^__.*__$/;class tU{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mu(e,this.data,r,this.fieldTransforms)}}class W7{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new As(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function G7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class Fw{constructor(e,r,n,s,i,u){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Fw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Uu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return X0(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(G7(this.Lu)&&eU.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class rU{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||tm(e)}ju(e,r,n,s=!1){return new Fw({Lu:e,methodName:r,zu:n,path:cr.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lm(t){const e=t._freezeSettings(),r=tm(t._databaseId);return new rU(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Uw(t,e,r,n,s,i={}){const u=t.ju(i.merge||i.mergeFields?2:0,e,r,s);qw("Data must be an object, but it was:",u,n);const c=Z7(n,u);let v,_;if(i.merge)v=new En(u.fieldMask),_=u.fieldTransforms;else if(i.mergeFields){const b=[];for(const x of i.mergeFields){const S=ky(e,x,r);if(!u.contains(S))throw new We(Le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Y7(b,S)||b.push(S)}v=new En(b),_=u.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,_=u.fieldTransforms;return new tU(new an(c),v,_)}class um extends oc{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}class zw extends oc{_toFieldTransform(e){return new vw(e.path,new Xl)}isEqual(e){return e instanceof zw}}class $w extends oc{constructor(e,r){super(e),this.Ju=r}_toFieldTransform(e){const r=new ru(e.serializer,N9(e.serializer,this.Ju));return new vw(e.path,r)}isEqual(e){return e instanceof $w&&this.Ju===e.Ju}}function nU(t,e,r,n){const s=t.ju(1,e,r);qw("Data must be an object, but it was:",s,n);const i=[],u=an.empty();Aa(n,(v,_)=>{const b=Kw(e,v,r);_=qi(_);const x=s.Uu(b);if(_ instanceof um)i.push(b);else{const S=lc(_,x);S!=null&&(i.push(b),u.set(b,S))}});const c=new En(i);return new W7(u,c,s.fieldTransforms)}function iU(t,e,r,n,s,i){const u=t.ju(1,e,r),c=[ky(e,n,r)],v=[s];if(i.length%2!=0)throw new We(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<i.length;S+=2)c.push(ky(e,i[S])),v.push(i[S+1]);const _=[],b=an.empty();for(let S=c.length-1;S>=0;--S)if(!Y7(_,c[S])){const I=c[S];let A=v[S];A=qi(A);const k=u.Uu(I);if(A instanceof um)_.push(I);else{const F=lc(A,k);F!=null&&(_.push(I),b.set(I,F))}}const x=new En(_);return new W7(b,x,u.fieldTransforms)}function sU(t,e,r,n=!1){return lc(r,t.ju(n?4:3,e))}function lc(t,e){if(Q7(t=qi(t)))return qw("Unsupported field value:",e,t),Z7(t,e);if(t instanceof oc)return function(n,s){if(!G7(s.Lu))throw s.Wu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,s){const i=[];let u=0;for(const c of n){let v=lc(c,s.Ku(u));v==null&&(v={nullValue:"NULL_VALUE"}),i.push(v),u++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=qi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return N9(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=rr.fromDate(n);return{timestampValue:nu(s.serializer,i)}}if(n instanceof rr){const i=new rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nu(s.serializer,i)}}if(n instanceof Vw)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof su)return{bytesValue:q9(s.serializer,n._byteString)};if(n instanceof An){const i=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(i))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof jw)return function(u,c){return{mapValue:{fields:{[cw]:{stringValue:dw},[Zl]:{arrayValue:{values:u.toArray().map(_=>{if(typeof _!="number")throw c.Wu("VectorValues must only contain numeric values.");return mw(c.serializer,_)})}}}}}}(n,s);throw s.Wu(`Unsupported field value: ${nm(n)}`)}(t,e)}function Z7(t,e){const r={};return u9(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(t,(n,s)=>{const i=lc(s,e.qu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function Q7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rr||t instanceof Vw||t instanceof su||t instanceof An||t instanceof oc||t instanceof jw)}function qw(t,e,r){if(!Q7(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=nm(r);throw n==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+n)}}function ky(t,e,r){if((e=qi(e))instanceof om)return e._internalPath;if(typeof e=="string")return Kw(t,e);throw X0("Field path arguments must be of type string or ",t,!1,void 0,r)}const aU=new RegExp("[~\\*/\\[\\]]");function Kw(t,e,r){if(e.search(aU)>=0)throw X0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new om(...e.split("."))._internalPath}catch{throw X0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function X0(t,e,r,n,s){const i=n&&!n.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let v="";return(i||u)&&(v+=" (found",i&&(v+=` in field ${n}`),u&&(v+=` in document ${s}`),v+=")"),new We(Le.INVALID_ARGUMENT,c+t+v)}function Y7(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class oU extends J7{data(){return super.data()}}function fm(t,e){return typeof e=="string"?Kw(t,e):e instanceof om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hw{}class X7 extends Hw{}function Su(t,e,...r){let n=[];e instanceof Hw&&n.push(e),n=n.concat(r),function(i){const u=i.filter(v=>v instanceof Gw).length,c=i.filter(v=>v instanceof hm).length;if(u>1||u>0&&c>0)throw new We(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class hm extends X7{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new hm(e,r,n)}_apply(e){const r=this._parse(e);return eI(e._query,r),new Lo(e.firestore,e.converter,gy(e._query,r))}_parse(e){const r=lm(e.firestore);return function(i,u,c,v,_,b,x){let S;if(_.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new We(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){$6(x,b);const A=[];for(const k of x)A.push(z6(v,i,k));S={arrayValue:{values:A}}}else S=z6(v,i,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||$6(x,b),S=sU(c,u,x,b==="in"||b==="not-in");return Ft.create(_,b,S)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ww(t,e,r){const n=e,s=fm("where",t);return hm._create(s,n,r)}class Gw extends Hw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Gw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Zt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let u=s;const c=i.getFlattenedFilters();for(const v of c)eI(u,v),u=gy(u,v)}(e._query,r),new Lo(e.firestore,e.converter,gy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zw extends X7{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Zw(e,r)}_apply(e){const r=function(s,i,u){if(s.startAt!==null)throw new We(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new We(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oh(i,u)}(e._query,this._field,this._direction);return new Lo(e.firestore,e.converter,function(s,i){const u=s.explicitOrderBy.concat([i]);return new xu(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function cm(t,e="asc"){const r=e,n=fm("orderBy",t);return Zw._create(n,r)}function z6(t,e,r){if(typeof(r=qi(r))=="string"){if(r==="")throw new We(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I9(e)&&r.indexOf("/")!==-1)throw new We(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Wt.fromString(r));if(!Ye.isDocumentKey(n))throw new We(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Nh(t,new Ye(n))}if(r instanceof An)return Nh(t,r._key);throw new We(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(r)}.`)}function $6(t,e){if(!Array.isArray(t)||t.length===0)throw new We(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eI(t,e){const r=function(s,i){for(const u of s)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new We(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class uU{convertValue(e,r="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw rt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Aa(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[Zl].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(u=>lr(u.doubleValue));return new jw(i)}convertGeoPoint(e){return new Vw(lr(e.latitude),lr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Kp(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ph(e));default:return null}}convertTimestamp(e){const r=ws(e);return new rr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Wt.fromString(e);it(e7(n));const s=new xo(n.get(1),n.get(3)),i=new Ye(n.popFirst(5));return s.isEqual(r)||dn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tI extends J7{constructor(e,r,n,s,i,u){super(e,r,n,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Gd extends tI{data(e={}){return super.data(e)}}class fU{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Rf(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Gd(this._firestore,this._userDataWriter,n.key,n,new Rf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new We(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const v=new Gd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:v,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const v=new Gd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rf(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let _=-1,b=-1;return c.type!==0&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:hU(c.type),doc:v,oldIndex:_,newIndex:b}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function hU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){t=bi(t,An);const e=bi(t.firestore,Ra);return WF(am(e),t._key).then(r=>pU(e,t,r))}class rI extends uU{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,r)}}function Vo(t){t=bi(t,Lo);const e=bi(t.firestore,Ra),r=am(e),n=new rI(e);return lU(t._query),GF(r,t._query).then(s=>new fU(e,n,t,s))}function nI(t,e,r){t=bi(t,An);const n=bi(t.firestore,Ra),s=Qw(t.converter,e,r);return dm(n,[Uw(lm(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Br.none())])}function dU(t){return dm(bi(t.firestore,Ra),[new rc(t._key,Br.none())])}function iI(t,e){const r=bi(t.firestore,Ra),n=sm(t),s=Qw(t.converter,e);return dm(r,[Uw(lm(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Br.exists(!1))]).then(()=>n)}function dm(t,e){return function(n,s){const i=new Fi;return n.asyncQueue.enqueueAndForget(async()=>OF(await HF(n),s,i)),i.promise}(am(t),e)}function pU(t,e,r){const n=r.docs.get(e._key),s=new rI(t);return new tI(t,s,e._key,n,new Rf(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=lm(e)}set(e,r,n){this._verifyNotCommitted();const s=Wv(e,this._firestore),i=Qw(s.converter,r,n),u=Uw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(u.toMutation(s._key,Br.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Wv(e,this._firestore);let u;return u=typeof(r=qi(r))=="string"||r instanceof om?iU(this._dataReader,"WriteBatch.update",i._key,r,n,s):nU(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(u.toMutation(i._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Wv(e,this._firestore);return this._mutations=this._mutations.concat(new rc(r._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wv(t,e){if((t=qi(t)).firestore!==e)throw new We(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Yw(){return new zw("serverTimestamp")}function vU(t){return new $w("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){return am(t=bi(t,Ra)),new mU(t,e=>dm(t,e))}(function(e,r=!0){(function(s){bu=s})(EL),O0(new Mh("firestore",(n,{instanceIdentifier:s,options:i})=>{const u=n.getProvider("app").getImmediate(),c=new Ra(new FL(n.getProvider("auth-internal")),new $L(u,n.getProvider("app-check-internal")),function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new We(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(_.options.projectId,b)}(u,s),u);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Al(E3,S3,e),Al(E3,S3,"esm2017")})();const yU={apiKey:"AIzaSyB2HX447XAztbxY7VtOFA6GVJ4_m-C3aT8",authDomain:"tradeay.firebaseapp.com",projectId:"tradeay",storageBucket:"tradeay.firebasestorage.app",messagingSenderId:"479482587116",appId:"1:479482587116:web:eb49d90be8ffbdc28102c9",measurementId:"G-C7YG0QK2PG"},wU=LS(yU),Rn=YF(wU);JF(Rn).catch(t=>{t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence enabled in first tab only"):t.code==="unimplemented"&&console.warn("Browser doesn't support persistence")});Vo(Rs(Rn,"payment_logs")).then(()=>console.log(" Firestore connected")).catch(t=>console.error(" Firestore connection error:",t));async function Jf(t,e,r,n){try{const s={message:t,timestamp:Yw(),createdAt:new Date().toISOString()};e&&(s.userId=e),n&&(n.payment_id&&(s.payment_id=n.payment_id),n.payment_status&&(s.payment_status=n.payment_status),n.order_id&&(s.order_id=n.order_id),n.price_amount&&(s.price_amount=n.price_amount),n.price_currency&&(s.price_currency=n.price_currency),n.pay_address&&(s.pay_address=n.pay_address),s.paymentData=n);const i=await iI(Rs(Rn,"payment_logs"),s);return console.log("Payment log added with ID:",i.id),i.id}catch(s){throw console.error("Error adding payment log:",s),s}}async function _U(){const t=[];try{const e=Su(Rs(Rn,"payment_logs"),cm("timestamp","desc"));return(await Vo(e)).forEach(n=>{var c,v;const s=n.data();let u=`${(((v=(c=s.timestamp)==null?void 0:c.toDate)==null?void 0:v.call(c))||new Date(s.createdAt)).toLocaleString()}: ${s.message}`;s.payment_id&&(u+=` | ID: ${s.payment_id}`),s.payment_status&&(u+=` | Status: ${s.payment_status}`),s.price_amount&&s.price_currency&&(u+=` | Amount: ${s.price_amount} ${s.price_currency}`),s.userId&&(u+=` | User: ${s.userId}`),t.push(u)}),t}catch(e){return console.error("Error getting payment logs:",e),[`Error loading payment logs: ${e instanceof Error?e.message:"Unknown error"}`]}}async function bU(){try{const t=[],e=Su(Rs(Rn,"payment_logs"),cm("timestamp","desc"));return(await Vo(e)).forEach(n=>{const s=n.data();s.payment_id&&t.push({id:n.id,...s})}),t}catch(t){return console.error("Error getting payment data:",t),[]}}function Jw(t=new Date){const n=(t.getTimezoneOffset()- -240)*60*1e3;return new Date(t.getTime()-n)}async function xU(t,e){const r=Jw();r.setHours(0,0,0,0);const n=`${t}_${r.toISOString().split("T")[0]}`;try{return await nI(sm(Rn,"api_key_usage",n),{keyId:t,keyName:e,usageCount:vU(1),lastUsed:Yw(),date:rr.fromDate(r)},{merge:!0}),!0}catch(s){return console.error("Error tracking API key usage:",s),!1}}async function MU(){try{const t=Jw();t.setHours(0,0,0,0);const e=Su(Rs(Rn,"api_key_usage"),Ww("date",">=",rr.fromDate(t)),cm("date","desc")),r=await Vo(e),n={};return r.forEach(s=>{const i=s.data();n[i.keyId]={used:i.usageCount||0,name:i.keyName}}),n}catch(t){return console.error("Error getting API key usage stats:",t),{}}}async function EU(){try{const t=Jw(),e=new Date(t);e.setDate(e.getDate()-1),e.setHours(23,59,59,999);const r=Su(Rs(Rn,"api_key_usage"),Ww("date","<=",rr.fromDate(e))),n=await Vo(r),s=gU(Rn);return n.forEach(i=>{s.delete(i.ref)}),await s.commit(),console.log("Successfully cleaned up old API key usage data"),!0}catch(t){return console.error("Error cleaning up API key usage:",t),!1}}async function SU(t){try{const e=await iI(Rs(Rn,"support_messages"),{...t,timestamp:Yw(),createdAt:new Date().toISOString(),status:"pending"});return console.log("Support message added with ID:",e.id),e.id}catch(e){throw console.error("Error adding support message:",e),e}}async function IU(){try{const t=Su(Rs(Rn,"support_messages"),cm("timestamp","desc"));return(await Vo(t)).docs.map(r=>{const n=r.data();return{id:r.id,userId:n.userId,userEmail:n.email,description:n.description,createdAt:n.createdAt,status:n.status||"pending",replies:n.replies||[]}})}catch(t){throw console.error("Error getting support messages:",t),t}}async function TU(t){try{await dU(sm(Rn,"support_messages",t)),console.log("Support message deleted:",t)}catch(e){throw console.error("Error deleting support message:",e),e}}async function AU(t){try{const e=Su(Rs(Rn,"support_messages"),Ww("userId","==",t)),r=await Vo(e),n=[];return r.forEach(s=>{const i=s.data();i.replies&&i.replies.length>0&&i.replies.filter(c=>c.isAdmin&&!c.read).forEach(c=>{n.push({messageId:s.id,reply:c})})}),n}catch(e){throw console.error("Error getting notifications:",e),e}}async function RU(t,e){var r;try{const n=sm(Rn,"support_messages",t),i=(r=(await cU(n)).data().replies)==null?void 0:r.map(u=>u.id===e?{...u,read:!0}:u);await nI(n,{replies:i},{merge:!0})}catch(n){throw console.error("Error marking notification as read:",n),n}}const kU=()=>{const{user:t}=Qi(),e=te.useRef(null),[r,n]=te.useState([]),[s,i]=te.useState(!1);te.useEffect(()=>{if(!t)return;const c=async()=>{try{const _=await AU(t.id),x=(await os(t)).supportMessages||[],S=_.map(I=>{var A;return{messageId:I.messageId,originalMessage:((A=x.find(k=>k.messageId===I.messageId))==null?void 0:A.originalMessage)||"Message not found",reply:I.reply}});n(S)}catch(_){console.error("Failed to load notifications:",_)}};c();const v=setInterval(c,6e4);return()=>clearInterval(v)},[t]),te.useEffect(()=>{const c=v=>{e.current&&!e.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const u=async(c,v,_)=>{var b;if(t)try{await RU(c,v);const x=(b=r.find(S=>S.messageId===c))==null?void 0:b.reply;x&&await TO(t,c,_,x),n(S=>S.filter(I=>I.reply.id!==v))}catch(x){console.error("Failed to mark notification as read:",x)}};return N.jsxs("div",{ref:e,className:"relative",children:[N.jsxs("button",{onClick:()=>i(!s),className:`relative p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 \r
          rounded-lg transition-all duration-300`,children:[N.jsx(f3,{className:"w-5 h-5"}),r.length>0&&N.jsx("span",{className:`absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full text-[10px] \r
            flex items-center justify-center text-white font-medium\r
            animate-[pulse_2s_infinite]`,children:r.length})]}),s&&N.jsx("div",{className:`absolute right-0 mt-2 w-80 max-h-[480px] overflow-y-auto\r
          bg-gray-800/95 backdrop-blur-md rounded-lg border border-gray-700/50 shadow-xl\r
          animate-[fadeIn_0.2s_ease-out,slideDown_0.2s_ease-out]`,children:r.length>0?N.jsx("div",{className:"p-4 space-y-3",children:r.map(({messageId:c,reply:v,originalMessage:_})=>N.jsxs("div",{className:`p-3 bg-gray-700/30 rounded-lg \r
                    animate-[slideUp_0.2s_ease-out,fadeIn_0.2s_ease-out]`,children:[N.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Re: ",_]}),N.jsx("p",{className:"text-sm text-gray-300",children:v.message}),N.jsxs("div",{className:"flex items-center justify-between mt-2",children:[N.jsx("span",{className:"text-xs text-gray-400",children:new Date(v.createdAt).toLocaleString()}),N.jsx("button",{onClick:()=>u(c,v.id,_),className:"text-xs text-blue-400 hover:text-blue-300",children:"Resolve Conversation"})]})]},v.id))}):N.jsxs("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[N.jsxs("div",{className:"relative mb-4",children:[N.jsxs("div",{className:"relative",children:[N.jsx(f3,{className:"w-12 h-12 text-gray-600"}),N.jsx("div",{className:"absolute inset-0 animate-ping bg-gray-600/20 rounded-full"})]}),N.jsx("div",{className:"absolute -inset-4 animate-[spin_3s_linear_infinite] opacity-0",children:N.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-r from-gray-600/0 via-gray-600/10 to-gray-600/0"})})]}),N.jsx("p",{className:"text-gray-400 font-medium mb-1",children:"No new messages"}),N.jsx("p",{className:"text-sm text-gray-500",children:"Admin replies will appear here"})]})})]})};function PU(){return N.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-800/40 backdrop-blur-md border-b border-gray-700/50",children:N.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:N.jsxs("div",{className:"flex justify-between items-center h-16",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsxs(zf,{to:"/",className:"flex items-center gap-2 group",children:[N.jsx(k0,{className:`w-6 h-6 text-[#00ff9d] transition-all duration-300 \r
                group-hover:scale-110 group-hover:rotate-12 \r
                drop-shadow-[0_0_8px_rgba(0,255,157,0.5)]`}),N.jsxs("span",{className:"text-xl font-bold",children:[N.jsx("span",{className:"bg-gradient-to-r from-[#ffffff] via-[#00ff9d]/90 to-[#00ff9d] bg-clip-text text-transparent",children:"TradeA"}),N.jsx("span",{className:"inline-block bg-gradient-to-r from-[#00ff9d] to-[#00bf76] bg-clip-text text-transparent",children:"+"})]})]}),N.jsx(G1,{children:N.jsx(sB,{})})]}),N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsxs(G1,{children:[N.jsx(nB,{}),N.jsx(rB,{}),N.jsx(kU,{}),N.jsx(O8,{afterSignOutUrl:"/sign-in",appearance:{elements:{avatarBox:"w-8 h-8 rounded-lg",userButtonPopoverCard:"bg-gray-800/95 backdrop-blur-sm border border-gray-700/50",userButtonPopoverActionButton:"hover:bg-gray-700/50",userButtonPopoverActionButtonText:"text-gray-300 hover:text-white",userButtonPopoverFooter:"hidden"}}})]}),N.jsx(b8,{children:N.jsx(L8,{mode:"modal",children:N.jsx("button",{className:"px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:"Sign In"})})})]})]})})})}const CU=()=>{const{user:t}=Qi(),[e,r]=te.useState(!1),[n,s]=te.useState(0),[i,u]=te.useState({description:""}),[c,v]=te.useState(!1),[_,b]=te.useState(null),x=te.useRef(null);te.useEffect(()=>{const A=k=>{x.current&&!x.current.contains(k.target)&&S()};return e&&document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[e]);const S=()=>{r(!1),setTimeout(()=>{s(0),u({description:""}),b(null)},300)},I=async()=>{var A;if(!(!i.description||!t)){v(!0),b(null);try{await SU({userId:t.id,email:((A=t.primaryEmailAddress)==null?void 0:A.emailAddress)||"",description:i.description}),s(1)}catch(k){console.error("Failed to submit:",k),b("Failed to send message. Please try again.")}finally{v(!1)}}};return N.jsxs(N.Fragment,{children:[N.jsx("button",{onClick:()=>r(!0),className:`fixed bottom-6 right-6 p-4 rounded-full\r
          bg-gray-800/90 hover:bg-gray-700/90\r
          border border-gray-600/50 hover:border-[#00ff9d]/30\r
          shadow-lg hover:shadow-xl transition-all duration-300\r
          hover:shadow-[#00ff9d]/10 z-50`,children:N.jsx(GO,{className:"w-6 h-6 text-[#00ff9d]"})}),e&&N.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-50\r
          animate-[fadeIn_0.2s_ease-out]`,children:N.jsx("div",{ref:x,className:`section-container fixed bottom-[100px] right-6 \r
              w-full max-w-md animate-[slideUp_0.3s_ease-out] mx-4`,children:N.jsxs("div",{className:`bg-gray-800/95 backdrop-blur-md rounded-xl p-6\r
              border border-gray-700/50 shadow-xl mx-4`,children:[N.jsx("button",{onClick:S,className:`absolute top-4 right-4 p-2 text-gray-400 \r
                  hover:text-white transition-colors`,children:N.jsx(IS,{className:"w-5 h-5"})}),N.jsx("div",{className:"space-y-4",children:n===0?N.jsxs(N.Fragment,{children:[N.jsx("h3",{className:"text-xl font-semibold text-white",children:"How can we help?"}),N.jsx("p",{className:"text-gray-300 text-sm",children:"Describe your issue and we'll get back to you shortly."}),N.jsx("textarea",{value:i.description,onChange:A=>u({description:A.target.value}),placeholder:"Type your message here...",className:`w-full h-32 bg-gray-700/50 border border-gray-600/50\r
                        rounded-lg p-3 text-white placeholder-gray-400 resize-none\r
                        focus:outline-none focus:border-blue-500/50 focus:ring-1 \r
                        focus:ring-blue-500/50 transition-all neon-input`}),_&&N.jsx("p",{className:"text-red-400 text-sm",children:_}),N.jsx("button",{onClick:I,disabled:c||!i.description,className:`w-full py-3 bg-blue-500 hover:bg-blue-600 \r
                        disabled:bg-gray-600 disabled:cursor-not-allowed\r
                        rounded-lg text-white font-medium transition-colors\r
                        flex items-center justify-center gap-2`,children:c?N.jsx("div",{className:`w-5 h-5 border-2 border-white/30 \r
                          border-t-white rounded-full animate-spin`}):N.jsxs(N.Fragment,{children:[N.jsx(YO,{className:"w-4 h-4"}),"Send Message"]})})]}):N.jsxs("div",{className:"py-8 text-center space-y-3",children:[N.jsx("div",{className:`w-12 h-12 rounded-full bg-green-500/20 \r
                      text-green-400 flex items-center justify-center mx-auto mb-4`,children:N.jsx(KO,{className:"w-6 h-6"})}),N.jsx("h3",{className:"text-xl font-semibold text-white",children:"Message Sent!"}),N.jsx("p",{className:"text-gray-300 text-sm",children:"We'll get back to you as soon as possible."})]})})]})})})]})},NU=()=>{const[t,e]=te.useState({x:0,y:0}),[r,n]=te.useState(!1);return te.useEffect(()=>{const s=i=>{e({x:i.clientX,y:i.clientY});const c=i.target.closest("button, a, input, textarea, .section-container, .glass-panel, .interactive-element")!==null;n(c)};return window.addEventListener("mousemove",s),()=>window.removeEventListener("mousemove",s)},[]),N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"cursor-dot",style:{left:`${t.x}px`,top:`${t.y}px`}}),N.jsx("div",{className:`cursor-aura ${r?"cursor-aura-hidden":""}`,style:{left:`${t.x}px`,top:`${t.y}px`}})]})},DU=()=>{const t=te.useRef(null),e=te.useRef([]),r=te.useRef({x:0,y:0}),n=te.useRef();return te.useEffect(()=>{const s=t.current;if(!s)return;const i=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight,e.current=Array.from({length:10},()=>{const _=Math.random()*Math.PI*2,b=1+Math.random()*.5;return{x:Math.random()*s.width,y:Math.random()*s.height,size:20+Math.random()*40,vx:Math.cos(_)*b,vy:Math.sin(_)*b,opacity:.05+Math.random()*.1,strokeOpacity:.2+Math.random()*.3,speed:b}});const u=()=>{i.clearRect(0,0,s.width,s.height),e.current.forEach(_=>{const b=r.current.x-_.x,x=r.current.y-_.y,S=Math.sqrt(b*b+x*x);_.x+=_.vx,_.y+=_.vy,(_.x-_.size<0||_.x+_.size>s.width)&&(_.vx=-_.vx,_.x-_.size<0&&(_.x=_.size),_.x+_.size>s.width&&(_.x=s.width-_.size)),(_.y-_.size<0||_.y+_.size>s.height)&&(_.vy=-_.vy,_.y-_.size<0&&(_.y=_.size),_.y+_.size>s.height&&(_.y=s.height-_.size));const I=Math.sqrt(_.vx*_.vx+_.vy*_.vy);if(_.vx=_.vx/I*_.speed,_.vy=_.vy/I*_.speed,S<100){const k=Math.atan2(x,b),F=(100-S)*.01;_.vx-=Math.cos(k)*F,_.vy-=Math.sin(k)*F;const C=Math.sqrt(_.vx*_.vx+_.vy*_.vy);_.vx=_.vx/C*_.speed,_.vy=_.vy/C*_.speed}i.beginPath();const A=i.createRadialGradient(_.x,_.y,0,_.x,_.y,_.size);A.addColorStop(0,`rgba(0, 255, 157, ${_.opacity})`),A.addColorStop(1,"rgba(0, 255, 157, 0)"),i.fillStyle=A,i.strokeStyle=`rgba(0, 255, 157, ${_.strokeOpacity})`,i.lineWidth=1,i.arc(_.x,_.y,_.size,0,Math.PI*2),i.fill(),i.stroke()}),n.current=requestAnimationFrame(u)},c=_=>{r.current={x:_.clientX,y:_.clientY}},v=()=>{s.width=window.innerWidth,s.height=window.innerHeight};return window.addEventListener("mousemove",c),window.addEventListener("resize",v),n.current=requestAnimationFrame(u),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("resize",v),n.current&&cancelAnimationFrame(n.current)}},[]),N.jsx("canvas",{ref:t,className:"fixed inset-0 pointer-events-none z-0"})},OU=()=>{const t=te.useRef(null),e=te.useRef(0);return te.useEffect(()=>{const r=t.current;if(!r)return;const n=r.getContext("2d");let s;const i=()=>{const{devicePixelRatio:c=1}=window;r.width=window.innerWidth*c,r.height=window.innerHeight*c,n.scale(c,c)},u=c=>{if(!r)return;const v=window.innerWidth,_=window.innerHeight;n.clearRect(0,0,v,_);const b=50,x=.5,S=(c-e.current)/5e3;e.current=c,n.beginPath(),n.strokeStyle="rgba(0, 255, 157, 0.1)",n.lineWidth=x;for(let I=0;I<=v;I+=b){const A=Math.sin(I/200+S)*2;n.moveTo(I+A,0),n.lineTo(I+A,_)}for(let I=0;I<=_;I+=b){const A=Math.cos(I/200+S)*2;n.moveTo(0,I+A),n.lineTo(v,I+A)}n.stroke(),n.shadowBlur=5,n.shadowColor="rgba(0, 255, 157, 0.2)";for(let I=0;I<=v;I+=b)for(let A=0;A<=_;A+=b){const k=Math.sin(I/200+S)*2,F=Math.cos(A/200+S)*2;n.beginPath(),n.fillStyle="rgba(0, 255, 157, 0.15)",n.arc(I+k,A+F,1,0,Math.PI*2),n.fill()}s=requestAnimationFrame(u)};return window.addEventListener("resize",i),i(),s=requestAnimationFrame(u),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(s)}},[]),N.jsx("canvas",{ref:t,className:"fixed inset-0 pointer-events-none z-0 bg-transparent",style:{width:"100vw",height:"100vh"}})},BU=()=>{const t=te.useRef(null),e=te.useRef(),r=te.useRef(0);return te.useEffect(()=>{const n=t.current;if(!n)return;const s=n.getContext("2d"),i=()=>{const{innerWidth:c,innerHeight:v,devicePixelRatio:_=1}=window;n.style.width=`${c}px`,n.style.height=`${v}px`,n.width=Math.floor(c*_),n.height=Math.floor(v*_),s.scale(_,_)},u=c=>{s.clearRect(0,0,n.width,n.height);const v=window.innerWidth,_=window.innerHeight,b=c*1e-4%1;r.current=b,s.strokeStyle="rgba(0, 255, 157, 0.6)",s.lineWidth=3,s.shadowColor="rgba(0, 255, 157, 0.8)",s.shadowBlur=25,s.strokeRect(0,0,v,_);const x=2*(v+_),S=b*x,I=250;s.strokeStyle="rgba(0, 255, 157, 1)",s.shadowColor="rgba(0, 255, 157, 1)",s.shadowBlur=30,s.lineWidth=4,s.lineCap="round",s.beginPath();let A,k;if(S<v)A={x:S,y:0},k={x:Math.min(S+I,v),y:0};else if(S<v+_){const C=S-v;A={x:v,y:C},k={x:v,y:Math.min(C+I,_)}}else if(S<2*v+_){const C=S-(v+_);A={x:v-C,y:_},k={x:Math.max(v-(C+I),0),y:_}}else{const C=S-(2*v+_);A={x:0,y:_-C},k={x:0,y:Math.max(_-(C+I),0)}}const F=s.createLinearGradient(A.x,A.y,k.x,k.y);F.addColorStop(0,"rgba(0, 255, 157, 0)"),F.addColorStop(.5,"rgba(0, 255, 157, 1)"),F.addColorStop(1,"rgba(0, 255, 157, 0)"),s.strokeStyle=F,s.moveTo(A.x,A.y),s.lineTo(k.x,k.y),s.stroke(),e.current=requestAnimationFrame(u)};return i(),window.addEventListener("resize",i),e.current=requestAnimationFrame(u),()=>{window.removeEventListener("resize",i),e.current&&cancelAnimationFrame(e.current)}},[]),N.jsx("canvas",{ref:t,className:"fixed inset-0 pointer-events-none",style:{zIndex:1,width:"100vw",height:"100vh"}})};function LU(){const{pathname:t}=Do(),e=t==="/";return N.jsxs("div",{className:"min-h-screen relative bg-gray-900",children:[N.jsx(OU,{}),N.jsx(BU,{}),N.jsx(DU,{}),N.jsx(NU,{}),e?N.jsx(D1,{}):N.jsxs(N.Fragment,{children:[N.jsxs(G1,{children:[N.jsx(PU,{}),N.jsxs("div",{className:"relative",children:[N.jsx(D1,{}),N.jsx(CU,{})]})]}),N.jsx(b8,{children:N.jsx("div",{className:"flex items-center justify-center min-h-screen",children:N.jsx(P8,{redirectUrl:t})})})]})]})}const VU=()=>{const t=kp(),{isSignedIn:e}=_8(),r=()=>{e&&t("/app")};return N.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:N.jsx("div",{className:"container mx-auto px-4 min-h-screen flex items-center justify-center",children:N.jsxs("div",{className:"text-center w-full max-w-5xl mx-auto py-16",children:[N.jsxs("h1",{className:"text-7xl font-bold mb-8",children:[N.jsx("span",{className:"bg-gradient-to-r from-[#ffffff] via-[#00ff9d]/90 to-[#00ff9d] bg-clip-text text-transparent",children:"TradeA"}),N.jsx("span",{className:"inline-block bg-gradient-to-r from-[#00ff9d] to-[#00bf76] bg-clip-text text-transparent",children:"+"})]}),N.jsx("p",{className:"text-2xl font-['JetBrains_Mono'] text-[#00ff9d] max-w-2xl mx-auto mb-16",children:"With TradeA+, You Will Only See Green"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-16",children:[N.jsxs("div",{className:`glass-panel p-10 text-center transform hover:scale-[1.02] hover:-translate-y-1\r
              transition-all duration-500 ease-out animate-float`,children:[N.jsx("div",{className:"mb-4 inline-block p-3 rounded-xl bg-[#00ff9d]/10",children:N.jsx(xS,{className:"w-6 h-6 text-[#00ff9d]"})}),N.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#00ff9d]",children:"Win Rate Tracking"}),N.jsx("p",{className:"text-gray-300",children:"Track your success with our advanced win/loss calculator"})]}),N.jsxs("div",{className:`glass-panel p-10 text-center transform hover:scale-[1.02] hover:-translate-y-1\r
              transition-all duration-500 ease-out animate-float animation-delay-200`,children:[N.jsx("div",{className:"mb-4 inline-block p-3 rounded-xl bg-[#00ff9d]/10",children:N.jsx(k0,{className:"w-6 h-6 text-[#00ff9d]"})}),N.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#00ff9d]",children:"Real-Time Analysis"}),N.jsx("p",{className:"text-gray-300",children:"Instant insights for better trading decisions"})]}),N.jsxs("div",{className:`glass-panel p-10 text-center transform hover:scale-[1.02] hover:-translate-y-1\r
              transition-all duration-500 ease-out animate-float animation-delay-400`,children:[N.jsx("div",{className:"mb-4 inline-block p-3 rounded-xl bg-[#00ff9d]/10",children:N.jsx(ES,{className:"w-6 h-6 text-[#00ff9d]"})}),N.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#00ff9d]",children:"Multi-Timeframe"}),N.jsx("p",{className:"text-gray-300",children:"Comprehensive analysis across multiple timeframes"})]})]}),N.jsx("div",{className:"mt-16",children:e?N.jsxs("button",{onClick:r,className:`neon-button glow-effect group relative px-12 py-5 text-2xl font-semibold\r
                  rounded-xl transition-all duration-300 ease-out hover:-translate-y-1`,children:[N.jsx("span",{className:"bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Go to App"}),N.jsx("div",{className:`absolute inset-0 -z-10 bg-gradient-to-r from-blue-500/0 via-blue-500/30 to-purple-500/0\r
                  rounded-xl opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-500`})]}):N.jsx(L8,{mode:"modal",redirectUrl:"/app",children:N.jsxs("button",{className:`neon-button glow-effect group relative px-12 py-5 text-2xl font-semibold\r
                  rounded-xl transition-all duration-300 ease-out hover:-translate-y-1`,children:[N.jsx("span",{className:"bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Get Started"}),N.jsx("div",{className:`absolute inset-0 -z-10 bg-gradient-to-r from-blue-500/0 via-blue-500/30 to-purple-500/0\r
                    rounded-xl opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-500`})]})})})]})})})};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(q6||(q6={}));var K6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(K6||(K6={}));var H6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(H6||(H6={}));var W6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(W6||(W6={}));var ep;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER"})(ep||(ep={}));var G6;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(G6||(G6={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Z6 extends Lh{constructor(e,r){super(e),this.response=r}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="https://generativelanguage.googleapis.com",FU="v1",UU="0.2.1",zU="genai-js";var Ao;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ao||(Ao={}));class uc{constructor(e,r,n,s){this.model=e,this.task=r,this.apiKey=n,this.stream=s}toString(){let e=`${jU}/${FU}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function $U(){return`${zU}/${UU}`}async function fc(t,e,r){let n;try{if(n=await fetch(t.toString(),Object.assign(Object.assign({},qU(r)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":$U(),"x-goog-api-key":t.apiKey},body:e})),!n.ok){let s="";try{const i=await n.json();s=i.error.message,i.error.details&&(s+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${s}`)}}catch(s){const i=new Lh(`Error fetching from ${t.toString()}: ${s.message}`);throw i.stack=s.stack,i}return n}function qU(t){const e={};if((t==null?void 0:t.timeout)>=0){const r=new AbortController,n=r.signal;setTimeout(()=>r.abort(),t.timeout),e.signal=n}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),sI(t.candidates[0]))throw new Z6(`${tp(t)}`,t);return KU(t)}else if(t.promptFeedback)throw new Z6(`Text not available. ${tp(t)}`,t);return""},t}function KU(t){var e,r,n,s;return!((s=(n=(r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0?void 0:r.parts)===null||n===void 0?void 0:n[0])===null||s===void 0)&&s.text?t.candidates[0].content.parts[0].text:""}const HU=[ep.RECITATION,ep.SAFETY];function sI(t){return!!t.finishReason&&HU.includes(t.finishReason)}function tp(t){var e,r,n;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const i=t.candidates[0];sI(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function Vh(t){return this instanceof Vh?(this.v=t,this):new Vh(t)}function WU(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(S){n[S]&&(s[S]=function(I){return new Promise(function(A,k){i.push([S,I,A,k])>1||c(S,I)})})}function c(S,I){try{v(n[S](I))}catch(A){x(i[0][3],A)}}function v(S){S.value instanceof Vh?Promise.resolve(S.value.v).then(_,b):x(i[0][2],S)}function _(S){c("next",S)}function b(S){c("throw",S)}function x(S,I){S(I),i.shift(),i.length&&c(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function GU(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=YU(e),[n,s]=r.tee();return{stream:QU(n),response:ZU(s)}}async function ZU(t){const e=[],r=t.getReader();for(;;){const{done:n,value:s}=await r.read();if(n)return Xw(JU(e));e.push(s)}}function QU(t){return WU(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:s}=yield Vh(r.read());if(s)break;yield yield Vh(Xw(n))}})}function YU(t){const e=t.getReader();return new ReadableStream({start(n){let s="";return i();function i(){return e.read().then(({value:u,done:c})=>{if(c){if(s.trim()){n.error(new Lh("Failed to parse stream"));return}n.close();return}s+=u;let v=s.match(Q6),_;for(;v;){try{_=JSON.parse(v[1])}catch{n.error(new Lh(`Error parsing JSON response: "${v[1]}"`));return}n.enqueue(_),s=s.substring(v[0].length),v=s.match(Q6)}return i()})}}})}function JU(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t)if(n.candidates)for(const s of n.candidates){const i=s.index;if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:s.index}),r.candidates[i].citationMetadata=s.citationMetadata,r.candidates[i].finishReason=s.finishReason,r.candidates[i].finishMessage=s.finishMessage,r.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[i].content||(r.candidates[i].content={role:s.content.role||"user",parts:[{text:""}]});for(const u of s.content.parts)u.text&&(r.candidates[i].content.parts[0].text+=u.text)}}return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e,r,n){const s=new uc(e,Ao.STREAM_GENERATE_CONTENT,t,!0),i=await fc(s,JSON.stringify(r),n);return GU(i)}async function oI(t,e,r,n){const s=new uc(e,Ao.GENERATE_CONTENT,t,!1),u=await(await fc(s,JSON.stringify(r),n)).json();return{response:Xw(u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){let r=[];if(typeof t=="string")r=[{text:t}];else for(const n of t)typeof n=="string"?r.push({text:n}):r.push(n);return{role:e,parts:r}}function Gv(t){return t.contents?t:{contents:[Xf(t,"user")]}}function XU(t){return typeof t=="string"||Array.isArray(t)?{content:Xf(t,"user")}:t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="SILENT_ERROR";class ez{constructor(e,r,n,s){this.model=r,this.params=n,this.requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(this._history=n.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return Xf(i.parts,i.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var r,n;await this._sendPromise;const s=Xf(e,"user"),i={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,s]};let u;return this._sendPromise=this._sendPromise.then(()=>oI(this._apiKey,this.model,i,this.requestOptions)).then(c=>{var v;if(c.response.candidates&&c.response.candidates.length>0){this._history.push(s);const _=Object.assign({parts:[],role:"model"},(v=c.response.candidates)===null||v===void 0?void 0:v[0].content);this._history.push(_)}else{const _=tp(c.response);_&&console.warn(`sendMessage() was unsuccessful. ${_}. Inspect response object for details.`)}u=c}),await this._sendPromise,u}async sendMessageStream(e){var r,n;await this._sendPromise;const s=Xf(e,"user"),i={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,contents:[...this._history,s]},u=aI(this._apiKey,this.model,i,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>u).catch(c=>{throw new Error(Y6)}).then(c=>c.response).then(c=>{if(c.candidates&&c.candidates.length>0){this._history.push(s);const v=Object.assign({},c.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=tp(c);v&&console.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(c=>{c.message!==Y6&&console.error(c)}),u}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(t,e,r,n){const s=new uc(e,Ao.COUNT_TOKENS,t,!1);return(await fc(s,JSON.stringify(Object.assign(Object.assign({},r),{model:e})),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(t,e,r,n){const s=new uc(e,Ao.EMBED_CONTENT,t,!1);return(await fc(s,JSON.stringify(r),n)).json()}async function nz(t,e,r,n){const s=new uc(e,Ao.BATCH_EMBED_CONTENTS,t,!1),i=r.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await fc(s,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,r,n){this.apiKey=e,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.requestOptions=n||{}}async generateContent(e){const r=Gv(e);return oI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},r),this.requestOptions)}async generateContentStream(e){const r=Gv(e);return aI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},r),this.requestOptions)}startChat(e){return new ez(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const r=Gv(e);return tz(this.apiKey,this.model,r)}async embedContent(e){const r=XU(e);return rz(this.apiKey,this.model,r)}async batchEmbedContents(e){return nz(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Lh("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new iz(this.apiKey,e,r)}}const J6=1500,Xa=class Xa{constructor(){Oa(this,"usageCache");Oa(this,"lastFetch");Oa(this,"currentDay");Oa(this,"cleanupTimeout");Oa(this,"keyNames");this.usageCache=new Map,this.keyNames=new Map,this.lastFetch=new Date(0),this.currentDay=new Date().getDate(),this.cleanupTimeout=null,this.scheduleNextCleanup()}getEstTime(e=new Date){const s=(e.getTimezoneOffset()- -240)*60*1e3;return new Date(e.getTime()-s)}scheduleNextCleanup(){this.cleanupTimeout&&clearTimeout(this.cleanupTimeout);const e=new Date,r=this.getEstTime(e),n=new Date(r);n.setHours(24,0,0,0);const s=e.getTimezoneOffset()*60*1e3,i=-4*60*60*1e3,u=s+i,v=new Date(n.getTime()+u).getTime()-e.getTime();console.log("Current time (Local):",e.toISOString()),console.log("Current time (EST):",r.toISOString()),console.log("Next cleanup (EST):",n.toISOString()),console.log("Time until cleanup:",v/(1e3*60*60),"hours"),this.cleanupTimeout=setTimeout(async()=>{await this.handleDayChange(),this.scheduleNextCleanup()},v)}async handleDayChange(){try{await EU(),this.usageCache.clear(),this.lastFetch=new Date(0),this.currentDay=new Date().getDate(),await this.refreshUsageStats()}catch(e){console.error("Error handling day change:",e)}}async refreshUsageStats(){try{if(new Date().getDate()!==this.currentDay){await this.handleDayChange();return}const r=await MU();this.usageCache.clear(),this.keyNames.forEach((n,s)=>{this.usageCache.set(s,{used:0,name:n})}),Object.entries(r).forEach(([n,s])=>{this.usageCache.set(n,{used:s.used||0,name:this.keyNames.get(n)||s.name||"Unknown Key"})}),this.lastFetch=new Date}catch(e){console.error("Failed to refresh API key usage stats:",e)}}static getInstance(){return Xa.instance||(Xa.instance=new Xa),Xa.instance}registerKey(e,r){this.keyNames.set(e,r)}async incrementUsage(e){Date.now()-this.lastFetch.getTime()>3e4&&await this.refreshUsageStats();const r=this.usageCache.get(e);if(r&&r.used>=J6)return!1;const n=this.keyNames.get(e)||"Unknown Key",s=await xU(e,n);return s&&this.usageCache.set(e,{used:((r==null?void 0:r.used)||0)+1,name:n}),s}async getAllKeyUsage(){Date.now()-this.lastFetch.getTime()>3e4&&await this.refreshUsageStats();const e=new Set([...this.keyNames.keys(),...this.usageCache.keys()]);return Array.from(e).map(r=>{const n=this.usageCache.get(r),s=this.keyNames.get(r)||(n==null?void 0:n.name)||"Unknown Key",i=(n==null?void 0:n.used)||0;return{key:r,used:i,remaining:J6-i,name:s}})}};Oa(Xa,"instance");let rp=Xa;const kl=[{key:"AIzaSyDZO8whO-YXVVk0zzK9Vcm3TT0N1IiDiKM",name:"Original key from Sharjeel"},{key:"AIzaSyAvLoAwZSHREtov8Hy7tpaYqZplwmhaaMg",name:"Key From R Gmail"},{key:"AIzaSyBOXaRkVju8ZmRftBfMzwmpBoqb6N-oSSE",name:"Key #2 from Sharjeel"},{key:"AIzaSyCBVvxbmYUU_mOzRlJOR1sT5V40Gg2GFJA",name:"Azen Gmail key"},{key:"AIzaSyAq7QuT9sbKgWVs5LcAWMhF1YFyuGqbQLU",name:"Flodisk key"},{key:"AIzaSyBy4KKuADk0bHmGFFlRdGZ1GxL9fl0GaiQ",name:"Tutor key"}].filter(t=>!!t.key),lI=rp.getInstance();kl.forEach(({key:t,name:e})=>lI.registerKey(t,e));let Ni=0,Zd=new Set;async function az(){const t=Ni;do{if(Zd.size===kl.length)return Zd.clear(),null;const e=kl[Ni];if(!Zd.has(Ni))return e.key;Ni=(Ni+1)%kl.length}while(Ni!==t);return null}const oz=(t,e)=>{let r;const n=new Promise((s,i)=>{r=setTimeout(()=>{i(new Error("Analysis request timed out. Please try again."))},e)});return Promise.race([t,n]).finally(()=>{clearTimeout(r)})};async function lz(t){try{console.log("Starting analysis...");const e=i=>i.split(",")[1]||i;let r=0;const n=kl.length*2;let s=null;for(;r<n;){if(s=await az(),!s){r++;continue}try{const u=new sz(s).getGenerativeModel({model:"gemini-2.0-flash"});console.log("Model initialized");const x=(await(await oz(u.generateContent([{text:`You are a trading analysis AI. Analyze these charts and return ONLY a JSON object. 

STRICT RULES:
1. Always maintain a 1:2 risk to reward ratio
2. Risk (distance from entry to stop loss) must never exceed 5% of entry price
3. Take profit must be 2x the distance of stop loss from entry

Example structure:
{
  "entryPrice": 50000.00,
  "stopLoss": 48750.00,    // 2.5% risk (within 5% limit)
  "takeProfit": 52500.00,  // 5% reward (2x the risk)
  "positionType": "LONG",
  "winRate": 65,
  "riskRewardRatio": 2.0,
  "confirmationPoints": ["Support level at 50000", "Bullish RSI divergence"],
  "reasoning": "Price showing strong support with bullish momentum"
}

Base your analysis on:
- Support/resistance levels
- Trend direction on both timeframes
- Price action patterns
- Volume analysis if visible
- Technical indicators

IMPORTANT: 
- Respond ONLY with the JSON object
- Always calculate stop loss within 5% of entry
- Always set take profit at 2x the stop loss distance`},{inlineData:{mimeType:"image/jpeg",data:e(t["15M"])}},{inlineData:{mimeType:"image/jpeg",data:e(t["1H"])}}]),3e4)).response).text().trim().match(/\{[\s\S]*\}/);if(!x)throw new Error("No JSON object found in response");try{const S=JSON.parse(x[0]),I=["entryPrice","stopLoss","takeProfit","positionType","winRate"];for(const A of I)if(!(A in S))throw new Error(`Missing required field: ${A}`);return await lI.incrementUsage(s),{...S,tradeId:crypto.randomUUID(),riskRewardRatio:Number(((S.takeProfit-S.entryPrice)/(S.entryPrice-S.stopLoss)).toFixed(2))}}catch(S){throw console.error("Failed to parse API response:",S),new Error(`Invalid analysis format: ${(S==null?void 0:S.message)||"Unknown parse error"}`)}}catch(i){console.error(`API call failed with key index ${Ni}:`,i),Zd.add(Ni),Ni=(Ni+1)%kl.length,r++}}throw new Error("All API keys exhausted. Please try again later.")}catch(e){throw e instanceof Error?e:new Error("An unexpected error occurred")}}const X6=60,uz=()=>{const[t,e]=te.useState(!1),[r,n]=te.useState(0);return te.useEffect(()=>{if(!t)return;const i=Date.now(),u=setInterval(()=>{const c=Math.floor((Date.now()-i)/1e3),v=X6-c;v<=0?(e(!1),n(0),clearInterval(u)):n(v)},1e3);return()=>clearInterval(u)},[t]),{isInCooldown:t,remainingTime:r,startCooldown:()=>{e(!0),n(X6)}}},fz=({analysis:t,charts:e,tradeType:r})=>{const{saveTrade:n,updateTradeResult:s,updateWinRateStats:i}=z8(),[u,c]=te.useState(!1),[v,_]=te.useState(!1),b=async x=>{c(!0);try{const S=await n({analysis:{entryPrice:t.entryPrice,stopLoss:t.stopLoss,takeProfit:t.takeProfit,positionType:t.positionType,winRate:t.winRate,reasoning:t.reasoning,riskRewardRatio:t.riskRewardRatio,confirmationPoints:t.confirmationPoints,metadata:{confidence:t.winRate,timeOfDay:new Date().toLocaleTimeString()}},charts:e,tradeType:r,lastModified:new Date().toISOString()});await s(S,x),await i(x),_(!0)}catch(S){console.error("Failed to save trade result:",S)}finally{c(!1)}};return N.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-blue-500/30",children:[N.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Analysis Results"}),N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${t.positionType==="LONG"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[t.positionType==="LONG"?N.jsx($O,{className:"w-5 h-5"}):N.jsx(zO,{className:"w-5 h-5"}),N.jsx("span",{className:"font-semibold",children:t.positionType})]}),N.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 text-blue-400 rounded-lg",children:[N.jsx(wS,{className:"w-5 h-5"}),N.jsxs("span",{className:"font-semibold",children:["Win Rate: ",t.winRate,"%"]})]})]}),N.jsxs("div",{className:"grid gap-3",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(ES,{className:"w-5 h-5 text-white"}),N.jsx("span",{className:"text-gray-300",children:"Entry Price:"}),N.jsxs("span",{className:"text-white font-semibold",children:["$",t.entryPrice.toFixed(2)]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(qO,{className:"w-5 h-5 text-green-400"}),N.jsx("span",{className:"text-gray-300",children:"Take Profit:"}),N.jsxs("span",{className:"text-green-400 font-semibold",children:["$",t.takeProfit.toFixed(2)]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(SS,{className:"w-5 h-5 text-red-400"}),N.jsx("span",{className:"text-gray-300",children:"Stop Loss:"}),N.jsxs("span",{className:"text-red-400 font-semibold",children:["$",t.stopLoss.toFixed(2)]})]})]}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"pt-3 border-t border-gray-700",children:[N.jsx("span",{className:"text-gray-300",children:"Risk/Reward Ratio:"}),N.jsxs("span",{className:"ml-2 text-blue-400 font-semibold",children:["1:",t.riskRewardRatio]})]}),t.confirmationPoints&&t.confirmationPoints.length>0&&N.jsxs("div",{className:"pt-3 border-t border-gray-700",children:[N.jsx("h3",{className:"text-white font-medium mb-2",children:"Confirmation Points:"}),N.jsx("ul",{className:"list-disc list-inside text-gray-300 space-y-1",children:t.confirmationPoints.map((x,S)=>N.jsx("li",{children:x},S))})]})]})]}),N.jsx("div",{className:"mt-6 space-y-3",children:v?N.jsx("div",{className:"text-center text-gray-400",children:"Trade result recorded! Check your win rate in the top right."}):N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:()=>b("WIN"),disabled:u,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 \r
                bg-green-500/20 hover:bg-green-500/30 text-green-400\r
                rounded-lg transition-all duration-300 transform hover:scale-[1.02]\r
                border border-green-500/30 hover:border-green-500/50\r
                disabled:opacity-50 disabled:cursor-not-allowed\r
                focus:outline-none focus:ring-2 focus:ring-green-500/50`,children:u?N.jsx("div",{className:"w-5 h-5 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}):N.jsxs(N.Fragment,{children:[N.jsx(eB,{className:"w-5 h-5"}),"Win"]})}),N.jsx("button",{onClick:()=>b("LOSS"),disabled:u,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 \r
                bg-red-500/20 hover:bg-red-500/30 text-red-400\r
                rounded-lg transition-all duration-300 transform hover:scale-[1.02]\r
                border border-red-500/30 hover:border-red-500/50\r
                disabled:opacity-50 disabled:cursor-not-allowed\r
                focus:outline-none focus:ring-2 focus:ring-red-500/50`,children:u?N.jsx("div",{className:"w-5 h-5 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):N.jsxs(N.Fragment,{children:[N.jsx(XO,{className:"w-5 h-5"}),"Loss"]})})]})})]})},hz=({onCancel:t})=>{const{user:e}=Qi(),[r]=te.useState(!1),n=async()=>{if(!e)return;window.postMessage({status:"pending",message:"Starting payment process..."},window.location.origin);const i=`https://nowpayments.io/payment/?iid=6132566674&product_id=TRADEA_PREMIUM&order_id=${e.id}&success_url=${window.location.origin}/payment/success`,u=window.open(i,"_blank"),c=setInterval(()=>{u!=null&&u.closed&&(clearInterval(c),window.postMessage({status:"timeout",message:"Payment window was closed"},window.location.origin))},1e3)};return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9998]"}),N.jsx("div",{className:"absolute inset-x-0 top-0 z-[9999] flex items-center justify-center min-h-screen",children:N.jsxs("div",{className:`relative glass-panel p-8 rounded-2xl max-w-md w-[95%] mx-4 \r
          border border-[#00ff9d]/20 shadow-[0_8px_32px_rgba(0,255,157,0.2)]\r
          animate-[fadeIn_0.3s_ease-out,slideUp_0.3s_ease-out,float_3s_ease-in-out_infinite]`,children:[N.jsx("button",{onClick:t,className:`absolute -top-2 -right-2 p-2 rounded-full bg-gray-800/90 \r
              hover:bg-gray-700/90 transition-colors\r
              border border-[#00ff9d]/20 hover:border-[#00ff9d]/40\r
              text-[#00ff9d]`,children:N.jsx(IS,{className:"w-4 h-4"})}),N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("div",{className:`inline-block p-4 bg-[#00ff9d]/10 rounded-full mb-4\r
              ring-4 ring-[#00ff9d]/5`,children:N.jsx(HO,{className:"w-10 h-10 text-[#00ff9d]"})}),N.jsx("h2",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-white to-[#00ff9d] bg-clip-text text-transparent",children:"Upgrade to Premium"}),N.jsxs("p",{className:"text-gray-300 leading-relaxed",children:["You've used all your free analyses.",N.jsx("br",{}),"Unlock unlimited access for just",N.jsx("span",{className:"font-semibold text-[#00ff9d]",children:" $2.99"}),"!"]})]}),N.jsxs("div",{className:"space-y-3",children:[N.jsx("button",{onClick:n,disabled:r,className:`w-full py-3.5 px-6 bg-[#00ff9d]/20 hover:bg-[#00ff9d]/30\r
                rounded-lg font-semibold text-[#00ff9d]\r
                transform hover:scale-[1.02] transition-all duration-300\r
                border border-[#00ff9d]/30 hover:border-[#00ff9d]/50\r
                shadow-lg shadow-[#00ff9d]/20 disabled:opacity-50 \r
                disabled:cursor-not-allowed disabled:transform-none`,children:r?N.jsxs("div",{className:"flex items-center justify-center gap-2",children:[N.jsx(xh,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):"Pay Now & Unlock"}),N.jsx("button",{onClick:t,disabled:r,className:`w-full py-3.5 px-6 bg-gray-800/50 hover:bg-gray-700/50\r
                rounded-lg font-medium text-gray-300\r
                border border-gray-600/50 hover:border-[#00ff9d]/20\r
                transition-all duration-300 disabled:opacity-50 \r
                disabled:cursor-not-allowed`,children:"Maybe Later"})]})]})})]})},cz=()=>{const{user:t}=Qi(),e=(t==null?void 0:t.firstName)||(t==null?void 0:t.username)||"there",r=[`Hey ${e}!`,`Welcome back, ${e}!`,`Hey ${e}, ready to trade?`,`Great to see you, ${e}!`],n=r[Math.floor(Math.random()*r.length)];return N.jsx("h1",{className:`text-2xl font-bold bg-gradient-to-r from-white to-blue-200 \r
      bg-clip-text text-transparent mb-6 animate-fadeIn`,children:n})},dz=()=>{const[t,e]=te.useState([]);return te.useEffect(()=>{const r=n=>{if(n.origin==="https://nowpayments.io"){const s={type:n.data.status,message:n.data.message,timestamp:new Date().toLocaleTimeString()};e(i=>[s,...i])}};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[]),t.length===0?null:N.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] w-80 max-h-96 overflow-y-auto",children:N.jsx("div",{className:"space-y-2",children:t.map((r,n)=>N.jsx("div",{className:`p-4 rounded-lg bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 \r
              shadow-lg animate-slideUp`,children:N.jsxs("div",{className:"flex items-start gap-3",children:[r.type==="success"&&N.jsx(_S,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),r.type==="error"&&N.jsx(SS,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),r.type==="pending"&&N.jsx(xh,{className:"w-5 h-5 text-blue-500 animate-spin flex-shrink-0"}),r.type==="timeout"&&N.jsx(tw,{className:"w-5 h-5 text-yellow-500 flex-shrink-0"}),N.jsxs("div",{className:"flex-1",children:[N.jsx("p",{className:"text-sm text-gray-300",children:r.message}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.timestamp})]})]})},n))})})},pz=()=>{const[t,e]=te.useState("good"),[r,n]=te.useState(!1),[s,i]=te.useState({"5M":{screenshot:null},"15M":{screenshot:null},"1H":{screenshot:null},"4H":{screenshot:null}}),{isInCooldown:u,remainingTime:c,startCooldown:v}=uz(),[_,b]=te.useState(null),[x,S]=te.useState(null),{showPopup:I,incrementAnalysisCount:A,handlePayment:k,closePopup:F}=TS(),C={"5M":te.useRef(null),"15M":te.useRef(null),"1H":te.useRef(null),"4H":te.useRef(null)},R=D=>$=>{var a;const g=(a=$.target.files)==null?void 0:a[0];if(g){if(!g.type.startsWith("image/")){alert("Please upload only image files");return}try{const l=new FileReader;l.onloadend=()=>{i(f=>({...f,[D]:{screenshot:l.result}}))},l.readAsDataURL(g)}catch(l){console.error("Error reading file:",l),alert("Failed to read image file")}}},V=D=>$=>{$.preventDefault();const g=$.dataTransfer.files[0];if(g&&g.type.startsWith("image/")){const a=new FileReader;a.onloadend=()=>{i(l=>({...l,[D]:{screenshot:a.result}}))},a.readAsDataURL(g)}},U=D=>{D.preventDefault()},Q=()=>t==="good"?["15M","1H"]:["5M","15M","1H","4H"],ee=()=>Q().every($=>s[$].screenshot!==null),j=async()=>{if(!(!ee()||u)&&await A()){n(!0),b(null);try{const D={"15M":s["15M"].screenshot,"1H":s["1H"].screenshot},$=await lz(D);S($),v()}catch(D){console.error("Analysis failed:",D),b(D instanceof Error?D.message:"Failed to analyze screenshots. Please try again later.")}finally{n(!1)}}},B=()=>({"5M":s["5M"].screenshot||void 0,"15M":s["15M"].screenshot,"1H":s["1H"].screenshot,"4H":s["4H"].screenshot||void 0});return N.jsx("div",{className:"content-layer relative z-10",children:N.jsx("div",{className:"pt-24 px-8 pb-8",children:N.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[N.jsx(cz,{}),N.jsx(dz,{}),I&&N.jsx(hz,{onUpgrade:k,onCancel:F}),N.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr,450px] gap-8",children:[N.jsxs("div",{className:"space-y-8",children:[_&&N.jsxs("div",{className:"mb-6 p-4 glass-panel bg-red-500/10 border-red-500/20 rounded-lg flex items-center gap-3 text-red-400",children:[N.jsx(tw,{className:"w-5 h-5 flex-shrink-0"}),N.jsx("p",{children:_})]}),N.jsxs("section",{className:"section-container animate-float",children:[N.jsxs("h2",{className:"section-title",children:[N.jsx(k0,{className:"icon w-6 h-6"}),"Analysis Type"]}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:()=>e("good"),className:`neon-button hover-float px-8 py-3.5 rounded-lg text-lg font-medium ${t==="good"&&"active"}`,children:"Good Results (15M, 1H)"}),N.jsx("button",{onClick:()=>e("best"),className:`neon-button hover-float px-8 py-3.5 rounded-lg text-lg font-medium ${t==="best"&&"active"}`,children:"Best Results (5M, 15M, 1H, 4H)"})]})]}),N.jsxs("section",{className:"section-container animate-float animation-delay-200",children:[N.jsxs("h2",{className:"section-title",children:[N.jsx(c3,{className:"icon w-6 h-6"}),"Chart Upload"]}),N.jsx("div",{className:"grid grid-cols-2 gap-6",children:Q().map(D=>N.jsxs("div",{className:"glass-panel p-6 hover-scale",children:[N.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[D," Chart"]}),N.jsx("input",{type:"file",ref:C[D],onChange:R(D),accept:"image/*",className:"hidden"}),s[D].screenshot?N.jsxs("div",{className:"relative group transition-transform duration-300 hover:scale-[1.02]",children:[N.jsx("img",{src:s[D].screenshot,alt:`${D} Chart`,className:"w-full rounded-lg"}),N.jsx("div",{className:`absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 \r
                            flex items-center justify-center transition-all duration-300 cursor-pointer`,children:N.jsx(ZO,{className:"w-8 h-8"})})]}):N.jsxs("div",{onDragOver:U,onDrop:V(D),onClick:()=>{var $;return($=C[D].current)==null?void 0:$.click()},className:`hover-float h-64 border-2 border-dashed border-gray-600 rounded-lg \r
                            flex flex-col items-center justify-center cursor-pointer`,children:[N.jsx(c3,{className:"w-12 h-12 mb-4 neon-icon"}),N.jsxs("p",{className:"text-gray-400",children:["Upload ",D," Chart"]})]})]},D))})]}),N.jsx("section",{className:"section-container animate-float animation-delay-400",children:N.jsxs("div",{className:"flex flex-col items-center gap-4",children:[N.jsx("button",{onClick:j,disabled:!ee()||r||u,className:`neon-button flex items-center gap-2 px-8 py-4 rounded-lg\r
                      disabled:opacity-50 disabled:cursor-not-allowed`,children:r?N.jsxs(N.Fragment,{children:[N.jsx(xh,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):u?N.jsxs(N.Fragment,{children:[N.jsx(J1,{className:"w-5 h-5"}),"Wait ",c,"s"]}):N.jsxs(N.Fragment,{children:[N.jsx(J1,{className:"w-5 h-5"}),"Analyze Charts"]})}),N.jsx("p",{className:"text-sm text-gray-400",children:ee()?u?"Take a Deep Breath for 1 Min to Refresh Your Mind":"Ready to analyze":`Please upload the required ${t==="good"?"15M and 1H":"all"} timeframe charts`})]})})]}),N.jsx("div",{className:"lg:sticky lg:top-24 h-fit",children:N.jsxs("div",{className:"section-container animate-float animation-delay-600",children:[N.jsxs("h2",{className:"section-title",children:[N.jsx(wS,{className:"icon w-6 h-6"}),"Analysis Results"]}),r?N.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[N.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),N.jsx("p",{className:"text-gray-400",children:"Analyzing charts..."})]}):x?N.jsx("div",{className:"space-y-6 content-transition",children:N.jsx(fz,{analysis:x,charts:B(),tradeType:t==="good"?"GOOD_RESULTS":"BEST_RESULTS"})}):N.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[N.jsx(k0,{className:"w-12 h-12 text-gray-600 mb-4"}),N.jsxs("p",{className:"text-gray-400",children:["Upload charts and click analyze",N.jsx("br",{}),"to see results here"]})]})]})})]})]})})})};function mz(){return N.jsx(P8,{path:"/sign-in",routing:"path",afterSignInUrl:"/app",redirectUrl:"/app",signUpUrl:"/sign-up",appearance:{elements:{formButtonPrimary:"bg-blue-500 hover:bg-blue-600 text-white",card:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 [&_div:last-child]:!hidden",headerTitle:"text-white",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-700/50 hover:bg-gray-600 border border-gray-600/50",socialButtonsBlockButtonText:"text-white",formFieldLabel:"text-gray-300",formFieldInput:"bg-gray-700/50 border-gray-600/50 text-white",footerActionLink:"!hidden opacity-0",footer:"!hidden opacity-0 invisible h-0 [&_*]:!hidden",footerText:"!hidden opacity-0",footerAction:"!hidden opacity-0",footerActionText:"!hidden opacity-0",rootBox:"mx-auto [&_cl-development-mode-badge]:!hidden [&>div:last-child]:!hidden"}}})}const e_=()=>{const t=te.useRef(null),e=te.useRef();return te.useEffect(()=>{const r=t.current;if(!r)return;const n=window.devicePixelRatio||1,s=()=>{r.width=window.innerWidth*n,r.height=window.innerHeight*n,r.style.width=`${window.innerWidth}px`,r.style.height=`${window.innerHeight}px`};s();const i=r.getContext("2d",{alpha:!1,willReadFrequently:!1});if(!i)return;i.scale(n,n);const u=()=>{s(),i.scale(n,n)};window.addEventListener("resize",u);const c=Array.from({length:100},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:.3+Math.random()*1,twinkleSpeed:3e-4+Math.random()*5e-4,brightness:Math.random()})),v=Array.from({length:1},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:20+Math.random()*15,speed:5e-4+Math.random()*.001,color:`hsla(${210+Math.random()*40}, 70%, 50%, 0.15)`,glowColor:`hsla(${210+Math.random()*40}, 70%, 60%, 0.1)`,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*1e-4})),_=Array.from({length:3},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:1+Math.random()*2,speed:.002+Math.random()*.004,angle:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*5e-4,rotation:Math.random()*Math.PI*2}));let b=0;const x=S=>{if(S-b<16.67){e.current=requestAnimationFrame(x);return}b=S;const A=i.createLinearGradient(0,0,0,window.innerHeight);A.addColorStop(0,"#0f172a"),A.addColorStop(1,"#1e293b"),i.fillStyle=A,i.fillRect(0,0,window.innerWidth,window.innerHeight),i.save(),c.forEach(k=>{k.brightness+=k.twinkleSpeed,(k.brightness>1||k.brightness<0)&&(k.twinkleSpeed*=-1);const F=.2+k.brightness*.4;if(i.fillStyle=`rgba(255, 255, 255, ${F})`,i.beginPath(),i.arc(k.x,k.y,k.size,0,Math.PI*2),i.fill(),k.brightness>.8){const C=i.createRadialGradient(k.x,k.y,0,k.x,k.y,k.size*4);C.addColorStop(0,`rgba(255, 255, 255, ${F*.2})`),C.addColorStop(1,"rgba(255, 255, 255, 0)"),i.fillStyle=C,i.beginPath(),i.arc(k.x,k.y,k.size*4,0,Math.PI*2),i.fill()}}),i.restore(),v.forEach(k=>{k.x+=k.speed,k.x>r.width+k.size&&(k.x=-k.size),i.save(),i.translate(k.x,k.y),i.rotate(k.rotation),i.fillStyle=k.color,i.beginPath(),i.arc(0,0,k.size,0,Math.PI*2),i.fill(),i.restore()}),i.fillStyle="#8b8b8b",_.forEach(k=>{k.x+=Math.cos(k.angle)*k.speed,k.y+=Math.sin(k.angle)*k.speed,k.x<-k.size&&(k.x=r.width+k.size),k.x>r.width+k.size&&(k.x=-k.size),k.y<-k.size&&(k.y=r.height+k.size),k.y>r.height+k.size&&(k.y=-k.size),i.save(),i.translate(k.x,k.y),i.rotate(k.rotation),i.beginPath(),i.moveTo(-k.size,0),i.lineTo(-k.size/2,-k.size),i.lineTo(k.size/2,-k.size/2),i.lineTo(k.size,0),i.lineTo(k.size/2,k.size/2),i.lineTo(-k.size/2,k.size),i.closePath(),i.fill(),i.restore()}),e.current=requestAnimationFrame(x)};return x(0),()=>{window.removeEventListener("resize",u),e.current&&cancelAnimationFrame(e.current)}},[]),N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 w-full h-full bg-gradient-to-b from-[#0f172a] to-[#1e293b] z-0"}),N.jsx("canvas",{ref:t,className:"fixed inset-0 w-full h-full",style:{backgroundColor:"transparent",imageRendering:"auto",zIndex:1,transform:"translateZ(0)",willChange:"transform",mixBlendMode:"screen"}}),N.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-[#0f172a]/50 to-transparent pointer-events-none z-[2]"})]})};function vz(){const{isSignedIn:t,isLoaded:e}=_8(),r=Do();return e?t?N.jsx(D1,{}):N.jsx(ZE,{to:"/sign-in",state:{from:r},replace:!0}):N.jsxs("div",{className:"min-h-screen relative flex items-center justify-center",children:[N.jsx(e_,{}),N.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[N.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),N.jsx("p",{className:"text-white/80",children:"Loading..."})]})]})}const gz=["user_2v0X4Rfy4U6wsZnT6OMKJGSpNqo`","user_2sF7P8RmU30ZAPZRMJkJ1NjUBib"],pd=({children:t})=>{const{user:e,isLoaded:r}=Qi();return r?!e||!gz.includes(e.id)?N.jsx(ZE,{to:"/app",replace:!0}):N.jsx(N.Fragment,{children:t}):null};function yz(){var r;const t=GE();let e="Something went wrong";return Fl(t)?e=t.statusText||((r=t.data)==null?void 0:r.message)||e:t instanceof Error&&(e=t.message),N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:N.jsxs("div",{className:"text-center",children:[N.jsx("h1",{className:"text-2xl text-white mb-4",children:"Oops!"}),N.jsx("p",{className:"text-gray-400",children:e})]})})}const wz=()=>N.jsxs("div",{className:"min-h-screen relative flex items-center justify-center bg-slate-900",children:[N.jsx(e_,{}),N.jsx("div",{className:"fixed inset-0 bg-blue-500/5 mix-blend-multiply pointer-events-none"}),N.jsxs("div",{className:"relative z-10 w-full max-w-md px-4 py-6",children:[N.jsx("div",{className:"absolute inset-0 bg-blue-500/5 blur-[100px] rounded-full"}),N.jsx(dO,{routing:"path",path:"/sign-up",signInUrl:"/sign-in",redirectUrl:"/app",appearance:{elements:{rootBox:"relative z-10",card:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50",headerTitle:"text-white",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-700/50 border border-gray-600/50 hover:bg-gray-700",socialButtonsBlockButtonText:"text-white",formButtonPrimary:"bg-blue-500 hover:bg-blue-600",formFieldInput:"bg-gray-700/50 border-gray-600/50 text-white",formFieldLabel:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300"}}})]})]}),_z=()=>N.jsxs(N.Fragment,{children:[N.jsx(e_,{}),N.jsx("div",{className:"content-layer relative z-10 pt-24 px-4",children:N.jsx("div",{className:"max-w-2xl mx-auto",children:N.jsx(O8,{})})})]});var Et={},Py={exports:{}},Cy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=wr,n=r.Buffer;function s(u,c){for(var v in u)c[v]=u[v]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(u,c,v){return n(u,c,v)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(u,c,v){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,c,v)},i.alloc=function(u,c,v){if(typeof u!="number")throw new TypeError("Argument must be a number");var _=n(u);return c!==void 0?typeof v=="string"?_.fill(c,v):_.fill(c):_.fill(0),_},i.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},i.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(Cy,Cy.exports);var Rt=Cy.exports,Zv=65536,bz=4294967295;function xz(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Mz=Rt.Buffer,np=jt.crypto||jt.msCrypto;np&&np.getRandomValues?Py.exports=Ez:Py.exports=xz;function Ez(t,e){if(t>bz)throw new RangeError("requested too many random bytes");var r=Mz.allocUnsafe(t);if(t>0)if(t>Zv)for(var n=0;n<t;n+=Zv)np.getRandomValues(r.slice(n,n+Zv));else np.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}var Iu=Py.exports,Ny={exports:{}};typeof Object.create=="function"?Ny.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ny.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var kt=Ny.exports,Pi=Rt.Buffer,uI=wr.Transform,Sz=kt;function ka(t){uI.call(this),this._block=Pi.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Sz(ka,uI);ka.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(s){n=s}r(n)};ka.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};var Iz=typeof Uint8Array<"u",Tz=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(Pi.prototype instanceof Uint8Array||Pi.TYPED_ARRAY_SUPPORT);function Az(t,e){if(t instanceof Pi)return t;if(typeof t=="string")return Pi.from(t,e);if(Tz&&ArrayBuffer.isView(t)){if(t.byteLength===0)return Pi.alloc(0);var r=Pi.from(t.buffer,t.byteOffset,t.byteLength);if(r.byteLength===t.byteLength)return r}if(Iz&&t instanceof Uint8Array||Pi.isBuffer(t)&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))return Pi.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}ka.prototype.update=function(t,e){if(this._finalized)throw new Error("Digest already called");t=Az(t,e);for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var i=0,u=t.length*8;u>0;++i)this._length[i]+=u,u=this._length[i]/4294967296|0,u>0&&(this._length[i]-=4294967296*u);return this};ka.prototype._update=function(){throw new Error("_update is not implemented")};ka.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};ka.prototype._digest=function(){throw new Error("_digest is not implemented")};var fI=ka,Rz=kt,hI=fI,kz=Rt.Buffer,Pz=new Array(16);function pm(){hI.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}Rz(pm,hI);pm.prototype._update=function(){for(var t=Pz,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,s=this._c,i=this._d;r=Xr(r,n,s,i,t[0],3614090360,7),i=Xr(i,r,n,s,t[1],3905402710,12),s=Xr(s,i,r,n,t[2],606105819,17),n=Xr(n,s,i,r,t[3],3250441966,22),r=Xr(r,n,s,i,t[4],4118548399,7),i=Xr(i,r,n,s,t[5],1200080426,12),s=Xr(s,i,r,n,t[6],2821735955,17),n=Xr(n,s,i,r,t[7],4249261313,22),r=Xr(r,n,s,i,t[8],1770035416,7),i=Xr(i,r,n,s,t[9],2336552879,12),s=Xr(s,i,r,n,t[10],4294925233,17),n=Xr(n,s,i,r,t[11],2304563134,22),r=Xr(r,n,s,i,t[12],1804603682,7),i=Xr(i,r,n,s,t[13],4254626195,12),s=Xr(s,i,r,n,t[14],2792965006,17),n=Xr(n,s,i,r,t[15],1236535329,22),r=en(r,n,s,i,t[1],4129170786,5),i=en(i,r,n,s,t[6],3225465664,9),s=en(s,i,r,n,t[11],643717713,14),n=en(n,s,i,r,t[0],3921069994,20),r=en(r,n,s,i,t[5],3593408605,5),i=en(i,r,n,s,t[10],38016083,9),s=en(s,i,r,n,t[15],3634488961,14),n=en(n,s,i,r,t[4],3889429448,20),r=en(r,n,s,i,t[9],568446438,5),i=en(i,r,n,s,t[14],3275163606,9),s=en(s,i,r,n,t[3],4107603335,14),n=en(n,s,i,r,t[8],1163531501,20),r=en(r,n,s,i,t[13],2850285829,5),i=en(i,r,n,s,t[2],4243563512,9),s=en(s,i,r,n,t[7],1735328473,14),n=en(n,s,i,r,t[12],2368359562,20),r=tn(r,n,s,i,t[5],4294588738,4),i=tn(i,r,n,s,t[8],2272392833,11),s=tn(s,i,r,n,t[11],1839030562,16),n=tn(n,s,i,r,t[14],4259657740,23),r=tn(r,n,s,i,t[1],2763975236,4),i=tn(i,r,n,s,t[4],1272893353,11),s=tn(s,i,r,n,t[7],4139469664,16),n=tn(n,s,i,r,t[10],3200236656,23),r=tn(r,n,s,i,t[13],681279174,4),i=tn(i,r,n,s,t[0],3936430074,11),s=tn(s,i,r,n,t[3],3572445317,16),n=tn(n,s,i,r,t[6],76029189,23),r=tn(r,n,s,i,t[9],3654602809,4),i=tn(i,r,n,s,t[12],3873151461,11),s=tn(s,i,r,n,t[15],530742520,16),n=tn(n,s,i,r,t[2],3299628645,23),r=rn(r,n,s,i,t[0],4096336452,6),i=rn(i,r,n,s,t[7],1126891415,10),s=rn(s,i,r,n,t[14],2878612391,15),n=rn(n,s,i,r,t[5],4237533241,21),r=rn(r,n,s,i,t[12],1700485571,6),i=rn(i,r,n,s,t[3],2399980690,10),s=rn(s,i,r,n,t[10],4293915773,15),n=rn(n,s,i,r,t[1],2240044497,21),r=rn(r,n,s,i,t[8],1873313359,6),i=rn(i,r,n,s,t[15],4264355552,10),s=rn(s,i,r,n,t[6],2734768916,15),n=rn(n,s,i,r,t[13],1309151649,21),r=rn(r,n,s,i,t[4],4149444226,6),i=rn(i,r,n,s,t[11],3174756917,10),s=rn(s,i,r,n,t[2],718787259,15),n=rn(n,s,i,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+s|0,this._d=this._d+i|0};pm.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=kz.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function mm(t,e){return t<<e|t>>>32-e}function Xr(t,e,r,n,s,i,u){return mm(t+(e&r|~e&n)+s+i|0,u)+e|0}function en(t,e,r,n,s,i,u){return mm(t+(e&n|r&~n)+s+i|0,u)+e|0}function tn(t,e,r,n,s,i,u){return mm(t+(e^r^n)+s+i|0,u)+e|0}function rn(t,e,r,n,s,i,u){return mm(t+(r^(e|~n))+s+i|0,u)+e|0}var t_=pm,Qv=wr.Buffer,Cz=kt,cI=fI,Nz=new Array(16),hf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],cf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],df=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],pf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],mf=[0,1518500249,1859775393,2400959708,2840853838],vf=[1352829926,1548603684,1836072691,2053994217,0];function vm(){cI.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}Cz(vm,cI);vm.prototype._update=function(){for(var t=Nz,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,u=this._e|0,c=this._a|0,v=this._b|0,_=this._c|0,b=this._d|0,x=this._e|0,S=0;S<80;S+=1){var I,A;S<16?(I=e4(r,n,s,i,u,t[hf[S]],mf[0],df[S]),A=i4(c,v,_,b,x,t[cf[S]],vf[0],pf[S])):S<32?(I=t4(r,n,s,i,u,t[hf[S]],mf[1],df[S]),A=n4(c,v,_,b,x,t[cf[S]],vf[1],pf[S])):S<48?(I=r4(r,n,s,i,u,t[hf[S]],mf[2],df[S]),A=r4(c,v,_,b,x,t[cf[S]],vf[2],pf[S])):S<64?(I=n4(r,n,s,i,u,t[hf[S]],mf[3],df[S]),A=t4(c,v,_,b,x,t[cf[S]],vf[3],pf[S])):(I=i4(r,n,s,i,u,t[hf[S]],mf[4],df[S]),A=e4(c,v,_,b,x,t[cf[S]],vf[4],pf[S])),r=u,u=i,i=Ro(s,10),s=n,n=I,c=x,x=b,b=Ro(_,10),_=v,v=A}var k=this._b+s+b|0;this._b=this._c+i+x|0,this._c=this._d+u+c|0,this._d=this._e+r+v|0,this._e=this._a+n+_|0,this._a=k};vm.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Qv.alloc?Qv.alloc(20):new Qv(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Ro(t,e){return t<<e|t>>>32-e}function e4(t,e,r,n,s,i,u,c){return Ro(t+(e^r^n)+i+u|0,c)+s|0}function t4(t,e,r,n,s,i,u,c){return Ro(t+(e&r|~e&n)+i+u|0,c)+s|0}function r4(t,e,r,n,s,i,u,c){return Ro(t+((e|~r)^n)+i+u|0,c)+s|0}function n4(t,e,r,n,s,i,u,c){return Ro(t+(e&n|r&~n)+i+u|0,c)+s|0}function i4(t,e,r,n,s,i,u,c){return Ro(t+(e^(r|~n))+i+u|0,c)+s|0}var r_=vm,dI={exports:{}},pI=Rt.Buffer;function gm(t,e){this._block=pI.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}gm.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=pI.from(t,e));for(var r=this._block,n=this._blockSize,s=t.length,i=this._len,u=0;u<s;){for(var c=i%n,v=Math.min(s-u,n-c),_=0;_<v;_++)r[c+_]=t[u+_];i+=v,u+=v,i%n===0&&this._update(r)}return this._len+=s,this};gm.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,s=(r-n)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i};gm.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Tu=gm,Dz=kt,mI=Tu,Oz=Rt.Buffer,Bz=[1518500249,1859775393,-1894007588,-899497514],Lz=new Array(80);function hc(){this.init(),this._w=Lz,mI.call(this,64,56)}Dz(hc,mI);hc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Vz(t){return t<<5|t>>>27}function jz(t){return t<<30|t>>>2}function Fz(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}hc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,u=this._e|0,c=0;c<16;++c)e[c]=t.readInt32BE(c*4);for(;c<80;++c)e[c]=e[c-3]^e[c-8]^e[c-14]^e[c-16];for(var v=0;v<80;++v){var _=~~(v/20),b=Vz(r)+Fz(_,n,s,i)+u+e[v]+Bz[_]|0;u=i,i=s,s=jz(n),n=r,r=b}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=u+this._e|0};hc.prototype._hash=function(){var t=Oz.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Uz=hc,zz=kt,vI=Tu,$z=Rt.Buffer,qz=[1518500249,1859775393,-1894007588,-899497514],Kz=new Array(80);function cc(){this.init(),this._w=Kz,vI.call(this,64,56)}zz(cc,vI);cc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Hz(t){return t<<1|t>>>31}function Wz(t){return t<<5|t>>>27}function Gz(t){return t<<30|t>>>2}function Zz(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}cc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,u=this._e|0,c=0;c<16;++c)e[c]=t.readInt32BE(c*4);for(;c<80;++c)e[c]=Hz(e[c-3]^e[c-8]^e[c-14]^e[c-16]);for(var v=0;v<80;++v){var _=~~(v/20),b=Wz(r)+Zz(_,n,s,i)+u+e[v]+qz[_]|0;u=i,i=s,s=Gz(n),n=r,r=b}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=u+this._e|0};cc.prototype._hash=function(){var t=$z.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Qz=cc,Yz=kt,gI=Tu,Jz=Rt.Buffer,Xz=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e$=new Array(64);function dc(){this.init(),this._w=e$,gI.call(this,64,56)}Yz(dc,gI);dc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function t$(t,e,r){return r^t&(e^r)}function r$(t,e,r){return t&e|r&(t|e)}function n$(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function i$(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function s$(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function a$(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}dc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,u=this._e|0,c=this._f|0,v=this._g|0,_=this._h|0,b=0;b<16;++b)e[b]=t.readInt32BE(b*4);for(;b<64;++b)e[b]=a$(e[b-2])+e[b-7]+s$(e[b-15])+e[b-16]|0;for(var x=0;x<64;++x){var S=_+i$(u)+t$(u,c,v)+Xz[x]+e[x]|0,I=n$(r)+r$(r,n,s)|0;_=v,v=c,c=u,u=i+S|0,i=s,s=n,n=r,r=S+I|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=u+this._e|0,this._f=c+this._f|0,this._g=v+this._g|0,this._h=_+this._h|0};dc.prototype._hash=function(){var t=Jz.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var yI=dc,o$=kt,l$=yI,u$=Tu,f$=Rt.Buffer,h$=new Array(64);function ym(){this.init(),this._w=h$,u$.call(this,64,56)}o$(ym,l$);ym.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};ym.prototype._hash=function(){var t=f$.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var c$=ym,d$=kt,wI=Tu,p$=Rt.Buffer,s4=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],m$=new Array(160);function pc(){this.init(),this._w=m$,wI.call(this,128,112)}d$(pc,wI);pc.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function a4(t,e,r){return r^t&(e^r)}function o4(t,e,r){return t&e|r&(t|e)}function l4(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function u4(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function v$(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function g$(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function y$(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function w$(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Nr(t,e){return t>>>0<e>>>0?1:0}pc.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,s=this._ch|0,i=this._dh|0,u=this._eh|0,c=this._fh|0,v=this._gh|0,_=this._hh|0,b=this._al|0,x=this._bl|0,S=this._cl|0,I=this._dl|0,A=this._el|0,k=this._fl|0,F=this._gl|0,C=this._hl|0,R=0;R<32;R+=2)e[R]=t.readInt32BE(R*4),e[R+1]=t.readInt32BE(R*4+4);for(;R<160;R+=2){var V=e[R-30],U=e[R-15*2+1],Q=v$(V,U),ee=g$(U,V);V=e[R-2*2],U=e[R-2*2+1];var j=y$(V,U),B=w$(U,V),D=e[R-7*2],$=e[R-7*2+1],g=e[R-16*2],a=e[R-16*2+1],l=ee+$|0,f=Q+D+Nr(l,ee)|0;l=l+B|0,f=f+j+Nr(l,B)|0,l=l+a|0,f=f+g+Nr(l,a)|0,e[R]=f,e[R+1]=l}for(var h=0;h<160;h+=2){f=e[h],l=e[h+1];var m=o4(r,n,s),y=o4(b,x,S),w=l4(r,b),d=l4(b,r),o=u4(u,A),p=u4(A,u),E=s4[h],T=s4[h+1],z=a4(u,c,v),K=a4(A,k,F),Y=C+p|0,L=_+o+Nr(Y,C)|0;Y=Y+K|0,L=L+z+Nr(Y,K)|0,Y=Y+T|0,L=L+E+Nr(Y,T)|0,Y=Y+l|0,L=L+f+Nr(Y,l)|0;var H=d+y|0,Z=w+m+Nr(H,d)|0;_=v,C=F,v=c,F=k,c=u,k=A,A=I+Y|0,u=i+L+Nr(A,I)|0,i=s,I=S,s=n,S=x,n=r,x=b,b=Y+H|0,r=L+Z+Nr(b,Y)|0}this._al=this._al+b|0,this._bl=this._bl+x|0,this._cl=this._cl+S|0,this._dl=this._dl+I|0,this._el=this._el+A|0,this._fl=this._fl+k|0,this._gl=this._gl+F|0,this._hl=this._hl+C|0,this._ah=this._ah+r+Nr(this._al,b)|0,this._bh=this._bh+n+Nr(this._bl,x)|0,this._ch=this._ch+s+Nr(this._cl,S)|0,this._dh=this._dh+i+Nr(this._dl,I)|0,this._eh=this._eh+u+Nr(this._el,A)|0,this._fh=this._fh+c+Nr(this._fl,k)|0,this._gh=this._gh+v+Nr(this._gl,F)|0,this._hh=this._hh+_+Nr(this._hl,C)|0};pc.prototype._hash=function(){var t=p$.allocUnsafe(64);function e(r,n,s){t.writeInt32BE(r,s),t.writeInt32BE(n,s+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var _I=pc,_$=kt,b$=_I,x$=Tu,M$=Rt.Buffer,E$=new Array(160);function wm(){this.init(),this._w=E$,x$.call(this,128,112)}_$(wm,b$);wm.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};wm.prototype._hash=function(){var t=M$.allocUnsafe(48);function e(r,n,s){t.writeInt32BE(r,s),t.writeInt32BE(n,s+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var S$=wm,ks=dI.exports=function(e){e=e.toLowerCase();var r=ks[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};ks.sha=Uz;ks.sha1=Qz;ks.sha224=c$;ks.sha256=yI;ks.sha384=S$;ks.sha512=_I;var n_=dI.exports,ip={},Dy={exports:{}};(function(t,e){var r=wr,n=r.Buffer;function s(u,c){for(var v in u)c[v]=u[v]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(u,c,v){return n(u,c,v)}s(n,i),i.from=function(u,c,v){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,c,v)},i.alloc=function(u,c,v){if(typeof u!="number")throw new TypeError("Argument must be a number");var _=n(u);return c!==void 0?typeof v=="string"?_.fill(c,v):_.fill(c):_.fill(0),_},i.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},i.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(Dy,Dy.exports);var I$=Dy.exports,i_=I$.Buffer,f4=i_.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function T$(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function A$(t){var e=T$(t);if(typeof e!="string"&&(i_.isEncoding===f4||!f4(t)))throw new Error("Unknown encoding: "+t);return e||t}ip.StringDecoder=mc;function mc(t){this.encoding=A$(t);var e;switch(this.encoding){case"utf16le":this.text=D$,this.end=O$,e=4;break;case"utf8":this.fillLast=P$,e=4;break;case"base64":this.text=B$,this.end=L$,e=3;break;default:this.write=V$,this.end=j$;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i_.allocUnsafe(e)}mc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};mc.prototype.end=N$;mc.prototype.text=C$;mc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Yv(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function R$(t,e,r){var n=e.length-1;if(n<r)return 0;var s=Yv(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=Yv(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=Yv(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function k$(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function P$(t){var e=this.lastTotal-this.lastNeed,r=k$(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function C$(t,e){var r=R$(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function N$(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function D$(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function O$(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function B$(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function L$(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function V$(t){return t.toString(this.encoding)}function j$(t){return t&&t.length?this.write(t):""}var Ci=Rt.Buffer,bI=wr.Transform,F$=ip.StringDecoder,U$=kt;function Ei(t){bI.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}U$(Ei,bI);var z$=typeof Uint8Array<"u",$$=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(Ci.prototype instanceof Uint8Array||Ci.TYPED_ARRAY_SUPPORT);function q$(t,e){if(t instanceof Ci)return t;if(typeof t=="string")return Ci.from(t,e);if($$&&ArrayBuffer.isView(t)){if(t.byteLength===0)return Ci.alloc(0);var r=Ci.from(t.buffer,t.byteOffset,t.byteLength);if(r.byteLength===t.byteLength)return r}if(z$&&t instanceof Uint8Array||Ci.isBuffer(t)&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))return Ci.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}Ei.prototype.update=function(t,e,r){var n=q$(t,e),s=this._update(n);return this.hashMode?this:(r&&(s=this._toString(s,r)),s)};Ei.prototype.setAutoPadding=function(){};Ei.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Ei.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Ei.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Ei.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(s){n=s}finally{r(n)}};Ei.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Ei.prototype._finalOrDigest=function(t){var e=this.__final()||Ci.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Ei.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new F$(e),this._encoding=e),this._encoding!==e)throw new Error("cant switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var Pa=Ei,K$=kt,H$=t_,W$=r_,G$=n_,xI=Pa;function _m(t){xI.call(this,"digest"),this._hash=t}K$(_m,xI);_m.prototype._update=function(t){this._hash.update(t)};_m.prototype._final=function(){return this._hash.digest()};var vc=function(e){return e=e.toLowerCase(),e==="md5"?new H$:e==="rmd160"||e==="ripemd160"?new W$:new _m(G$(e))},Z$=kt,so=Rt.Buffer,MI=Pa,Q$=so.alloc(128),Xo=64;function bm(t,e){MI.call(this,"digest"),typeof e=="string"&&(e=so.from(e)),this._alg=t,this._key=e,e.length>Xo?e=t(e):e.length<Xo&&(e=so.concat([e,Q$],Xo));for(var r=this._ipad=so.allocUnsafe(Xo),n=this._opad=so.allocUnsafe(Xo),s=0;s<Xo;s++)r[s]=e[s]^54,n[s]=e[s]^92;this._hash=[r]}Z$(bm,MI);bm.prototype._update=function(t){this._hash.push(t)};bm.prototype._final=function(){var t=this._alg(so.concat(this._hash));return this._alg(so.concat([this._opad,t]))};var Y$=bm,J$=t_,EI=function(t){return new J$().update(t).digest()},X$=kt,eq=Y$,SI=Pa,kf=Rt.Buffer,tq=EI,Oy=r_,By=n_,rq=kf.alloc(128);function jh(t,e){SI.call(this,"digest"),typeof e=="string"&&(e=kf.from(e));var r=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>r){var n=t==="rmd160"?new Oy:By(t);e=n.update(e).digest()}else e.length<r&&(e=kf.concat([e,rq],r));for(var s=this._ipad=kf.allocUnsafe(r),i=this._opad=kf.allocUnsafe(r),u=0;u<r;u++)s[u]=e[u]^54,i[u]=e[u]^92;this._hash=t==="rmd160"?new Oy:By(t),this._hash.update(s)}X$(jh,SI);jh.prototype._update=function(t){this._hash.update(t)};jh.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new Oy:By(this._alg);return e.update(this._opad).update(t).digest()};var II=function(e,r){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new jh("rmd160",r):e==="md5"?new eq(tq,r):new jh(e,r)};const nq={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},iq={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sq={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},aq={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},oq={sign:"ecdsa",hash:"sha256",id:""},lq={sign:"ecdsa",hash:"sha224",id:""},uq={sign:"ecdsa",hash:"sha384",id:""},fq={sign:"ecdsa",hash:"sha512",id:""},hq={sign:"dsa",hash:"sha1",id:""},cq={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},dq={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},TI={sha224WithRSAEncryption:nq,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:iq,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:sq,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:aq,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:oq,sha224:lq,sha384:uq,sha512:fq,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:hq,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:cq,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:dq,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var pq=TI,xm={},mq=Math.pow(2,30)-1,AI=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>mq||e!==e)throw new TypeError("Bad key length")},Qd;if(jt.process&&jt.process.browser)Qd="utf-8";else if(jt.process&&jt.process.version){var vq=parseInt(process.version.split(".")[0].slice(1),10);Qd=vq>=6?"utf-8":"binary"}else Qd="utf-8";var RI=Qd,Jv=Rt.Buffer,kI=function(t,e,r){if(Jv.isBuffer(t))return t;if(typeof t=="string")return Jv.from(t,e);if(ArrayBuffer.isView(t))return Jv.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")},gq=EI,yq=r_,wq=n_,ao=Rt.Buffer,_q=AI,h4=RI,c4=kI,bq=ao.alloc(128),Yd={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function PI(t,e,r){var n=xq(t),s=t==="sha512"||t==="sha384"?128:64;e.length>s?e=n(e):e.length<s&&(e=ao.concat([e,bq],s));for(var i=ao.allocUnsafe(s+Yd[t]),u=ao.allocUnsafe(s+Yd[t]),c=0;c<s;c++)i[c]=e[c]^54,u[c]=e[c]^92;var v=ao.allocUnsafe(s+r+4);i.copy(v,0,0,s),this.ipad1=v,this.ipad2=i,this.opad=u,this.alg=t,this.blocksize=s,this.hash=n,this.size=Yd[t]}PI.prototype.run=function(t,e){t.copy(e,this.blocksize);var r=this.hash(e);return r.copy(this.opad,this.blocksize),this.hash(this.opad)};function xq(t){function e(n){return wq(t).update(n).digest()}function r(n){return new yq().update(n).digest()}return t==="rmd160"||t==="ripemd160"?r:t==="md5"?gq:e}function Mq(t,e,r,n,s){_q(r,n),t=c4(t,h4,"Password"),e=c4(e,h4,"Salt"),s=s||"sha1";var i=new PI(s,t,e.length),u=ao.allocUnsafe(n),c=ao.allocUnsafe(e.length+4);e.copy(c,0,0,e.length);for(var v=0,_=Yd[s],b=Math.ceil(n/_),x=1;x<=b;x++){c.writeUInt32BE(x,e.length);for(var S=i.run(c,i.ipad1),I=S,A=1;A<r;A++){I=i.run(I,i.ipad2);for(var k=0;k<_;k++)S[k]^=I[k]}S.copy(u,v),v+=_}return u}var CI=Mq,NI=Rt.Buffer,Eq=AI,d4=RI,p4=CI,m4=kI,md,eh=jt.crypto&&jt.crypto.subtle,Sq={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},Xv=[];function Iq(t){if(jt.process&&!jt.process.browser||!eh||!eh.importKey||!eh.deriveBits)return Promise.resolve(!1);if(Xv[t]!==void 0)return Xv[t];md=md||NI.alloc(8);var e=DI(md,md,10,128,t).then(function(){return!0}).catch(function(){return!1});return Xv[t]=e,e}var La;function Ly(){return La||(jt.process&&jt.process.nextTick?La=jt.process.nextTick:jt.queueMicrotask?La=jt.queueMicrotask:jt.setImmediate?La=jt.setImmediate:La=jt.setTimeout,La)}function DI(t,e,r,n,s){return eh.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(i){return eh.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:s}},i,n<<3)}).then(function(i){return NI.from(i)})}function Tq(t,e){t.then(function(r){Ly()(function(){e(null,r)})},function(r){Ly()(function(){e(r)})})}var Aq=function(t,e,r,n,s,i){typeof s=="function"&&(i=s,s=void 0),s=s||"sha1";var u=Sq[s.toLowerCase()];if(!u||typeof jt.Promise!="function"){Ly()(function(){var c;try{c=p4(t,e,r,n,s)}catch(v){return i(v)}i(null,c)});return}if(Eq(r,n),t=m4(t,d4,"Password"),e=m4(e,d4,"Salt"),typeof i!="function")throw new Error("No callback provided to pbkdf2");Tq(Iq(u).then(function(c){return c?DI(t,e,r,n,u):p4(t,e,r,n,s)}),i)};xm.pbkdf2=Aq;xm.pbkdf2Sync=CI;var xi={},Au={},qn={};qn.readUInt32BE=function(e,r){var n=e[0+r]<<24|e[1+r]<<16|e[2+r]<<8|e[3+r];return n>>>0};qn.writeUInt32BE=function(e,r,n){e[0+n]=r>>>24,e[1+n]=r>>>16&255,e[2+n]=r>>>8&255,e[3+n]=r&255};qn.ip=function(e,r,n,s){for(var i=0,u=0,c=6;c>=0;c-=2){for(var v=0;v<=24;v+=8)i<<=1,i|=r>>>v+c&1;for(var v=0;v<=24;v+=8)i<<=1,i|=e>>>v+c&1}for(var c=6;c>=0;c-=2){for(var v=1;v<=25;v+=8)u<<=1,u|=r>>>v+c&1;for(var v=1;v<=25;v+=8)u<<=1,u|=e>>>v+c&1}n[s+0]=i>>>0,n[s+1]=u>>>0};qn.rip=function(e,r,n,s){for(var i=0,u=0,c=0;c<4;c++)for(var v=24;v>=0;v-=8)i<<=1,i|=r>>>v+c&1,i<<=1,i|=e>>>v+c&1;for(var c=4;c<8;c++)for(var v=24;v>=0;v-=8)u<<=1,u|=r>>>v+c&1,u<<=1,u|=e>>>v+c&1;n[s+0]=i>>>0,n[s+1]=u>>>0};qn.pc1=function(e,r,n,s){for(var i=0,u=0,c=7;c>=5;c--){for(var v=0;v<=24;v+=8)i<<=1,i|=r>>v+c&1;for(var v=0;v<=24;v+=8)i<<=1,i|=e>>v+c&1}for(var v=0;v<=24;v+=8)i<<=1,i|=r>>v+c&1;for(var c=1;c<=3;c++){for(var v=0;v<=24;v+=8)u<<=1,u|=r>>v+c&1;for(var v=0;v<=24;v+=8)u<<=1,u|=e>>v+c&1}for(var v=0;v<=24;v+=8)u<<=1,u|=e>>v+c&1;n[s+0]=i>>>0,n[s+1]=u>>>0};qn.r28shl=function(e,r){return e<<r&268435455|e>>>28-r};var vd=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];qn.pc2=function(e,r,n,s){for(var i=0,u=0,c=vd.length>>>1,v=0;v<c;v++)i<<=1,i|=e>>>vd[v]&1;for(var v=c;v<vd.length;v++)u<<=1,u|=r>>>vd[v]&1;n[s+0]=i>>>0,n[s+1]=u>>>0};qn.expand=function(e,r,n){var s=0,i=0;s=(e&1)<<5|e>>>27;for(var u=23;u>=15;u-=4)s<<=6,s|=e>>>u&63;for(var u=11;u>=3;u-=4)i|=e>>>u&63,i<<=6;i|=(e&31)<<1|e>>>31,r[n+0]=s>>>0,r[n+1]=i>>>0};var v4=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];qn.substitute=function(e,r){for(var n=0,s=0;s<4;s++){var i=e>>>18-s*6&63,u=v4[s*64+i];n<<=4,n|=u}for(var s=0;s<4;s++){var i=r>>>18-s*6&63,u=v4[4*64+s*64+i];n<<=4,n|=u}return n>>>0};var g4=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];qn.permute=function(e){for(var r=0,n=0;n<g4.length;n++)r<<=1,r|=e>>>g4[n]&1;return r>>>0};qn.padSplit=function(e,r,n){for(var s=e.toString(2);s.length<r;)s="0"+s;for(var i=[],u=0;u<r;u+=n)i.push(s.slice(u,u+n));return i.join(" ")};var ni=OI;function OI(t,e){if(!t)throw new Error(e||"Assertion failed")}OI.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Rq=ni;function ii(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}var s_=ii;ii.prototype._init=function(){};ii.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};ii.prototype._buffer=function(e,r){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-r),s=0;s<n;s++)this.buffer[this.bufferOff+s]=e[r+s];return this.bufferOff+=n,n};ii.prototype._flushBuffer=function(e,r){return this._update(this.buffer,0,e,r),this.bufferOff=0,this.blockSize};ii.prototype._updateEncrypt=function(e){var r=0,n=0,s=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(s*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(e,r),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var u=e.length-(e.length-r)%this.blockSize;r<u;r+=this.blockSize)this._update(e,r,i,n),n+=this.blockSize;for(;r<e.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=e[r];return i};ii.prototype._updateDecrypt=function(e){for(var r=0,n=0,s=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(s*this.blockSize);s>0;s--)r+=this._buffer(e,r),n+=this._flushBuffer(i,n);return r+=this._buffer(e,r),i};ii.prototype.final=function(e){var r;e&&(r=this.update(e));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),r?r.concat(n):n};ii.prototype._pad=function(e,r){if(r===0)return!1;for(;r<e.length;)e[r++]=0;return!0};ii.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};ii.prototype._unpad=function(e){return e};ii.prototype._finalDecrypt=function(){Rq.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var BI=ni,kq=kt,kr=qn,LI=s_;function Pq(){this.tmp=new Array(2),this.keys=null}function Hi(t){LI.call(this,t);var e=new Pq;this._desState=e,this.deriveKeys(e,t.key)}kq(Hi,LI);var VI=Hi;Hi.create=function(e){return new Hi(e)};var Cq=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Hi.prototype.deriveKeys=function(e,r){e.keys=new Array(16*2),BI.equal(r.length,this.blockSize,"Invalid key length");var n=kr.readUInt32BE(r,0),s=kr.readUInt32BE(r,4);kr.pc1(n,s,e.tmp,0),n=e.tmp[0],s=e.tmp[1];for(var i=0;i<e.keys.length;i+=2){var u=Cq[i>>>1];n=kr.r28shl(n,u),s=kr.r28shl(s,u),kr.pc2(n,s,e.keys,i)}};Hi.prototype._update=function(e,r,n,s){var i=this._desState,u=kr.readUInt32BE(e,r),c=kr.readUInt32BE(e,r+4);kr.ip(u,c,i.tmp,0),u=i.tmp[0],c=i.tmp[1],this.type==="encrypt"?this._encrypt(i,u,c,i.tmp,0):this._decrypt(i,u,c,i.tmp,0),u=i.tmp[0],c=i.tmp[1],kr.writeUInt32BE(n,u,s),kr.writeUInt32BE(n,c,s+4)};Hi.prototype._pad=function(e,r){if(this.padding===!1)return!1;for(var n=e.length-r,s=r;s<e.length;s++)e[s]=n;return!0};Hi.prototype._unpad=function(e){if(this.padding===!1)return e;for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)BI.equal(e[n],r);return e.slice(0,e.length-r)};Hi.prototype._encrypt=function(e,r,n,s,i){for(var u=r,c=n,v=0;v<e.keys.length;v+=2){var _=e.keys[v],b=e.keys[v+1];kr.expand(c,e.tmp,0),_^=e.tmp[0],b^=e.tmp[1];var x=kr.substitute(_,b),S=kr.permute(x),I=c;c=(u^S)>>>0,u=I}kr.rip(c,u,s,i)};Hi.prototype._decrypt=function(e,r,n,s,i){for(var u=n,c=r,v=e.keys.length-2;v>=0;v-=2){var _=e.keys[v],b=e.keys[v+1];kr.expand(u,e.tmp,0),_^=e.tmp[0],b^=e.tmp[1];var x=kr.substitute(_,b),S=kr.permute(x),I=u;u=(c^S)>>>0,c=I}kr.rip(u,c,s,i)};var jI={},Nq=ni,Dq=kt,sp={};function Oq(t){Nq.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function Bq(t){function e(i){t.call(this,i),this._cbcInit()}Dq(e,t);for(var r=Object.keys(sp),n=0;n<r.length;n++){var s=r[n];e.prototype[s]=sp[s]}return e.create=function(u){return new e(u)},e}jI.instantiate=Bq;sp._cbcInit=function(){var e=new Oq(this.options.iv);this._cbcState=e};sp._update=function(e,r,n,s){var i=this._cbcState,u=this.constructor.super_.prototype,c=i.iv;if(this.type==="encrypt"){for(var v=0;v<this.blockSize;v++)c[v]^=e[r+v];u._update.call(this,c,0,n,s);for(var v=0;v<this.blockSize;v++)c[v]=n[s+v]}else{u._update.call(this,e,r,n,s);for(var v=0;v<this.blockSize;v++)n[s+v]^=c[v];for(var v=0;v<this.blockSize;v++)c[v]=e[r+v]}};var Lq=ni,Vq=kt,FI=s_,Ks=VI;function jq(t,e){Lq.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),s=e.slice(16,24);t==="encrypt"?this.ciphers=[Ks.create({type:"encrypt",key:r}),Ks.create({type:"decrypt",key:n}),Ks.create({type:"encrypt",key:s})]:this.ciphers=[Ks.create({type:"decrypt",key:s}),Ks.create({type:"encrypt",key:n}),Ks.create({type:"decrypt",key:r})]}function ko(t){FI.call(this,t);var e=new jq(this.type,this.options.key);this._edeState=e}Vq(ko,FI);var Fq=ko;ko.create=function(e){return new ko(e)};ko.prototype._update=function(e,r,n,s){var i=this._edeState;i.ciphers[0]._update(e,r,n,s),i.ciphers[1]._update(n,s,n,s),i.ciphers[2]._update(n,s,n,s)};ko.prototype._pad=Ks.prototype._pad;ko.prototype._unpad=Ks.prototype._unpad;Au.utils=qn;Au.Cipher=s_;Au.DES=VI;Au.CBC=jI;Au.EDE=Fq;var UI=Pa,rs=Au,Uq=kt,Ja=Rt.Buffer,Fh={"des-ede3-cbc":rs.CBC.instantiate(rs.EDE),"des-ede3":rs.EDE,"des-ede-cbc":rs.CBC.instantiate(rs.EDE),"des-ede":rs.EDE,"des-cbc":rs.CBC.instantiate(rs.DES),"des-ecb":rs.DES};Fh.des=Fh["des-cbc"];Fh.des3=Fh["des-ede3-cbc"];var zq=Mm;Uq(Mm,UI);function Mm(t){UI.call(this);var e=t.mode.toLowerCase(),r=Fh[e],n;t.decrypt?n="decrypt":n="encrypt";var s=t.key;Ja.isBuffer(s)||(s=Ja.from(s)),(e==="des-ede"||e==="des-ede-cbc")&&(s=Ja.concat([s,s.slice(0,8)]));var i=t.iv;Ja.isBuffer(i)||(i=Ja.from(i)),this._des=r.create({key:s,iv:i,type:n})}Mm.prototype._update=function(t){return Ja.from(this._des.update(t))};Mm.prototype._final=function(){return Ja.from(this._des.final())};var Un={},a_={},o_={};o_.encrypt=function(t,e){return t._cipher.encryptBlock(e)};o_.decrypt=function(t,e){return t._cipher.decryptBlock(e)};var l_={},gc=function(e,r){for(var n=Math.min(e.length,r.length),s=new Buffer(n),i=0;i<n;++i)s[i]=e[i]^r[i];return s},zI=gc;l_.encrypt=function(t,e){var r=zI(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev};l_.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return zI(n,r)};var $I={},Pf=Rt.Buffer,$q=gc;function y4(t,e,r){var n=e.length,s=$q(e,t._cache);return t._cache=t._cache.slice(n),t._prev=Pf.concat([t._prev,r?e:s]),s}$I.encrypt=function(t,e,r){for(var n=Pf.allocUnsafe(0),s;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=Pf.allocUnsafe(0)),t._cache.length<=e.length)s=t._cache.length,n=Pf.concat([n,y4(t,e.slice(0,s),r)]),e=e.slice(s);else{n=Pf.concat([n,y4(t,e,r)]);break}return n};var qI={},Vy=Rt.Buffer;function qq(t,e,r){var n=t._cipher.encryptBlock(t._prev),s=n[0]^e;return t._prev=Vy.concat([t._prev.slice(1),Vy.from([r?e:s])]),s}qI.encrypt=function(t,e,r){for(var n=e.length,s=Vy.allocUnsafe(n),i=-1;++i<n;)s[i]=qq(t,e[i],r);return s};var KI={},Jd=Rt.Buffer;function Kq(t,e,r){for(var n,s=-1,i=8,u=0,c,v;++s<i;)n=t._cipher.encryptBlock(t._prev),c=e&1<<7-s?128:0,v=n[0]^c,u+=(v&128)>>s%8,t._prev=Hq(t._prev,r?c:v);return u}function Hq(t,e){var r=t.length,n=-1,s=Jd.allocUnsafe(t.length);for(t=Jd.concat([t,Jd.from([e])]);++n<r;)s[n]=t[n]<<1|t[n+1]>>7;return s}KI.encrypt=function(t,e,r){for(var n=e.length,s=Jd.allocUnsafe(n),i=-1;++i<n;)s[i]=Kq(t,e[i],r);return s};var HI={},Wq=gc;function Gq(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}HI.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer.concat([t._cache,Gq(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),Wq(e,r)};var jy={};function Zq(t){for(var e=t.length,r;e--;)if(r=t.readUInt8(e),r===255)t.writeUInt8(0,e);else{r++,t.writeUInt8(r,e);break}}var WI=Zq,Qq=gc,w4=Rt.Buffer,Yq=WI;function Jq(t){var e=t._cipher.encryptBlockRaw(t._prev);return Yq(t._prev),e}var eg=16;jy.encrypt=function(t,e){var r=Math.ceil(e.length/eg),n=t._cache.length;t._cache=w4.concat([t._cache,w4.allocUnsafe(r*eg)]);for(var s=0;s<r;s++){var i=Jq(t),u=n+s*eg;t._cache.writeUInt32BE(i[0],u+0),t._cache.writeUInt32BE(i[1],u+4),t._cache.writeUInt32BE(i[2],u+8),t._cache.writeUInt32BE(i[3],u+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),Qq(e,c)};const Xq={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},eK={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},tK={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},GI={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:Xq,aes192:eK,aes256:tK,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var rK={ECB:o_,CBC:l_,CFB:$I,CFB8:qI,CFB1:KI,OFB:HI,CTR:jy,GCM:jy},Xd=GI;for(var _4 in Xd)Xd[_4].module=rK[Xd[_4].mode];var u_=Xd,yc={},ap=Rt.Buffer;function f_(t){ap.isBuffer(t)||(t=ap.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(n*4);return r}function tg(t){for(var e=0;e<t.length;t++)t[e]=0}function ZI(t,e,r,n,s){for(var i=r[0],u=r[1],c=r[2],v=r[3],_=t[0]^e[0],b=t[1]^e[1],x=t[2]^e[2],S=t[3]^e[3],I,A,k,F,C=4,R=1;R<s;R++)I=i[_>>>24]^u[b>>>16&255]^c[x>>>8&255]^v[S&255]^e[C++],A=i[b>>>24]^u[x>>>16&255]^c[S>>>8&255]^v[_&255]^e[C++],k=i[x>>>24]^u[S>>>16&255]^c[_>>>8&255]^v[b&255]^e[C++],F=i[S>>>24]^u[_>>>16&255]^c[b>>>8&255]^v[x&255]^e[C++],_=I,b=A,x=k,S=F;return I=(n[_>>>24]<<24|n[b>>>16&255]<<16|n[x>>>8&255]<<8|n[S&255])^e[C++],A=(n[b>>>24]<<24|n[x>>>16&255]<<16|n[S>>>8&255]<<8|n[_&255])^e[C++],k=(n[x>>>24]<<24|n[S>>>16&255]<<16|n[_>>>8&255]<<8|n[b&255])^e[C++],F=(n[S>>>24]<<24|n[_>>>16&255]<<16|n[b>>>8&255]<<8|n[x&255])^e[C++],I=I>>>0,A=A>>>0,k=k>>>0,F=F>>>0,[I,A,k,F]}var nK=[0,1,2,4,8,16,32,64,128,27,54],xr=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var r=[],n=[],s=[[],[],[],[]],i=[[],[],[],[]],u=0,c=0,v=0;v<256;++v){var _=c^c<<1^c<<2^c<<3^c<<4;_=_>>>8^_&255^99,r[u]=_,n[_]=u;var b=t[u],x=t[b],S=t[x],I=t[_]*257^_*16843008;s[0][u]=I<<24|I>>>8,s[1][u]=I<<16|I>>>16,s[2][u]=I<<8|I>>>24,s[3][u]=I,I=S*16843009^x*65537^b*257^u*16843008,i[0][_]=I<<24|I>>>8,i[1][_]=I<<16|I>>>16,i[2][_]=I<<8|I>>>24,i[3][_]=I,u===0?u=c=1:(u=b^t[t[t[S^b]]],c^=t[t[c]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:s,INV_SUB_MIX:i}}();function ti(t){this._key=f_(t),this._reset()}ti.blockSize=4*4;ti.keySize=256/8;ti.prototype.blockSize=ti.blockSize;ti.prototype.keySize=ti.keySize;ti.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=(r+1)*4,s=[],i=0;i<e;i++)s[i]=t[i];for(i=e;i<n;i++){var u=s[i-1];i%e===0?(u=u<<8|u>>>24,u=xr.SBOX[u>>>24]<<24|xr.SBOX[u>>>16&255]<<16|xr.SBOX[u>>>8&255]<<8|xr.SBOX[u&255],u^=nK[i/e|0]<<24):e>6&&i%e===4&&(u=xr.SBOX[u>>>24]<<24|xr.SBOX[u>>>16&255]<<16|xr.SBOX[u>>>8&255]<<8|xr.SBOX[u&255]),s[i]=s[i-e]^u}for(var c=[],v=0;v<n;v++){var _=n-v,b=s[_-(v%4?0:4)];v<4||_<=4?c[v]=b:c[v]=xr.INV_SUB_MIX[0][xr.SBOX[b>>>24]]^xr.INV_SUB_MIX[1][xr.SBOX[b>>>16&255]]^xr.INV_SUB_MIX[2][xr.SBOX[b>>>8&255]]^xr.INV_SUB_MIX[3][xr.SBOX[b&255]]}this._nRounds=r,this._keySchedule=s,this._invKeySchedule=c};ti.prototype.encryptBlockRaw=function(t){return t=f_(t),ZI(t,this._keySchedule,xr.SUB_MIX,xr.SBOX,this._nRounds)};ti.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=ap.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r};ti.prototype.decryptBlock=function(t){t=f_(t);var e=t[1];t[1]=t[3],t[3]=e;var r=ZI(t,this._invKeySchedule,xr.INV_SUB_MIX,xr.INV_SBOX,this._nRounds),n=ap.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n};ti.prototype.scrub=function(){tg(this._keySchedule),tg(this._invKeySchedule),tg(this._key)};yc.AES=ti;var au=Rt.Buffer,iK=au.alloc(16,0);function sK(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function QI(t){var e=au.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function wc(t){this.h=t,this.state=au.alloc(16,0),this.cache=au.allocUnsafe(0)}wc.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};wc.prototype._multiply=function(){for(var t=sK(this.h),e=[0,0,0,0],r,n,s,i=-1;++i<128;){for(n=(this.state[~~(i/8)]&1<<7-i%8)!==0,n&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),s=(t[3]&1)!==0,r=3;r>0;r--)t[r]=t[r]>>>1|(t[r-1]&1)<<31;t[0]=t[0]>>>1,s&&(t[0]=t[0]^225<<24)}this.state=QI(e)};wc.prototype.update=function(t){this.cache=au.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};wc.prototype.final=function(t,e){return this.cache.length&&this.ghash(au.concat([this.cache,iK],16)),this.ghash(QI([0,t,0,e])),this.state};var aK=wc,oK=yc,bn=Rt.Buffer,YI=Pa,lK=kt,JI=aK,uK=gc,fK=WI;function hK(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),s=0;s<n;++s)r+=t[s]^e[s];return r}function cK(t,e,r){if(e.length===12)return t._finID=bn.concat([e,bn.from([0,0,0,1])]),bn.concat([e,bn.from([0,0,0,2])]);var n=new JI(r),s=e.length,i=s%16;n.update(e),i&&(i=16-i,n.update(bn.alloc(i,0))),n.update(bn.alloc(8,0));var u=s*8,c=bn.alloc(8);c.writeUIntBE(u,0,8),n.update(c),t._finID=n.state;var v=bn.from(t._finID);return fK(v),v}function jo(t,e,r,n){YI.call(this);var s=bn.alloc(4,0);this._cipher=new oK.AES(e);var i=this._cipher.encryptBlock(s);this._ghash=new JI(i),r=cK(this,r,i),this._prev=bn.from(r),this._cache=bn.allocUnsafe(0),this._secCache=bn.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}lK(jo,YI);jo.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=bn.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r};jo.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=uK(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&hK(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};jo.prototype.getAuthTag=function(){if(this._decrypt||!bn.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};jo.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};jo.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};var XI=jo,dK=yc,rg=Rt.Buffer,eT=Pa,pK=kt;function Em(t,e,r,n){eT.call(this),this._cipher=new dK.AES(e),this._prev=rg.from(r),this._cache=rg.allocUnsafe(0),this._secCache=rg.allocUnsafe(0),this._decrypt=n,this._mode=t}pK(Em,eT);Em.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};Em.prototype._final=function(){this._cipher.scrub()};var tT=Em,Va=Rt.Buffer,mK=t_;function vK(t,e,r,n){if(Va.isBuffer(t)||(t=Va.from(t,"binary")),e&&(Va.isBuffer(e)||(e=Va.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,i=Va.alloc(s),u=Va.alloc(n||0),c=Va.alloc(0);s>0||n>0;){var v=new mK;v.update(c),v.update(t),e&&v.update(e),c=v.digest();var _=0;if(s>0){var b=i.length-s;_=Math.min(s,c.length),c.copy(i,b,0,_),s-=_}if(_<c.length&&n>0){var x=u.length-n,S=Math.min(n,c.length-_);c.copy(u,x,_,_+S),n-=S}}return c.fill(0),{key:i,iv:u}}var Sm=vK,rT=u_,gK=XI,bs=Rt.Buffer,yK=tT,nT=Pa,wK=yc,_K=Sm,bK=kt;function _c(t,e,r){nT.call(this),this._cache=new Im,this._cipher=new wK.AES(e),this._prev=bs.from(r),this._mode=t,this._autopadding=!0}bK(_c,nT);_c.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return bs.concat(n)};var xK=bs.alloc(16,16);_c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(xK))throw this._cipher.scrub(),new Error("data not multiple of block length")};_c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Im(){this.cache=bs.allocUnsafe(0)}Im.prototype.add=function(t){this.cache=bs.concat([this.cache,t])};Im.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};Im.prototype.flush=function(){for(var t=16-this.cache.length,e=bs.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return bs.concat([this.cache,e])};function iT(t,e,r){var n=rT[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=bs.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if(typeof r=="string"&&(r=bs.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return n.type==="stream"?new yK(n.module,e,r):n.type==="auth"?new gK(n.module,e,r):new _c(n.module,e,r)}function MK(t,e){var r=rT[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=_K(e,!1,r.key,r.iv);return iT(t,n.key,n.iv)}a_.createCipheriv=iT;a_.createCipher=MK;var h_={},EK=XI,ou=Rt.Buffer,sT=u_,SK=tT,aT=Pa,IK=yc,TK=Sm,AK=kt;function bc(t,e,r){aT.call(this),this._cache=new Tm,this._last=void 0,this._cipher=new IK.AES(e),this._prev=ou.from(r),this._mode=t,this._autopadding=!0}AK(bc,aT);bc.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return ou.concat(n)};bc.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return RK(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};bc.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Tm(){this.cache=ou.allocUnsafe(0)}Tm.prototype.add=function(t){this.cache=ou.concat([this.cache,t])};Tm.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};Tm.prototype.flush=function(){if(this.cache.length)return this.cache};function RK(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var r=-1;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function oT(t,e,r){var n=sT[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof r=="string"&&(r=ou.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if(typeof e=="string"&&(e=ou.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return n.type==="stream"?new SK(n.module,e,r,!0):n.type==="auth"?new EK(n.module,e,r,!0):new bc(n.module,e,r)}function kK(t,e){var r=sT[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=TK(e,!1,r.key,r.iv);return oT(t,n.key,n.iv)}h_.createDecipher=kK;h_.createDecipheriv=oT;var lT=a_,uT=h_,PK=GI;function CK(){return Object.keys(PK)}Un.createCipher=Un.Cipher=lT.createCipher;Un.createCipheriv=Un.Cipheriv=lT.createCipheriv;Un.createDecipher=Un.Decipher=uT.createDecipher;Un.createDecipheriv=Un.Decipheriv=uT.createDecipheriv;Un.listCiphers=Un.getCiphers=CK;var fT={};(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(fT);var hT=zq,c_=Un,pa=u_,cs=fT,cT=Sm;function NK(t,e){t=t.toLowerCase();var r,n;if(pa[t])r=pa[t].key,n=pa[t].iv;else if(cs[t])r=cs[t].key*8,n=cs[t].iv;else throw new TypeError("invalid suite type");var s=cT(e,!1,r,n);return dT(t,s.key,s.iv)}function DK(t,e){t=t.toLowerCase();var r,n;if(pa[t])r=pa[t].key,n=pa[t].iv;else if(cs[t])r=cs[t].key*8,n=cs[t].iv;else throw new TypeError("invalid suite type");var s=cT(e,!1,r,n);return pT(t,s.key,s.iv)}function dT(t,e,r){if(t=t.toLowerCase(),pa[t])return c_.createCipheriv(t,e,r);if(cs[t])return new hT({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function pT(t,e,r){if(t=t.toLowerCase(),pa[t])return c_.createDecipheriv(t,e,r);if(cs[t])return new hT({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function OK(){return Object.keys(cs).concat(c_.getCiphers())}xi.createCipher=xi.Cipher=NK;xi.createCipheriv=xi.Cipheriv=dT;xi.createDecipher=xi.Decipher=DK;xi.createDecipheriv=xi.Decipheriv=pT;xi.listCiphers=xi.getCiphers=OK;var ja={},d_={exports:{}};d_.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(d_);var mT=d_.exports,p_={exports:{}};p_.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(p_);var BK=p_.exports,gd={exports:{}},b4;function m_(){if(b4)return gd.exports;b4=1;var t;gd.exports=function(s){return t||(t=new e(null)),t.generate(s)};function e(n){this.rand=n}if(gd.exports.Rand=e,e.prototype.generate=function(s){return this._rand(s)},e.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var i=new Uint8Array(s),u=0;u<i.length;u++)i[u]=this.rand.getByte();return i},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(s){var i=new Uint8Array(s);return self.crypto.getRandomValues(i),i}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(s){var i=new Uint8Array(s);return self.msCrypto.getRandomValues(i),i}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=mA();if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(s){return r.randomBytes(s)}}catch{}return gd.exports}var ng,x4;function vT(){if(x4)return ng;x4=1;var t=BK,e=m_();function r(n){this.rand=n||new e.Rand}return ng=r,r.create=function(s){return new r(s)},r.prototype._randbelow=function(s){var i=s.bitLength(),u=Math.ceil(i/8);do var c=new t(this.rand.generate(u));while(c.cmp(s)>=0);return c},r.prototype._randrange=function(s,i){var u=i.sub(s);return s.add(this._randbelow(u))},r.prototype.test=function(s,i,u){var c=s.bitLength(),v=t.mont(s),_=new t(1).toRed(v);i||(i=Math.max(1,c/48|0));for(var b=s.subn(1),x=0;!b.testn(x);x++);for(var S=s.shrn(x),I=b.toRed(v),A=!0;i>0;i--){var k=this._randrange(new t(2),b);u&&u(k);var F=k.toRed(v).redPow(S);if(!(F.cmp(_)===0||F.cmp(I)===0)){for(var C=1;C<x;C++){if(F=F.redSqr(),F.cmp(_)===0)return!1;if(F.cmp(I)===0)break}if(C===x)return!1}}return A},r.prototype.getDivisor=function(s,i){var u=s.bitLength(),c=t.mont(s),v=new t(1).toRed(c);i||(i=Math.max(1,u/48|0));for(var _=s.subn(1),b=0;!_.testn(b);b++);for(var x=s.shrn(b),S=_.toRed(c);i>0;i--){var I=this._randrange(new t(2),_),A=s.gcd(I);if(A.cmpn(1)!==0)return A;var k=I.toRed(c).redPow(x);if(!(k.cmp(v)===0||k.cmp(S)===0)){for(var F=1;F<b;F++){if(k=k.redSqr(),k.cmp(v)===0)return k.fromRed().subn(1).gcd(s);if(k.cmp(S)===0)break}if(F===b)return k=k.redSqr(),k.fromRed().subn(1).gcd(s)}}return!1},ng}var ig,M4;function gT(){if(M4)return ig;M4=1;var t=Iu;ig=F,F.simpleSieve=A,F.fermatTest=k;var e=mT,r=new e(24),n=vT(),s=new n,i=new e(1),u=new e(2),c=new e(5);new e(16),new e(8);var v=new e(10),_=new e(3);new e(7);var b=new e(11),x=new e(4);new e(12);var S=null;function I(){if(S!==null)return S;var C=1048576,R=[];R[0]=2;for(var V=1,U=3;U<C;U+=2){for(var Q=Math.ceil(Math.sqrt(U)),ee=0;ee<V&&R[ee]<=Q&&U%R[ee]!==0;ee++);V!==ee&&R[ee]<=Q||(R[V++]=U)}return S=R,R}function A(C){for(var R=I(),V=0;V<R.length;V++)if(C.modn(R[V])===0)return C.cmpn(R[V])===0;return!0}function k(C){var R=e.mont(C);return u.toRed(R).redPow(C.subn(1)).fromRed().cmpn(1)===0}function F(C,R){if(C<16)return R===2||R===5?new e([140,123]):new e([140,39]);R=new e(R);for(var V,U;;){for(V=new e(t(Math.ceil(C/8)));V.bitLength()>C;)V.ishrn(1);if(V.isEven()&&V.iadd(i),V.testn(1)||V.iadd(u),R.cmp(u)){if(!R.cmp(c))for(;V.mod(v).cmp(_);)V.iadd(x)}else for(;V.mod(r).cmp(b);)V.iadd(x);if(U=V.shrn(1),A(U)&&A(V)&&k(U)&&k(V)&&s.test(U)&&s.test(V))return V}}return ig}const LK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},VK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},jK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},FK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},UK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},zK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},$K={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},qK={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},KK={modp1:LK,modp2:VK,modp5:jK,modp14:FK,modp15:UK,modp16:zK,modp17:$K,modp18:qK};var sg,E4;function HK(){if(E4)return sg;E4=1;var t=mT,e=vT(),r=new e,n=new t(24),s=new t(11),i=new t(10),u=new t(3),c=new t(7),v=gT(),_=Iu;sg=A;function b(F,C){return C=C||"utf8",Buffer.isBuffer(F)||(F=new Buffer(F,C)),this._pub=new t(F),this}function x(F,C){return C=C||"utf8",Buffer.isBuffer(F)||(F=new Buffer(F,C)),this._priv=new t(F),this}var S={};function I(F,C){var R=C.toString("hex"),V=[R,F.toString(16)].join("_");if(V in S)return S[V];var U=0;if(F.isEven()||!v.simpleSieve||!v.fermatTest(F)||!r.test(F))return U+=1,R==="02"||R==="05"?U+=8:U+=4,S[V]=U,U;r.test(F.shrn(1))||(U+=2);var Q;switch(R){case"02":F.mod(n).cmp(s)&&(U+=8);break;case"05":Q=F.mod(i),Q.cmp(u)&&Q.cmp(c)&&(U+=8);break;default:U+=4}return S[V]=U,U}function A(F,C,R){this.setGenerator(C),this.__prime=new t(F),this._prime=t.mont(this.__prime),this._primeLen=F.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,R?(this.setPublicKey=b,this.setPrivateKey=x):this._primeCode=8}Object.defineProperty(A.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=I(this.__prime,this.__gen)),this._primeCode}}),A.prototype.generateKeys=function(){return this._priv||(this._priv=new t(_(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},A.prototype.computeSecret=function(F){F=new t(F),F=F.toRed(this._prime);var C=F.redPow(this._priv).fromRed(),R=new Buffer(C.toArray()),V=this.getPrime();if(R.length<V.length){var U=new Buffer(V.length-R.length);U.fill(0),R=Buffer.concat([U,R])}return R},A.prototype.getPublicKey=function(C){return k(this._pub,C)},A.prototype.getPrivateKey=function(C){return k(this._priv,C)},A.prototype.getPrime=function(F){return k(this.__prime,F)},A.prototype.getGenerator=function(F){return k(this._gen,F)},A.prototype.setGenerator=function(F,C){return C=C||"utf8",Buffer.isBuffer(F)||(F=new Buffer(F,C)),this.__gen=F,this._gen=new t(F),this};function k(F,C){var R=new Buffer(F.toArray());return C?R.toString(C):R}return sg}var S4;function WK(){if(S4)return ja;S4=1;var t=gT(),e=KK,r=HK();function n(u){var c=new Buffer(e[u].prime,"hex"),v=new Buffer(e[u].gen,"hex");return new r(c,v)}var s={binary:!0,hex:!0,base64:!0};function i(u,c,v,_){return Buffer.isBuffer(c)||s[c]===void 0?i(u,"binary",c,v):(c=c||"binary",_=_||"binary",v=v||new Buffer([2]),Buffer.isBuffer(v)||(v=new Buffer(v,_)),typeof u=="number"?new r(t(u,v),v,!0):(Buffer.isBuffer(u)||(u=new Buffer(u,c)),new r(u,v,!0)))}return ja.DiffieHellmanGroup=ja.createDiffieHellmanGroup=ja.getDiffieHellman=n,ja.createDiffieHellman=ja.DiffieHellman=i,ja}var Fy={exports:{}},Uy={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Uy.exports={nextTick:GK}:Uy.exports=process;function GK(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,i,u;switch(s){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(i=new Array(s-1),u=0;u<i.length;)i[u++]=arguments[u];return process.nextTick(function(){t.apply(null,i)})}}var Am=Uy.exports,ZK={}.toString,QK=Array.isArray||function(t){return ZK.call(t)=="[object Array]"},yT=wr.EventEmitter,zy={exports:{}};(function(t,e){var r=wr,n=r.Buffer;function s(u,c){for(var v in u)c[v]=u[v]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(u,c,v){return n(u,c,v)}s(n,i),i.from=function(u,c,v){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,c,v)},i.alloc=function(u,c,v){if(typeof u!="number")throw new TypeError("Argument must be a number");var _=n(u);return c!==void 0?typeof v=="string"?_.fill(c,v):_.fill(c):_.fill(0),_},i.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},i.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(zy,zy.exports);var v_=zy.exports,Tr={};function YK(t){return Array.isArray?Array.isArray(t):Rm(t)==="[object Array]"}Tr.isArray=YK;function JK(t){return typeof t=="boolean"}Tr.isBoolean=JK;function XK(t){return t===null}Tr.isNull=XK;function eH(t){return t==null}Tr.isNullOrUndefined=eH;function tH(t){return typeof t=="number"}Tr.isNumber=tH;function rH(t){return typeof t=="string"}Tr.isString=rH;function nH(t){return typeof t=="symbol"}Tr.isSymbol=nH;function iH(t){return t===void 0}Tr.isUndefined=iH;function sH(t){return Rm(t)==="[object RegExp]"}Tr.isRegExp=sH;function aH(t){return typeof t=="object"&&t!==null}Tr.isObject=aH;function oH(t){return Rm(t)==="[object Date]"}Tr.isDate=oH;function lH(t){return Rm(t)==="[object Error]"||t instanceof Error}Tr.isError=lH;function uH(t){return typeof t=="function"}Tr.isFunction=uH;function fH(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Tr.isPrimitive=fH;Tr.isBuffer=wr.Buffer.isBuffer;function Rm(t){return Object.prototype.toString.call(t)}var ag={exports:{}},I4;function hH(){return I4||(I4=1,function(t){function e(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}var r=v_.Buffer,n=wr;function s(i,u,c){i.copy(u,c)}t.exports=function(){function i(){e(this,i),this.head=null,this.tail=null,this.length=0}return i.prototype.push=function(c){var v={data:c,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length},i.prototype.unshift=function(c){var v={data:c,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length},i.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(c){if(this.length===0)return"";for(var v=this.head,_=""+v.data;v=v.next;)_+=c+v.data;return _},i.prototype.concat=function(c){if(this.length===0)return r.alloc(0);for(var v=r.allocUnsafe(c>>>0),_=this.head,b=0;_;)s(_.data,v,b),b+=_.data.length,_=_.next;return v},i}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var i=n.inspect({length:this.length});return this.constructor.name+" "+i})}(ag)),ag.exports}var yd=Am;function cH(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,yd.nextTick(wd,this,t)):yd.nextTick(wd,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(i){!e&&i?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,yd.nextTick(wd,r,i)):yd.nextTick(wd,r,i):e&&e(i)}),this)}function dH(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function wd(t,e){t.emit("error",e)}var wT={destroy:cH,undestroy:dH},pH=mH;function mH(t,e){if(og("noDeprecation"))return t;var r=!1;function n(){if(!r){if(og("throwDeprecation"))throw new Error(e);og("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function og(t){try{if(!jt.localStorage)return!1}catch{return!1}var e=jt.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var lg,T4;function _T(){if(T4)return lg;T4=1;var t=Am;lg=k;function e(y){var w=this;this.next=null,this.entry=null,this.finish=function(){m(w,y)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:t.nextTick,n;k.WritableState=I;var s=Object.create(Tr);s.inherits=kt;var i={deprecate:pH},u=yT,c=v_.Buffer,v=(typeof jt<"u"?jt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function _(y){return c.from(y)}function b(y){return c.isBuffer(y)||y instanceof v}var x=wT;s.inherits(k,u);function S(){}function I(y,w){n=n||lu(),y=y||{};var d=w instanceof n;this.objectMode=!!y.objectMode,d&&(this.objectMode=this.objectMode||!!y.writableObjectMode);var o=y.highWaterMark,p=y.writableHighWaterMark,E=this.objectMode?16:16*1024;o||o===0?this.highWaterMark=o:d&&(p||p===0)?this.highWaterMark=p:this.highWaterMark=E,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var T=y.decodeStrings===!1;this.decodeStrings=!T,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(z){j(w,z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}I.prototype.getBuffer=function(){for(var w=this.bufferedRequest,d=[];w;)d.push(w),w=w.next;return d},function(){try{Object.defineProperty(I.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var A;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(y){return A.call(this,y)?!0:this!==k?!1:y&&y._writableState instanceof I}})):A=function(y){return y instanceof this};function k(y){if(n=n||lu(),!A.call(k,this)&&!(this instanceof n))return new k(y);this._writableState=new I(y,this),this.writable=!0,y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final)),u.call(this)}k.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function F(y,w){var d=new Error("write after end");y.emit("error",d),t.nextTick(w,d)}function C(y,w,d,o){var p=!0,E=!1;return d===null?E=new TypeError("May not write null values to stream"):typeof d!="string"&&d!==void 0&&!w.objectMode&&(E=new TypeError("Invalid non-string/buffer chunk")),E&&(y.emit("error",E),t.nextTick(o,E),p=!1),p}k.prototype.write=function(y,w,d){var o=this._writableState,p=!1,E=!o.objectMode&&b(y);return E&&!c.isBuffer(y)&&(y=_(y)),typeof w=="function"&&(d=w,w=null),E?w="buffer":w||(w=o.defaultEncoding),typeof d!="function"&&(d=S),o.ended?F(this,d):(E||C(this,o,y,d))&&(o.pendingcb++,p=V(this,o,E,y,w,d)),p},k.prototype.cork=function(){var y=this._writableState;y.corked++},k.prototype.uncork=function(){var y=this._writableState;y.corked&&(y.corked--,!y.writing&&!y.corked&&!y.bufferProcessing&&y.bufferedRequest&&$(this,y))},k.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+w);return this._writableState.defaultEncoding=w,this};function R(y,w,d){return!y.objectMode&&y.decodeStrings!==!1&&typeof w=="string"&&(w=c.from(w,d)),w}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function V(y,w,d,o,p,E){if(!d){var T=R(w,o,p);o!==T&&(d=!0,p="buffer",o=T)}var z=w.objectMode?1:o.length;w.length+=z;var K=w.length<w.highWaterMark;if(K||(w.needDrain=!0),w.writing||w.corked){var Y=w.lastBufferedRequest;w.lastBufferedRequest={chunk:o,encoding:p,isBuf:d,callback:E,next:null},Y?Y.next=w.lastBufferedRequest:w.bufferedRequest=w.lastBufferedRequest,w.bufferedRequestCount+=1}else U(y,w,!1,z,o,p,E);return K}function U(y,w,d,o,p,E,T){w.writelen=o,w.writecb=T,w.writing=!0,w.sync=!0,d?y._writev(p,w.onwrite):y._write(p,E,w.onwrite),w.sync=!1}function Q(y,w,d,o,p){--w.pendingcb,d?(t.nextTick(p,o),t.nextTick(f,y,w),y._writableState.errorEmitted=!0,y.emit("error",o)):(p(o),y._writableState.errorEmitted=!0,y.emit("error",o),f(y,w))}function ee(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function j(y,w){var d=y._writableState,o=d.sync,p=d.writecb;if(ee(d),w)Q(y,d,o,w,p);else{var E=g(d);!E&&!d.corked&&!d.bufferProcessing&&d.bufferedRequest&&$(y,d),o?r(B,y,d,E,p):B(y,d,E,p)}}function B(y,w,d,o){d||D(y,w),w.pendingcb--,o(),f(y,w)}function D(y,w){w.length===0&&w.needDrain&&(w.needDrain=!1,y.emit("drain"))}function $(y,w){w.bufferProcessing=!0;var d=w.bufferedRequest;if(y._writev&&d&&d.next){var o=w.bufferedRequestCount,p=new Array(o),E=w.corkedRequestsFree;E.entry=d;for(var T=0,z=!0;d;)p[T]=d,d.isBuf||(z=!1),d=d.next,T+=1;p.allBuffers=z,U(y,w,!0,w.length,p,"",E.finish),w.pendingcb++,w.lastBufferedRequest=null,E.next?(w.corkedRequestsFree=E.next,E.next=null):w.corkedRequestsFree=new e(w),w.bufferedRequestCount=0}else{for(;d;){var K=d.chunk,Y=d.encoding,L=d.callback,H=w.objectMode?1:K.length;if(U(y,w,!1,H,K,Y,L),d=d.next,w.bufferedRequestCount--,w.writing)break}d===null&&(w.lastBufferedRequest=null)}w.bufferedRequest=d,w.bufferProcessing=!1}k.prototype._write=function(y,w,d){d(new Error("_write() is not implemented"))},k.prototype._writev=null,k.prototype.end=function(y,w,d){var o=this._writableState;typeof y=="function"?(d=y,y=null,w=null):typeof w=="function"&&(d=w,w=null),y!=null&&this.write(y,w),o.corked&&(o.corked=1,this.uncork()),o.ending||h(this,o,d)};function g(y){return y.ending&&y.length===0&&y.bufferedRequest===null&&!y.finished&&!y.writing}function a(y,w){y._final(function(d){w.pendingcb--,d&&y.emit("error",d),w.prefinished=!0,y.emit("prefinish"),f(y,w)})}function l(y,w){!w.prefinished&&!w.finalCalled&&(typeof y._final=="function"?(w.pendingcb++,w.finalCalled=!0,t.nextTick(a,y,w)):(w.prefinished=!0,y.emit("prefinish")))}function f(y,w){var d=g(w);return d&&(l(y,w),w.pendingcb===0&&(w.finished=!0,y.emit("finish"))),d}function h(y,w,d){w.ending=!0,f(y,w),d&&(w.finished?t.nextTick(d):y.once("finish",d)),w.ended=!0,y.writable=!1}function m(y,w,d){var o=y.entry;for(y.entry=null;o;){var p=o.callback;w.pendingcb--,p(d),o=o.next}w.corkedRequestsFree.next=y}return Object.defineProperty(k.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(y){this._writableState&&(this._writableState.destroyed=y)}}),k.prototype.destroy=x.destroy,k.prototype._undestroy=x.undestroy,k.prototype._destroy=function(y,w){this.end(),w(y)},lg}var ug,A4;function lu(){if(A4)return ug;A4=1;var t=Am,e=Object.keys||function(x){var S=[];for(var I in x)S.push(I);return S};ug=v;var r=Object.create(Tr);r.inherits=kt;var n=bT(),s=_T();r.inherits(v,n);for(var i=e(s.prototype),u=0;u<i.length;u++){var c=i[u];v.prototype[c]||(v.prototype[c]=s.prototype[c])}function v(x){if(!(this instanceof v))return new v(x);n.call(this,x),s.call(this,x),x&&x.readable===!1&&(this.readable=!1),x&&x.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,x&&x.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",_)}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _(){this.allowHalfOpen||this._writableState.ended||t.nextTick(b,this)}function b(x){x.end()}return Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}}),v.prototype._destroy=function(x,S){this.push(null),this.end(),t.nextTick(S,x)},ug}var fg,R4;function bT(){if(R4)return fg;R4=1;var t=Am;fg=R;var e=QK,r;R.ReadableState=C,wr.EventEmitter;var n=function(L,H){return L.listeners(H).length},s=yT,i=v_.Buffer,u=(typeof jt<"u"?jt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(L){return i.from(L)}function v(L){return i.isBuffer(L)||L instanceof u}var _=Object.create(Tr);_.inherits=kt;var b=wr,x=void 0;b&&b.debuglog?x=b.debuglog("stream"):x=function(){};var S=hH(),I=wT,A;_.inherits(R,s);var k=["error","close","destroy","pause","resume"];function F(L,H,Z){if(typeof L.prependListener=="function")return L.prependListener(H,Z);!L._events||!L._events[H]?L.on(H,Z):e(L._events[H])?L._events[H].unshift(Z):L._events[H]=[Z,L._events[H]]}function C(L,H){r=r||lu(),L=L||{};var Z=H instanceof r;this.objectMode=!!L.objectMode,Z&&(this.objectMode=this.objectMode||!!L.readableObjectMode);var X=L.highWaterMark,Ge=L.readableHighWaterMark,ne=this.objectMode?16:16*1024;X||X===0?this.highWaterMark=X:Z&&(Ge||Ge===0)?this.highWaterMark=Ge:this.highWaterMark=ne,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(A||(A=ip.StringDecoder),this.decoder=new A(L.encoding),this.encoding=L.encoding)}function R(L){if(r=r||lu(),!(this instanceof R))return new R(L);this._readableState=new C(L,this),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),s.call(this)}Object.defineProperty(R.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),R.prototype.destroy=I.destroy,R.prototype._undestroy=I.undestroy,R.prototype._destroy=function(L,H){this.push(null),H(L)},R.prototype.push=function(L,H){var Z=this._readableState,X;return Z.objectMode?X=!0:typeof L=="string"&&(H=H||Z.defaultEncoding,H!==Z.encoding&&(L=i.from(L,H),H=""),X=!0),V(this,L,H,!1,X)},R.prototype.unshift=function(L){return V(this,L,null,!0,!1)};function V(L,H,Z,X,Ge){var ne=L._readableState;if(H===null)ne.reading=!1,$(L,ne);else{var se;Ge||(se=Q(ne,H)),se?L.emit("error",se):ne.objectMode||H&&H.length>0?(typeof H!="string"&&!ne.objectMode&&Object.getPrototypeOf(H)!==i.prototype&&(H=c(H)),X?ne.endEmitted?L.emit("error",new Error("stream.unshift() after end event")):U(L,ne,H,!0):ne.ended?L.emit("error",new Error("stream.push() after EOF")):(ne.reading=!1,ne.decoder&&!Z?(H=ne.decoder.write(H),ne.objectMode||H.length!==0?U(L,ne,H,!1):l(L,ne)):U(L,ne,H,!1))):X||(ne.reading=!1)}return ee(ne)}function U(L,H,Z,X){H.flowing&&H.length===0&&!H.sync?(L.emit("data",Z),L.read(0)):(H.length+=H.objectMode?1:Z.length,X?H.buffer.unshift(Z):H.buffer.push(Z),H.needReadable&&g(L)),l(L,H)}function Q(L,H){var Z;return!v(H)&&typeof H!="string"&&H!==void 0&&!L.objectMode&&(Z=new TypeError("Invalid non-string/buffer chunk")),Z}function ee(L){return!L.ended&&(L.needReadable||L.length<L.highWaterMark||L.length===0)}R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(L){return A||(A=ip.StringDecoder),this._readableState.decoder=new A(L),this._readableState.encoding=L,this};var j=8388608;function B(L){return L>=j?L=j:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}function D(L,H){return L<=0||H.length===0&&H.ended?0:H.objectMode?1:L!==L?H.flowing&&H.length?H.buffer.head.data.length:H.length:(L>H.highWaterMark&&(H.highWaterMark=B(L)),L<=H.length?L:H.ended?H.length:(H.needReadable=!0,0))}R.prototype.read=function(L){x("read",L),L=parseInt(L,10);var H=this._readableState,Z=L;if(L!==0&&(H.emittedReadable=!1),L===0&&H.needReadable&&(H.length>=H.highWaterMark||H.ended))return x("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?z(this):g(this),null;if(L=D(L,H),L===0&&H.ended)return H.length===0&&z(this),null;var X=H.needReadable;x("need readable",X),(H.length===0||H.length-L<H.highWaterMark)&&(X=!0,x("length less than watermark",X)),H.ended||H.reading?(X=!1,x("reading or ended",X)):X&&(x("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(L=D(Z,H)));var Ge;return L>0?Ge=o(L,H):Ge=null,Ge===null?(H.needReadable=!0,L=0):H.length-=L,H.length===0&&(H.ended||(H.needReadable=!0),Z!==L&&H.ended&&z(this)),Ge!==null&&this.emit("data",Ge),Ge};function $(L,H){if(!H.ended){if(H.decoder){var Z=H.decoder.end();Z&&Z.length&&(H.buffer.push(Z),H.length+=H.objectMode?1:Z.length)}H.ended=!0,g(L)}}function g(L){var H=L._readableState;H.needReadable=!1,H.emittedReadable||(x("emitReadable",H.flowing),H.emittedReadable=!0,H.sync?t.nextTick(a,L):a(L))}function a(L){x("emit readable"),L.emit("readable"),d(L)}function l(L,H){H.readingMore||(H.readingMore=!0,t.nextTick(f,L,H))}function f(L,H){for(var Z=H.length;!H.reading&&!H.flowing&&!H.ended&&H.length<H.highWaterMark&&(x("maybeReadMore read 0"),L.read(0),Z!==H.length);)Z=H.length;H.readingMore=!1}R.prototype._read=function(L){this.emit("error",new Error("_read() is not implemented"))},R.prototype.pipe=function(L,H){var Z=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=L;break;case 1:X.pipes=[X.pipes,L];break;default:X.pipes.push(L);break}X.pipesCount+=1,x("pipe count=%d opts=%j",X.pipesCount,H);var Ge=(!H||H.end!==!1)&&L!==process.stdout&&L!==process.stderr,ne=Ge?Ze:ht;X.endEmitted?t.nextTick(ne):Z.once("end",ne),L.on("unpipe",se);function se(ce,_e){x("onunpipe"),ce===Z&&_e&&_e.hasUnpiped===!1&&(_e.hasUnpiped=!0,at())}function Ze(){x("onend"),L.end()}var fe=h(Z);L.on("drain",fe);var me=!1;function at(){x("cleanup"),L.removeListener("close",pe),L.removeListener("finish",Ae),L.removeListener("drain",fe),L.removeListener("error",et),L.removeListener("unpipe",se),Z.removeListener("end",Ze),Z.removeListener("end",ht),Z.removeListener("data",be),me=!0,X.awaitDrain&&(!L._writableState||L._writableState.needDrain)&&fe()}var ge=!1;Z.on("data",be);function be(ce){x("ondata"),ge=!1;var _e=L.write(ce);_e===!1&&!ge&&((X.pipesCount===1&&X.pipes===L||X.pipesCount>1&&Y(X.pipes,L)!==-1)&&!me&&(x("false write response, pause",X.awaitDrain),X.awaitDrain++,ge=!0),Z.pause())}function et(ce){x("onerror",ce),ht(),L.removeListener("error",et),n(L,"error")===0&&L.emit("error",ce)}F(L,"error",et);function pe(){L.removeListener("finish",Ae),ht()}L.once("close",pe);function Ae(){x("onfinish"),L.removeListener("close",pe),ht()}L.once("finish",Ae);function ht(){x("unpipe"),Z.unpipe(L)}return L.emit("pipe",Z),X.flowing||(x("pipe resume"),Z.resume()),L};function h(L){return function(){var H=L._readableState;x("pipeOnDrain",H.awaitDrain),H.awaitDrain&&H.awaitDrain--,H.awaitDrain===0&&n(L,"data")&&(H.flowing=!0,d(L))}}R.prototype.unpipe=function(L){var H=this._readableState,Z={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return L&&L!==H.pipes?this:(L||(L=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,L&&L.emit("unpipe",this,Z),this);if(!L){var X=H.pipes,Ge=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var ne=0;ne<Ge;ne++)X[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var se=Y(H.pipes,L);return se===-1?this:(H.pipes.splice(se,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),L.emit("unpipe",this,Z),this)},R.prototype.on=function(L,H){var Z=s.prototype.on.call(this,L,H);if(L==="data")this._readableState.flowing!==!1&&this.resume();else if(L==="readable"){var X=this._readableState;!X.endEmitted&&!X.readableListening&&(X.readableListening=X.needReadable=!0,X.emittedReadable=!1,X.reading?X.length&&g(this):t.nextTick(m,this))}return Z},R.prototype.addListener=R.prototype.on;function m(L){x("readable nexttick read 0"),L.read(0)}R.prototype.resume=function(){var L=this._readableState;return L.flowing||(x("resume"),L.flowing=!0,y(this,L)),this};function y(L,H){H.resumeScheduled||(H.resumeScheduled=!0,t.nextTick(w,L,H))}function w(L,H){H.reading||(x("resume read 0"),L.read(0)),H.resumeScheduled=!1,H.awaitDrain=0,L.emit("resume"),d(L),H.flowing&&!H.reading&&L.read(0)}R.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function d(L){var H=L._readableState;for(x("flow",H.flowing);H.flowing&&L.read()!==null;);}R.prototype.wrap=function(L){var H=this,Z=this._readableState,X=!1;L.on("end",function(){if(x("wrapped end"),Z.decoder&&!Z.ended){var se=Z.decoder.end();se&&se.length&&H.push(se)}H.push(null)}),L.on("data",function(se){if(x("wrapped data"),Z.decoder&&(se=Z.decoder.write(se)),!(Z.objectMode&&se==null)&&!(!Z.objectMode&&(!se||!se.length))){var Ze=H.push(se);Ze||(X=!0,L.pause())}});for(var Ge in L)this[Ge]===void 0&&typeof L[Ge]=="function"&&(this[Ge]=function(se){return function(){return L[se].apply(L,arguments)}}(Ge));for(var ne=0;ne<k.length;ne++)L.on(k[ne],this.emit.bind(this,k[ne]));return this._read=function(se){x("wrapped _read",se),X&&(X=!1,L.resume())},this},Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),R._fromList=o;function o(L,H){if(H.length===0)return null;var Z;return H.objectMode?Z=H.buffer.shift():!L||L>=H.length?(H.decoder?Z=H.buffer.join(""):H.buffer.length===1?Z=H.buffer.head.data:Z=H.buffer.concat(H.length),H.buffer.clear()):Z=p(L,H.buffer,H.decoder),Z}function p(L,H,Z){var X;return L<H.head.data.length?(X=H.head.data.slice(0,L),H.head.data=H.head.data.slice(L)):L===H.head.data.length?X=H.shift():X=Z?E(L,H):T(L,H),X}function E(L,H){var Z=H.head,X=1,Ge=Z.data;for(L-=Ge.length;Z=Z.next;){var ne=Z.data,se=L>ne.length?ne.length:L;if(se===ne.length?Ge+=ne:Ge+=ne.slice(0,L),L-=se,L===0){se===ne.length?(++X,Z.next?H.head=Z.next:H.head=H.tail=null):(H.head=Z,Z.data=ne.slice(se));break}++X}return H.length-=X,Ge}function T(L,H){var Z=i.allocUnsafe(L),X=H.head,Ge=1;for(X.data.copy(Z),L-=X.data.length;X=X.next;){var ne=X.data,se=L>ne.length?ne.length:L;if(ne.copy(Z,Z.length-L,0,se),L-=se,L===0){se===ne.length?(++Ge,X.next?H.head=X.next:H.head=H.tail=null):(H.head=X,X.data=ne.slice(se));break}++Ge}return H.length-=Ge,Z}function z(L){var H=L._readableState;if(H.length>0)throw new Error('"endReadable()" called on non-empty stream');H.endEmitted||(H.ended=!0,t.nextTick(K,H,L))}function K(L,H){!L.endEmitted&&L.length===0&&(L.endEmitted=!0,H.readable=!1,H.emit("end"))}function Y(L,H){for(var Z=0,X=L.length;Z<X;Z++)if(L[Z]===H)return Z;return-1}return fg}var xT=xs,km=lu(),MT=Object.create(Tr);MT.inherits=kt;MT.inherits(xs,km);function vH(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function xs(t){if(!(this instanceof xs))return new xs(t);km.call(this,t),this._transformState={afterTransform:vH.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",gH)}function gH(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){k4(t,e,r)}):k4(this,null,null)}xs.prototype.push=function(t,e){return this._transformState.needTransform=!1,km.prototype.push.call(this,t,e)};xs.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};xs.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};xs.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};xs.prototype._destroy=function(t,e){var r=this;km.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function k4(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}var yH=Uh,ET=xT,ST=Object.create(Tr);ST.inherits=kt;ST.inherits(Uh,ET);function Uh(t){if(!(this instanceof Uh))return new Uh(t);ET.call(this,t)}Uh.prototype._transform=function(t,e,r){r(null,t)};(function(t,e){e=t.exports=bT(),e.Stream=e,e.Readable=e,e.Writable=_T(),e.Duplex=lu(),e.Transform=xT,e.PassThrough=yH})(Fy,Fy.exports);var wH=Fy.exports,gf={exports:{}},g_={exports:{}};g_.exports;(function(t){(function(e,r){function n(l,f){if(!l)throw new Error(f||"Assertion failed")}function s(l,f){l.super_=f;var h=function(){};h.prototype=f.prototype,l.prototype=new h,l.prototype.constructor=l}function i(l,f,h){if(i.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((f==="le"||f==="be")&&(h=f,f=10),this._init(l||0,f||10,h||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,h){return f.cmp(h)>0?f:h},i.min=function(f,h){return f.cmp(h)<0?f:h},i.prototype._init=function(f,h,m){if(typeof f=="number")return this._initNumber(f,h,m);if(typeof f=="object")return this._initArray(f,h,m);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),f=f.toString().replace(/\s+/g,"");var y=0;f[0]==="-"&&(y++,this.negative=1),y<f.length&&(h===16?this._parseHex(f,y,m):(this._parseBase(f,h,y),m==="le"&&this._initArray(this.toArray(),h,m)))},i.prototype._initNumber=function(f,h,m){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),h,m)},i.prototype._initArray=function(f,h,m){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var w,d,o=0;if(m==="be")for(y=f.length-1,w=0;y>=0;y-=3)d=f[y]|f[y-1]<<8|f[y-2]<<16,this.words[w]|=d<<o&67108863,this.words[w+1]=d>>>26-o&67108863,o+=24,o>=26&&(o-=26,w++);else if(m==="le")for(y=0,w=0;y<f.length;y+=3)d=f[y]|f[y+1]<<8|f[y+2]<<16,this.words[w]|=d<<o&67108863,this.words[w+1]=d>>>26-o&67108863,o+=24,o>=26&&(o-=26,w++);return this._strip()};function c(l,f){var h=l.charCodeAt(f);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+l)}function v(l,f,h){var m=c(l,h);return h-1>=f&&(m|=c(l,h-1)<<4),m}i.prototype._parseHex=function(f,h,m){this.length=Math.ceil((f.length-h)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var w=0,d=0,o;if(m==="be")for(y=f.length-1;y>=h;y-=2)o=v(f,h,y)<<w,this.words[d]|=o&67108863,w>=18?(w-=18,d+=1,this.words[d]|=o>>>26):w+=8;else{var p=f.length-h;for(y=p%2===0?h+1:h;y<f.length;y+=2)o=v(f,h,y)<<w,this.words[d]|=o&67108863,w>=18?(w-=18,d+=1,this.words[d]|=o>>>26):w+=8}this._strip()};function _(l,f,h,m){for(var y=0,w=0,d=Math.min(l.length,h),o=f;o<d;o++){var p=l.charCodeAt(o)-48;y*=m,p>=49?w=p-49+10:p>=17?w=p-17+10:w=p,n(p>=0&&w<m,"Invalid character"),y+=w}return y}i.prototype._parseBase=function(f,h,m){this.words=[0],this.length=1;for(var y=0,w=1;w<=67108863;w*=h)y++;y--,w=w/h|0;for(var d=f.length-m,o=d%y,p=Math.min(d,d-o)+m,E=0,T=m;T<p;T+=y)E=_(f,T,T+y,h),this.imuln(w),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(o!==0){var z=1;for(E=_(f,T,f.length,h),T=0;T<o;T++)z*=h;this.imuln(z),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var h=0;h<this.length;h++)f.words[h]=this.words[h];f.length=this.length,f.negative=this.negative,f.red=this.red};function b(l,f){l.words=f.words,l.length=f.length,l.negative=f.negative,l.red=f.red}if(i.prototype._move=function(f){b(f,this)},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{i.prototype.inspect=x}else i.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,h){f=f||10,h=h|0||1;var m;if(f===16||f==="hex"){m="";for(var y=0,w=0,d=0;d<this.length;d++){var o=this.words[d],p=((o<<y|w)&16777215).toString(16);w=o>>>24-y&16777215,y+=2,y>=26&&(y-=26,d--),w!==0||d!==this.length-1?m=S[6-p.length]+p+m:m=p+m}for(w!==0&&(m=w.toString(16)+m);m.length%h!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(f===(f|0)&&f>=2&&f<=36){var E=I[f],T=A[f];m="";var z=this.clone();for(z.negative=0;!z.isZero();){var K=z.modrn(T).toString(f);z=z.idivn(T),z.isZero()?m=K+m:m=S[E-K.length]+K+m}for(this.isZero()&&(m="0"+m);m.length%h!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(f,h){return this.toArrayLike(u,f,h)}),i.prototype.toArray=function(f,h){return this.toArrayLike(Array,f,h)};var k=function(f,h){return f.allocUnsafe?f.allocUnsafe(h):new f(h)};i.prototype.toArrayLike=function(f,h,m){this._strip();var y=this.byteLength(),w=m||Math.max(1,y);n(y<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var d=k(f,w),o=h==="le"?"LE":"BE";return this["_toArrayLike"+o](d,y),d},i.prototype._toArrayLikeLE=function(f,h){for(var m=0,y=0,w=0,d=0;w<this.length;w++){var o=this.words[w]<<d|y;f[m++]=o&255,m<f.length&&(f[m++]=o>>8&255),m<f.length&&(f[m++]=o>>16&255),d===6?(m<f.length&&(f[m++]=o>>24&255),y=0,d=0):(y=o>>>24,d+=2)}if(m<f.length)for(f[m++]=y;m<f.length;)f[m++]=0},i.prototype._toArrayLikeBE=function(f,h){for(var m=f.length-1,y=0,w=0,d=0;w<this.length;w++){var o=this.words[w]<<d|y;f[m--]=o&255,m>=0&&(f[m--]=o>>8&255),m>=0&&(f[m--]=o>>16&255),d===6?(m>=0&&(f[m--]=o>>24&255),y=0,d=0):(y=o>>>24,d+=2)}if(m>=0)for(f[m--]=y;m>=0;)f[m--]=0},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var h=f,m=0;return h>=4096&&(m+=13,h>>>=13),h>=64&&(m+=7,h>>>=7),h>=8&&(m+=4,h>>>=4),h>=2&&(m+=2,h>>>=2),m+h},i.prototype._zeroBits=function(f){if(f===0)return 26;var h=f,m=0;return h&8191||(m+=13,h>>>=13),h&127||(m+=7,h>>>=7),h&15||(m+=4,h>>>=4),h&3||(m+=2,h>>>=2),h&1||m++,m},i.prototype.bitLength=function(){var f=this.words[this.length-1],h=this._countBits(f);return(this.length-1)*26+h};function F(l){for(var f=new Array(l.bitLength()),h=0;h<f.length;h++){var m=h/26|0,y=h%26;f[h]=l.words[m]>>>y&1}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,h=0;h<this.length;h++){var m=this._zeroBits(this.words[h]);if(f+=m,m!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var h=0;h<f.length;h++)this.words[h]=this.words[h]|f.words[h];return this._strip()},i.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var h;this.length>f.length?h=f:h=this;for(var m=0;m<h.length;m++)this.words[m]=this.words[m]&f.words[m];return this.length=h.length,this._strip()},i.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var h,m;this.length>f.length?(h=this,m=f):(h=f,m=this);for(var y=0;y<m.length;y++)this.words[y]=h.words[y]^m.words[y];if(this!==h)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=h.length,this._strip()},i.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var h=Math.ceil(f/26)|0,m=f%26;this._expand(h),m>0&&h--;for(var y=0;y<h;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this._strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,h){n(typeof f=="number"&&f>=0);var m=f/26|0,y=f%26;return this._expand(m+1),h?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this._strip()},i.prototype.iadd=function(f){var h;if(this.negative!==0&&f.negative===0)return this.negative=0,h=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,h=this.isub(f),f.negative=1,h._normSign();var m,y;this.length>f.length?(m=this,y=f):(m=f,y=this);for(var w=0,d=0;d<y.length;d++)h=(m.words[d]|0)+(y.words[d]|0)+w,this.words[d]=h&67108863,w=h>>>26;for(;w!==0&&d<m.length;d++)h=(m.words[d]|0)+w,this.words[d]=h&67108863,w=h>>>26;if(this.length=m.length,w!==0)this.words[this.length]=w,this.length++;else if(m!==this)for(;d<m.length;d++)this.words[d]=m.words[d];return this},i.prototype.add=function(f){var h;return f.negative!==0&&this.negative===0?(f.negative=0,h=this.sub(f),f.negative^=1,h):f.negative===0&&this.negative!==0?(this.negative=0,h=f.sub(this),this.negative=1,h):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var h=this.iadd(f);return f.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var m=this.cmp(f);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,w;m>0?(y=this,w=f):(y=f,w=this);for(var d=0,o=0;o<w.length;o++)h=(y.words[o]|0)-(w.words[o]|0)+d,d=h>>26,this.words[o]=h&67108863;for(;d!==0&&o<y.length;o++)h=(y.words[o]|0)+d,d=h>>26,this.words[o]=h&67108863;if(d===0&&o<y.length&&y!==this)for(;o<y.length;o++)this.words[o]=y.words[o];return this.length=Math.max(this.length,o),y!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function C(l,f,h){h.negative=f.negative^l.negative;var m=l.length+f.length|0;h.length=m,m=m-1|0;var y=l.words[0]|0,w=f.words[0]|0,d=y*w,o=d&67108863,p=d/67108864|0;h.words[0]=o;for(var E=1;E<m;E++){for(var T=p>>>26,z=p&67108863,K=Math.min(E,f.length-1),Y=Math.max(0,E-l.length+1);Y<=K;Y++){var L=E-Y|0;y=l.words[L]|0,w=f.words[Y]|0,d=y*w+z,T+=d/67108864|0,z=d&67108863}h.words[E]=z|0,p=T|0}return p!==0?h.words[E]=p|0:h.length--,h._strip()}var R=function(f,h,m){var y=f.words,w=h.words,d=m.words,o=0,p,E,T,z=y[0]|0,K=z&8191,Y=z>>>13,L=y[1]|0,H=L&8191,Z=L>>>13,X=y[2]|0,Ge=X&8191,ne=X>>>13,se=y[3]|0,Ze=se&8191,fe=se>>>13,me=y[4]|0,at=me&8191,ge=me>>>13,be=y[5]|0,et=be&8191,pe=be>>>13,Ae=y[6]|0,ht=Ae&8191,ce=Ae>>>13,_e=y[7]|0,Je=_e&8191,he=_e>>>13,Te=y[8]|0,lt=Te&8191,Ee=Te>>>13,ke=y[9]|0,gt=ke&8191,ye=ke>>>13,Ce=w[0]|0,wt=Ce&8191,Se=Ce>>>13,Be=w[1]|0,_t=Be&8191,xe=Be>>>13,Ne=w[2]|0,pt=Ne&8191,Me=Ne>>>13,De=w[3]|0,dt=De&8191,Ie=De>>>13,Re=w[4]|0,yt=Re&8191,we=Re>>>13,Oe=w[5]|0,ot=Oe&8191,q=Oe>>>13,G=w[6]|0,ue=G&8191,J=G>>>13,ie=w[7]|0,Fe=ie&8191,ae=ie>>>13,oe=w[8]|0,je=oe&8191,re=oe>>>13,le=w[9]|0,$e=le&8191,qe=le>>>13;m.negative=f.negative^h.negative,m.length=19,p=Math.imul(K,wt),E=Math.imul(K,Se),E=E+Math.imul(Y,wt)|0,T=Math.imul(Y,Se);var mt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(mt>>>26)|0,mt&=67108863,p=Math.imul(H,wt),E=Math.imul(H,Se),E=E+Math.imul(Z,wt)|0,T=Math.imul(Z,Se),p=p+Math.imul(K,_t)|0,E=E+Math.imul(K,xe)|0,E=E+Math.imul(Y,_t)|0,T=T+Math.imul(Y,xe)|0;var st=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(st>>>26)|0,st&=67108863,p=Math.imul(Ge,wt),E=Math.imul(Ge,Se),E=E+Math.imul(ne,wt)|0,T=Math.imul(ne,Se),p=p+Math.imul(H,_t)|0,E=E+Math.imul(H,xe)|0,E=E+Math.imul(Z,_t)|0,T=T+Math.imul(Z,xe)|0,p=p+Math.imul(K,pt)|0,E=E+Math.imul(K,Me)|0,E=E+Math.imul(Y,pt)|0,T=T+Math.imul(Y,Me)|0;var tt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(tt>>>26)|0,tt&=67108863,p=Math.imul(Ze,wt),E=Math.imul(Ze,Se),E=E+Math.imul(fe,wt)|0,T=Math.imul(fe,Se),p=p+Math.imul(Ge,_t)|0,E=E+Math.imul(Ge,xe)|0,E=E+Math.imul(ne,_t)|0,T=T+Math.imul(ne,xe)|0,p=p+Math.imul(H,pt)|0,E=E+Math.imul(H,Me)|0,E=E+Math.imul(Z,pt)|0,T=T+Math.imul(Z,Me)|0,p=p+Math.imul(K,dt)|0,E=E+Math.imul(K,Ie)|0,E=E+Math.imul(Y,dt)|0,T=T+Math.imul(Y,Ie)|0;var ut=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(ut>>>26)|0,ut&=67108863,p=Math.imul(at,wt),E=Math.imul(at,Se),E=E+Math.imul(ge,wt)|0,T=Math.imul(ge,Se),p=p+Math.imul(Ze,_t)|0,E=E+Math.imul(Ze,xe)|0,E=E+Math.imul(fe,_t)|0,T=T+Math.imul(fe,xe)|0,p=p+Math.imul(Ge,pt)|0,E=E+Math.imul(Ge,Me)|0,E=E+Math.imul(ne,pt)|0,T=T+Math.imul(ne,Me)|0,p=p+Math.imul(H,dt)|0,E=E+Math.imul(H,Ie)|0,E=E+Math.imul(Z,dt)|0,T=T+Math.imul(Z,Ie)|0,p=p+Math.imul(K,yt)|0,E=E+Math.imul(K,we)|0,E=E+Math.imul(Y,yt)|0,T=T+Math.imul(Y,we)|0;var Pt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,p=Math.imul(et,wt),E=Math.imul(et,Se),E=E+Math.imul(pe,wt)|0,T=Math.imul(pe,Se),p=p+Math.imul(at,_t)|0,E=E+Math.imul(at,xe)|0,E=E+Math.imul(ge,_t)|0,T=T+Math.imul(ge,xe)|0,p=p+Math.imul(Ze,pt)|0,E=E+Math.imul(Ze,Me)|0,E=E+Math.imul(fe,pt)|0,T=T+Math.imul(fe,Me)|0,p=p+Math.imul(Ge,dt)|0,E=E+Math.imul(Ge,Ie)|0,E=E+Math.imul(ne,dt)|0,T=T+Math.imul(ne,Ie)|0,p=p+Math.imul(H,yt)|0,E=E+Math.imul(H,we)|0,E=E+Math.imul(Z,yt)|0,T=T+Math.imul(Z,we)|0,p=p+Math.imul(K,ot)|0,E=E+Math.imul(K,q)|0,E=E+Math.imul(Y,ot)|0,T=T+Math.imul(Y,q)|0;var Bt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,p=Math.imul(ht,wt),E=Math.imul(ht,Se),E=E+Math.imul(ce,wt)|0,T=Math.imul(ce,Se),p=p+Math.imul(et,_t)|0,E=E+Math.imul(et,xe)|0,E=E+Math.imul(pe,_t)|0,T=T+Math.imul(pe,xe)|0,p=p+Math.imul(at,pt)|0,E=E+Math.imul(at,Me)|0,E=E+Math.imul(ge,pt)|0,T=T+Math.imul(ge,Me)|0,p=p+Math.imul(Ze,dt)|0,E=E+Math.imul(Ze,Ie)|0,E=E+Math.imul(fe,dt)|0,T=T+Math.imul(fe,Ie)|0,p=p+Math.imul(Ge,yt)|0,E=E+Math.imul(Ge,we)|0,E=E+Math.imul(ne,yt)|0,T=T+Math.imul(ne,we)|0,p=p+Math.imul(H,ot)|0,E=E+Math.imul(H,q)|0,E=E+Math.imul(Z,ot)|0,T=T+Math.imul(Z,q)|0,p=p+Math.imul(K,ue)|0,E=E+Math.imul(K,J)|0,E=E+Math.imul(Y,ue)|0,T=T+Math.imul(Y,J)|0;var Tt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,p=Math.imul(Je,wt),E=Math.imul(Je,Se),E=E+Math.imul(he,wt)|0,T=Math.imul(he,Se),p=p+Math.imul(ht,_t)|0,E=E+Math.imul(ht,xe)|0,E=E+Math.imul(ce,_t)|0,T=T+Math.imul(ce,xe)|0,p=p+Math.imul(et,pt)|0,E=E+Math.imul(et,Me)|0,E=E+Math.imul(pe,pt)|0,T=T+Math.imul(pe,Me)|0,p=p+Math.imul(at,dt)|0,E=E+Math.imul(at,Ie)|0,E=E+Math.imul(ge,dt)|0,T=T+Math.imul(ge,Ie)|0,p=p+Math.imul(Ze,yt)|0,E=E+Math.imul(Ze,we)|0,E=E+Math.imul(fe,yt)|0,T=T+Math.imul(fe,we)|0,p=p+Math.imul(Ge,ot)|0,E=E+Math.imul(Ge,q)|0,E=E+Math.imul(ne,ot)|0,T=T+Math.imul(ne,q)|0,p=p+Math.imul(H,ue)|0,E=E+Math.imul(H,J)|0,E=E+Math.imul(Z,ue)|0,T=T+Math.imul(Z,J)|0,p=p+Math.imul(K,Fe)|0,E=E+Math.imul(K,ae)|0,E=E+Math.imul(Y,Fe)|0,T=T+Math.imul(Y,ae)|0;var xt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(xt>>>26)|0,xt&=67108863,p=Math.imul(lt,wt),E=Math.imul(lt,Se),E=E+Math.imul(Ee,wt)|0,T=Math.imul(Ee,Se),p=p+Math.imul(Je,_t)|0,E=E+Math.imul(Je,xe)|0,E=E+Math.imul(he,_t)|0,T=T+Math.imul(he,xe)|0,p=p+Math.imul(ht,pt)|0,E=E+Math.imul(ht,Me)|0,E=E+Math.imul(ce,pt)|0,T=T+Math.imul(ce,Me)|0,p=p+Math.imul(et,dt)|0,E=E+Math.imul(et,Ie)|0,E=E+Math.imul(pe,dt)|0,T=T+Math.imul(pe,Ie)|0,p=p+Math.imul(at,yt)|0,E=E+Math.imul(at,we)|0,E=E+Math.imul(ge,yt)|0,T=T+Math.imul(ge,we)|0,p=p+Math.imul(Ze,ot)|0,E=E+Math.imul(Ze,q)|0,E=E+Math.imul(fe,ot)|0,T=T+Math.imul(fe,q)|0,p=p+Math.imul(Ge,ue)|0,E=E+Math.imul(Ge,J)|0,E=E+Math.imul(ne,ue)|0,T=T+Math.imul(ne,J)|0,p=p+Math.imul(H,Fe)|0,E=E+Math.imul(H,ae)|0,E=E+Math.imul(Z,Fe)|0,T=T+Math.imul(Z,ae)|0,p=p+Math.imul(K,je)|0,E=E+Math.imul(K,re)|0,E=E+Math.imul(Y,je)|0,T=T+Math.imul(Y,re)|0;var zt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(zt>>>26)|0,zt&=67108863,p=Math.imul(gt,wt),E=Math.imul(gt,Se),E=E+Math.imul(ye,wt)|0,T=Math.imul(ye,Se),p=p+Math.imul(lt,_t)|0,E=E+Math.imul(lt,xe)|0,E=E+Math.imul(Ee,_t)|0,T=T+Math.imul(Ee,xe)|0,p=p+Math.imul(Je,pt)|0,E=E+Math.imul(Je,Me)|0,E=E+Math.imul(he,pt)|0,T=T+Math.imul(he,Me)|0,p=p+Math.imul(ht,dt)|0,E=E+Math.imul(ht,Ie)|0,E=E+Math.imul(ce,dt)|0,T=T+Math.imul(ce,Ie)|0,p=p+Math.imul(et,yt)|0,E=E+Math.imul(et,we)|0,E=E+Math.imul(pe,yt)|0,T=T+Math.imul(pe,we)|0,p=p+Math.imul(at,ot)|0,E=E+Math.imul(at,q)|0,E=E+Math.imul(ge,ot)|0,T=T+Math.imul(ge,q)|0,p=p+Math.imul(Ze,ue)|0,E=E+Math.imul(Ze,J)|0,E=E+Math.imul(fe,ue)|0,T=T+Math.imul(fe,J)|0,p=p+Math.imul(Ge,Fe)|0,E=E+Math.imul(Ge,ae)|0,E=E+Math.imul(ne,Fe)|0,T=T+Math.imul(ne,ae)|0,p=p+Math.imul(H,je)|0,E=E+Math.imul(H,re)|0,E=E+Math.imul(Z,je)|0,T=T+Math.imul(Z,re)|0,p=p+Math.imul(K,$e)|0,E=E+Math.imul(K,qe)|0,E=E+Math.imul(Y,$e)|0,T=T+Math.imul(Y,qe)|0;var Ct=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,p=Math.imul(gt,_t),E=Math.imul(gt,xe),E=E+Math.imul(ye,_t)|0,T=Math.imul(ye,xe),p=p+Math.imul(lt,pt)|0,E=E+Math.imul(lt,Me)|0,E=E+Math.imul(Ee,pt)|0,T=T+Math.imul(Ee,Me)|0,p=p+Math.imul(Je,dt)|0,E=E+Math.imul(Je,Ie)|0,E=E+Math.imul(he,dt)|0,T=T+Math.imul(he,Ie)|0,p=p+Math.imul(ht,yt)|0,E=E+Math.imul(ht,we)|0,E=E+Math.imul(ce,yt)|0,T=T+Math.imul(ce,we)|0,p=p+Math.imul(et,ot)|0,E=E+Math.imul(et,q)|0,E=E+Math.imul(pe,ot)|0,T=T+Math.imul(pe,q)|0,p=p+Math.imul(at,ue)|0,E=E+Math.imul(at,J)|0,E=E+Math.imul(ge,ue)|0,T=T+Math.imul(ge,J)|0,p=p+Math.imul(Ze,Fe)|0,E=E+Math.imul(Ze,ae)|0,E=E+Math.imul(fe,Fe)|0,T=T+Math.imul(fe,ae)|0,p=p+Math.imul(Ge,je)|0,E=E+Math.imul(Ge,re)|0,E=E+Math.imul(ne,je)|0,T=T+Math.imul(ne,re)|0,p=p+Math.imul(H,$e)|0,E=E+Math.imul(H,qe)|0,E=E+Math.imul(Z,$e)|0,T=T+Math.imul(Z,qe)|0;var Mt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,p=Math.imul(gt,pt),E=Math.imul(gt,Me),E=E+Math.imul(ye,pt)|0,T=Math.imul(ye,Me),p=p+Math.imul(lt,dt)|0,E=E+Math.imul(lt,Ie)|0,E=E+Math.imul(Ee,dt)|0,T=T+Math.imul(Ee,Ie)|0,p=p+Math.imul(Je,yt)|0,E=E+Math.imul(Je,we)|0,E=E+Math.imul(he,yt)|0,T=T+Math.imul(he,we)|0,p=p+Math.imul(ht,ot)|0,E=E+Math.imul(ht,q)|0,E=E+Math.imul(ce,ot)|0,T=T+Math.imul(ce,q)|0,p=p+Math.imul(et,ue)|0,E=E+Math.imul(et,J)|0,E=E+Math.imul(pe,ue)|0,T=T+Math.imul(pe,J)|0,p=p+Math.imul(at,Fe)|0,E=E+Math.imul(at,ae)|0,E=E+Math.imul(ge,Fe)|0,T=T+Math.imul(ge,ae)|0,p=p+Math.imul(Ze,je)|0,E=E+Math.imul(Ze,re)|0,E=E+Math.imul(fe,je)|0,T=T+Math.imul(fe,re)|0,p=p+Math.imul(Ge,$e)|0,E=E+Math.imul(Ge,qe)|0,E=E+Math.imul(ne,$e)|0,T=T+Math.imul(ne,qe)|0;var St=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(St>>>26)|0,St&=67108863,p=Math.imul(gt,dt),E=Math.imul(gt,Ie),E=E+Math.imul(ye,dt)|0,T=Math.imul(ye,Ie),p=p+Math.imul(lt,yt)|0,E=E+Math.imul(lt,we)|0,E=E+Math.imul(Ee,yt)|0,T=T+Math.imul(Ee,we)|0,p=p+Math.imul(Je,ot)|0,E=E+Math.imul(Je,q)|0,E=E+Math.imul(he,ot)|0,T=T+Math.imul(he,q)|0,p=p+Math.imul(ht,ue)|0,E=E+Math.imul(ht,J)|0,E=E+Math.imul(ce,ue)|0,T=T+Math.imul(ce,J)|0,p=p+Math.imul(et,Fe)|0,E=E+Math.imul(et,ae)|0,E=E+Math.imul(pe,Fe)|0,T=T+Math.imul(pe,ae)|0,p=p+Math.imul(at,je)|0,E=E+Math.imul(at,re)|0,E=E+Math.imul(ge,je)|0,T=T+Math.imul(ge,re)|0,p=p+Math.imul(Ze,$e)|0,E=E+Math.imul(Ze,qe)|0,E=E+Math.imul(fe,$e)|0,T=T+Math.imul(fe,qe)|0;var Lt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,p=Math.imul(gt,yt),E=Math.imul(gt,we),E=E+Math.imul(ye,yt)|0,T=Math.imul(ye,we),p=p+Math.imul(lt,ot)|0,E=E+Math.imul(lt,q)|0,E=E+Math.imul(Ee,ot)|0,T=T+Math.imul(Ee,q)|0,p=p+Math.imul(Je,ue)|0,E=E+Math.imul(Je,J)|0,E=E+Math.imul(he,ue)|0,T=T+Math.imul(he,J)|0,p=p+Math.imul(ht,Fe)|0,E=E+Math.imul(ht,ae)|0,E=E+Math.imul(ce,Fe)|0,T=T+Math.imul(ce,ae)|0,p=p+Math.imul(et,je)|0,E=E+Math.imul(et,re)|0,E=E+Math.imul(pe,je)|0,T=T+Math.imul(pe,re)|0,p=p+Math.imul(at,$e)|0,E=E+Math.imul(at,qe)|0,E=E+Math.imul(ge,$e)|0,T=T+Math.imul(ge,qe)|0;var nt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(nt>>>26)|0,nt&=67108863,p=Math.imul(gt,ot),E=Math.imul(gt,q),E=E+Math.imul(ye,ot)|0,T=Math.imul(ye,q),p=p+Math.imul(lt,ue)|0,E=E+Math.imul(lt,J)|0,E=E+Math.imul(Ee,ue)|0,T=T+Math.imul(Ee,J)|0,p=p+Math.imul(Je,Fe)|0,E=E+Math.imul(Je,ae)|0,E=E+Math.imul(he,Fe)|0,T=T+Math.imul(he,ae)|0,p=p+Math.imul(ht,je)|0,E=E+Math.imul(ht,re)|0,E=E+Math.imul(ce,je)|0,T=T+Math.imul(ce,re)|0,p=p+Math.imul(et,$e)|0,E=E+Math.imul(et,qe)|0,E=E+Math.imul(pe,$e)|0,T=T+Math.imul(pe,qe)|0;var ct=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(ct>>>26)|0,ct&=67108863,p=Math.imul(gt,ue),E=Math.imul(gt,J),E=E+Math.imul(ye,ue)|0,T=Math.imul(ye,J),p=p+Math.imul(lt,Fe)|0,E=E+Math.imul(lt,ae)|0,E=E+Math.imul(Ee,Fe)|0,T=T+Math.imul(Ee,ae)|0,p=p+Math.imul(Je,je)|0,E=E+Math.imul(Je,re)|0,E=E+Math.imul(he,je)|0,T=T+Math.imul(he,re)|0,p=p+Math.imul(ht,$e)|0,E=E+Math.imul(ht,qe)|0,E=E+Math.imul(ce,$e)|0,T=T+Math.imul(ce,qe)|0;var Nt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,p=Math.imul(gt,Fe),E=Math.imul(gt,ae),E=E+Math.imul(ye,Fe)|0,T=Math.imul(ye,ae),p=p+Math.imul(lt,je)|0,E=E+Math.imul(lt,re)|0,E=E+Math.imul(Ee,je)|0,T=T+Math.imul(Ee,re)|0,p=p+Math.imul(Je,$e)|0,E=E+Math.imul(Je,qe)|0,E=E+Math.imul(he,$e)|0,T=T+Math.imul(he,qe)|0;var Vt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,p=Math.imul(gt,je),E=Math.imul(gt,re),E=E+Math.imul(ye,je)|0,T=Math.imul(ye,re),p=p+Math.imul(lt,$e)|0,E=E+Math.imul(lt,qe)|0,E=E+Math.imul(Ee,$e)|0,T=T+Math.imul(Ee,qe)|0;var Xt=(o+p|0)+((E&8191)<<13)|0;o=(T+(E>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,p=Math.imul(gt,$e),E=Math.imul(gt,qe),E=E+Math.imul(ye,$e)|0,T=Math.imul(ye,qe);var yn=(o+p|0)+((E&8191)<<13)|0;return o=(T+(E>>>13)|0)+(yn>>>26)|0,yn&=67108863,d[0]=mt,d[1]=st,d[2]=tt,d[3]=ut,d[4]=Pt,d[5]=Bt,d[6]=Tt,d[7]=xt,d[8]=zt,d[9]=Ct,d[10]=Mt,d[11]=St,d[12]=Lt,d[13]=nt,d[14]=ct,d[15]=Nt,d[16]=Vt,d[17]=Xt,d[18]=yn,o!==0&&(d[19]=o,m.length++),m};Math.imul||(R=C);function V(l,f,h){h.negative=f.negative^l.negative,h.length=l.length+f.length;for(var m=0,y=0,w=0;w<h.length-1;w++){var d=y;y=0;for(var o=m&67108863,p=Math.min(w,f.length-1),E=Math.max(0,w-l.length+1);E<=p;E++){var T=w-E,z=l.words[T]|0,K=f.words[E]|0,Y=z*K,L=Y&67108863;d=d+(Y/67108864|0)|0,L=L+o|0,o=L&67108863,d=d+(L>>>26)|0,y+=d>>>26,d&=67108863}h.words[w]=o,m=d,d=y}return m!==0?h.words[w]=m:h.length--,h._strip()}function U(l,f,h){return V(l,f,h)}i.prototype.mulTo=function(f,h){var m,y=this.length+f.length;return this.length===10&&f.length===10?m=R(this,f,h):y<63?m=C(this,f,h):y<1024?m=V(this,f,h):m=U(this,f,h),m},i.prototype.mul=function(f){var h=new i(null);return h.words=new Array(this.length+f.length),this.mulTo(f,h)},i.prototype.mulf=function(f){var h=new i(null);return h.words=new Array(this.length+f.length),U(this,f,h)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){var h=f<0;h&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var m=0,y=0;y<this.length;y++){var w=(this.words[y]|0)*f,d=(w&67108863)+(m&67108863);m>>=26,m+=w/67108864|0,m+=d>>>26,this.words[y]=d&67108863}return m!==0&&(this.words[y]=m,this.length++),h?this.ineg():this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var h=F(f);if(h.length===0)return new i(1);for(var m=this,y=0;y<h.length&&h[y]===0;y++,m=m.sqr());if(++y<h.length)for(var w=m.sqr();y<h.length;y++,w=w.sqr())h[y]!==0&&(m=m.mul(w));return m},i.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var h=f%26,m=(f-h)/26,y=67108863>>>26-h<<26-h,w;if(h!==0){var d=0;for(w=0;w<this.length;w++){var o=this.words[w]&y,p=(this.words[w]|0)-o<<h;this.words[w]=p|d,d=o>>>26-h}d&&(this.words[w]=d,this.length++)}if(m!==0){for(w=this.length-1;w>=0;w--)this.words[w+m]=this.words[w];for(w=0;w<m;w++)this.words[w]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,h,m){n(typeof f=="number"&&f>=0);var y;h?y=(h-h%26)/26:y=0;var w=f%26,d=Math.min((f-w)/26,this.length),o=67108863^67108863>>>w<<w,p=m;if(y-=d,y=Math.max(0,y),p){for(var E=0;E<d;E++)p.words[E]=this.words[E];p.length=d}if(d!==0)if(this.length>d)for(this.length-=d,E=0;E<this.length;E++)this.words[E]=this.words[E+d];else this.words[0]=0,this.length=1;var T=0;for(E=this.length-1;E>=0&&(T!==0||E>=y);E--){var z=this.words[E]|0;this.words[E]=T<<26-w|z>>>w,T=z&o}return p&&T!==0&&(p.words[p.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(f,h,m){return n(this.negative===0),this.iushrn(f,h,m)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var h=f%26,m=(f-h)/26,y=1<<h;if(this.length<=m)return!1;var w=this.words[m];return!!(w&y)},i.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var h=f%26,m=(f-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(h!==0&&m++,this.length=Math.min(m,this.length),h!==0){var y=67108863^67108863>>>h<<h;this.words[this.length-1]&=y}return this._strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,h,m){var y=f.length+m,w;this._expand(y);var d,o=0;for(w=0;w<f.length;w++){d=(this.words[w+m]|0)+o;var p=(f.words[w]|0)*h;d-=p&67108863,o=(d>>26)-(p/67108864|0),this.words[w+m]=d&67108863}for(;w<this.length-m;w++)d=(this.words[w+m]|0)+o,o=d>>26,this.words[w+m]=d&67108863;if(o===0)return this._strip();for(n(o===-1),o=0,w=0;w<this.length;w++)d=-(this.words[w]|0)+o,o=d>>26,this.words[w]=d&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(f,h){var m=this.length-f.length,y=this.clone(),w=f,d=w.words[w.length-1]|0,o=this._countBits(d);m=26-o,m!==0&&(w=w.ushln(m),y.iushln(m),d=w.words[w.length-1]|0);var p=y.length-w.length,E;if(h!=="mod"){E=new i(null),E.length=p+1,E.words=new Array(E.length);for(var T=0;T<E.length;T++)E.words[T]=0}var z=y.clone()._ishlnsubmul(w,1,p);z.negative===0&&(y=z,E&&(E.words[p]=1));for(var K=p-1;K>=0;K--){var Y=(y.words[w.length+K]|0)*67108864+(y.words[w.length+K-1]|0);for(Y=Math.min(Y/d|0,67108863),y._ishlnsubmul(w,Y,K);y.negative!==0;)Y--,y.negative=0,y._ishlnsubmul(w,1,K),y.isZero()||(y.negative^=1);E&&(E.words[K]=Y)}return E&&E._strip(),y._strip(),h!=="div"&&m!==0&&y.iushrn(m),{div:E||null,mod:y}},i.prototype.divmod=function(f,h,m){if(n(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,w,d;return this.negative!==0&&f.negative===0?(d=this.neg().divmod(f,h),h!=="mod"&&(y=d.div.neg()),h!=="div"&&(w=d.mod.neg(),m&&w.negative!==0&&w.iadd(f)),{div:y,mod:w}):this.negative===0&&f.negative!==0?(d=this.divmod(f.neg(),h),h!=="mod"&&(y=d.div.neg()),{div:y,mod:d.mod}):this.negative&f.negative?(d=this.neg().divmod(f.neg(),h),h!=="div"&&(w=d.mod.neg(),m&&w.negative!==0&&w.isub(f)),{div:d.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?h==="div"?{div:this.divn(f.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modrn(f.words[0]))}:this._wordDiv(f,h)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var h=this.divmod(f);if(h.mod.isZero())return h.div;var m=h.div.negative!==0?h.mod.isub(f):h.mod,y=f.ushrn(1),w=f.andln(1),d=m.cmp(y);return d<0||w===1&&d===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(f){var h=f<0;h&&(f=-f),n(f<=67108863);for(var m=(1<<26)%f,y=0,w=this.length-1;w>=0;w--)y=(m*y+(this.words[w]|0))%f;return h?-y:y},i.prototype.modn=function(f){return this.modrn(f)},i.prototype.idivn=function(f){var h=f<0;h&&(f=-f),n(f<=67108863);for(var m=0,y=this.length-1;y>=0;y--){var w=(this.words[y]|0)+m*67108864;this.words[y]=w/f|0,m=w%f}return this._strip(),h?this.ineg():this},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var h=this,m=f.clone();h.negative!==0?h=h.umod(f):h=h.clone();for(var y=new i(1),w=new i(0),d=new i(0),o=new i(1),p=0;h.isEven()&&m.isEven();)h.iushrn(1),m.iushrn(1),++p;for(var E=m.clone(),T=h.clone();!h.isZero();){for(var z=0,K=1;!(h.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(h.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(E),w.isub(T)),y.iushrn(1),w.iushrn(1);for(var Y=0,L=1;!(m.words[0]&L)&&Y<26;++Y,L<<=1);if(Y>0)for(m.iushrn(Y);Y-- >0;)(d.isOdd()||o.isOdd())&&(d.iadd(E),o.isub(T)),d.iushrn(1),o.iushrn(1);h.cmp(m)>=0?(h.isub(m),y.isub(d),w.isub(o)):(m.isub(h),d.isub(y),o.isub(w))}return{a:d,b:o,gcd:m.iushln(p)}},i.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var h=this,m=f.clone();h.negative!==0?h=h.umod(f):h=h.clone();for(var y=new i(1),w=new i(0),d=m.clone();h.cmpn(1)>0&&m.cmpn(1)>0;){for(var o=0,p=1;!(h.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(h.iushrn(o);o-- >0;)y.isOdd()&&y.iadd(d),y.iushrn(1);for(var E=0,T=1;!(m.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(m.iushrn(E);E-- >0;)w.isOdd()&&w.iadd(d),w.iushrn(1);h.cmp(m)>=0?(h.isub(m),y.isub(w)):(m.isub(h),w.isub(y))}var z;return h.cmpn(1)===0?z=y:z=w,z.cmpn(0)<0&&z.iadd(f),z},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var h=this.clone(),m=f.clone();h.negative=0,m.negative=0;for(var y=0;h.isEven()&&m.isEven();y++)h.iushrn(1),m.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;m.isEven();)m.iushrn(1);var w=h.cmp(m);if(w<0){var d=h;h=m,m=d}else if(w===0||m.cmpn(1)===0)break;h.isub(m)}while(!0);return m.iushln(y)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){n(typeof f=="number");var h=f%26,m=(f-h)/26,y=1<<h;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var w=y,d=m;w!==0&&d<this.length;d++){var o=this.words[d]|0;o+=w,w=o>>>26,o&=67108863,this.words[d]=o}return w!==0&&(this.words[d]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var h=f<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var m;if(this.length>1)m=1;else{h&&(f=-f),n(f<=67108863,"Number is too big");var y=this.words[0]|0;m=y===f?0:y<f?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var h=this.ucmp(f);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var h=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,w=f.words[m]|0;if(y!==w){y<w?h=-1:y>w&&(h=1);break}}return h},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new g(f)},i.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var Q={k256:null,p224:null,p192:null,p25519:null};function ee(l,f){this.name=l,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ee.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},ee.prototype.ireduce=function(f){var h=f,m;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),m=h.bitLength();while(m>this.n);var y=m<this.n?-1:h.ucmp(this.p);return y===0?(h.words[0]=0,h.length=1):y>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},ee.prototype.split=function(f,h){f.iushrn(this.n,0,h)},ee.prototype.imulK=function(f){return f.imul(this.k)};function j(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(j,ee),j.prototype.split=function(f,h){for(var m=4194303,y=Math.min(f.length,9),w=0;w<y;w++)h.words[w]=f.words[w];if(h.length=y,f.length<=9){f.words[0]=0,f.length=1;return}var d=f.words[9];for(h.words[h.length++]=d&m,w=10;w<f.length;w++){var o=f.words[w]|0;f.words[w-10]=(o&m)<<4|d>>>22,d=o}d>>>=22,f.words[w-10]=d,d===0&&f.length>10?f.length-=10:f.length-=9},j.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var h=0,m=0;m<f.length;m++){var y=f.words[m]|0;h+=y*977,f.words[m]=h&67108863,h=y*64+(h/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function B(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(B,ee);function D(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,ee);function $(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s($,ee),$.prototype.imulK=function(f){for(var h=0,m=0;m<f.length;m++){var y=(f.words[m]|0)*19+h,w=y&67108863;y>>>=26,f.words[m]=w,h=y}return h!==0&&(f.words[f.length++]=h),f},i._prime=function(f){if(Q[f])return Q[f];var h;if(f==="k256")h=new j;else if(f==="p224")h=new B;else if(f==="p192")h=new D;else if(f==="p25519")h=new $;else throw new Error("Unknown prime "+f);return Q[f]=h,h};function g(l){if(typeof l=="string"){var f=i._prime(l);this.m=f.p,this.prime=f}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}g.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},g.prototype._verify2=function(f,h){n((f.negative|h.negative)===0,"red works only with positives"),n(f.red&&f.red===h.red,"red works only with red numbers")},g.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(b(f,f.umod(this.m)._forceRed(this)),f)},g.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},g.prototype.add=function(f,h){this._verify2(f,h);var m=f.add(h);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},g.prototype.iadd=function(f,h){this._verify2(f,h);var m=f.iadd(h);return m.cmp(this.m)>=0&&m.isub(this.m),m},g.prototype.sub=function(f,h){this._verify2(f,h);var m=f.sub(h);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},g.prototype.isub=function(f,h){this._verify2(f,h);var m=f.isub(h);return m.cmpn(0)<0&&m.iadd(this.m),m},g.prototype.shl=function(f,h){return this._verify1(f),this.imod(f.ushln(h))},g.prototype.imul=function(f,h){return this._verify2(f,h),this.imod(f.imul(h))},g.prototype.mul=function(f,h){return this._verify2(f,h),this.imod(f.mul(h))},g.prototype.isqr=function(f){return this.imul(f,f.clone())},g.prototype.sqr=function(f){return this.mul(f,f)},g.prototype.sqrt=function(f){if(f.isZero())return f.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(f,m)}for(var y=this.m.subn(1),w=0;!y.isZero()&&y.andln(1)===0;)w++,y.iushrn(1);n(!y.isZero());var d=new i(1).toRed(this),o=d.redNeg(),p=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new i(2*E*E).toRed(this);this.pow(E,p).cmp(o)!==0;)E.redIAdd(o);for(var T=this.pow(E,y),z=this.pow(f,y.addn(1).iushrn(1)),K=this.pow(f,y),Y=w;K.cmp(d)!==0;){for(var L=K,H=0;L.cmp(d)!==0;H++)L=L.redSqr();n(H<Y);var Z=this.pow(T,new i(1).iushln(Y-H-1));z=z.redMul(Z),T=Z.redSqr(),K=K.redMul(T),Y=H}return z},g.prototype.invm=function(f){var h=f._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},g.prototype.pow=function(f,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return f.clone();var m=4,y=new Array(1<<m);y[0]=new i(1).toRed(this),y[1]=f;for(var w=2;w<y.length;w++)y[w]=this.mul(y[w-1],f);var d=y[0],o=0,p=0,E=h.bitLength()%26;for(E===0&&(E=26),w=h.length-1;w>=0;w--){for(var T=h.words[w],z=E-1;z>=0;z--){var K=T>>z&1;if(d!==y[0]&&(d=this.sqr(d)),K===0&&o===0){p=0;continue}o<<=1,o|=K,p++,!(p!==m&&(w!==0||z!==0))&&(d=this.mul(d,y[o]),p=0,o=0)}E=26}return d},g.prototype.convertTo=function(f){var h=f.umod(this.m);return h===f?h.clone():h},g.prototype.convertFrom=function(f){var h=f.clone();return h.red=null,h},i.mont=function(f){return new a(f)};function a(l){g.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(a,g),a.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},a.prototype.convertFrom=function(f){var h=this.imod(f.mul(this.rinv));return h.red=null,h},a.prototype.imul=function(f,h){if(f.isZero()||h.isZero())return f.words[0]=0,f.length=1,f;var m=f.imul(h),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=m.isub(y).iushrn(this.shift),d=w;return w.cmp(this.m)>=0?d=w.isub(this.m):w.cmpn(0)<0&&(d=w.iadd(this.m)),d._forceRed(this)},a.prototype.mul=function(f,h){if(f.isZero()||h.isZero())return new i(0)._forceRed(this);var m=f.mul(h),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=m.isub(y).iushrn(this.shift),d=w;return w.cmp(this.m)>=0?d=w.isub(this.m):w.cmpn(0)<0&&(d=w.iadd(this.m)),d._forceRed(this)},a.prototype.invm=function(f){var h=this.imod(f._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(t,jt)})(g_);var y_=g_.exports,Pl=y_,_H=Iu,bH=Rt.Buffer;function IT(t){var e=t.modulus.byteLength(),r;do r=new Pl(_H(e));while(r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2));return r}function xH(t){var e=IT(t),r=e.toRed(Pl.mont(t.modulus)).redPow(new Pl(t.publicExponent)).fromRed();return{blinder:r,unblinder:e.invm(t.modulus)}}function TT(t,e){var r=xH(e),n=e.modulus.byteLength(),s=new Pl(t).mul(r.blinder).umod(e.modulus),i=s.toRed(Pl.mont(e.prime1)),u=s.toRed(Pl.mont(e.prime2)),c=e.coefficient,v=e.prime1,_=e.prime2,b=i.redPow(e.exponent1).fromRed(),x=u.redPow(e.exponent2).fromRed(),S=b.isub(x).imul(c).umod(v).imul(_);return x.iadd(S).imul(r.unblinder).umod(e.modulus).toArrayLike(bH,"be",n)}TT.getr=IT;var w_=TT,hg={};const MH="6.6.1",EH={version:MH};var Kn={},__={exports:{}};__.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(__);var Ps=__.exports,b_={};(function(t){var e=t;function r(i,u){if(Array.isArray(i))return i.slice();if(!i)return[];var c=[];if(typeof i!="string"){for(var v=0;v<i.length;v++)c[v]=i[v]|0;return c}if(u==="hex"){i=i.replace(/[^a-z0-9]+/ig,""),i.length%2!==0&&(i="0"+i);for(var v=0;v<i.length;v+=2)c.push(parseInt(i[v]+i[v+1],16))}else for(var v=0;v<i.length;v++){var _=i.charCodeAt(v),b=_>>8,x=_&255;b?c.push(b,x):c.push(x)}return c}e.toArray=r;function n(i){return i.length===1?"0"+i:i}e.zero2=n;function s(i){for(var u="",c=0;c<i.length;c++)u+=n(i[c].toString(16));return u}e.toHex=s,e.encode=function(u,c){return c==="hex"?s(u):u}})(b_);(function(t){var e=t,r=Ps,n=ni,s=b_;e.assert=n,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function i(b,x,S){var I=new Array(Math.max(b.bitLength(),S)+1),A;for(A=0;A<I.length;A+=1)I[A]=0;var k=1<<x+1,F=b.clone();for(A=0;A<I.length;A++){var C,R=F.andln(k-1);F.isOdd()?(R>(k>>1)-1?C=(k>>1)-R:C=R,F.isubn(C)):C=0,I[A]=C,F.iushrn(1)}return I}e.getNAF=i;function u(b,x){var S=[[],[]];b=b.clone(),x=x.clone();for(var I=0,A=0,k;b.cmpn(-I)>0||x.cmpn(-A)>0;){var F=b.andln(3)+I&3,C=x.andln(3)+A&3;F===3&&(F=-1),C===3&&(C=-1);var R;F&1?(k=b.andln(7)+I&7,(k===3||k===5)&&C===2?R=-F:R=F):R=0,S[0].push(R);var V;C&1?(k=x.andln(7)+A&7,(k===3||k===5)&&F===2?V=-C:V=C):V=0,S[1].push(V),2*I===R+1&&(I=1-I),2*A===V+1&&(A=1-A),b.iushrn(1),x.iushrn(1)}return S}e.getJSF=u;function c(b,x,S){var I="_"+x;b.prototype[x]=function(){return this[I]!==void 0?this[I]:this[I]=S.call(this)}}e.cachedProperty=c;function v(b){return typeof b=="string"?e.toArray(b,"hex"):b}e.parseBytes=v;function _(b){return new r(b,"hex","le")}e.intFromLE=_})(Kn);var x_={},Fa=Ps,xc=Kn,op=xc.getNAF,SH=xc.getJSF,lp=xc.assert;function Ca(t,e){this.type=t,this.p=new Fa(e.p,16),this.red=e.prime?Fa.red(e.prime):Fa.mont(this.p),this.zero=new Fa(0).toRed(this.red),this.one=new Fa(1).toRed(this.red),this.two=new Fa(2).toRed(this.red),this.n=e.n&&new Fa(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Pm=Ca;Ca.prototype.point=function(){throw new Error("Not implemented")};Ca.prototype.validate=function(){throw new Error("Not implemented")};Ca.prototype._fixedNafMul=function(e,r){lp(e.precomputed);var n=e._getDoubles(),s=op(r,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var u=[],c,v;for(c=0;c<s.length;c+=n.step){v=0;for(var _=c+n.step-1;_>=c;_--)v=(v<<1)+s[_];u.push(v)}for(var b=this.jpoint(null,null,null),x=this.jpoint(null,null,null),S=i;S>0;S--){for(c=0;c<u.length;c++)v=u[c],v===S?x=x.mixedAdd(n.points[c]):v===-S&&(x=x.mixedAdd(n.points[c].neg()));b=b.add(x)}return b.toP()};Ca.prototype._wnafMul=function(e,r){var n=4,s=e._getNAFPoints(n);n=s.wnd;for(var i=s.points,u=op(r,n,this._bitLength),c=this.jpoint(null,null,null),v=u.length-1;v>=0;v--){for(var _=0;v>=0&&u[v]===0;v--)_++;if(v>=0&&_++,c=c.dblp(_),v<0)break;var b=u[v];lp(b!==0),e.type==="affine"?b>0?c=c.mixedAdd(i[b-1>>1]):c=c.mixedAdd(i[-b-1>>1].neg()):b>0?c=c.add(i[b-1>>1]):c=c.add(i[-b-1>>1].neg())}return e.type==="affine"?c.toP():c};Ca.prototype._wnafMulAdd=function(e,r,n,s,i){var u=this._wnafT1,c=this._wnafT2,v=this._wnafT3,_=0,b,x,S;for(b=0;b<s;b++){S=r[b];var I=S._getNAFPoints(e);u[b]=I.wnd,c[b]=I.points}for(b=s-1;b>=1;b-=2){var A=b-1,k=b;if(u[A]!==1||u[k]!==1){v[A]=op(n[A],u[A],this._bitLength),v[k]=op(n[k],u[k],this._bitLength),_=Math.max(v[A].length,_),_=Math.max(v[k].length,_);continue}var F=[r[A],null,null,r[k]];r[A].y.cmp(r[k].y)===0?(F[1]=r[A].add(r[k]),F[2]=r[A].toJ().mixedAdd(r[k].neg())):r[A].y.cmp(r[k].y.redNeg())===0?(F[1]=r[A].toJ().mixedAdd(r[k]),F[2]=r[A].add(r[k].neg())):(F[1]=r[A].toJ().mixedAdd(r[k]),F[2]=r[A].toJ().mixedAdd(r[k].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],R=SH(n[A],n[k]);for(_=Math.max(R[0].length,_),v[A]=new Array(_),v[k]=new Array(_),x=0;x<_;x++){var V=R[0][x]|0,U=R[1][x]|0;v[A][x]=C[(V+1)*3+(U+1)],v[k][x]=0,c[A]=F}}var Q=this.jpoint(null,null,null),ee=this._wnafT4;for(b=_;b>=0;b--){for(var j=0;b>=0;){var B=!0;for(x=0;x<s;x++)ee[x]=v[x][b]|0,ee[x]!==0&&(B=!1);if(!B)break;j++,b--}if(b>=0&&j++,Q=Q.dblp(j),b<0)break;for(x=0;x<s;x++){var D=ee[x];D!==0&&(D>0?S=c[x][D-1>>1]:D<0&&(S=c[x][-D-1>>1].neg()),S.type==="affine"?Q=Q.mixedAdd(S):Q=Q.add(S))}}for(b=0;b<s;b++)c[b]=null;return i?Q:Q.toP()};function si(t,e){this.curve=t,this.type=e,this.precomputed=null}Ca.BasePoint=si;si.prototype.eq=function(){throw new Error("Not implemented")};si.prototype.validate=function(){return this.curve.validate(this)};Ca.prototype.decodePoint=function(e,r){e=xc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?lp(e[e.length-1]%2===0):e[0]===7&&lp(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return s}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};si.prototype.encodeCompressed=function(e){return this.encode(e,!0)};si.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};si.prototype.encode=function(e,r){return xc.encode(this._encode(r),e)};si.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};si.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};si.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],s=this,i=0;i<r;i+=e){for(var u=0;u<e;u++)s=s.dbl();n.push(s)}return{step:e,points:n}};si.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,s=n===1?null:this.dbl(),i=1;i<n;i++)r[i]=r[i-1].add(s);return{wnd:e,points:r}};si.prototype._getBeta=function(){return null};si.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var IH=Kn,yr=Ps,M_=kt,Ru=Pm,TH=IH.assert;function ai(t){Ru.call(this,"short",t),this.a=new yr(t.a,16).toRed(this.red),this.b=new yr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}M_(ai,Ru);var AH=ai;ai.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new yr(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)n=new yr(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(r))===0?n=i[0]:(n=i[1],TH(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var u;return e.basis?u=e.basis.map(function(c){return{a:new yr(c.a,16),b:new yr(c.b,16)}}):u=this._getEndoBasis(n),{beta:r,lambda:n,basis:u}}};ai.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:yr.mont(e),n=new yr(2).toRed(r).redInvm(),s=n.redNeg(),i=new yr(3).toRed(r).redNeg().redSqrt().redMul(n),u=s.redAdd(i).fromRed(),c=s.redSub(i).fromRed();return[u,c]};ai.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,s=this.n.clone(),i=new yr(1),u=new yr(0),c=new yr(0),v=new yr(1),_,b,x,S,I,A,k,F=0,C,R;n.cmpn(0)!==0;){var V=s.div(n);C=s.sub(V.mul(n)),R=c.sub(V.mul(i));var U=v.sub(V.mul(u));if(!x&&C.cmp(r)<0)_=k.neg(),b=i,x=C.neg(),S=R;else if(x&&++F===2)break;k=C,s=n,n=C,c=i,i=R,v=u,u=U}I=C.neg(),A=R;var Q=x.sqr().add(S.sqr()),ee=I.sqr().add(A.sqr());return ee.cmp(Q)>=0&&(I=_,A=b),x.negative&&(x=x.neg(),S=S.neg()),I.negative&&(I=I.neg(),A=A.neg()),[{a:x,b:S},{a:I,b:A}]};ai.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],s=r[1],i=s.b.mul(e).divRound(this.n),u=n.b.neg().mul(e).divRound(this.n),c=i.mul(n.a),v=u.mul(s.a),_=i.mul(n.b),b=u.mul(s.b),x=e.sub(c).sub(v),S=_.add(b).neg();return{k1:x,k2:S}};ai.prototype.pointFromX=function(e,r){e=new yr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=n.redSqrt();if(s.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(r&&!i||!r&&i)&&(s=s.redNeg()),this.point(e,s)};ai.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,s=this.a.redMul(r),i=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return n.redSqr().redISub(i).cmpn(0)===0};ai.prototype._endoWnafMulAdd=function(e,r,n){for(var s=this._endoWnafT1,i=this._endoWnafT2,u=0;u<e.length;u++){var c=this._endoSplit(r[u]),v=e[u],_=v._getBeta();c.k1.negative&&(c.k1.ineg(),v=v.neg(!0)),c.k2.negative&&(c.k2.ineg(),_=_.neg(!0)),s[u*2]=v,s[u*2+1]=_,i[u*2]=c.k1,i[u*2+1]=c.k2}for(var b=this._wnafMulAdd(1,s,i,u*2,n),x=0;x<u*2;x++)s[x]=null,i[x]=null;return b};function Fr(t,e,r,n){Ru.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new yr(e,16),this.y=new yr(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}M_(Fr,Ru.BasePoint);ai.prototype.point=function(e,r,n){return new Fr(this,e,r,n)};ai.prototype.pointFromJSON=function(e,r){return Fr.fromJSON(this,e,r)};Fr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,s=function(i){return n.point(i.x.redMul(n.endo.beta),i.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}};Fr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Fr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],n);if(!r[2])return s;function i(c){return e.point(c[0],c[1],n)}var u=r[2];return s.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[s].concat(u.doubles.points.map(i))},naf:u.naf&&{wnd:u.naf.wnd,points:[s].concat(u.naf.points.map(i))}},s};Fr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Fr.prototype.isInfinity=function(){return this.inf};Fr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,s)};Fr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),s=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(s),u=i.redSqr().redISub(this.x.redAdd(this.x)),c=i.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,c)};Fr.prototype.getX=function(){return this.x.fromRed()};Fr.prototype.getY=function(){return this.y.fromRed()};Fr.prototype.mul=function(e){return e=new yr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Fr.prototype.mulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};Fr.prototype.jmulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};Fr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Fr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,s=function(i){return i.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(s)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(s)}}}return r};Fr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Wr(t,e,r,n){Ru.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new yr(0)):(this.x=new yr(e,16),this.y=new yr(r,16),this.z=new yr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}M_(Wr,Ru.BasePoint);ai.prototype.jpoint=function(e,r,n){return new Wr(this,e,r,n)};Wr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(n,s)};Wr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Wr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),s=this.x.redMul(r),i=e.x.redMul(n),u=this.y.redMul(r.redMul(e.z)),c=e.y.redMul(n.redMul(this.z)),v=s.redSub(i),_=u.redSub(c);if(v.cmpn(0)===0)return _.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=v.redSqr(),x=b.redMul(v),S=s.redMul(b),I=_.redSqr().redIAdd(x).redISub(S).redISub(S),A=_.redMul(S.redISub(I)).redISub(u.redMul(x)),k=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(I,A,k)};Wr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,s=e.x.redMul(r),i=this.y,u=e.y.redMul(r).redMul(this.z),c=n.redSub(s),v=i.redSub(u);if(c.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=c.redSqr(),b=_.redMul(c),x=n.redMul(_),S=v.redSqr().redIAdd(b).redISub(x).redISub(x),I=v.redMul(x.redISub(S)).redISub(i.redMul(b)),A=this.z.redMul(c);return this.curve.jpoint(S,I,A)};Wr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var s=this.curve.a,i=this.curve.tinv,u=this.x,c=this.y,v=this.z,_=v.redSqr().redSqr(),b=c.redAdd(c);for(r=0;r<e;r++){var x=u.redSqr(),S=b.redSqr(),I=S.redSqr(),A=x.redAdd(x).redIAdd(x).redIAdd(s.redMul(_)),k=u.redMul(S),F=A.redSqr().redISub(k.redAdd(k)),C=k.redISub(F),R=A.redMul(C);R=R.redIAdd(R).redISub(I);var V=b.redMul(v);r+1<e&&(_=_.redMul(I)),u=F,v=V,b=R}return this.curve.jpoint(u,b.redMul(i),v)};Wr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Wr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),u=i.redSqr(),c=this.x.redAdd(i).redSqr().redISub(s).redISub(u);c=c.redIAdd(c);var v=s.redAdd(s).redIAdd(s),_=v.redSqr().redISub(c).redISub(c),b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),e=_,r=v.redMul(c.redISub(_)).redISub(b),n=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),S=this.y.redSqr(),I=S.redSqr(),A=this.x.redAdd(S).redSqr().redISub(x).redISub(I);A=A.redIAdd(A);var k=x.redAdd(x).redIAdd(x),F=k.redSqr(),C=I.redIAdd(I);C=C.redIAdd(C),C=C.redIAdd(C),e=F.redISub(A).redISub(A),r=k.redMul(A.redISub(e)).redISub(C),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Wr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),u=i.redSqr(),c=this.x.redAdd(i).redSqr().redISub(s).redISub(u);c=c.redIAdd(c);var v=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),_=v.redSqr().redISub(c).redISub(c);e=_;var b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),r=v.redMul(c.redISub(_)).redISub(b),n=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),S=this.y.redSqr(),I=this.x.redMul(S),A=this.x.redSub(x).redMul(this.x.redAdd(x));A=A.redAdd(A).redIAdd(A);var k=I.redIAdd(I);k=k.redIAdd(k);var F=k.redAdd(k);e=A.redSqr().redISub(F),n=this.y.redAdd(this.z).redSqr().redISub(S).redISub(x);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=A.redMul(k.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,n)};Wr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,s=this.z,i=s.redSqr().redSqr(),u=r.redSqr(),c=n.redSqr(),v=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(i)),_=r.redAdd(r);_=_.redIAdd(_);var b=_.redMul(c),x=v.redSqr().redISub(b.redAdd(b)),S=b.redISub(x),I=c.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var A=v.redMul(S).redISub(I),k=n.redAdd(n).redMul(s);return this.curve.jpoint(x,A,k)};Wr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),s=r.redSqr(),i=e.redAdd(e).redIAdd(e),u=i.redSqr(),c=this.x.redAdd(r).redSqr().redISub(e).redISub(s);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(u);var v=c.redSqr(),_=s.redIAdd(s);_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var b=i.redIAdd(c).redSqr().redISub(u).redISub(v).redISub(_),x=r.redMul(b);x=x.redIAdd(x),x=x.redIAdd(x);var S=this.x.redMul(v).redISub(x);S=S.redIAdd(S),S=S.redIAdd(S);var I=this.y.redMul(b.redMul(_.redISub(b)).redISub(c.redMul(v)));I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var A=this.z.redAdd(c).redSqr().redISub(n).redISub(v);return this.curve.jpoint(S,I,A)};Wr.prototype.mul=function(e,r){return e=new yr(e,r),this.curve._wnafMul(this,e)};Wr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),i=n.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};Wr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),this.x.cmp(n)===0)return!0}};Wr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Wr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var bl=Ps,AT=kt,Cm=Pm,RH=Kn;function ku(t){Cm.call(this,"mont",t),this.a=new bl(t.a,16).toRed(this.red),this.b=new bl(t.b,16).toRed(this.red),this.i4=new bl(4).toRed(this.red).redInvm(),this.two=new bl(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}AT(ku,Cm);var kH=ku;ku.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),s=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),i=s.redSqrt();return i.redSqr().cmp(s)===0};function jr(t,e,r){Cm.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bl(e,16),this.z=new bl(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}AT(jr,Cm.BasePoint);ku.prototype.decodePoint=function(e,r){return this.point(RH.toArray(e,r),1)};ku.prototype.point=function(e,r){return new jr(this,e,r)};ku.prototype.pointFromJSON=function(e){return jr.fromJSON(this,e)};jr.prototype.precompute=function(){};jr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};jr.fromJSON=function(e,r){return new jr(e,r[0],r[1]||e.one)};jr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};jr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};jr.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),s=n.redSqr(),i=r.redSub(s),u=r.redMul(s),c=i.redMul(s.redAdd(this.curve.a24.redMul(i)));return this.curve.point(u,c)};jr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),s=this.x.redSub(this.z),i=e.x.redAdd(e.z),u=e.x.redSub(e.z),c=u.redMul(n),v=i.redMul(s),_=r.z.redMul(c.redAdd(v).redSqr()),b=r.x.redMul(c.redISub(v).redSqr());return this.curve.point(_,b)};jr.prototype.mul=function(e){for(var r=e.clone(),n=this,s=this.curve.point(null,null),i=this,u=[];r.cmpn(0)!==0;r.iushrn(1))u.push(r.andln(1));for(var c=u.length-1;c>=0;c--)u[c]===0?(n=n.diffAdd(s,i),s=s.dbl()):(s=n.diffAdd(s,i),n=n.dbl());return s};jr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};jr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};jr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var PH=Kn,us=Ps,RT=kt,Nm=Pm,CH=PH.assert;function Ji(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Nm.call(this,"edwards",t),this.a=new us(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new us(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new us(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),CH(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}RT(Ji,Nm);var NH=Ji;Ji.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Ji.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Ji.prototype.jpoint=function(e,r,n,s){return this.point(e,r,n,s)};Ji.prototype.pointFromX=function(e,r){e=new us(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),s=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),u=s.redMul(i.redInvm()),c=u.redSqrt();if(c.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");var v=c.fromRed().isOdd();return(r&&!v||!r&&v)&&(c=c.redNeg()),this.point(e,c)};Ji.prototype.pointFromY=function(e,r){e=new us(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),s=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),u=s.redMul(i.redInvm());if(u.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var c=u.redSqrt();if(c.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");return c.fromRed().isOdd()!==r&&(c=c.redNeg()),this.point(c,e)};Ji.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),s=r.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return s.cmp(i)===0};function nr(t,e,r,n,s){Nm.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new us(e,16),this.y=new us(r,16),this.z=n?new us(n,16):this.curve.one,this.t=s&&new us(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}RT(nr,Nm.BasePoint);Ji.prototype.pointFromJSON=function(e){return nr.fromJSON(this,e)};Ji.prototype.point=function(e,r,n,s){return new nr(this,e,r,n,s)};nr.fromJSON=function(e,r){return new nr(e,r[0],r[1],r[2])};nr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};nr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};nr.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var s=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),u=s.redAdd(r),c=u.redSub(n),v=s.redSub(r),_=i.redMul(c),b=u.redMul(v),x=i.redMul(v),S=c.redMul(u);return this.curve.point(_,b,S,x)};nr.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),s,i,u,c,v,_;if(this.curve.twisted){c=this.curve._mulA(r);var b=c.redAdd(n);this.zOne?(s=e.redSub(r).redSub(n).redMul(b.redSub(this.curve.two)),i=b.redMul(c.redSub(n)),u=b.redSqr().redSub(b).redSub(b)):(v=this.z.redSqr(),_=b.redSub(v).redISub(v),s=e.redSub(r).redISub(n).redMul(_),i=b.redMul(c.redSub(n)),u=b.redMul(_))}else c=r.redAdd(n),v=this.curve._mulC(this.z).redSqr(),_=c.redSub(v).redSub(v),s=this.curve._mulC(e.redISub(c)).redMul(_),i=this.curve._mulC(c).redMul(r.redISub(n)),u=c.redMul(_);return this.curve.point(s,i,u)};nr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};nr.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),u=n.redSub(r),c=i.redSub(s),v=i.redAdd(s),_=n.redAdd(r),b=u.redMul(c),x=v.redMul(_),S=u.redMul(_),I=c.redMul(v);return this.curve.point(b,x,I,S)};nr.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),s=this.x.redMul(e.x),i=this.y.redMul(e.y),u=this.curve.d.redMul(s).redMul(i),c=n.redSub(u),v=n.redAdd(u),_=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(i),b=r.redMul(c).redMul(_),x,S;return this.curve.twisted?(x=r.redMul(v).redMul(i.redSub(this.curve._mulA(s))),S=c.redMul(v)):(x=r.redMul(v).redMul(i.redSub(s)),S=this.curve._mulC(c).redMul(v)),this.curve.point(b,x,S)};nr.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};nr.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};nr.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};nr.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};nr.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};nr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};nr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};nr.prototype.getY=function(){return this.normalize(),this.y.fromRed()};nr.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};nr.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};nr.prototype.toP=nr.prototype.normalize;nr.prototype.mixedAdd=nr.prototype.add;(function(t){var e=t;e.base=Pm,e.short=AH,e.mont=kH,e.edwards=NH})(x_);var Dm={},Om={},Ut={},DH=ni,OH=kt;Ut.inherits=OH;function BH(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function LH(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),s=0;s<t.length;s+=2)r.push(parseInt(t[s]+t[s+1],16))}else for(var n=0,s=0;s<t.length;s++){var i=t.charCodeAt(s);i<128?r[n++]=i:i<2048?(r[n++]=i>>6|192,r[n++]=i&63|128):BH(t,s)?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=i&63|128):(r[n++]=i>>12|224,r[n++]=i>>6&63|128,r[n++]=i&63|128)}else for(s=0;s<t.length;s++)r[s]=t[s]|0;return r}Ut.toArray=LH;function VH(t){for(var e="",r=0;r<t.length;r++)e+=PT(t[r].toString(16));return e}Ut.toHex=VH;function kT(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ut.htonl=kT;function jH(t,e){for(var r="",n=0;n<t.length;n++){var s=t[n];e==="little"&&(s=kT(s)),r+=CT(s.toString(16))}return r}Ut.toHex32=jH;function PT(t){return t.length===1?"0"+t:t}Ut.zero2=PT;function CT(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ut.zero8=CT;function FH(t,e,r,n){var s=r-e;DH(s%4===0);for(var i=new Array(s/4),u=0,c=e;u<i.length;u++,c+=4){var v;n==="big"?v=t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:v=t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],i[u]=v>>>0}return i}Ut.join32=FH;function UH(t,e){for(var r=new Array(t.length*4),n=0,s=0;n<t.length;n++,s+=4){var i=t[n];e==="big"?(r[s]=i>>>24,r[s+1]=i>>>16&255,r[s+2]=i>>>8&255,r[s+3]=i&255):(r[s+3]=i>>>24,r[s+2]=i>>>16&255,r[s+1]=i>>>8&255,r[s]=i&255)}return r}Ut.split32=UH;function zH(t,e){return t>>>e|t<<32-e}Ut.rotr32=zH;function $H(t,e){return t<<e|t>>>32-e}Ut.rotl32=$H;function qH(t,e){return t+e>>>0}Ut.sum32=qH;function KH(t,e,r){return t+e+r>>>0}Ut.sum32_3=KH;function HH(t,e,r,n){return t+e+r+n>>>0}Ut.sum32_4=HH;function WH(t,e,r,n,s){return t+e+r+n+s>>>0}Ut.sum32_5=WH;function GH(t,e,r,n){var s=t[e],i=t[e+1],u=n+i>>>0,c=(u<n?1:0)+r+s;t[e]=c>>>0,t[e+1]=u}Ut.sum64=GH;function ZH(t,e,r,n){var s=e+n>>>0,i=(s<e?1:0)+t+r;return i>>>0}Ut.sum64_hi=ZH;function QH(t,e,r,n){var s=e+n;return s>>>0}Ut.sum64_lo=QH;function YH(t,e,r,n,s,i,u,c){var v=0,_=e;_=_+n>>>0,v+=_<e?1:0,_=_+i>>>0,v+=_<i?1:0,_=_+c>>>0,v+=_<c?1:0;var b=t+r+s+u+v;return b>>>0}Ut.sum64_4_hi=YH;function JH(t,e,r,n,s,i,u,c){var v=e+n+i+c;return v>>>0}Ut.sum64_4_lo=JH;function XH(t,e,r,n,s,i,u,c,v,_){var b=0,x=e;x=x+n>>>0,b+=x<e?1:0,x=x+i>>>0,b+=x<i?1:0,x=x+c>>>0,b+=x<c?1:0,x=x+_>>>0,b+=x<_?1:0;var S=t+r+s+u+v+b;return S>>>0}Ut.sum64_5_hi=XH;function eW(t,e,r,n,s,i,u,c,v,_){var b=e+n+i+c+_;return b>>>0}Ut.sum64_5_lo=eW;function tW(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ut.rotr64_hi=tW;function rW(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ut.rotr64_lo=rW;function nW(t,e,r){return t>>>r}Ut.shr64_hi=nW;function iW(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ut.shr64_lo=iW;var Pu={},P4=Ut,sW=ni;function Bm(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Pu.BlockHash=Bm;Bm.prototype.update=function(e,r){if(e=P4.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=P4.join32(e,0,e.length-n,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this};Bm.prototype.digest=function(e){return this.update(this._pad()),sW(this.pending===null),this._digest(e)};Bm.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,s=new Array(n+this.padLength);s[0]=128;for(var i=1;i<n;i++)s[i]=0;if(e<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)s[i++]=0;s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=e>>>24&255,s[i++]=e>>>16&255,s[i++]=e>>>8&255,s[i++]=e&255}else for(s[i++]=e&255,s[i++]=e>>>8&255,s[i++]=e>>>16&255,s[i++]=e>>>24&255,s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=0,u=8;u<this.padLength;u++)s[i++]=0;return s};var Cu={},Xi={},aW=Ut,Ui=aW.rotr32;function oW(t,e,r,n){if(t===0)return NT(e,r,n);if(t===1||t===3)return OT(e,r,n);if(t===2)return DT(e,r,n)}Xi.ft_1=oW;function NT(t,e,r){return t&e^~t&r}Xi.ch32=NT;function DT(t,e,r){return t&e^t&r^e&r}Xi.maj32=DT;function OT(t,e,r){return t^e^r}Xi.p32=OT;function lW(t){return Ui(t,2)^Ui(t,13)^Ui(t,22)}Xi.s0_256=lW;function uW(t){return Ui(t,6)^Ui(t,11)^Ui(t,25)}Xi.s1_256=uW;function fW(t){return Ui(t,7)^Ui(t,18)^t>>>3}Xi.g0_256=fW;function hW(t){return Ui(t,17)^Ui(t,19)^t>>>10}Xi.g1_256=hW;var uu=Ut,cW=Pu,dW=Xi,cg=uu.rotl32,yf=uu.sum32,pW=uu.sum32_5,mW=dW.ft_1,BT=cW.BlockHash,vW=[1518500249,1859775393,2400959708,3395469782];function Wi(){if(!(this instanceof Wi))return new Wi;BT.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}uu.inherits(Wi,BT);var gW=Wi;Wi.blockSize=512;Wi.outSize=160;Wi.hmacStrength=80;Wi.padLength=64;Wi.prototype._update=function(e,r){for(var n=this.W,s=0;s<16;s++)n[s]=e[r+s];for(;s<n.length;s++)n[s]=cg(n[s-3]^n[s-8]^n[s-14]^n[s-16],1);var i=this.h[0],u=this.h[1],c=this.h[2],v=this.h[3],_=this.h[4];for(s=0;s<n.length;s++){var b=~~(s/20),x=pW(cg(i,5),mW(b,u,c,v),_,n[s],vW[b]);_=v,v=c,c=cg(u,30),u=i,i=x}this.h[0]=yf(this.h[0],i),this.h[1]=yf(this.h[1],u),this.h[2]=yf(this.h[2],c),this.h[3]=yf(this.h[3],v),this.h[4]=yf(this.h[4],_)};Wi.prototype._digest=function(e){return e==="hex"?uu.toHex32(this.h,"big"):uu.split32(this.h,"big")};var fu=Ut,yW=Pu,Nu=Xi,wW=ni,fi=fu.sum32,_W=fu.sum32_4,bW=fu.sum32_5,xW=Nu.ch32,MW=Nu.maj32,EW=Nu.s0_256,SW=Nu.s1_256,IW=Nu.g0_256,TW=Nu.g1_256,LT=yW.BlockHash,AW=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Gi(){if(!(this instanceof Gi))return new Gi;LT.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=AW,this.W=new Array(64)}fu.inherits(Gi,LT);var VT=Gi;Gi.blockSize=512;Gi.outSize=256;Gi.hmacStrength=192;Gi.padLength=64;Gi.prototype._update=function(e,r){for(var n=this.W,s=0;s<16;s++)n[s]=e[r+s];for(;s<n.length;s++)n[s]=_W(TW(n[s-2]),n[s-7],IW(n[s-15]),n[s-16]);var i=this.h[0],u=this.h[1],c=this.h[2],v=this.h[3],_=this.h[4],b=this.h[5],x=this.h[6],S=this.h[7];for(wW(this.k.length===n.length),s=0;s<n.length;s++){var I=bW(S,SW(_),xW(_,b,x),this.k[s],n[s]),A=fi(EW(i),MW(i,u,c));S=x,x=b,b=_,_=fi(v,I),v=c,c=u,u=i,i=fi(I,A)}this.h[0]=fi(this.h[0],i),this.h[1]=fi(this.h[1],u),this.h[2]=fi(this.h[2],c),this.h[3]=fi(this.h[3],v),this.h[4]=fi(this.h[4],_),this.h[5]=fi(this.h[5],b),this.h[6]=fi(this.h[6],x),this.h[7]=fi(this.h[7],S)};Gi.prototype._digest=function(e){return e==="hex"?fu.toHex32(this.h,"big"):fu.split32(this.h,"big")};var $y=Ut,jT=VT;function Ms(){if(!(this instanceof Ms))return new Ms;jT.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$y.inherits(Ms,jT);var RW=Ms;Ms.blockSize=512;Ms.outSize=224;Ms.hmacStrength=192;Ms.padLength=64;Ms.prototype._digest=function(e){return e==="hex"?$y.toHex32(this.h.slice(0,7),"big"):$y.split32(this.h.slice(0,7),"big")};var kn=Ut,kW=Pu,PW=ni,zi=kn.rotr64_hi,$i=kn.rotr64_lo,FT=kn.shr64_hi,UT=kn.shr64_lo,Vs=kn.sum64,dg=kn.sum64_hi,pg=kn.sum64_lo,CW=kn.sum64_4_hi,NW=kn.sum64_4_lo,DW=kn.sum64_5_hi,OW=kn.sum64_5_lo,zT=kW.BlockHash,BW=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Mi(){if(!(this instanceof Mi))return new Mi;zT.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=BW,this.W=new Array(160)}kn.inherits(Mi,zT);var $T=Mi;Mi.blockSize=1024;Mi.outSize=512;Mi.hmacStrength=192;Mi.padLength=128;Mi.prototype._prepareBlock=function(e,r){for(var n=this.W,s=0;s<32;s++)n[s]=e[r+s];for(;s<n.length;s+=2){var i=WW(n[s-4],n[s-3]),u=GW(n[s-4],n[s-3]),c=n[s-14],v=n[s-13],_=KW(n[s-30],n[s-29]),b=HW(n[s-30],n[s-29]),x=n[s-32],S=n[s-31];n[s]=CW(i,u,c,v,_,b,x,S),n[s+1]=NW(i,u,c,v,_,b,x,S)}};Mi.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,s=this.h[0],i=this.h[1],u=this.h[2],c=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],x=this.h[7],S=this.h[8],I=this.h[9],A=this.h[10],k=this.h[11],F=this.h[12],C=this.h[13],R=this.h[14],V=this.h[15];PW(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var Q=R,ee=V,j=$W(S,I),B=qW(S,I),D=LW(S,I,A,k,F),$=VW(S,I,A,k,F,C),g=this.k[U],a=this.k[U+1],l=n[U],f=n[U+1],h=DW(Q,ee,j,B,D,$,g,a,l,f),m=OW(Q,ee,j,B,D,$,g,a,l,f);Q=UW(s,i),ee=zW(s,i),j=jW(s,i,u,c,v),B=FW(s,i,u,c,v,_);var y=dg(Q,ee,j,B),w=pg(Q,ee,j,B);R=F,V=C,F=A,C=k,A=S,k=I,S=dg(b,x,h,m),I=pg(x,x,h,m),b=v,x=_,v=u,_=c,u=s,c=i,s=dg(h,m,y,w),i=pg(h,m,y,w)}Vs(this.h,0,s,i),Vs(this.h,2,u,c),Vs(this.h,4,v,_),Vs(this.h,6,b,x),Vs(this.h,8,S,I),Vs(this.h,10,A,k),Vs(this.h,12,F,C),Vs(this.h,14,R,V)};Mi.prototype._digest=function(e){return e==="hex"?kn.toHex32(this.h,"big"):kn.split32(this.h,"big")};function LW(t,e,r,n,s){var i=t&r^~t&s;return i<0&&(i+=4294967296),i}function VW(t,e,r,n,s,i){var u=e&n^~e&i;return u<0&&(u+=4294967296),u}function jW(t,e,r,n,s){var i=t&r^t&s^r&s;return i<0&&(i+=4294967296),i}function FW(t,e,r,n,s,i){var u=e&n^e&i^n&i;return u<0&&(u+=4294967296),u}function UW(t,e){var r=zi(t,e,28),n=zi(e,t,2),s=zi(e,t,7),i=r^n^s;return i<0&&(i+=4294967296),i}function zW(t,e){var r=$i(t,e,28),n=$i(e,t,2),s=$i(e,t,7),i=r^n^s;return i<0&&(i+=4294967296),i}function $W(t,e){var r=zi(t,e,14),n=zi(t,e,18),s=zi(e,t,9),i=r^n^s;return i<0&&(i+=4294967296),i}function qW(t,e){var r=$i(t,e,14),n=$i(t,e,18),s=$i(e,t,9),i=r^n^s;return i<0&&(i+=4294967296),i}function KW(t,e){var r=zi(t,e,1),n=zi(t,e,8),s=FT(t,e,7),i=r^n^s;return i<0&&(i+=4294967296),i}function HW(t,e){var r=$i(t,e,1),n=$i(t,e,8),s=UT(t,e,7),i=r^n^s;return i<0&&(i+=4294967296),i}function WW(t,e){var r=zi(t,e,19),n=zi(e,t,29),s=FT(t,e,6),i=r^n^s;return i<0&&(i+=4294967296),i}function GW(t,e){var r=$i(t,e,19),n=$i(e,t,29),s=UT(t,e,6),i=r^n^s;return i<0&&(i+=4294967296),i}var qy=Ut,qT=$T;function Es(){if(!(this instanceof Es))return new Es;qT.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}qy.inherits(Es,qT);var ZW=Es;Es.blockSize=1024;Es.outSize=384;Es.hmacStrength=192;Es.padLength=128;Es.prototype._digest=function(e){return e==="hex"?qy.toHex32(this.h.slice(0,12),"big"):qy.split32(this.h.slice(0,12),"big")};Cu.sha1=gW;Cu.sha224=RW;Cu.sha256=VT;Cu.sha384=ZW;Cu.sha512=$T;var KT={},Po=Ut,QW=Pu,_d=Po.rotl32,C4=Po.sum32,wf=Po.sum32_3,N4=Po.sum32_4,HT=QW.BlockHash;function Zi(){if(!(this instanceof Zi))return new Zi;HT.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Po.inherits(Zi,HT);KT.ripemd160=Zi;Zi.blockSize=512;Zi.outSize=160;Zi.hmacStrength=192;Zi.padLength=64;Zi.prototype._update=function(e,r){for(var n=this.h[0],s=this.h[1],i=this.h[2],u=this.h[3],c=this.h[4],v=n,_=s,b=i,x=u,S=c,I=0;I<80;I++){var A=C4(_d(N4(n,D4(I,s,i,u),e[XW[I]+r],YW(I)),tG[I]),c);n=c,c=u,u=_d(i,10),i=s,s=A,A=C4(_d(N4(v,D4(79-I,_,b,x),e[eG[I]+r],JW(I)),rG[I]),S),v=S,S=x,x=_d(b,10),b=_,_=A}A=wf(this.h[1],i,x),this.h[1]=wf(this.h[2],u,S),this.h[2]=wf(this.h[3],c,v),this.h[3]=wf(this.h[4],n,_),this.h[4]=wf(this.h[0],s,b),this.h[0]=A};Zi.prototype._digest=function(e){return e==="hex"?Po.toHex32(this.h,"little"):Po.split32(this.h,"little")};function D4(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function YW(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function JW(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var XW=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],eG=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tG=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],rG=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],nG=Ut,iG=ni;function hu(t,e,r){if(!(this instanceof hu))return new hu(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(nG.toArray(e,r))}var sG=hu;hu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),iG(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};hu.prototype.update=function(e,r){return this.inner.update(e,r),this};hu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ut,e.common=Pu,e.sha=Cu,e.ripemd=KT,e.hmac=sG,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Om);var mg,O4;function aG(){return O4||(O4=1,mg={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),mg}(function(t){var e=t,r=Om,n=x_,s=Kn,i=s.assert;function u(_){_.type==="short"?this.curve=new n.short(_):_.type==="edwards"?this.curve=new n.edwards(_):this.curve=new n.mont(_),this.g=this.curve.g,this.n=this.curve.n,this.hash=_.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=u;function c(_,b){Object.defineProperty(e,_,{configurable:!0,enumerable:!0,get:function(){var x=new u(b);return Object.defineProperty(e,_,{configurable:!0,enumerable:!0,value:x}),x}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var v;try{v=aG()}catch{v=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v]})})(Dm);var oG=Om,co=b_,WT=ni;function ba(t){if(!(this instanceof ba))return new ba(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=co.toArray(t.entropy,t.entropyEnc||"hex"),r=co.toArray(t.nonce,t.nonceEnc||"hex"),n=co.toArray(t.pers,t.persEnc||"hex");WT(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var lG=ba;ba.prototype._init=function(e,r,n){var s=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};ba.prototype._hmac=function(){return new oG.hmac(this.hash,this.K)};ba.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ba.prototype.reseed=function(e,r,n,s){typeof r!="string"&&(s=n,n=r,r=null),e=co.toArray(e,r),n=co.toArray(n,s),WT(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ba.prototype.generate=function(e,r,n,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=n,n=r,r=null),n&&(n=co.toArray(n,s||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var u=i.slice(0,e);return this._update(n),this._reseed++,co.encode(u,r)};var uG=Ps,fG=Kn,Ky=fG.assert;function ln(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var hG=ln;ln.fromPublic=function(e,r,n){return r instanceof ln?r:new ln(e,{pub:r,pubEnc:n})};ln.fromPrivate=function(e,r,n){return r instanceof ln?r:new ln(e,{priv:r,privEnc:n})};ln.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};ln.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};ln.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};ln.prototype._importPrivate=function(e,r){this.priv=new uG(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};ln.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Ky(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ky(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};ln.prototype.derive=function(e){return e.validate()||Ky(e.validate(),"public point not validated"),e.mul(this.priv).getX()};ln.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};ln.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};ln.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var up=Ps,E_=Kn,cG=E_.assert;function Lm(t,e){if(t instanceof Lm)return t;this._importDER(t,e)||(cG(t.r&&t.s,"Signature without r or s"),this.r=new up(t.r,16),this.s=new up(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var dG=Lm;function pG(){this.place=0}function vg(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var s=0,i=0,u=e.place;i<n;i++,u++)s<<=8,s|=t[u],s>>>=0;return s<=127?!1:(e.place=u,s)}function B4(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Lm.prototype._importDER=function(e,r){e=E_.toArray(e,r);var n=new pG;if(e[n.place++]!==48)return!1;var s=vg(e,n);if(s===!1||s+n.place!==e.length||e[n.place++]!==2)return!1;var i=vg(e,n);if(i===!1||e[n.place]&128)return!1;var u=e.slice(n.place,i+n.place);if(n.place+=i,e[n.place++]!==2)return!1;var c=vg(e,n);if(c===!1||e.length!==c+n.place||e[n.place]&128)return!1;var v=e.slice(n.place,c+n.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new up(u),this.s=new up(v),this.recoveryParam=null,!0};function gg(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Lm.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=B4(r),n=B4(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var s=[2];gg(s,r.length),s=s.concat(r),s.push(2),gg(s,n.length);var i=s.concat(n),u=[48];return gg(u,i.length),u=u.concat(i),E_.encode(u,e)};var yg,L4;function mG(){if(L4)return yg;L4=1;var t=Ps,e=lG,r=Kn,n=Dm,s=m_(),i=r.assert,u=hG,c=dG;function v(_){if(!(this instanceof v))return new v(_);typeof _=="string"&&(i(Object.prototype.hasOwnProperty.call(n,_),"Unknown curve "+_),_=n[_]),_ instanceof n.PresetCurve&&(_={curve:_}),this.curve=_.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=_.curve.g,this.g.precompute(_.curve.n.bitLength()+1),this.hash=_.hash||_.curve.hash}return yg=v,v.prototype.keyPair=function(b){return new u(this,b)},v.prototype.keyFromPrivate=function(b,x){return u.fromPrivate(this,b,x)},v.prototype.keyFromPublic=function(b,x){return u.fromPublic(this,b,x)},v.prototype.genKeyPair=function(b){b||(b={});for(var x=new e({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||s(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),S=this.n.byteLength(),I=this.n.sub(new t(2));;){var A=new t(x.generate(S));if(!(A.cmp(I)>0))return A.iaddn(1),this.keyFromPrivate(A)}},v.prototype._truncateToN=function(b,x,S){var I;if(t.isBN(b)||typeof b=="number")b=new t(b,16),I=b.byteLength();else if(typeof b=="object")I=b.length,b=new t(b,16);else{var A=b.toString();I=A.length+1>>>1,b=new t(A,16)}typeof S!="number"&&(S=I*8);var k=S-this.n.bitLength();return k>0&&(b=b.ushrn(k)),!x&&b.cmp(this.n)>=0?b.sub(this.n):b},v.prototype.sign=function(b,x,S,I){if(typeof S=="object"&&(I=S,S=null),I||(I={}),typeof b!="string"&&typeof b!="number"&&!t.isBN(b)){i(typeof b=="object"&&b&&typeof b.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),i(b.length>>>0===b.length);for(var A=0;A<b.length;A++)i((b[A]&255)===b[A])}x=this.keyFromPrivate(x,S),b=this._truncateToN(b,!1,I.msgBitLength),i(!b.isNeg(),"Can not sign a negative message");var k=this.n.byteLength(),F=x.getPrivate().toArray("be",k),C=b.toArray("be",k);i(new t(C).eq(b),"Can not sign message");for(var R=new e({hash:this.hash,entropy:F,nonce:C,pers:I.pers,persEnc:I.persEnc||"utf8"}),V=this.n.sub(new t(1)),U=0;;U++){var Q=I.k?I.k(U):new t(R.generate(this.n.byteLength()));if(Q=this._truncateToN(Q,!0),!(Q.cmpn(1)<=0||Q.cmp(V)>=0)){var ee=this.g.mul(Q);if(!ee.isInfinity()){var j=ee.getX(),B=j.umod(this.n);if(B.cmpn(0)!==0){var D=Q.invm(this.n).mul(B.mul(x.getPrivate()).iadd(b));if(D=D.umod(this.n),D.cmpn(0)!==0){var $=(ee.getY().isOdd()?1:0)|(j.cmp(B)!==0?2:0);return I.canonical&&D.cmp(this.nh)>0&&(D=this.n.sub(D),$^=1),new c({r:B,s:D,recoveryParam:$})}}}}}},v.prototype.verify=function(b,x,S,I,A){A||(A={}),b=this._truncateToN(b,!1,A.msgBitLength),S=this.keyFromPublic(S,I),x=new c(x,"hex");var k=x.r,F=x.s;if(k.cmpn(1)<0||k.cmp(this.n)>=0||F.cmpn(1)<0||F.cmp(this.n)>=0)return!1;var C=F.invm(this.n),R=C.mul(b).umod(this.n),V=C.mul(k).umod(this.n),U;return this.curve._maxwellTrick?(U=this.g.jmulAdd(R,S.getPublic(),V),U.isInfinity()?!1:U.eqXToP(k)):(U=this.g.mulAdd(R,S.getPublic(),V),U.isInfinity()?!1:U.getX().umod(this.n).cmp(k)===0)},v.prototype.recoverPubKey=function(_,b,x,S){i((3&x)===x,"The recovery param is more than two bits"),b=new c(b,S);var I=this.n,A=new t(_),k=b.r,F=b.s,C=x&1,R=x>>1;if(k.cmp(this.curve.p.umod(this.curve.n))>=0&&R)throw new Error("Unable to find sencond key candinate");R?k=this.curve.pointFromX(k.add(this.curve.n),C):k=this.curve.pointFromX(k,C);var V=b.r.invm(I),U=I.sub(A).mul(V).umod(I),Q=F.mul(V).umod(I);return this.g.mulAdd(U,k,Q)},v.prototype.getKeyRecoveryParam=function(_,b,x,S){if(b=new c(b,S),b.recoveryParam!==null)return b.recoveryParam;for(var I=0;I<4;I++){var A;try{A=this.recoverPubKey(_,b,I)}catch{continue}if(A.eq(x))return I}throw new Error("Unable to find valid recovery factor")},yg}var Mc=Kn,GT=Mc.assert,V4=Mc.parseBytes,Du=Mc.cachedProperty;function Vr(t,e){this.eddsa=t,this._secret=V4(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=V4(e.pub)}Vr.fromPublic=function(e,r){return r instanceof Vr?r:new Vr(e,{pub:r})};Vr.fromSecret=function(e,r){return r instanceof Vr?r:new Vr(e,{secret:r})};Vr.prototype.secret=function(){return this._secret};Du(Vr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Du(Vr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Du(Vr,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,s=r.slice(0,e.encodingLength);return s[0]&=248,s[n]&=127,s[n]|=64,s});Du(Vr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Du(Vr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Du(Vr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Vr.prototype.sign=function(e){return GT(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Vr.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Vr.prototype.getSecret=function(e){return GT(this._secret,"KeyPair is public only"),Mc.encode(this.secret(),e)};Vr.prototype.getPublic=function(e){return Mc.encode(this.pubBytes(),e)};var vG=Vr,gG=Ps,Vm=Kn,j4=Vm.assert,jm=Vm.cachedProperty,yG=Vm.parseBytes;function Fo(t,e){this.eddsa=t,typeof e!="object"&&(e=yG(e)),Array.isArray(e)&&(j4(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),j4(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof gG&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}jm(Fo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});jm(Fo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});jm(Fo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});jm(Fo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Fo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Fo.prototype.toHex=function(){return Vm.encode(this.toBytes(),"hex").toUpperCase()};var wG=Fo,_G=Om,bG=Dm,cu=Kn,xG=cu.assert,ZT=cu.parseBytes,QT=vG,F4=wG;function Pn(t){if(xG(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Pn))return new Pn(t);t=bG[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=_G.sha512}var MG=Pn;Pn.prototype.sign=function(e,r){e=ZT(e);var n=this.keyFromSecret(r),s=this.hashInt(n.messagePrefix(),e),i=this.g.mul(s),u=this.encodePoint(i),c=this.hashInt(u,n.pubBytes(),e).mul(n.priv()),v=s.add(c).umod(this.curve.n);return this.makeSignature({R:i,S:v,Rencoded:u})};Pn.prototype.verify=function(e,r,n){if(e=ZT(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var s=this.keyFromPublic(n),i=this.hashInt(r.Rencoded(),s.pubBytes(),e),u=this.g.mul(r.S()),c=r.R().add(s.pub().mul(i));return c.eq(u)};Pn.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return cu.intFromLE(e.digest()).umod(this.curve.n)};Pn.prototype.keyFromPublic=function(e){return QT.fromPublic(this,e)};Pn.prototype.keyFromSecret=function(e){return QT.fromSecret(this,e)};Pn.prototype.makeSignature=function(e){return e instanceof F4?e:new F4(this,e)};Pn.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Pn.prototype.decodePoint=function(e){e=cu.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),s=(e[r]&128)!==0,i=cu.intFromLE(n);return this.curve.pointFromY(i,s)};Pn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Pn.prototype.decodeInt=function(e){return cu.intFromLE(e)};Pn.prototype.isPoint=function(e){return e instanceof this.pointClass};var U4;function S_(){return U4||(U4=1,function(t){var e=t;e.version=EH.version,e.utils=Kn,e.rand=m_(),e.curve=x_,e.curves=Dm,e.ec=mG(),e.eddsa=MG}(hg)),hg}var Si={},wg={},I_={exports:{}};I_.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(I_);var EG=I_.exports,_g={},z4;function SG(){return z4||(z4=1,function(t){var e=Ec(),r=kt,n=t;n.define=function(u,c){return new s(u,c)};function s(i,u){this.name=i,this.body=u,this.decoders={},this.encoders={}}s.prototype._createNamed=function(u){var c;try{c=wr.runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{c=function(_){this._initNamed(_)}}return r(c,u),c.prototype._initNamed=function(_){u.call(this,_)},new c(this)},s.prototype._getDecoder=function(u){return u=u||"der",this.decoders.hasOwnProperty(u)||(this.decoders[u]=this._createNamed(e.decoders[u])),this.decoders[u]},s.prototype.decode=function(u,c,v){return this._getDecoder(c).decode(u,v)},s.prototype._getEncoder=function(u){return u=u||"der",this.encoders.hasOwnProperty(u)||(this.encoders[u]=this._createNamed(e.encoders[u])),this.encoders[u]},s.prototype.encode=function(u,c,v){return this._getEncoder(c).encode(u,v)}}(_g)),_g}var bg={},YT={},IG=kt;function oi(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}YT.Reporter=oi;oi.prototype.isError=function(e){return e instanceof du};oi.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};oi.prototype.restore=function(e){var r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};oi.prototype.enterKey=function(e){return this._reporterState.path.push(e)};oi.prototype.exitKey=function(e){var r=this._reporterState;r.path=r.path.slice(0,e-1)};oi.prototype.leaveKey=function(e,r,n){var s=this._reporterState;this.exitKey(e),s.obj!==null&&(s.obj[r]=n)};oi.prototype.path=function(){return this._reporterState.path.join("/")};oi.prototype.enterObject=function(){var e=this._reporterState,r=e.obj;return e.obj={},r};oi.prototype.leaveObject=function(e){var r=this._reporterState,n=r.obj;return r.obj=e,n};oi.prototype.error=function(e){var r,n=this._reporterState,s=e instanceof du;if(s?r=e:r=new du(n.path.map(function(i){return"["+JSON.stringify(i)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return s||n.errors.push(r),r};oi.prototype.wrapResult=function(e){var r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function du(t,e){this.path=t,this.rethrow(e)}IG(du,Error);du.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,du),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};var bd={},$4;function q4(){if($4)return bd;$4=1;var t=kt,e=th().Reporter,r=wr.Buffer;function n(i,u){if(e.call(this,u),!r.isBuffer(i)){this.error("Input not Buffer");return}this.base=i,this.offset=0,this.length=i.length}t(n,e),bd.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},n.prototype.restore=function(u){var c=new n(this.base);return c.offset=u.offset,c.length=this.offset,this.offset=u.offset,e.prototype.restore.call(this,u.reporter),c},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},n.prototype.skip=function(u,c){if(!(this.offset+u<=this.length))return this.error(c||"DecoderBuffer overrun");var v=new n(this.base);return v._reporterState=this._reporterState,v.offset=this.offset,v.length=this.offset+u,this.offset+=u,v},n.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)};function s(i,u){if(Array.isArray(i))this.length=0,this.value=i.map(function(c){return c instanceof s||(c=new s(c,u)),this.length+=c.length,c},this);else if(typeof i=="number"){if(!(0<=i&&i<=255))return u.error("non-byte EncoderBuffer value");this.value=i,this.length=1}else if(typeof i=="string")this.value=i,this.length=r.byteLength(i);else if(r.isBuffer(i))this.value=i,this.length=i.length;else return u.error("Unsupported type: "+typeof i)}return bd.EncoderBuffer=s,s.prototype.join=function(u,c){return u||(u=new r(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(v){v.join(u,c),c+=v.length}):(typeof this.value=="number"?u[c]=this.value:typeof this.value=="string"?u.write(this.value,c):r.isBuffer(this.value)&&this.value.copy(u,c),c+=this.length)),u},bd}var xg,K4;function TG(){if(K4)return xg;K4=1;var t=th().Reporter,e=th().EncoderBuffer,r=th().DecoderBuffer,n=ni,s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],i=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),u=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function c(_,b){var x={};this._baseState=x,x.enc=_,x.parent=b||null,x.children=null,x.tag=null,x.args=null,x.reverseArgs=null,x.choice=null,x.optional=!1,x.any=!1,x.obj=!1,x.use=null,x.useDecoder=null,x.key=null,x.default=null,x.explicit=null,x.implicit=null,x.contains=null,x.parent||(x.children=[],this._wrap())}xg=c;var v=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return c.prototype.clone=function(){var b=this._baseState,x={};v.forEach(function(I){x[I]=b[I]});var S=new this.constructor(x.parent);return S._baseState=x,S},c.prototype._wrap=function(){var b=this._baseState;i.forEach(function(x){this[x]=function(){var I=new this.constructor(this);return b.children.push(I),I[x].apply(I,arguments)}},this)},c.prototype._init=function(b){var x=this._baseState;n(x.parent===null),b.call(this),x.children=x.children.filter(function(S){return S._baseState.parent===this},this),n.equal(x.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(b){var x=this._baseState,S=b.filter(function(I){return I instanceof this.constructor},this);b=b.filter(function(I){return!(I instanceof this.constructor)},this),S.length!==0&&(n(x.children===null),x.children=S,S.forEach(function(I){I._baseState.parent=this},this)),b.length!==0&&(n(x.args===null),x.args=b,x.reverseArgs=b.map(function(I){if(typeof I!="object"||I.constructor!==Object)return I;var A={};return Object.keys(I).forEach(function(k){k==(k|0)&&(k|=0);var F=I[k];A[F]=k}),A}))},u.forEach(function(_){c.prototype[_]=function(){var x=this._baseState;throw new Error(_+" not implemented for encoding: "+x.enc)}}),s.forEach(function(_){c.prototype[_]=function(){var x=this._baseState,S=Array.prototype.slice.call(arguments);return n(x.tag===null),x.tag=_,this._useArgs(S),this}}),c.prototype.use=function(b){n(b);var x=this._baseState;return n(x.use===null),x.use=b,this},c.prototype.optional=function(){var b=this._baseState;return b.optional=!0,this},c.prototype.def=function(b){var x=this._baseState;return n(x.default===null),x.default=b,x.optional=!0,this},c.prototype.explicit=function(b){var x=this._baseState;return n(x.explicit===null&&x.implicit===null),x.explicit=b,this},c.prototype.implicit=function(b){var x=this._baseState;return n(x.explicit===null&&x.implicit===null),x.implicit=b,this},c.prototype.obj=function(){var b=this._baseState,x=Array.prototype.slice.call(arguments);return b.obj=!0,x.length!==0&&this._useArgs(x),this},c.prototype.key=function(b){var x=this._baseState;return n(x.key===null),x.key=b,this},c.prototype.any=function(){var b=this._baseState;return b.any=!0,this},c.prototype.choice=function(b){var x=this._baseState;return n(x.choice===null),x.choice=b,this._useArgs(Object.keys(b).map(function(S){return b[S]})),this},c.prototype.contains=function(b){var x=this._baseState;return n(x.use===null),x.contains=b,this},c.prototype._decode=function(b,x){var S=this._baseState;if(S.parent===null)return b.wrapResult(S.children[0]._decode(b,x));var I=S.default,A=!0,k=null;if(S.key!==null&&(k=b.enterKey(S.key)),S.optional){var F=null;if(S.explicit!==null?F=S.explicit:S.implicit!==null?F=S.implicit:S.tag!==null&&(F=S.tag),F===null&&!S.any){var C=b.save();try{S.choice===null?this._decodeGeneric(S.tag,b,x):this._decodeChoice(b,x),A=!0}catch{A=!1}b.restore(C)}else if(A=this._peekTag(b,F,S.any),b.isError(A))return A}var R;if(S.obj&&A&&(R=b.enterObject()),A){if(S.explicit!==null){var V=this._decodeTag(b,S.explicit);if(b.isError(V))return V;b=V}var U=b.offset;if(S.use===null&&S.choice===null){if(S.any)var C=b.save();var Q=this._decodeTag(b,S.implicit!==null?S.implicit:S.tag,S.any);if(b.isError(Q))return Q;S.any?I=b.raw(C):b=Q}if(x&&x.track&&S.tag!==null&&x.track(b.path(),U,b.length,"tagged"),x&&x.track&&S.tag!==null&&x.track(b.path(),b.offset,b.length,"content"),S.any?I=I:S.choice===null?I=this._decodeGeneric(S.tag,b,x):I=this._decodeChoice(b,x),b.isError(I))return I;if(!S.any&&S.choice===null&&S.children!==null&&S.children.forEach(function(B){B._decode(b,x)}),S.contains&&(S.tag==="octstr"||S.tag==="bitstr")){var ee=new r(I);I=this._getUse(S.contains,b._reporterState.obj)._decode(ee,x)}}return S.obj&&A&&(I=b.leaveObject(R)),S.key!==null&&(I!==null||A===!0)?b.leaveKey(k,S.key,I):k!==null&&b.exitKey(k),I},c.prototype._decodeGeneric=function(b,x,S){var I=this._baseState;return b==="seq"||b==="set"?null:b==="seqof"||b==="setof"?this._decodeList(x,b,I.args[0],S):/str$/.test(b)?this._decodeStr(x,b,S):b==="objid"&&I.args?this._decodeObjid(x,I.args[0],I.args[1],S):b==="objid"?this._decodeObjid(x,null,null,S):b==="gentime"||b==="utctime"?this._decodeTime(x,b,S):b==="null_"?this._decodeNull(x,S):b==="bool"?this._decodeBool(x,S):b==="objDesc"?this._decodeStr(x,b,S):b==="int"||b==="enum"?this._decodeInt(x,I.args&&I.args[0],S):I.use!==null?this._getUse(I.use,x._reporterState.obj)._decode(x,S):x.error("unknown tag: "+b)},c.prototype._getUse=function(b,x){var S=this._baseState;return S.useDecoder=this._use(b,x),n(S.useDecoder._baseState.parent===null),S.useDecoder=S.useDecoder._baseState.children[0],S.implicit!==S.useDecoder._baseState.implicit&&(S.useDecoder=S.useDecoder.clone(),S.useDecoder._baseState.implicit=S.implicit),S.useDecoder},c.prototype._decodeChoice=function(b,x){var S=this._baseState,I=null,A=!1;return Object.keys(S.choice).some(function(k){var F=b.save(),C=S.choice[k];try{var R=C._decode(b,x);if(b.isError(R))return!1;I={type:k,value:R},A=!0}catch{return b.restore(F),!1}return!0},this),A?I:b.error("Choice not matched")},c.prototype._createEncoderBuffer=function(b){return new e(b,this.reporter)},c.prototype._encode=function(b,x,S){var I=this._baseState;if(!(I.default!==null&&I.default===b)){var A=this._encodeValue(b,x,S);if(A!==void 0&&!this._skipDefault(A,x,S))return A}},c.prototype._encodeValue=function(b,x,S){var I=this._baseState;if(I.parent===null)return I.children[0]._encode(b,x||new t);var C=null;if(this.reporter=x,I.optional&&b===void 0)if(I.default!==null)b=I.default;else return;var A=null,k=!1;if(I.any)C=this._createEncoderBuffer(b);else if(I.choice)C=this._encodeChoice(b,x);else if(I.contains)A=this._getUse(I.contains,S)._encode(b,x),k=!0;else if(I.children)A=I.children.map(function(U){if(U._baseState.tag==="null_")return U._encode(null,x,b);if(U._baseState.key===null)return x.error("Child should have a key");var Q=x.enterKey(U._baseState.key);if(typeof b!="object")return x.error("Child expected, but input is not object");var ee=U._encode(b[U._baseState.key],x,b);return x.leaveKey(Q),ee},this).filter(function(U){return U}),A=this._createEncoderBuffer(A);else if(I.tag==="seqof"||I.tag==="setof"){if(!(I.args&&I.args.length===1))return x.error("Too many args for : "+I.tag);if(!Array.isArray(b))return x.error("seqof/setof, but data is not Array");var F=this.clone();F._baseState.implicit=null,A=this._createEncoderBuffer(b.map(function(U){var Q=this._baseState;return this._getUse(Q.args[0],b)._encode(U,x)},F))}else I.use!==null?C=this._getUse(I.use,S)._encode(b,x):(A=this._encodePrimitive(I.tag,b),k=!0);var C;if(!I.any&&I.choice===null){var R=I.implicit!==null?I.implicit:I.tag,V=I.implicit===null?"universal":"context";R===null?I.use===null&&x.error("Tag could be omitted only for .use()"):I.use===null&&(C=this._encodeComposite(R,k,V,A))}return I.explicit!==null&&(C=this._encodeComposite(I.explicit,!1,"context",C)),C},c.prototype._encodeChoice=function(b,x){var S=this._baseState,I=S.choice[b.type];return I||n(!1,b.type+" not found in "+JSON.stringify(Object.keys(S.choice))),I._encode(b.value,x)},c.prototype._encodePrimitive=function(b,x){var S=this._baseState;if(/str$/.test(b))return this._encodeStr(x,b);if(b==="objid"&&S.args)return this._encodeObjid(x,S.reverseArgs[0],S.args[1]);if(b==="objid")return this._encodeObjid(x,null,null);if(b==="gentime"||b==="utctime")return this._encodeTime(x,b);if(b==="null_")return this._encodeNull();if(b==="int"||b==="enum")return this._encodeInt(x,S.args&&S.reverseArgs[0]);if(b==="bool")return this._encodeBool(x);if(b==="objDesc")return this._encodeStr(x,b);throw new Error("Unsupported tag: "+b)},c.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},c.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(b)},xg}var H4;function th(){return H4||(H4=1,function(t){var e=t;e.Reporter=YT.Reporter,e.DecoderBuffer=q4().DecoderBuffer,e.EncoderBuffer=q4().EncoderBuffer,e.Node=TG()}(bg)),bg}var Mg={},Eg={},W4;function AG(){return W4||(W4=1,function(t){var e=JT();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)}(Eg)),Eg}var G4;function JT(){return G4||(G4=1,function(t){var e=t;e._reverse=function(n){var s={};return Object.keys(n).forEach(function(i){(i|0)==i&&(i=i|0);var u=n[i];s[u]=i}),s},e.der=AG()}(Mg)),Mg}var Sg={},Ig,Z4;function XT(){if(Z4)return Ig;Z4=1;var t=kt,e=Ec(),r=e.base,n=e.bignum,s=e.constants.der;function i(_){this.enc="der",this.name=_.name,this.entity=_,this.tree=new u,this.tree._init(_.body)}Ig=i,i.prototype.decode=function(b,x){return b instanceof r.DecoderBuffer||(b=new r.DecoderBuffer(b,x)),this.tree._decode(b,x)};function u(_){r.Node.call(this,"der",_)}t(u,r.Node),u.prototype._peekTag=function(b,x,S){if(b.isEmpty())return!1;var I=b.save(),A=c(b,'Failed to peek tag: "'+x+'"');return b.isError(A)?A:(b.restore(I),A.tag===x||A.tagStr===x||A.tagStr+"of"===x||S)},u.prototype._decodeTag=function(b,x,S){var I=c(b,'Failed to decode tag of "'+x+'"');if(b.isError(I))return I;var A=v(b,I.primitive,'Failed to get length of "'+x+'"');if(b.isError(A))return A;if(!S&&I.tag!==x&&I.tagStr!==x&&I.tagStr+"of"!==x)return b.error('Failed to match tag: "'+x+'"');if(I.primitive||A!==null)return b.skip(A,'Failed to match body of: "'+x+'"');var k=b.save(),F=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(F)?F:(A=b.offset-k.offset,b.restore(k),b.skip(A,'Failed to match body of: "'+x+'"'))},u.prototype._skipUntilEnd=function(b,x){for(;;){var S=c(b,x);if(b.isError(S))return S;var I=v(b,S.primitive,x);if(b.isError(I))return I;var A;if(S.primitive||I!==null?A=b.skip(I):A=this._skipUntilEnd(b,x),b.isError(A))return A;if(S.tagStr==="end")break}},u.prototype._decodeList=function(b,x,S,I){for(var A=[];!b.isEmpty();){var k=this._peekTag(b,"end");if(b.isError(k))return k;var F=S.decode(b,"der",I);if(b.isError(F)&&k)break;A.push(F)}return A},u.prototype._decodeStr=function(b,x){if(x==="bitstr"){var S=b.readUInt8();return b.isError(S)?S:{unused:S,data:b.raw()}}else if(x==="bmpstr"){var I=b.raw();if(I.length%2===1)return b.error("Decoding of string type: bmpstr length mismatch");for(var A="",k=0;k<I.length/2;k++)A+=String.fromCharCode(I.readUInt16BE(k*2));return A}else if(x==="numstr"){var F=b.raw().toString("ascii");return this._isNumstr(F)?F:b.error("Decoding of string type: numstr unsupported characters")}else{if(x==="octstr")return b.raw();if(x==="objDesc")return b.raw();if(x==="printstr"){var C=b.raw().toString("ascii");return this._isPrintstr(C)?C:b.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(x)?b.raw().toString():b.error("Decoding of string type: "+x+" unsupported")}},u.prototype._decodeObjid=function(b,x,S){for(var I,A=[],k=0;!b.isEmpty();){var F=b.readUInt8();k<<=7,k|=F&127,F&128||(A.push(k),k=0)}F&128&&A.push(k);var C=A[0]/40|0,R=A[0]%40;if(S?I=A:I=[C,R].concat(A.slice(1)),x){var V=x[I.join(" ")];V===void 0&&(V=x[I.join(".")]),V!==void 0&&(I=V)}return I},u.prototype._decodeTime=function(b,x){var S=b.raw().toString();if(x==="gentime")var I=S.slice(0,4)|0,A=S.slice(4,6)|0,k=S.slice(6,8)|0,F=S.slice(8,10)|0,C=S.slice(10,12)|0,R=S.slice(12,14)|0;else if(x==="utctime"){var I=S.slice(0,2)|0,A=S.slice(2,4)|0,k=S.slice(4,6)|0,F=S.slice(6,8)|0,C=S.slice(8,10)|0,R=S.slice(10,12)|0;I<70?I=2e3+I:I=1900+I}else return b.error("Decoding "+x+" time is not supported yet");return Date.UTC(I,A-1,k,F,C,R,0)},u.prototype._decodeNull=function(b){return null},u.prototype._decodeBool=function(b){var x=b.readUInt8();return b.isError(x)?x:x!==0},u.prototype._decodeInt=function(b,x){var S=b.raw(),I=new n(S);return x&&(I=x[I.toString(10)]||I),I},u.prototype._use=function(b,x){return typeof b=="function"&&(b=b(x)),b._getDecoder("der").tree};function c(_,b){var x=_.readUInt8(b);if(_.isError(x))return x;var S=s.tagClass[x>>6],I=(x&32)===0;if((x&31)===31){var A=x;for(x=0;(A&128)===128;){if(A=_.readUInt8(b),_.isError(A))return A;x<<=7,x|=A&127}}else x&=31;var k=s.tag[x];return{cls:S,primitive:I,tag:x,tagStr:k}}function v(_,b,x){var S=_.readUInt8(x);if(_.isError(S))return S;if(!b&&S===128)return null;if(!(S&128))return S;var I=S&127;if(I>4)return _.error("length octect is too long");S=0;for(var A=0;A<I;A++){S<<=8;var k=_.readUInt8(x);if(_.isError(k))return k;S|=k}return S}return Ig}var Tg,Q4;function RG(){if(Q4)return Tg;Q4=1;var t=kt,e=wr.Buffer,r=XT();function n(s){r.call(this,s),this.enc="pem"}return t(n,r),Tg=n,n.prototype.decode=function(i,u){for(var c=i.toString().split(/[\r\n]+/g),v=u.label.toUpperCase(),_=/^-----(BEGIN|END) ([^-]+)-----$/,b=-1,x=-1,S=0;S<c.length;S++){var I=c[S].match(_);if(I!==null&&I[2]===v)if(b===-1){if(I[1]!=="BEGIN")break;b=S}else{if(I[1]!=="END")break;x=S;break}}if(b===-1||x===-1)throw new Error("PEM section not found for: "+v);var A=c.slice(b+1,x).join("");A.replace(/[^a-z0-9\+\/=]+/gi,"");var k=new e(A,"base64");return r.prototype.decode.call(this,k,u)},Tg}var Y4;function kG(){return Y4||(Y4=1,function(t){var e=t;e.der=XT(),e.pem=RG()}(Sg)),Sg}var Ag={},Rg,J4;function eA(){if(J4)return Rg;J4=1;var t=kt,e=wr.Buffer,r=Ec(),n=r.base,s=r.constants.der;function i(_){this.enc="der",this.name=_.name,this.entity=_,this.tree=new u,this.tree._init(_.body)}Rg=i,i.prototype.encode=function(b,x){return this.tree._encode(b,x).join()};function u(_){n.Node.call(this,"der",_)}t(u,n.Node),u.prototype._encodeComposite=function(b,x,S,I){var A=v(b,x,S,this.reporter);if(I.length<128){var C=new e(2);return C[0]=A,C[1]=I.length,this._createEncoderBuffer([C,I])}for(var k=1,F=I.length;F>=256;F>>=8)k++;var C=new e(2+k);C[0]=A,C[1]=128|k;for(var F=1+k,R=I.length;R>0;F--,R>>=8)C[F]=R&255;return this._createEncoderBuffer([C,I])},u.prototype._encodeStr=function(b,x){if(x==="bitstr")return this._createEncoderBuffer([b.unused|0,b.data]);if(x==="bmpstr"){for(var S=new e(b.length*2),I=0;I<b.length;I++)S.writeUInt16BE(b.charCodeAt(I),I*2);return this._createEncoderBuffer(S)}else return x==="numstr"?this._isNumstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: numstr supports only digits and space"):x==="printstr"?this._isPrintstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(x)?this._createEncoderBuffer(b):x==="objDesc"?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: "+x+" unsupported")},u.prototype._encodeObjid=function(b,x,S){if(typeof b=="string"){if(!x)return this.reporter.error("string objid given, but no values map found");if(!x.hasOwnProperty(b))return this.reporter.error("objid not found in values map");b=x[b].split(/[\s\.]+/g);for(var I=0;I<b.length;I++)b[I]|=0}else if(Array.isArray(b)){b=b.slice();for(var I=0;I<b.length;I++)b[I]|=0}if(!Array.isArray(b))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(b));if(!S){if(b[1]>=40)return this.reporter.error("Second objid identifier OOB");b.splice(0,2,b[0]*40+b[1])}for(var A=0,I=0;I<b.length;I++){var k=b[I];for(A++;k>=128;k>>=7)A++}for(var F=new e(A),C=F.length-1,I=b.length-1;I>=0;I--){var k=b[I];for(F[C--]=k&127;(k>>=7)>0;)F[C--]=128|k&127}return this._createEncoderBuffer(F)};function c(_){return _<10?"0"+_:_}u.prototype._encodeTime=function(b,x){var S,I=new Date(b);return x==="gentime"?S=[c(I.getFullYear()),c(I.getUTCMonth()+1),c(I.getUTCDate()),c(I.getUTCHours()),c(I.getUTCMinutes()),c(I.getUTCSeconds()),"Z"].join(""):x==="utctime"?S=[c(I.getFullYear()%100),c(I.getUTCMonth()+1),c(I.getUTCDate()),c(I.getUTCHours()),c(I.getUTCMinutes()),c(I.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+x+" time is not supported yet"),this._encodeStr(S,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(b,x){if(typeof b=="string"){if(!x)return this.reporter.error("String int or enum given, but no values map");if(!x.hasOwnProperty(b))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(b));b=x[b]}if(typeof b!="number"&&!e.isBuffer(b)){var S=b.toArray();!b.sign&&S[0]&128&&S.unshift(0),b=new e(S)}if(e.isBuffer(b)){var I=b.length;b.length===0&&I++;var k=new e(I);return b.copy(k),b.length===0&&(k[0]=0),this._createEncoderBuffer(k)}if(b<128)return this._createEncoderBuffer(b);if(b<256)return this._createEncoderBuffer([0,b]);for(var I=1,A=b;A>=256;A>>=8)I++;for(var k=new Array(I),A=k.length-1;A>=0;A--)k[A]=b&255,b>>=8;return k[0]&128&&k.unshift(0),this._createEncoderBuffer(new e(k))},u.prototype._encodeBool=function(b){return this._createEncoderBuffer(b?255:0)},u.prototype._use=function(b,x){return typeof b=="function"&&(b=b(x)),b._getEncoder("der").tree},u.prototype._skipDefault=function(b,x,S){var I=this._baseState,A;if(I.default===null)return!1;var k=b.join();if(I.defaultBuffer===void 0&&(I.defaultBuffer=this._encodeValue(I.default,x,S).join()),k.length!==I.defaultBuffer.length)return!1;for(A=0;A<k.length;A++)if(k[A]!==I.defaultBuffer[A])return!1;return!0};function v(_,b,x,S){var I;if(_==="seqof"?_="seq":_==="setof"&&(_="set"),s.tagByName.hasOwnProperty(_))I=s.tagByName[_];else if(typeof _=="number"&&(_|0)===_)I=_;else return S.error("Unknown tag: "+_);return I>=31?S.error("Multi-octet tag encoding unsupported"):(b||(I|=32),I|=s.tagClassByName[x||"universal"]<<6,I)}return Rg}var kg,X4;function PG(){if(X4)return kg;X4=1;var t=kt,e=eA();function r(n){e.call(this,n),this.enc="pem"}return t(r,e),kg=r,r.prototype.encode=function(s,i){for(var u=e.prototype.encode.call(this,s),c=u.toString("base64"),v=["-----BEGIN "+i.label+"-----"],_=0;_<c.length;_+=64)v.push(c.slice(_,_+64));return v.push("-----END "+i.label+"-----"),v.join(`
`)},kg}var eM;function CG(){return eM||(eM=1,function(t){var e=t;e.der=eA(),e.pem=PG()}(Ag)),Ag}var tM;function Ec(){return tM||(tM=1,function(t){var e=t;e.bignum=EG,e.define=SG().define,e.base=th(),e.constants=JT(),e.decoders=kG(),e.encoders=CG()}(wg)),wg}var Ii=Ec(),rM=Ii.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),NG=Ii.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),T_=Ii.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),DG=Ii.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(T_),this.key("subjectPublicKey").bitstr())}),OG=Ii.define("RelativeDistinguishedName",function(){this.setof(NG)}),BG=Ii.define("RDNSequence",function(){this.seqof(OG)}),nM=Ii.define("Name",function(){this.choice({rdnSequence:this.use(BG)})}),LG=Ii.define("Validity",function(){this.seq().obj(this.key("notBefore").use(rM),this.key("notAfter").use(rM))}),VG=Ii.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),jG=Ii.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(T_),this.key("issuer").use(nM),this.key("validity").use(LG),this.key("subject").use(nM),this.key("subjectPublicKeyInfo").use(DG),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(VG).optional())}),FG=Ii.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(jG),this.key("signatureAlgorithm").use(T_),this.key("signatureValue").bitstr())}),UG=FG,Ti=Ec();Si.certificate=UG;var zG=Ti.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Si.RSAPrivateKey=zG;var $G=Ti.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Si.RSAPublicKey=$G;var tA=Ti.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),qG=Ti.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(tA),this.key("subjectPublicKey").bitstr())});Si.PublicKey=qG;var KG=Ti.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(tA),this.key("subjectPrivateKey").octstr())});Si.PrivateKey=KG;var HG=Ti.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});Si.EncryptedPrivateKey=HG;var WG=Ti.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Si.DSAPrivateKey=WG;Si.DSAparam=Ti.define("DSAparam",function(){this.int()});var GG=Ti.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ZG=Ti.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(GG),this.key("publicKey").optional().explicit(1).bitstr())});Si.ECPrivateKey=ZG;Si.signature=Ti.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const QG={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var YG=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,JG=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,XG=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,eZ=Sm,tZ=Un,xd=Rt.Buffer,rZ=function(t,e){var r=t.toString(),n=r.match(YG),s;if(n){var u="aes"+n[1],c=xd.from(n[2],"hex"),v=xd.from(n[3].replace(/[\r\n]/g,""),"base64"),_=eZ(e,c.slice(0,8),parseInt(n[1],10)).key,b=[],x=tZ.createDecipheriv(u,_,c);b.push(x.update(v)),b.push(x.final()),s=xd.concat(b)}else{var i=r.match(XG);s=xd.from(i[2].replace(/[\r\n]/g,""),"base64")}var S=r.match(JG)[1];return{tag:S,data:s}},wn=Si,nZ=QG,iZ=rZ,sZ=Un,aZ=xm,Hy=Rt.Buffer;function oZ(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=nZ[t.algorithm.decrypt.cipher.algo.join(".")],i=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,c=parseInt(s.split("-")[1],10)/8,v=aZ.pbkdf2Sync(e,r,n,c,"sha1"),_=sZ.createDecipheriv(s,v,i),b=[];return b.push(_.update(u)),b.push(_.final()),Hy.concat(b)}function rA(t){var e;typeof t=="object"&&!Hy.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=Hy.from(t));var r=iZ(t,e),n=r.tag,s=r.data,i,u;switch(n){case"CERTIFICATE":u=wn.certificate.decode(s,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=wn.PublicKey.decode(s,"der")),i=u.algorithm.algorithm.join("."),i){case"1.2.840.113549.1.1.1":return wn.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=wn.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":s=wn.EncryptedPrivateKey.decode(s,"der"),s=oZ(s,e);case"PRIVATE KEY":switch(u=wn.PrivateKey.decode(s,"der"),i=u.algorithm.algorithm.join("."),i){case"1.2.840.113549.1.1.1":return wn.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:wn.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=wn.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return wn.RSAPublicKey.decode(s,"der");case"RSA PRIVATE KEY":return wn.RSAPrivateKey.decode(s,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:wn.DSAPrivateKey.decode(s,"der")};case"EC PRIVATE KEY":return s=wn.ECPrivateKey.decode(s,"der"),{curve:s.parameters.value,privateKey:s.privateKey};default:throw new Error("unknown key type "+n)}}rA.signature=wn.signature;var Fm=rA;const nA={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var iM;function lZ(){if(iM)return gf.exports;iM=1;var t=Rt.Buffer,e=II,r=w_,n=S_().ec,s=y_,i=Fm,u=nA,c=1;function v(C,R,V,U,Q){var ee=i(R);if(ee.curve){if(U!=="ecdsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");return _(C,ee)}else if(ee.type==="dsa"){if(U!=="dsa")throw new Error("wrong private key type");return b(C,ee,V)}if(U!=="rsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");if(R.padding!==void 0&&R.padding!==c)throw new Error("illegal or unsupported padding mode");C=t.concat([Q,C]);for(var j=ee.modulus.byteLength(),B=[0,1];C.length+B.length+1<j;)B.push(255);B.push(0);for(var D=-1;++D<C.length;)B.push(C[D]);var $=r(B,ee);return $}function _(C,R){var V=u[R.curve.join(".")];if(!V)throw new Error("unknown curve "+R.curve.join("."));var U=new n(V),Q=U.keyFromPrivate(R.privateKey),ee=Q.sign(C);return t.from(ee.toDER())}function b(C,R,V){for(var U=R.params.priv_key,Q=R.params.p,ee=R.params.q,j=R.params.g,B=new s(0),D,$=I(C,ee).mod(ee),g=!1,a=S(U,ee,C,V);g===!1;)D=k(ee,a,V),B=F(j,D,Q,ee),g=D.invm(ee).imul($.add(U.mul(B))).mod(ee),g.cmpn(0)===0&&(g=!1,B=new s(0));return x(B,g)}function x(C,R){C=C.toArray(),R=R.toArray(),C[0]&128&&(C=[0].concat(C)),R[0]&128&&(R=[0].concat(R));var V=C.length+R.length+4,U=[48,V,2,C.length];return U=U.concat(C,[2,R.length],R),t.from(U)}function S(C,R,V,U){if(C=t.from(C.toArray()),C.length<R.byteLength()){var Q=t.alloc(R.byteLength()-C.length);C=t.concat([Q,C])}var ee=V.length,j=A(V,R),B=t.alloc(ee);B.fill(1);var D=t.alloc(ee);return D=e(U,D).update(B).update(t.from([0])).update(C).update(j).digest(),B=e(U,D).update(B).digest(),D=e(U,D).update(B).update(t.from([1])).update(C).update(j).digest(),B=e(U,D).update(B).digest(),{k:D,v:B}}function I(C,R){var V=new s(C),U=(C.length<<3)-R.bitLength();return U>0&&V.ishrn(U),V}function A(C,R){C=I(C,R),C=C.mod(R);var V=t.from(C.toArray());if(V.length<R.byteLength()){var U=t.alloc(R.byteLength()-V.length);V=t.concat([U,V])}return V}function k(C,R,V){var U,Q;do{for(U=t.alloc(0);U.length*8<C.bitLength();)R.v=e(V,R.k).update(R.v).digest(),U=t.concat([U,R.v]);Q=I(U,C),R.k=e(V,R.k).update(R.v).update(t.from([0])).digest(),R.v=e(V,R.k).update(R.v).digest()}while(Q.cmp(C)!==-1);return Q}function F(C,R,V,U){return C.toRed(s.mont(V)).redPow(R).fromRed().mod(U)}return gf.exports=v,gf.exports.getKey=S,gf.exports.makeKey=k,gf.exports}var Pg,sM;function uZ(){if(sM)return Pg;sM=1;var t=Rt.Buffer,e=y_,r=S_().ec,n=Fm,s=nA;function i(_,b,x,S,I){var A=n(x);if(A.type==="ec"){if(S!=="ecdsa"&&S!=="ecdsa/rsa")throw new Error("wrong public key type");return u(_,b,A)}else if(A.type==="dsa"){if(S!=="dsa")throw new Error("wrong public key type");return c(_,b,A)}if(S!=="rsa"&&S!=="ecdsa/rsa")throw new Error("wrong public key type");b=t.concat([I,b]);for(var k=A.modulus.byteLength(),F=[1],C=0;b.length+F.length+2<k;)F.push(255),C+=1;F.push(0);for(var R=-1;++R<b.length;)F.push(b[R]);F=t.from(F);var V=e.mont(A.modulus);_=new e(_).toRed(V),_=_.redPow(new e(A.publicExponent)),_=t.from(_.fromRed().toArray());var U=C<8?1:0;for(k=Math.min(_.length,F.length),_.length!==F.length&&(U=1),R=-1;++R<k;)U|=_[R]^F[R];return U===0}function u(_,b,x){var S=s[x.data.algorithm.curve.join(".")];if(!S)throw new Error("unknown curve "+x.data.algorithm.curve.join("."));var I=new r(S),A=x.data.subjectPrivateKey.data;return I.verify(b,_,A)}function c(_,b,x){var S=x.data.p,I=x.data.q,A=x.data.g,k=x.data.pub_key,F=n.signature.decode(_,"der"),C=F.s,R=F.r;v(C,I),v(R,I);var V=e.mont(S),U=C.invm(I),Q=A.toRed(V).redPow(new e(b).mul(U).mod(I)).fromRed().mul(k.toRed(V).redPow(R.mul(U).mod(I)).fromRed()).mod(S).mod(I);return Q.cmp(R)===0}function v(_,b){if(_.cmpn(0)<=0)throw new Error("invalid sig");if(_.cmp(b)>=0)throw new Error("invalid sig")}return Pg=i,Pg}var Cg,aM;function fZ(){if(aM)return Cg;aM=1;var t=Rt.Buffer,e=vc,r=wH,n=kt,s=lZ(),i=uZ(),u=TI;Object.keys(u).forEach(function(x){u[x].id=t.from(u[x].id,"hex"),u[x.toLowerCase()]=u[x]});function c(x){r.Writable.call(this);var S=u[x];if(!S)throw new Error("Unknown message digest");this._hashType=S.hash,this._hash=e(S.hash),this._tag=S.id,this._signType=S.sign}n(c,r.Writable),c.prototype._write=function(S,I,A){this._hash.update(S),A()},c.prototype.update=function(S,I){return this._hash.update(typeof S=="string"?t.from(S,I):S),this},c.prototype.sign=function(S,I){this.end();var A=this._hash.digest(),k=s(A,S,this._hashType,this._signType,this._tag);return I?k.toString(I):k};function v(x){r.Writable.call(this);var S=u[x];if(!S)throw new Error("Unknown message digest");this._hash=e(S.hash),this._tag=S.id,this._signType=S.sign}n(v,r.Writable),v.prototype._write=function(S,I,A){this._hash.update(S),A()},v.prototype.update=function(S,I){return this._hash.update(typeof S=="string"?t.from(S,I):S),this},v.prototype.verify=function(S,I,A){var k=typeof I=="string"?t.from(I,A):I;this.end();var F=this._hash.digest();return i(k,F,S,this._signType,this._tag)};function _(x){return new c(x)}function b(x){return new v(x)}return Cg={Sign:_,Verify:b,createSign:_,createVerify:b},Cg}var A_={exports:{}};A_.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(A_);var hZ=A_.exports,Ng,oM;function cZ(){if(oM)return Ng;oM=1;var t=S_(),e=hZ;Ng=function(u){return new n(u)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1;function n(i){this.curveType=r[i],this.curveType||(this.curveType={name:i}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}n.prototype.generateKeys=function(i,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(i,u)},n.prototype.computeSecret=function(i,u,c){u=u||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,u));var v=this.curve.keyFromPublic(i).getPublic(),_=v.mul(this.keys.getPrivate()).getX();return s(_,c,this.curveType.byteLength)},n.prototype.getPublicKey=function(i,u){var c=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(c[c.length-1]%2?c[0]=7:c[0]=6),s(c,i)},n.prototype.getPrivateKey=function(i){return s(this.keys.getPrivate(),i)},n.prototype.setPublicKey=function(i,u){return u=u||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,u)),this.keys._importPublic(i),this},n.prototype.setPrivateKey=function(i,u){u=u||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,u));var c=new e(i);return c=c.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(c),this};function s(i,u,c){Array.isArray(i)||(i=i.toArray());var v=new Buffer(i);if(c&&v.length<c){var _=new Buffer(c-v.length);_.fill(0),v=Buffer.concat([_,v])}return u?v.toString(u):v}return Ng}var iA={},dZ=vc,Wy=Rt.Buffer,sA=function(t,e){for(var r=Wy.alloc(0),n=0,s;r.length<e;)s=pZ(n++),r=Wy.concat([r,dZ("sha1").update(t).update(s).digest()]);return r.slice(0,e)};function pZ(t){var e=Wy.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var aA=function(e,r){for(var n=e.length,s=-1;++s<n;)e[s]^=r[s];return e},R_={exports:{}};R_.exports;(function(t){(function(e,r){function n(g,a){if(!g)throw new Error(a||"Assertion failed")}function s(g,a){g.super_=a;var l=function(){};l.prototype=a.prototype,g.prototype=new l,g.prototype.constructor=g}function i(g,a,l){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(g||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wr.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,f){if(typeof a=="number")return this._initNumber(a,l,f);if(typeof a=="object")return this._initArray(a,l,f);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&(h++,this.negative=1),h<a.length&&(l===16?this._parseHex(a,h,f):(this._parseBase(a,l,h),f==="le"&&this._initArray(this.toArray(),l,f)))},i.prototype._initNumber=function(a,l,f){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),l,f)},i.prototype._initArray=function(a,l,f){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,y,w=0;if(f==="be")for(h=a.length-1,m=0;h>=0;h-=3)y=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);else if(f==="le")for(h=0,m=0;h<a.length;h+=3)y=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[m]|=y<<w&67108863,this.words[m+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,m++);return this.strip()};function c(g,a){var l=g.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function v(g,a,l){var f=c(g,l);return l-1>=a&&(f|=c(g,l-1)<<4),f}i.prototype._parseHex=function(a,l,f){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,y=0,w;if(f==="be")for(h=a.length-1;h>=l;h-=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8;else{var d=a.length-l;for(h=d%2===0?l+1:l;h<a.length;h+=2)w=v(a,l,h)<<m,this.words[y]|=w&67108863,m>=18?(m-=18,y+=1,this.words[y]|=w>>>26):m+=8}this.strip()};function _(g,a,l,f){for(var h=0,m=Math.min(g.length,l),y=a;y<m;y++){var w=g.charCodeAt(y)-48;h*=f,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(a,l,f){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=l)h++;h--,m=m/l|0;for(var y=a.length-f,w=y%h,d=Math.min(y,y-w)+f,o=0,p=f;p<d;p+=h)o=_(a,p,p+h,l),this.imuln(m),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var E=1;for(o=_(a,p,a.length,l),p=0;p<w;p++)E*=l;this.imuln(E),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var f;if(a===16||a==="hex"){f="";for(var h=0,m=0,y=0;y<this.length;y++){var w=this.words[y],d=((w<<h|m)&16777215).toString(16);m=w>>>24-h&16777215,h+=2,h>=26&&(h-=26,y--),m!==0||y!==this.length-1?f=b[6-d.length]+d+f:f=d+f}for(m!==0&&(f=m.toString(16)+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(a===(a|0)&&a>=2&&a<=36){var o=x[a],p=S[a];f="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modn(p).toString(a);E=E.idivn(p),E.isZero()?f=T+f:f=b[o-T.length]+T+f}for(this.isZero()&&(f="0"+f);f.length%l!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,f){var h=this.byteLength(),m=f||Math.max(1,h);n(h<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var y=l==="le",w=new a(m),d,o,p=this.clone();if(y){for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[o]=d;for(;o<m;o++)w[o]=0}else{for(o=0;o<m-h;o++)w[o]=0;for(o=0;!p.isZero();o++)d=p.andln(255),p.iushrn(8),w[m-o-1]=d}return w},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,f=0;return l&8191||(f+=13,l>>>=13),l&127||(f+=7,l>>>=7),l&15||(f+=4,l>>>=4),l&3||(f+=2,l>>>=2),l&1||f++,f},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(g){for(var a=new Array(g.bitLength()),l=0;l<a.length;l++){var f=l/26|0,h=l%26;a[l]=(g.words[f]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(a+=f,f!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&a.words[f];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,f;this.length>a.length?(l=this,f=a):(l=a,f=this);for(var h=0;h<f.length;h++)this.words[h]=l.words[h]^f.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,f=a%26;this._expand(l),f>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var f=a/26|0,h=a%26;return this._expand(f+1),l?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var m=0,y=0;y<h.length;y++)l=(f.words[y]|0)+(h.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;for(;m!==0&&y<f.length;y++)l=(f.words[y]|0)+m,this.words[y]=l&67108863,m=l>>>26;if(this.length=f.length,m!==0)this.words[this.length]=m,this.length++;else if(f!==this)for(;y<f.length;y++)this.words[y]=f.words[y];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var f=this.cmp(a);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;f>0?(h=this,m=a):(h=a,m=this);for(var y=0,w=0;w<m.length;w++)l=(h.words[w]|0)-(m.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;for(;y!==0&&w<h.length;w++)l=(h.words[w]|0)+y,y=l>>26,this.words[w]=l&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function A(g,a,l){l.negative=a.negative^g.negative;var f=g.length+a.length|0;l.length=f,f=f-1|0;var h=g.words[0]|0,m=a.words[0]|0,y=h*m,w=y&67108863,d=y/67108864|0;l.words[0]=w;for(var o=1;o<f;o++){for(var p=d>>>26,E=d&67108863,T=Math.min(o,a.length-1),z=Math.max(0,o-g.length+1);z<=T;z++){var K=o-z|0;h=g.words[K]|0,m=a.words[z]|0,y=h*m+E,p+=y/67108864|0,E=y&67108863}l.words[o]=E|0,d=p|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var k=function(a,l,f){var h=a.words,m=l.words,y=f.words,w=0,d,o,p,E=h[0]|0,T=E&8191,z=E>>>13,K=h[1]|0,Y=K&8191,L=K>>>13,H=h[2]|0,Z=H&8191,X=H>>>13,Ge=h[3]|0,ne=Ge&8191,se=Ge>>>13,Ze=h[4]|0,fe=Ze&8191,me=Ze>>>13,at=h[5]|0,ge=at&8191,be=at>>>13,et=h[6]|0,pe=et&8191,Ae=et>>>13,ht=h[7]|0,ce=ht&8191,_e=ht>>>13,Je=h[8]|0,he=Je&8191,Te=Je>>>13,lt=h[9]|0,Ee=lt&8191,ke=lt>>>13,gt=m[0]|0,ye=gt&8191,Ce=gt>>>13,wt=m[1]|0,Se=wt&8191,Be=wt>>>13,_t=m[2]|0,xe=_t&8191,Ne=_t>>>13,pt=m[3]|0,Me=pt&8191,De=pt>>>13,dt=m[4]|0,Ie=dt&8191,Re=dt>>>13,yt=m[5]|0,we=yt&8191,Oe=yt>>>13,ot=m[6]|0,q=ot&8191,G=ot>>>13,ue=m[7]|0,J=ue&8191,ie=ue>>>13,Fe=m[8]|0,ae=Fe&8191,oe=Fe>>>13,je=m[9]|0,re=je&8191,le=je>>>13;f.negative=a.negative^l.negative,f.length=19,d=Math.imul(T,ye),o=Math.imul(T,Ce),o=o+Math.imul(z,ye)|0,p=Math.imul(z,Ce);var $e=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,d=Math.imul(Y,ye),o=Math.imul(Y,Ce),o=o+Math.imul(L,ye)|0,p=Math.imul(L,Ce),d=d+Math.imul(T,Se)|0,o=o+Math.imul(T,Be)|0,o=o+Math.imul(z,Se)|0,p=p+Math.imul(z,Be)|0;var qe=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(qe>>>26)|0,qe&=67108863,d=Math.imul(Z,ye),o=Math.imul(Z,Ce),o=o+Math.imul(X,ye)|0,p=Math.imul(X,Ce),d=d+Math.imul(Y,Se)|0,o=o+Math.imul(Y,Be)|0,o=o+Math.imul(L,Se)|0,p=p+Math.imul(L,Be)|0,d=d+Math.imul(T,xe)|0,o=o+Math.imul(T,Ne)|0,o=o+Math.imul(z,xe)|0,p=p+Math.imul(z,Ne)|0;var mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(ne,ye),o=Math.imul(ne,Ce),o=o+Math.imul(se,ye)|0,p=Math.imul(se,Ce),d=d+Math.imul(Z,Se)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(X,Se)|0,p=p+Math.imul(X,Be)|0,d=d+Math.imul(Y,xe)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(L,xe)|0,p=p+Math.imul(L,Ne)|0,d=d+Math.imul(T,Me)|0,o=o+Math.imul(T,De)|0,o=o+Math.imul(z,Me)|0,p=p+Math.imul(z,De)|0;var st=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(st>>>26)|0,st&=67108863,d=Math.imul(fe,ye),o=Math.imul(fe,Ce),o=o+Math.imul(me,ye)|0,p=Math.imul(me,Ce),d=d+Math.imul(ne,Se)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Se)|0,p=p+Math.imul(se,Be)|0,d=d+Math.imul(Z,xe)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(X,xe)|0,p=p+Math.imul(X,Ne)|0,d=d+Math.imul(Y,Me)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(L,Me)|0,p=p+Math.imul(L,De)|0,d=d+Math.imul(T,Ie)|0,o=o+Math.imul(T,Re)|0,o=o+Math.imul(z,Ie)|0,p=p+Math.imul(z,Re)|0;var tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(tt>>>26)|0,tt&=67108863,d=Math.imul(ge,ye),o=Math.imul(ge,Ce),o=o+Math.imul(be,ye)|0,p=Math.imul(be,Ce),d=d+Math.imul(fe,Se)|0,o=o+Math.imul(fe,Be)|0,o=o+Math.imul(me,Se)|0,p=p+Math.imul(me,Be)|0,d=d+Math.imul(ne,xe)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,xe)|0,p=p+Math.imul(se,Ne)|0,d=d+Math.imul(Z,Me)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(X,Me)|0,p=p+Math.imul(X,De)|0,d=d+Math.imul(Y,Ie)|0,o=o+Math.imul(Y,Re)|0,o=o+Math.imul(L,Ie)|0,p=p+Math.imul(L,Re)|0,d=d+Math.imul(T,we)|0,o=o+Math.imul(T,Oe)|0,o=o+Math.imul(z,we)|0,p=p+Math.imul(z,Oe)|0;var ut=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ut>>>26)|0,ut&=67108863,d=Math.imul(pe,ye),o=Math.imul(pe,Ce),o=o+Math.imul(Ae,ye)|0,p=Math.imul(Ae,Ce),d=d+Math.imul(ge,Se)|0,o=o+Math.imul(ge,Be)|0,o=o+Math.imul(be,Se)|0,p=p+Math.imul(be,Be)|0,d=d+Math.imul(fe,xe)|0,o=o+Math.imul(fe,Ne)|0,o=o+Math.imul(me,xe)|0,p=p+Math.imul(me,Ne)|0,d=d+Math.imul(ne,Me)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,Me)|0,p=p+Math.imul(se,De)|0,d=d+Math.imul(Z,Ie)|0,o=o+Math.imul(Z,Re)|0,o=o+Math.imul(X,Ie)|0,p=p+Math.imul(X,Re)|0,d=d+Math.imul(Y,we)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(L,we)|0,p=p+Math.imul(L,Oe)|0,d=d+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,o=o+Math.imul(z,q)|0,p=p+Math.imul(z,G)|0;var Pt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,d=Math.imul(ce,ye),o=Math.imul(ce,Ce),o=o+Math.imul(_e,ye)|0,p=Math.imul(_e,Ce),d=d+Math.imul(pe,Se)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(Ae,Se)|0,p=p+Math.imul(Ae,Be)|0,d=d+Math.imul(ge,xe)|0,o=o+Math.imul(ge,Ne)|0,o=o+Math.imul(be,xe)|0,p=p+Math.imul(be,Ne)|0,d=d+Math.imul(fe,Me)|0,o=o+Math.imul(fe,De)|0,o=o+Math.imul(me,Me)|0,p=p+Math.imul(me,De)|0,d=d+Math.imul(ne,Ie)|0,o=o+Math.imul(ne,Re)|0,o=o+Math.imul(se,Ie)|0,p=p+Math.imul(se,Re)|0,d=d+Math.imul(Z,we)|0,o=o+Math.imul(Z,Oe)|0,o=o+Math.imul(X,we)|0,p=p+Math.imul(X,Oe)|0,d=d+Math.imul(Y,q)|0,o=o+Math.imul(Y,G)|0,o=o+Math.imul(L,q)|0,p=p+Math.imul(L,G)|0,d=d+Math.imul(T,J)|0,o=o+Math.imul(T,ie)|0,o=o+Math.imul(z,J)|0,p=p+Math.imul(z,ie)|0;var Bt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,d=Math.imul(he,ye),o=Math.imul(he,Ce),o=o+Math.imul(Te,ye)|0,p=Math.imul(Te,Ce),d=d+Math.imul(ce,Se)|0,o=o+Math.imul(ce,Be)|0,o=o+Math.imul(_e,Se)|0,p=p+Math.imul(_e,Be)|0,d=d+Math.imul(pe,xe)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(Ae,xe)|0,p=p+Math.imul(Ae,Ne)|0,d=d+Math.imul(ge,Me)|0,o=o+Math.imul(ge,De)|0,o=o+Math.imul(be,Me)|0,p=p+Math.imul(be,De)|0,d=d+Math.imul(fe,Ie)|0,o=o+Math.imul(fe,Re)|0,o=o+Math.imul(me,Ie)|0,p=p+Math.imul(me,Re)|0,d=d+Math.imul(ne,we)|0,o=o+Math.imul(ne,Oe)|0,o=o+Math.imul(se,we)|0,p=p+Math.imul(se,Oe)|0,d=d+Math.imul(Z,q)|0,o=o+Math.imul(Z,G)|0,o=o+Math.imul(X,q)|0,p=p+Math.imul(X,G)|0,d=d+Math.imul(Y,J)|0,o=o+Math.imul(Y,ie)|0,o=o+Math.imul(L,J)|0,p=p+Math.imul(L,ie)|0,d=d+Math.imul(T,ae)|0,o=o+Math.imul(T,oe)|0,o=o+Math.imul(z,ae)|0,p=p+Math.imul(z,oe)|0;var Tt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(Ee,ye),o=Math.imul(Ee,Ce),o=o+Math.imul(ke,ye)|0,p=Math.imul(ke,Ce),d=d+Math.imul(he,Se)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(Te,Se)|0,p=p+Math.imul(Te,Be)|0,d=d+Math.imul(ce,xe)|0,o=o+Math.imul(ce,Ne)|0,o=o+Math.imul(_e,xe)|0,p=p+Math.imul(_e,Ne)|0,d=d+Math.imul(pe,Me)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(Ae,Me)|0,p=p+Math.imul(Ae,De)|0,d=d+Math.imul(ge,Ie)|0,o=o+Math.imul(ge,Re)|0,o=o+Math.imul(be,Ie)|0,p=p+Math.imul(be,Re)|0,d=d+Math.imul(fe,we)|0,o=o+Math.imul(fe,Oe)|0,o=o+Math.imul(me,we)|0,p=p+Math.imul(me,Oe)|0,d=d+Math.imul(ne,q)|0,o=o+Math.imul(ne,G)|0,o=o+Math.imul(se,q)|0,p=p+Math.imul(se,G)|0,d=d+Math.imul(Z,J)|0,o=o+Math.imul(Z,ie)|0,o=o+Math.imul(X,J)|0,p=p+Math.imul(X,ie)|0,d=d+Math.imul(Y,ae)|0,o=o+Math.imul(Y,oe)|0,o=o+Math.imul(L,ae)|0,p=p+Math.imul(L,oe)|0,d=d+Math.imul(T,re)|0,o=o+Math.imul(T,le)|0,o=o+Math.imul(z,re)|0,p=p+Math.imul(z,le)|0;var xt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ee,Se),o=Math.imul(Ee,Be),o=o+Math.imul(ke,Se)|0,p=Math.imul(ke,Be),d=d+Math.imul(he,xe)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(Te,xe)|0,p=p+Math.imul(Te,Ne)|0,d=d+Math.imul(ce,Me)|0,o=o+Math.imul(ce,De)|0,o=o+Math.imul(_e,Me)|0,p=p+Math.imul(_e,De)|0,d=d+Math.imul(pe,Ie)|0,o=o+Math.imul(pe,Re)|0,o=o+Math.imul(Ae,Ie)|0,p=p+Math.imul(Ae,Re)|0,d=d+Math.imul(ge,we)|0,o=o+Math.imul(ge,Oe)|0,o=o+Math.imul(be,we)|0,p=p+Math.imul(be,Oe)|0,d=d+Math.imul(fe,q)|0,o=o+Math.imul(fe,G)|0,o=o+Math.imul(me,q)|0,p=p+Math.imul(me,G)|0,d=d+Math.imul(ne,J)|0,o=o+Math.imul(ne,ie)|0,o=o+Math.imul(se,J)|0,p=p+Math.imul(se,ie)|0,d=d+Math.imul(Z,ae)|0,o=o+Math.imul(Z,oe)|0,o=o+Math.imul(X,ae)|0,p=p+Math.imul(X,oe)|0,d=d+Math.imul(Y,re)|0,o=o+Math.imul(Y,le)|0,o=o+Math.imul(L,re)|0,p=p+Math.imul(L,le)|0;var zt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,d=Math.imul(Ee,xe),o=Math.imul(Ee,Ne),o=o+Math.imul(ke,xe)|0,p=Math.imul(ke,Ne),d=d+Math.imul(he,Me)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(Te,Me)|0,p=p+Math.imul(Te,De)|0,d=d+Math.imul(ce,Ie)|0,o=o+Math.imul(ce,Re)|0,o=o+Math.imul(_e,Ie)|0,p=p+Math.imul(_e,Re)|0,d=d+Math.imul(pe,we)|0,o=o+Math.imul(pe,Oe)|0,o=o+Math.imul(Ae,we)|0,p=p+Math.imul(Ae,Oe)|0,d=d+Math.imul(ge,q)|0,o=o+Math.imul(ge,G)|0,o=o+Math.imul(be,q)|0,p=p+Math.imul(be,G)|0,d=d+Math.imul(fe,J)|0,o=o+Math.imul(fe,ie)|0,o=o+Math.imul(me,J)|0,p=p+Math.imul(me,ie)|0,d=d+Math.imul(ne,ae)|0,o=o+Math.imul(ne,oe)|0,o=o+Math.imul(se,ae)|0,p=p+Math.imul(se,oe)|0,d=d+Math.imul(Z,re)|0,o=o+Math.imul(Z,le)|0,o=o+Math.imul(X,re)|0,p=p+Math.imul(X,le)|0;var Ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(Ee,Me),o=Math.imul(Ee,De),o=o+Math.imul(ke,Me)|0,p=Math.imul(ke,De),d=d+Math.imul(he,Ie)|0,o=o+Math.imul(he,Re)|0,o=o+Math.imul(Te,Ie)|0,p=p+Math.imul(Te,Re)|0,d=d+Math.imul(ce,we)|0,o=o+Math.imul(ce,Oe)|0,o=o+Math.imul(_e,we)|0,p=p+Math.imul(_e,Oe)|0,d=d+Math.imul(pe,q)|0,o=o+Math.imul(pe,G)|0,o=o+Math.imul(Ae,q)|0,p=p+Math.imul(Ae,G)|0,d=d+Math.imul(ge,J)|0,o=o+Math.imul(ge,ie)|0,o=o+Math.imul(be,J)|0,p=p+Math.imul(be,ie)|0,d=d+Math.imul(fe,ae)|0,o=o+Math.imul(fe,oe)|0,o=o+Math.imul(me,ae)|0,p=p+Math.imul(me,oe)|0,d=d+Math.imul(ne,re)|0,o=o+Math.imul(ne,le)|0,o=o+Math.imul(se,re)|0,p=p+Math.imul(se,le)|0;var Mt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,d=Math.imul(Ee,Ie),o=Math.imul(Ee,Re),o=o+Math.imul(ke,Ie)|0,p=Math.imul(ke,Re),d=d+Math.imul(he,we)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(Te,we)|0,p=p+Math.imul(Te,Oe)|0,d=d+Math.imul(ce,q)|0,o=o+Math.imul(ce,G)|0,o=o+Math.imul(_e,q)|0,p=p+Math.imul(_e,G)|0,d=d+Math.imul(pe,J)|0,o=o+Math.imul(pe,ie)|0,o=o+Math.imul(Ae,J)|0,p=p+Math.imul(Ae,ie)|0,d=d+Math.imul(ge,ae)|0,o=o+Math.imul(ge,oe)|0,o=o+Math.imul(be,ae)|0,p=p+Math.imul(be,oe)|0,d=d+Math.imul(fe,re)|0,o=o+Math.imul(fe,le)|0,o=o+Math.imul(me,re)|0,p=p+Math.imul(me,le)|0;var St=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(Ee,we),o=Math.imul(Ee,Oe),o=o+Math.imul(ke,we)|0,p=Math.imul(ke,Oe),d=d+Math.imul(he,q)|0,o=o+Math.imul(he,G)|0,o=o+Math.imul(Te,q)|0,p=p+Math.imul(Te,G)|0,d=d+Math.imul(ce,J)|0,o=o+Math.imul(ce,ie)|0,o=o+Math.imul(_e,J)|0,p=p+Math.imul(_e,ie)|0,d=d+Math.imul(pe,ae)|0,o=o+Math.imul(pe,oe)|0,o=o+Math.imul(Ae,ae)|0,p=p+Math.imul(Ae,oe)|0,d=d+Math.imul(ge,re)|0,o=o+Math.imul(ge,le)|0,o=o+Math.imul(be,re)|0,p=p+Math.imul(be,le)|0;var Lt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,d=Math.imul(Ee,q),o=Math.imul(Ee,G),o=o+Math.imul(ke,q)|0,p=Math.imul(ke,G),d=d+Math.imul(he,J)|0,o=o+Math.imul(he,ie)|0,o=o+Math.imul(Te,J)|0,p=p+Math.imul(Te,ie)|0,d=d+Math.imul(ce,ae)|0,o=o+Math.imul(ce,oe)|0,o=o+Math.imul(_e,ae)|0,p=p+Math.imul(_e,oe)|0,d=d+Math.imul(pe,re)|0,o=o+Math.imul(pe,le)|0,o=o+Math.imul(Ae,re)|0,p=p+Math.imul(Ae,le)|0;var nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(nt>>>26)|0,nt&=67108863,d=Math.imul(Ee,J),o=Math.imul(Ee,ie),o=o+Math.imul(ke,J)|0,p=Math.imul(ke,ie),d=d+Math.imul(he,ae)|0,o=o+Math.imul(he,oe)|0,o=o+Math.imul(Te,ae)|0,p=p+Math.imul(Te,oe)|0,d=d+Math.imul(ce,re)|0,o=o+Math.imul(ce,le)|0,o=o+Math.imul(_e,re)|0,p=p+Math.imul(_e,le)|0;var ct=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(ct>>>26)|0,ct&=67108863,d=Math.imul(Ee,ae),o=Math.imul(Ee,oe),o=o+Math.imul(ke,ae)|0,p=Math.imul(ke,oe),d=d+Math.imul(he,re)|0,o=o+Math.imul(he,le)|0,o=o+Math.imul(Te,re)|0,p=p+Math.imul(Te,le)|0;var Nt=(w+d|0)+((o&8191)<<13)|0;w=(p+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ee,re),o=Math.imul(Ee,le),o=o+Math.imul(ke,re)|0,p=Math.imul(ke,le);var Vt=(w+d|0)+((o&8191)<<13)|0;return w=(p+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y[0]=$e,y[1]=qe,y[2]=mt,y[3]=st,y[4]=tt,y[5]=ut,y[6]=Pt,y[7]=Bt,y[8]=Tt,y[9]=xt,y[10]=zt,y[11]=Ct,y[12]=Mt,y[13]=St,y[14]=Lt,y[15]=nt,y[16]=ct,y[17]=Nt,y[18]=Vt,w!==0&&(y[19]=w,f.length++),f};Math.imul||(k=A);function F(g,a,l){l.negative=a.negative^g.negative,l.length=g.length+a.length;for(var f=0,h=0,m=0;m<l.length-1;m++){var y=h;h=0;for(var w=f&67108863,d=Math.min(m,a.length-1),o=Math.max(0,m-g.length+1);o<=d;o++){var p=m-o,E=g.words[p]|0,T=a.words[o]|0,z=E*T,K=z&67108863;y=y+(z/67108864|0)|0,K=K+w|0,w=K&67108863,y=y+(K>>>26)|0,h+=y>>>26,y&=67108863}l.words[m]=w,f=y,y=h}return f!==0?l.words[m]=f:l.length--,l.strip()}function C(g,a,l){var f=new R;return f.mulp(g,a,l)}i.prototype.mulTo=function(a,l){var f,h=this.length+a.length;return this.length===10&&a.length===10?f=k(this,a,l):h<63?f=A(this,a,l):h<1024?f=F(this,a,l):f=C(this,a,l),f};function R(g,a){this.x=g,this.y=a}R.prototype.makeRBT=function(a){for(var l=new Array(a),f=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,f,a);return l},R.prototype.revBin=function(a,l,f){if(a===0||a===f-1)return a;for(var h=0,m=0;m<l;m++)h|=(a&1)<<l-m-1,a>>=1;return h},R.prototype.permute=function(a,l,f,h,m,y){for(var w=0;w<y;w++)h[w]=l[a[w]],m[w]=f[a[w]]},R.prototype.transform=function(a,l,f,h,m,y){this.permute(y,a,l,f,h,m);for(var w=1;w<m;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),E=0;E<m;E+=d)for(var T=o,z=p,K=0;K<w;K++){var Y=f[E+K],L=h[E+K],H=f[E+K+w],Z=h[E+K+w],X=T*H-z*Z;Z=T*Z+z*H,H=X,f[E+K]=Y+H,h[E+K]=L+Z,f[E+K+w]=Y-H,h[E+K+w]=L-Z,K!==d&&(X=o*T-p*z,z=o*z+p*T,T=X)}},R.prototype.guessLen13b=function(a,l){var f=Math.max(l,a)|1,h=f&1,m=0;for(f=f/2|0;f;f=f>>>1)m++;return 1<<m+1+h},R.prototype.conjugate=function(a,l,f){if(!(f<=1))for(var h=0;h<f/2;h++){var m=a[h];a[h]=a[f-h-1],a[f-h-1]=m,m=l[h],l[h]=-l[f-h-1],l[f-h-1]=-m}},R.prototype.normalize13b=function(a,l){for(var f=0,h=0;h<l/2;h++){var m=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+f;a[h]=m&67108863,m<67108864?f=0:f=m/67108864|0}return a},R.prototype.convert13b=function(a,l,f,h){for(var m=0,y=0;y<l;y++)m=m+(a[y]|0),f[2*y]=m&8191,m=m>>>13,f[2*y+1]=m&8191,m=m>>>13;for(y=2*l;y<h;++y)f[y]=0;n(m===0),n((m&-8192)===0)},R.prototype.stub=function(a){for(var l=new Array(a),f=0;f<a;f++)l[f]=0;return l},R.prototype.mulp=function(a,l,f){var h=2*this.guessLen13b(a.length,l.length),m=this.makeRBT(h),y=this.stub(h),w=new Array(h),d=new Array(h),o=new Array(h),p=new Array(h),E=new Array(h),T=new Array(h),z=f.words;z.length=h,this.convert13b(a.words,a.length,w,h),this.convert13b(l.words,l.length,p,h),this.transform(w,y,d,o,h,m),this.transform(p,y,E,T,h,m);for(var K=0;K<h;K++){var Y=d[K]*E[K]-o[K]*T[K];o[K]=d[K]*T[K]+o[K]*E[K],d[K]=Y}return this.conjugate(d,o,h),this.transform(d,o,z,y,h,m),this.conjugate(z,y,h),this.normalize13b(z,h),f.negative=a.negative^l.negative,f.length=a.length+l.length,f.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*a,m=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=m>>>26,this.words[f]=m&67108863}return l!==0&&(this.words[f]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var f=this,h=0;h<l.length&&l[h]===0;h++,f=f.sqr());if(++h<l.length)for(var m=f.sqr();h<l.length;h++,m=m.sqr())l[h]!==0&&(f=f.mul(m));return f},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=67108863>>>26-l<<26-l,m;if(l!==0){var y=0;for(m=0;m<this.length;m++){var w=this.words[m]&h,d=(this.words[m]|0)-w<<l;this.words[m]=d|y,y=w>>>26-l}y&&(this.words[m]=y,this.length++)}if(f!==0){for(m=this.length-1;m>=0;m--)this.words[m+f]=this.words[m];for(m=0;m<f;m++)this.words[m]=0;this.length+=f}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,f){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var m=a%26,y=Math.min((a-m)/26,this.length),w=67108863^67108863>>>m<<m,d=f;if(h-=y,h=Math.max(0,h),d){for(var o=0;o<y;o++)d.words[o]=this.words[o];d.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var p=0;for(o=this.length-1;o>=0&&(p!==0||o>=h);o--){var E=this.words[o]|0;this.words[o]=p<<26-m|E>>>m,p=E&w}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,f){return n(this.negative===0),this.iushrn(a,l,f)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return!1;var m=this.words[f];return!!(m&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,f=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(l!==0&&f++,this.length=Math.min(f,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,f){var h=a.length+f,m;this._expand(h);var y,w=0;for(m=0;m<a.length;m++){y=(this.words[m+f]|0)+w;var d=(a.words[m]|0)*l;y-=d&67108863,w=(y>>26)-(d/67108864|0),this.words[m+f]=y&67108863}for(;m<this.length-f;m++)y=(this.words[m+f]|0)+w,w=y>>26,this.words[m+f]=y&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,m=0;m<this.length;m++)y=-(this.words[m]|0)+w,w=y>>26,this.words[m]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var f=this.length-a.length,h=this.clone(),m=a,y=m.words[m.length-1]|0,w=this._countBits(y);f=26-w,f!==0&&(m=m.ushln(f),h.iushln(f),y=m.words[m.length-1]|0);var d=h.length-m.length,o;if(l!=="mod"){o=new i(null),o.length=d+1,o.words=new Array(o.length);for(var p=0;p<o.length;p++)o.words[p]=0}var E=h.clone()._ishlnsubmul(m,1,d);E.negative===0&&(h=E,o&&(o.words[d]=1));for(var T=d-1;T>=0;T--){var z=(h.words[m.length+T]|0)*67108864+(h.words[m.length+T-1]|0);for(z=Math.min(z/y|0,67108863),h._ishlnsubmul(m,z,T);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,T),h.isZero()||(h.negative^=1);o&&(o.words[T]=z)}return o&&o.strip(),h.strip(),l!=="div"&&f!==0&&h.iushrn(f),{div:o||null,mod:h}},i.prototype.divmod=function(a,l,f){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,l),l!=="mod"&&(h=y.div.neg()),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.iadd(a)),{div:h,mod:m}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),l),l!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),l),l!=="div"&&(m=y.mod.neg(),f&&m.negative!==0&&m.isub(a)),{div:y.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var f=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),m=a.andln(1),y=f.cmp(h);return y<0||m===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,f=0,h=this.length-1;h>=0;h--)f=(l*f+(this.words[h]|0))%a;return f},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+l*67108864;this.words[f]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=new i(0),w=new i(1),d=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++d;for(var o=f.clone(),p=l.clone();!l.isZero();){for(var E=0,T=1;!(l.words[0]&T)&&E<26;++E,T<<=1);if(E>0)for(l.iushrn(E);E-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(o),m.isub(p)),h.iushrn(1),m.iushrn(1);for(var z=0,K=1;!(f.words[0]&K)&&z<26;++z,K<<=1);if(z>0)for(f.iushrn(z);z-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(o),w.isub(p)),y.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(y),m.isub(w)):(f.isub(l),y.isub(h),w.isub(m))}return{a:y,b:w,gcd:f.iushln(d)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,f=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),m=new i(0),y=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,d=1;!(l.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var o=0,p=1;!(f.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(f.iushrn(o);o-- >0;)m.isOdd()&&m.iadd(y),m.iushrn(1);l.cmp(f)>=0?(l.isub(f),h.isub(m)):(f.isub(l),m.isub(h))}var E;return l.cmpn(1)===0?E=h:E=m,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),f=a.clone();l.negative=0,f.negative=0;for(var h=0;l.isEven()&&f.isEven();h++)l.iushrn(1),f.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var m=l.cmp(f);if(m<0){var y=l;l=f,f=y}else if(m===0||f.cmpn(1)===0)break;l.isub(f)}while(!0);return f.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,f=(a-l)/26,h=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var m=h,y=f;m!==0&&y<this.length;y++){var w=this.words[y]|0;w+=m,m=w>>>26,w&=67108863,this.words[y]=w}return m!==0&&(this.words[y]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var f;if(this.length>1)f=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;f=h===a?0:h<a?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,m=a.words[f]|0;if(h!==m){h<m?l=-1:h>m&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new D(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function U(g,a){this.name=g,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},U.prototype.ireduce=function(a){var l=a,f;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),f=l.bitLength();while(f>this.n);var h=f<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},U.prototype.split=function(a,l){a.iushrn(this.n,0,l)},U.prototype.imulK=function(a){return a.imul(this.k)};function Q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,U),Q.prototype.split=function(a,l){for(var f=4194303,h=Math.min(a.length,9),m=0;m<h;m++)l.words[m]=a.words[m];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(l.words[l.length++]=y&f,m=10;m<a.length;m++){var w=a.words[m]|0;a.words[m-10]=(w&f)<<4|y>>>22,y=w}y>>>=22,a.words[m-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,f=0;f<a.length;f++){var h=a.words[f]|0;l+=h*977,a.words[f]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,U);function j(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,U);function B(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(B,U),B.prototype.imulK=function(a){for(var l=0,f=0;f<a.length;f++){var h=(a.words[f]|0)*19+l,m=h&67108863;h>>>=26,a.words[f]=m,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(V[a])return V[a];var l;if(a==="k256")l=new Q;else if(a==="p224")l=new ee;else if(a==="p192")l=new j;else if(a==="p25519")l=new B;else throw new Error("Unknown prime "+a);return V[a]=l,l};function D(g){if(typeof g=="string"){var a=i._prime(g);this.m=a.p,this.prime=a}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}D.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,l){this._verify2(a,l);var f=a.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},D.prototype.iadd=function(a,l){this._verify2(a,l);var f=a.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},D.prototype.sub=function(a,l){this._verify2(a,l);var f=a.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},D.prototype.isub=function(a,l){this._verify2(a,l);var f=a.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},D.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},D.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},D.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(a,f)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);n(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var p=this.pow(o,h),E=this.pow(a,h.addn(1).iushrn(1)),T=this.pow(a,h),z=m;T.cmp(y)!==0;){for(var K=T,Y=0;K.cmp(y)!==0;Y++)K=K.redSqr();n(Y<z);var L=this.pow(p,new i(1).iushln(z-Y-1));E=E.redMul(L),p=L.redSqr(),T=T.redMul(p),z=Y}return E},D.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var f=4,h=new Array(1<<f);h[0]=new i(1).toRed(this),h[1]=a;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],a);var y=h[0],w=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),m=l.length-1;m>=0;m--){for(var p=l.words[m],E=o-1;E>=0;E--){var T=p>>E&1;if(y!==h[0]&&(y=this.sqr(y)),T===0&&w===0){d=0;continue}w<<=1,w|=T,d++,!(d!==f&&(m!==0||E!==0))&&(y=this.mul(y,h[w]),d=0,w=0)}o=26}return y},D.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},D.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new $(a)};function $(g){D.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,D),$.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},$.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},$.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var f=a.imul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var f=a.mul(l),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=f.isub(h).iushrn(this.shift),y=m;return m.cmp(this.m)>=0?y=m.isub(this.m):m.cmpn(0)<0&&(y=m.iadd(this.m)),y._forceRed(this)},$.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,jt)})(R_);var k_=R_.exports,lM=k_,mZ=Rt.Buffer;function vZ(t,e){return mZ.from(t.toRed(lM.mont(e.modulus)).redPow(new lM(e.publicExponent)).fromRed().toArray())}var oA=vZ,gZ=Fm,Gy=Iu,yZ=vc,uM=sA,fM=aA,P_=k_,wZ=oA,_Z=w_,vi=Rt.Buffer,bZ=function(e,r,n){var s;e.padding?s=e.padding:n?s=1:s=4;var i=gZ(e),u;if(s===4)u=xZ(i,r);else if(s===1)u=MZ(i,r,n);else if(s===3){if(u=new P_(r),u.cmp(i.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return n?_Z(u,i):wZ(u,i)};function xZ(t,e){var r=t.modulus.byteLength(),n=e.length,s=yZ("sha1").update(vi.alloc(0)).digest(),i=s.length,u=2*i;if(n>r-u-2)throw new Error("message too long");var c=vi.alloc(r-n-u-2),v=r-i-1,_=Gy(i),b=fM(vi.concat([s,c,vi.alloc(1,1),e],v),uM(_,v)),x=fM(_,uM(b,i));return new P_(vi.concat([vi.alloc(1),x,b],r))}function MZ(t,e,r){var n=e.length,s=t.modulus.byteLength();if(n>s-11)throw new Error("message too long");var i;return r?i=vi.alloc(s-n-3,255):i=EZ(s-n-3),new P_(vi.concat([vi.from([0,r?1:2]),i,vi.alloc(1),e],s))}function EZ(t){for(var e=vi.allocUnsafe(t),r=0,n=Gy(t*2),s=0,i;r<t;)s===n.length&&(n=Gy(t*2),s=0),i=n[s++],i&&(e[r++]=i);return e}var SZ=Fm,hM=sA,cM=aA,dM=k_,IZ=w_,TZ=vc,AZ=oA,zh=Rt.Buffer,RZ=function(e,r,n){var s;e.padding?s=e.padding:n?s=1:s=4;var i=SZ(e),u=i.modulus.byteLength();if(r.length>u||new dM(r).cmp(i.modulus)>=0)throw new Error("decryption error");var c;n?c=AZ(new dM(r),i):c=IZ(r,i);var v=zh.alloc(u-c.length);if(c=zh.concat([v,c],u),s===4)return kZ(i,c);if(s===1)return PZ(i,c,n);if(s===3)return c;throw new Error("unknown padding")};function kZ(t,e){var r=t.modulus.byteLength(),n=TZ("sha1").update(zh.alloc(0)).digest(),s=n.length;if(e[0]!==0)throw new Error("decryption error");var i=e.slice(1,s+1),u=e.slice(s+1),c=cM(i,hM(u,s)),v=cM(u,hM(c,r-s-1));if(CZ(n,v.slice(0,s)))throw new Error("decryption error");for(var _=s;v[_]===0;)_++;if(v[_++]!==1)throw new Error("decryption error");return v.slice(_)}function PZ(t,e,r){for(var n=e.slice(0,2),s=2,i=0;e[s++]!==0;)if(s>=e.length){i++;break}var u=e.slice(2,s-1);if((n.toString("hex")!=="0002"&&!r||n.toString("hex")!=="0001"&&r)&&i++,u.length<8&&i++,i)throw new Error("decryption error");return e.slice(s)}function CZ(t,e){t=zh.from(t),e=zh.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var s=-1;++s<n;)r+=t[s]^e[s];return r}(function(t){t.publicEncrypt=bZ,t.privateDecrypt=RZ,t.privateEncrypt=function(r,n){return t.publicEncrypt(r,n,!0)},t.publicDecrypt=function(r,n){return t.privateDecrypt(r,n,!0)}})(iA);var Cf={};function pM(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var lA=Rt,mM=Iu,uA=lA.Buffer,fA=lA.kMaxLength,Zy=jt.crypto||jt.msCrypto,hA=Math.pow(2,32)-1;function cA(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>hA||t<0)throw new TypeError("offset must be a uint32");if(t>fA||t>e)throw new RangeError("offset out of range")}function dA(t,e,r){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>hA||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>fA)throw new RangeError("buffer too small")}Zy&&Zy.getRandomValues||!process.browser?(Cf.randomFill=NZ,Cf.randomFillSync=DZ):(Cf.randomFill=pM,Cf.randomFillSync=pM);function NZ(t,e,r,n){if(!uA.isBuffer(t)&&!(t instanceof jt.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")n=e,e=0,r=t.length;else if(typeof r=="function")n=r,r=t.length-e;else if(typeof n!="function")throw new TypeError('"cb" argument must be a function');return cA(e,t.length),dA(r,e,t.length),pA(t,e,r,n)}function pA(t,e,r,n){if(process.browser){var s=t.buffer,i=new Uint8Array(s,e,r);if(Zy.getRandomValues(i),n){process.nextTick(function(){n(null,t)});return}return t}if(n){mM(r,function(c,v){if(c)return n(c);v.copy(t,e),n(null,t)});return}var u=mM(r);return u.copy(t,e),t}function DZ(t,e,r){if(typeof e>"u"&&(e=0),!uA.isBuffer(t)&&!(t instanceof jt.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return cA(e,t.length),r===void 0&&(r=t.length-e),dA(r,e,t.length),pA(t,e,r)}var vM;function mA(){if(vM)return Et;vM=1,Et.randomBytes=Et.rng=Et.pseudoRandomBytes=Et.prng=Iu,Et.createHash=Et.Hash=vc,Et.createHmac=Et.Hmac=II;var t=pq,e=Object.keys(t),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);Et.getHashes=function(){return r};var n=xm;Et.pbkdf2=n.pbkdf2,Et.pbkdf2Sync=n.pbkdf2Sync;var s=xi;Et.Cipher=s.Cipher,Et.createCipher=s.createCipher,Et.Cipheriv=s.Cipheriv,Et.createCipheriv=s.createCipheriv,Et.Decipher=s.Decipher,Et.createDecipher=s.createDecipher,Et.Decipheriv=s.Decipheriv,Et.createDecipheriv=s.createDecipheriv,Et.getCiphers=s.getCiphers,Et.listCiphers=s.listCiphers;var i=WK();Et.DiffieHellmanGroup=i.DiffieHellmanGroup,Et.createDiffieHellmanGroup=i.createDiffieHellmanGroup,Et.getDiffieHellman=i.getDiffieHellman,Et.createDiffieHellman=i.createDiffieHellman,Et.DiffieHellman=i.DiffieHellman;var u=fZ();Et.createSign=u.createSign,Et.Sign=u.Sign,Et.createVerify=u.createVerify,Et.Verify=u.Verify,Et.createECDH=cZ();var c=iA;Et.publicEncrypt=c.publicEncrypt,Et.privateEncrypt=c.privateEncrypt,Et.publicDecrypt=c.publicDecrypt,Et.privateDecrypt=c.privateDecrypt;var v=Cf;return Et.randomFill=v.randomFill,Et.randomFillSync=v.randomFillSync,Et.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},Et.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},Et}mA();const OZ="https://api.nowpayments.io/v1",BZ="BX2AYBW-S444RSB-N4KJM6D-C2DCFT7";async function LZ(t){try{const e=await fetch(`${OZ}/payment/${t}`,{headers:{"x-api-key":BZ}});if(!e.ok)throw new Error("Failed to verify payment");const r=await e.json();return r.payment_status==="finished"||r.payment_status==="confirmed"}catch(e){throw console.error("Payment verification failed:",e),e}}const VZ=()=>{const{user:t}=Qi(),e=kp(),[,r]=te.useState(!1);return te.useEffect(()=>{(async()=>{if(!t)return;const i=new URLSearchParams(window.location.search).get("payment_id");if(!i){e("/app");return}try{if(await Jf(`Verifying payment ${i}`,t.id),!await LZ(i))throw await Jf(`Payment verification failed for ${i}`,t.id),new Error("Payment verification failed");r(!0),await la(t,{isPremium:!0,premiumActivatedAt:new Date().toISOString(),paymentId:i}),await Jf(`Payment ${i} verified and activated`,t.id),setTimeout(()=>{e("/app")},3e3)}catch(u){console.error("Failed to verify payment:",u),e("/payment/failed")}})()},[t,e]),N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:N.jsxs("div",{className:"text-center space-y-4 p-8",children:[N.jsx("div",{className:"inline-flex p-4 bg-green-500/10 rounded-full mb-4",children:N.jsx(_S,{className:"w-12 h-12 text-green-500"})}),N.jsx("h1",{className:"text-2xl font-bold text-white",children:"Payment Successful!"}),N.jsx("p",{className:"text-gray-400",children:"Thank you for upgrading to premium. You'll be redirected shortly..."})]})})},Dg=({className:t="",children:e})=>N.jsx("div",{className:`rounded-lg border border-gray-700 bg-gray-800/50 shadow-sm ${t}`,children:e}),Og=({className:t="",children:e})=>N.jsx("div",{className:`border-b border-gray-700 p-4 ${t}`,children:e}),Bg=({className:t="",children:e})=>N.jsx("h3",{className:`text-lg font-medium ${t}`,children:e}),Lg=({className:t="",children:e})=>N.jsx("div",{className:`p-4 ${t}`,children:e}),el=({className:t="",children:e})=>N.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${t}`,children:e}),Md=({className:t="",children:e,...r})=>N.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors 
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 
        disabled:pointer-events-none disabled:opacity-50 px-4 py-2 ${t}`,...r,children:e}),jZ=({className:t="",variant:e="default",children:r})=>{const n={default:"bg-gray-800 text-gray-200",destructive:"bg-red-900/20 text-red-400 border-red-700/50"};return N.jsx("div",{className:`relative w-full rounded-lg border border-gray-700 p-4 ${n[e]} ${t}`,children:r})},FZ=({className:t="",children:e})=>N.jsx("div",{className:`mt-1 text-sm ${t}`,children:e}),UZ=()=>{const[t,e]=te.useState([]),[r,n]=te.useState([]),[s,i]=te.useState(null),[u,c]=te.useState(!0),[v,_]=te.useState(null),[b,x]=te.useState(new Date),[S,I]=te.useState(!0),A=async()=>{try{_(null);const U={payment_id:`test_${Date.now()}`,payment_status:"waiting",price_amount:2.99,price_currency:"usd",pay_amount:1e-4,pay_currency:"btc",order_id:"test_user_id",order_description:"TradeA+ Premium Access",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Simulating webhook with test data:",U);const Q=U.payment_id;await Jf(`TEST: Payment ${Q} status: ${U.payment_status}, Amount: ${U.price_amount} ${U.price_currency}`,U.order_id,void 0,U),await Jf(`TEST: Full payment data: ${JSON.stringify(U)}`,U.order_id,void 0,U),e(ee=>[`TEST: Created test IPN data in Firestore. Payment ID: ${Q}`,...ee]),await F()}catch(U){const Q=U instanceof Error?U.message:"Unknown error";_(`Failed to create test data: ${Q}`),console.error("Test webhook error:",U)}},k=async()=>{try{_(null),e(U=>["Note: Clearing test data requires server-side implementation",...U]),await F()}catch(U){const Q=U instanceof Error?U.message:"Unknown error";_(`Failed to clear test data: ${Q}`)}},F=async()=>{try{console.log("Starting payment logs refresh"),c(!0),_(null),console.log("Fetching text logs");const U=await _U();console.log(`Fetched ${U.length} text logs`),e(U),console.log("Fetching payment data");const Q=await bU();console.log(`Fetched ${Q.length} payment data objects`),console.log("Sample payment data:",Q.length>0?Q[0]:"No payments"),n(Q),x(new Date),c(!1),console.log("Refresh complete at",new Date().toISOString())}catch(U){const Q=U instanceof Error?U.message:"Unknown error";console.error("Error loading payment logs:",U),_(`Failed to load payment data: ${Q}`),c(!1)}};te.useEffect(()=>{F();let U=null;return S&&(U=setInterval(F,1e4)),()=>{U&&clearInterval(U)}},[S]);const C=()=>{F()},R=U=>{switch(U){case"waiting":return"bg-yellow-500";case"confirming":return"bg-blue-500";case"confirmed":return"bg-green-500";case"sending":return"bg-purple-500";case"partially_paid":return"bg-orange-500";case"finished":return"bg-green-700";case"failed":return"bg-red-500";case"refunded":return"bg-gray-500";case"expired":return"bg-red-700";default:return"bg-gray-400"}},V=U=>{if(!U)return"N/A";try{return(U.toDate?U.toDate():new Date(U)).toLocaleString()}catch{return String(U)}};return N.jsxs("div",{className:"p-8",children:[N.jsx("h1",{className:"text-2xl font-bold mb-6",children:"NOWPayments IPN Handler"}),v&&N.jsx(jZ,{variant:"destructive",className:"mb-4",children:N.jsx(FZ,{children:v})}),N.jsxs("div",{className:"mb-6 gap-2",children:[N.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[N.jsx(Md,{onClick:C,disabled:u,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800",children:u?"Refreshing...":"Refresh Payment Data"}),N.jsx(Md,{onClick:()=>I(!S),className:`px-4 py-2 ${S?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"}`,children:S?"Auto-Refresh: ON":"Auto-Refresh: OFF"}),N.jsx(Md,{onClick:A,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700",children:"Test Webhook"}),N.jsx(Md,{onClick:k,className:"px-4 py-2 bg-red-600 hover:bg-red-700",children:"Clear Test Data"})]}),N.jsxs("div",{className:"text-sm text-gray-400",children:["Last refreshed: ",b.toLocaleTimeString(),S&&" (Auto-refreshing every 10 seconds)"]}),N.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'To see webhook data with proper payment_id field, use the "Test Webhook" button to send test data.'})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[N.jsxs("div",{className:"md:col-span-1",children:[N.jsxs(Dg,{className:"bg-gray-800/50",children:[N.jsx(Og,{children:N.jsxs(Bg,{children:["Payment Notifications ",u&&"(Loading...)"]})}),N.jsx(Lg,{children:r.length>0?N.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map((U,Q)=>N.jsxs("div",{className:`p-3 rounded cursor-pointer transition-colors ${s===U?"bg-blue-900/70":"bg-gray-700/50 hover:bg-gray-700"}`,onClick:()=>i(U),children:[N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("div",{className:"font-medium truncate",children:U.payment_id?`ID: ${typeof U.payment_id=="string"?U.payment_id.substring(0,8):U.payment_id}...`:"Unknown Payment"}),U.payment_status&&N.jsx(el,{className:R(U.payment_status),children:U.payment_status})]}),N.jsx("div",{className:"text-xs text-gray-400",children:V(U.timestamp||U.createdAt)}),U.price_amount&&U.price_currency&&N.jsxs("div",{className:"text-sm mt-1",children:["Amount: ",U.price_amount," ",U.price_currency]})]},Q))}):N.jsx("div",{className:"text-gray-500 text-center py-4",children:u?"Loading payment data...":"No payment notifications yet"})})]}),N.jsxs("div",{className:"mt-4 text-sm",children:[N.jsx("div",{className:"font-medium mb-2",children:"Payment statuses:"}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsxs("div",{className:"flex items-center",children:[N.jsx(el,{className:"bg-yellow-500 mr-2",children:"waiting"}),N.jsx("span",{className:"text-xs",children:"Payment created"})]}),N.jsxs("div",{className:"flex items-center",children:[N.jsx(el,{className:"bg-blue-500 mr-2",children:"confirming"}),N.jsx("span",{className:"text-xs",children:"Pending confirmation"})]}),N.jsxs("div",{className:"flex items-center",children:[N.jsx(el,{className:"bg-green-500 mr-2",children:"confirmed"}),N.jsx("span",{className:"text-xs",children:"Payment confirmed"})]}),N.jsxs("div",{className:"flex items-center",children:[N.jsx(el,{className:"bg-green-700 mr-2",children:"finished"}),N.jsx("span",{className:"text-xs",children:"Payment complete"})]})]})]})]}),N.jsxs("div",{className:"md:col-span-2",children:[N.jsxs(Dg,{className:"bg-gray-800/50",children:[N.jsx(Og,{children:N.jsx(Bg,{children:"Payment Details"})}),N.jsx(Lg,{children:s?N.jsxs("div",{children:[N.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"Payment ID"}),N.jsx("div",{children:s.payment_id||"N/A"})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"Status"}),N.jsx("div",{children:N.jsx(el,{className:R(s.payment_status||"unknown"),children:s.payment_status||"Unknown"})})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"Amount"}),N.jsxs("div",{children:[s.price_amount," ",s.price_currency]})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"User ID"}),N.jsx("div",{children:s.userId||s.order_id||"N/A"})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"Created At"}),N.jsx("div",{children:V(s.timestamp||s.createdAt)})]}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm text-gray-400",children:"Pay Address"}),N.jsx("div",{className:"truncate",children:s.pay_address||"N/A"})]})]}),N.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:"Raw Payment Data"}),N.jsx("pre",{className:"bg-gray-900/50 p-3 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(s.paymentData||s,null,2)})]}):N.jsx("div",{className:"text-gray-500 text-center py-4",children:"Select a payment to view details"})})]}),N.jsxs(Dg,{className:"bg-gray-800/50 mt-6",children:[N.jsx(Og,{children:N.jsx(Bg,{children:"Payment Logs"})}),N.jsx(Lg,{children:N.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[t.map((U,Q)=>N.jsx("div",{className:"text-sm text-gray-300",children:U},Q)),t.length===0&&!u&&N.jsx("div",{className:"text-sm text-gray-500",children:"No payment logs yet"})]})})]})]})]})]})},zZ=()=>N.jsx("div",{className:"pt-24 px-8 pb-8",children:N.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[N.jsx("div",{className:"flex items-center justify-between",children:N.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"})}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[N.jsx(zf,{to:"/admin/ipn",className:"glass-panel p-6 hover:border-blue-500/30 transition-all duration-300 hover:-translate-y-1",children:N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:N.jsx(WO,{className:"w-6 h-6 text-blue-400"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-lg font-semibold text-white",children:"Payment Logs"}),N.jsx("p",{className:"text-sm text-gray-400",children:"View IPN webhook logs"})]})]})}),N.jsx(zf,{to:"/admin/api-keys",className:"glass-panel p-6 hover:border-blue-500/30 transition-all duration-300 hover:-translate-y-1",children:N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:N.jsx(bS,{className:"w-6 h-6 text-purple-400"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-lg font-semibold text-white",children:"API Keys"}),N.jsx("p",{className:"text-sm text-gray-400",children:"Manage API keys"})]})]})}),N.jsx(zf,{to:"/admin/support-messages",className:"glass-panel p-6 hover:border-blue-500/30 transition-all duration-300 hover:-translate-y-1",children:N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:N.jsx(QO,{className:"w-6 h-6 text-green-400"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-lg font-semibold text-white",children:"Support"}),N.jsx("p",{className:"text-sm text-gray-400",children:"View help messages"})]})]})})]})]})}),$Z=()=>{const[t,e]=te.useState([]);te.useEffect(()=>{r()},[]);const r=async()=>{const n=await rp.getInstance().getAllKeyUsage();e(n)};return N.jsxs("div",{className:"glass-panel p-6",children:[N.jsxs("div",{className:"flex items-center justify-between mb-6",children:[N.jsx("h3",{className:"text-lg font-semibold text-white",children:"API Key Usage"}),N.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700/50 rounded-lg transition-colors",title:"Refresh usage stats",children:N.jsx(J1,{className:"w-4 h-4 text-gray-400"})})]}),N.jsx("div",{className:"space-y-4",children:t.map(({key:n,used:s,remaining:i,name:u})=>N.jsx("div",{className:"glass-panel p-4 hover:border-blue-500/30 transition-all",children:N.jsxs("div",{className:"flex items-start gap-3",children:[N.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:N.jsx(bS,{className:"w-4 h-4 text-blue-400"})}),N.jsxs("div",{className:"flex-1",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h4",{className:"font-medium text-white",children:u}),N.jsxs("span",{className:"text-sm text-gray-400",children:[i," left today"]})]}),N.jsx("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:N.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${s/(s+i)*100}%`,backgroundColor:i<100?"#ef4444":"#3b82f6"}})}),N.jsxs("div",{className:"flex justify-between mt-1",children:[N.jsxs("span",{className:"text-xs text-gray-500",children:[s," used"]}),N.jsx("span",{className:"text-xs text-gray-500",children:"1500 daily limit"})]})]})]})},n))})]})},qZ=()=>{const[t,e]=te.useState(0),[r,n]=te.useState(!1),s=()=>{n(!0),e(i=>i+1),setTimeout(()=>n(!1),1e3)};return N.jsx("div",{className:"pt-24 px-8 pb-8",children:N.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h1",{className:"text-2xl font-bold text-white",children:"API Keys Management"}),N.jsx("button",{onClick:s,disabled:r,className:`p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 \r
              rounded transition-colors disabled:opacity-50`,title:"Refresh data",children:N.jsx(MS,{className:`w-5 h-5 ${r?"animate-spin":""}`})})]}),N.jsx($Z,{},t)]})})},KZ=()=>{const[t,e]=te.useState([]),[r,n]=te.useState(!0),[s,i]=te.useState({}),[u,c]=te.useState(!1),v=async(x=!1)=>{x?c(!0):n(!0);try{const S=await IU();e(S)}catch(S){console.error("Failed to load messages:",S)}finally{n(!1),c(!1)}};te.useEffect(()=>{v()},[]);const _=()=>{v(!0)},b=async x=>{i(S=>({...S,[x]:!0}));try{await TU(x),e(S=>S.filter(I=>I.id!==x))}catch(S){console.error("Failed to delete message:",S)}finally{i(S=>({...S,[x]:!1}))}};return r?N.jsx("div",{className:"pt-24 px-8 pb-8",children:N.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-center",children:N.jsx(xh,{className:"w-8 h-8 animate-spin text-blue-500"})})}):N.jsx("div",{className:"pt-24 px-8 pb-8",children:N.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx(h3,{className:"w-8 h-8 text-blue-500"}),N.jsx("h1",{className:"text-2xl font-bold text-white",children:"Support Messages"})]}),N.jsx("button",{onClick:_,disabled:u,className:`p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 \r
              rounded transition-colors disabled:opacity-50`,title:"Refresh messages",children:N.jsx(MS,{className:`w-5 h-5 ${u?"animate-spin":""}`})})]}),N.jsx("div",{className:"space-y-4",children:t.length===0?N.jsxs("div",{className:"text-center py-12 glass-panel",children:[N.jsx(h3,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),N.jsx("p",{className:"text-gray-400",children:"No support messages yet"})]}):t.map(x=>N.jsx("div",{className:"glass-panel p-6 hover:border-blue-500/30 transition-all",children:N.jsxs("div",{className:"flex items-start justify-between gap-4",children:[N.jsxs("div",{className:"space-y-1 flex-1",children:[N.jsx("h3",{className:"font-medium text-blue-400",children:x.userEmail}),N.jsx("p",{className:"text-sm text-gray-400",children:new Date(x.createdAt).toLocaleString()}),N.jsx("p",{className:"text-gray-300 whitespace-pre-wrap mt-3",children:x.description})]}),N.jsx("button",{onClick:()=>b(x.id),disabled:s[x.id],className:`p-2 text-red-400 hover:text-red-300 hover:bg-red-400/10 \r
                      rounded transition-colors disabled:opacity-50`,children:s[x.id]?N.jsx(xh,{className:"w-5 h-5 animate-spin"}):N.jsx(tB,{className:"w-5 h-5"})})]})},x.id))})]})})},HZ=[{path:"/",element:N.jsx(LU,{}),errorElement:N.jsx(yz,{}),children:[{index:!0,element:N.jsx(VU,{})},{path:"sign-in",element:N.jsx(mz,{})},{path:"sign-up",element:N.jsx(wz,{})},{element:N.jsx(vz,{}),children:[{path:"app",element:N.jsx(pz,{})},{path:"profile",element:N.jsx(_z,{})},{path:"payment/success",element:N.jsx(VZ,{})},{path:"admin",element:N.jsx(pd,{children:N.jsx(zZ,{})})},{path:"admin/ipn",element:N.jsx(pd,{children:N.jsx(UZ,{})})},{path:"admin/api-keys",element:N.jsx(pd,{children:N.jsx(qZ,{})})},{path:"admin/support-messages",element:N.jsx(pd,{children:N.jsx(KZ,{})})}]}]}],WZ=RC(HZ);Vg.createRoot(document.getElementById("root")).render(N.jsx(Ve.StrictMode,{children:N.jsx(jO,{children:N.jsx(RO,{children:N.jsx(kO,{children:N.jsx(VC,{router:WZ})})})})}))});export default GZ();
